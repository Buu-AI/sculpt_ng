function $parcel$export(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}function $parcel$interopDefault(e){return e&&e.__esModule?e.default:e}var $0979ce27dbe8d4a1$var$yaguiSheet,$e5c77fdd1443ab71$var$singletonBuffer,$parcel$global=globalThis,$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire336b;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var r={id:e,exports:{}};return $parcel$modules[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire336b=parcelRequire);var parcelRegister=parcelRequire.register;if(parcelRegister("eFXNN",function(module,exports){$parcel$export(module.exports,"default",()=>$aaf3487eb3e6413c$export$2e2bcd8739ae039);var $3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$bSIL4=parcelRequire("bSIL4"),$im4cd=parcelRequire("im4cd"),$jLaD3=parcelRequire("jLaD3"),$l7y1s=parcelRequire("l7y1s"),_TMP_NEAR=[0,0,0],_TMP_NEAR_1=[0,0,0],_TMP_FAR=[0,0,0],_TMP_INV=$3iqbd.create(),_TMP_INTER=[0,0,0],_TMP_INTER_1=[0,0,0],_TMP_V1=[0,0,0],_TMP_V2=[0,0,0],_TMP_V3=[0,0,0];class Picking{static addAlpha(e,t,r,i){var a={};a._name=i,a._texture=e,a._ratioX=Math.max(1,t/r),a._ratioY=Math.max(1,r/t),a._ratioMax=Math.max(a._ratioX,a._ratioY),a._width=t,a._height=r;for(var s=1;Picking.ALPHAS[a._name];)a._name=i+s++;return Picking.ALPHAS[a._name]=a,Picking.ALPHAS_NAMES[a._name]=a._name,a}constructor(e,t){this._mesh=null,this._main=e,this._pickedFace=-1,this._pickedVertices=[],this._interPoint=[0,0,0],this._rLocal2=0,this._rWorld2=0,this._eyeDir=[0,0,0],this._xSym=!!t,this._pickedNormal=[0,0,0],this._alphaOrigin=[0,0,0],this._alphaSide=0,this._alphaLookAt=$3iqbd.create(),this._alpha=null}setIdAlpha(e){this._alpha=Picking.ALPHAS[e]}getAlpha(e,t,r){var i=this._alpha;if(!i||!i._texture)return 1;var a=this._alphaLookAt,s=this._alphaSide,n=i._ratioY*(a[0]*e+a[4]*t+a[8]*r+a[12])/(this._xSym?-s:s);if(Math.abs(n)>1)return 0;var o=i._ratioX*(a[1]*e+a[5]*t+a[9]*r+a[13])/s;if(Math.abs(o)>1)return 0;var l=i._width;return n=(.5-.5*n)*l,o=(.5-.5*o)*i._height,i._texture[(0|n)+l*(0|o)]/255}updateAlpha(e){var t=_TMP_V1,r=_TMP_V2,i=Math.sqrt(this._rLocal2);if(this._alphaSide=i*Math.SQRT1_2,$eIStk.sub(t,this._interPoint,this._alphaOrigin),0!==$eIStk.len(t)){$eIStk.normalize(t,t);var a=this._pickedNormal;$eIStk.scaleAndAdd(t,t,a,-$eIStk.dot(t,a)),$eIStk.normalize(t,t),e||$eIStk.copy(this._alphaOrigin,this._interPoint),$eIStk.scaleAndAdd(r,this._alphaOrigin,a,i),$3iqbd.lookAt(this._alphaLookAt,this._alphaOrigin,r,t)}}initAlpha(){this.computePickedNormal(),this.updateAlpha()}getMesh(){return this._mesh}setLocalRadius2(e){this._rLocal2=e}getLocalRadius2(){return this._rLocal2}getLocalRadius(){return Math.sqrt(this._rLocal2)}getWorldRadius2(){return this._rWorld2}getWorldRadius(){return Math.sqrt(this._rWorld2)}setIntersectionPoint(e){this._interPoint=e}getEyeDirection(){return this._eyeDir}getIntersectionPoint(){return this._interPoint}getPickedVertices(){return this._pickedVertices}getPickedFace(){return this._pickedFace}getPickedNormal(){return this._pickedNormal}intersectionMouseMeshes(e=this._main.getMeshes(),t=this._main._mouseX,r=this._main._mouseY){for(var i=this.unproject(t,r,0),a=this.unproject(t,r,.1),s=1/0,n=null,o=-1,l=0,u=e.length;l<u;++l){var h=e[l];if(h.isVisible()&&($3iqbd.invert(_TMP_INV,h.getMatrix()),$eIStk.transformMat4(_TMP_NEAR_1,i,_TMP_INV),$eIStk.transformMat4(_TMP_FAR,a,_TMP_INV),this.intersectionRayMesh(h,_TMP_NEAR_1,_TMP_FAR))){var c=this.getIntersectionPoint(),d=$eIStk.dist(_TMP_NEAR_1,c)*h.getScale();d<s&&(s=d,n=h,$eIStk.copy(_TMP_INTER_1,c),o=this.getPickedFace())}}return this._mesh=n,$eIStk.copy(this._interPoint,_TMP_INTER_1),this._pickedFace=o,-1!==o&&this.updateLocalAndWorldRadius2(),!!n}intersectionMouseMesh(e=this._main.getMesh(),t=this._main._mouseX,r=this._main._mouseY){var i=this.unproject(t,r,0),a=this.unproject(t,r,.1),s=$3iqbd.create();return $3iqbd.invert(s,e.getMatrix()),$eIStk.transformMat4(i,i,s),$eIStk.transformMat4(a,a,s),this.intersectionRayMesh(e,i,a)}intersectionRayMesh(e,t,r){if(this._mesh=null,this._pickedFace=-1,$eIStk.copy(_TMP_NEAR,t),$eIStk.copy(_TMP_FAR,r),this._xSym){var i=e.getSymmetryOrigin(),a=e.getSymmetryNormal();(0,$bSIL4.default).mirrorPoint(_TMP_NEAR,i,a),(0,$bSIL4.default).mirrorPoint(_TMP_FAR,i,a)}var s=e.getVertices(),n=e.getFaces(),o=this.getEyeDirection();$eIStk.sub(o,_TMP_FAR,_TMP_NEAR),$eIStk.normalize(o,o);for(var l=e.intersectRay(_TMP_NEAR,o),u=1/0,h=l.length,c=0;c<h;++c){var d=4*l[c],g=3*n[d],p=3*n[d+1],m=3*n[d+2];_TMP_V1[0]=s[g],_TMP_V1[1]=s[g+1],_TMP_V1[2]=s[g+2],_TMP_V2[0]=s[p],_TMP_V2[1]=s[p+1],_TMP_V2[2]=s[p+2],_TMP_V3[0]=s[m],_TMP_V3[1]=s[m+1],_TMP_V3[2]=s[m+2];var f=(0,$bSIL4.default).intersectionRayTriangle(_TMP_NEAR,o,_TMP_V1,_TMP_V2,_TMP_V3,_TMP_INTER);f<0&&(p=n[d+3])!==$jLaD3.default.TRI_INDEX&&(p*=3,_TMP_V2[0]=s[p],_TMP_V2[1]=s[p+1],_TMP_V2[2]=s[p+2],f=(0,$bSIL4.default).intersectionRayTriangle(_TMP_NEAR,o,_TMP_V1,_TMP_V3,_TMP_V2,_TMP_INTER)),f>=0&&f<u&&(u=f,$eIStk.copy(this._interPoint,_TMP_INTER),this._pickedFace=l[c])}return -1!==this._pickedFace?(this._mesh=e,this.updateLocalAndWorldRadius2(),!0):(this._rLocal2=0,!1)}pickVerticesInSphere(e){for(var t=this._mesh,r=t.getVertices(),i=t.getVerticesSculptFlags(),a=this.getIntersectionPoint(),s=t.intersectSphere(a,e,!0),n=t.getVerticesFromFaces(s),o=n.length,l=++$jLaD3.default.SCULPT_FLAG,u=new Uint32Array((0,$jLaD3.default).getMemory(4*o),0,o),h=0,c=a[0],d=a[1],g=a[2],p=0;p<o;++p){var m=n[p],f=3*m,_=c-r[f],v=d-r[f+1],T=g-r[f+2];_*_+v*v+T*T<e&&(i[m]=l,u[h++]=m)}return this._pickedVertices=new Uint32Array(u.subarray(0,h)),this._pickedVertices}_isInsideSphere(e,t,r){if(e===$jLaD3.default.TRI_INDEX)return!1;var i=3*e;return $eIStk.sqrDist(t,this._mesh.getVertices().subarray(i,i+3))<=r}pickVerticesInSphereTopological(e){var t=this._mesh,r=t.getNbVertices(),i=t.getVertices(),a=t.getFaces(),s=t.getVerticesRingVertStartCount(),n=t.getVerticesRingVert(),o=n instanceof Array?n:null,l=t.getVerticesSculptFlags(),u=t.getVerticesTagFlags(),h=++$jLaD3.default.SCULPT_FLAG,c=++$jLaD3.default.TAG_FLAG,d=this.getIntersectionPoint(),g=d[0],p=d[1],m=d[2],f=new Uint32Array((0,$jLaD3.default).getMemory(4*r),0,r),_=4*this.getPickedFace(),v=1;this._isInsideSphere(a[_],d,e)?f[0]=a[_]:this._isInsideSphere(a[_+1],d,e)?f[0]=a[_+1]:this._isInsideSphere(a[_+2],d,e)?f[0]=a[_+2]:this._isInsideSphere(a[_+3],d,e)?f[0]=a[_+3]:v=0,1===v&&(l[f[0]]=h,u[f[0]]=c);for(var T=0;T<v;++T){var M,y,b=f[T];o?(n=o[b],M=0,y=n.length):y=(M=s[2*b])+s[2*b+1];for(var A=M;A<y;++A){var S=n[A];if(u[S]!==c){u[S]=c;var x=3*S,R=g-i[x],E=p-i[x+1],C=m-i[x+2];R*R+E*E+C*C>e||(l[S]=h,f[v++]=S)}}}return this._pickedVertices=new Uint32Array(f.subarray(0,v)),this._pickedVertices}computeWorldRadius2(e){$eIStk.transformMat4(_TMP_INTER,this.getIntersectionPoint(),this._mesh.getMatrix());var t=this._main.getSculptManager().getCurrentTool().getScreenRadius();e||(t*=(0,$im4cd.default).getPressureRadius());var r=this.project(_TMP_INTER);return $eIStk.sqrDist(_TMP_INTER,this.unproject(r[0]+t,r[1],r[2]))}updateLocalAndWorldRadius2(){this._mesh&&(this._rWorld2=this.computeWorldRadius2(),this._rLocal2=this._rWorld2/this._mesh.getScale2())}unproject(e,t,r){return this._main.getCamera().unproject(e,t,r)}project(e){return this._main.getCamera().project(e)}computePickedNormal(){if(this._mesh&&!(this._pickedFace<0))return this.polyLerp(this._mesh.getNormals(),this._pickedNormal),$eIStk.normalize(this._pickedNormal,this._pickedNormal)}polyLerp(e,t){var r=this._mesh.getVertices(),i=this._mesh.getFaces(),a=4*this._pickedFace,s=3*i[a],n=3*i[a+1],o=3*i[a+2],l=i[a+3],u=l!==$jLaD3.default.TRI_INDEX;u&&(l*=3);var h=1/$eIStk.dist(this._interPoint,r.subarray(s,s+3)),c=1/$eIStk.dist(this._interPoint,r.subarray(n,n+3)),d=1/$eIStk.dist(this._interPoint,r.subarray(o,o+3)),g=u?1/$eIStk.dist(this._interPoint,r.subarray(l,l+3)):0,p=1/(h+c+d+g);return $eIStk.set(t,0,0,0),$eIStk.scaleAndAdd(t,t,e.subarray(s,s+3),h*p),$eIStk.scaleAndAdd(t,t,e.subarray(n,n+3),c*p),$eIStk.scaleAndAdd(t,t,e.subarray(o,o+3),d*p),u&&$eIStk.scaleAndAdd(t,t,e.subarray(l,l+3),g*p),t}}Picking.INIT_ALPHAS_NAMES=[(0,$l7y1s.default)("alphaSquare"),(0,$l7y1s.default)("alphaSkin")],Picking.INIT_ALPHAS_PATHS=["square.jpg","skin.jpg"];var readAlphas=function(){if(window.module&&window.module.exports){var fs=eval("require")("fs"),path=eval("require")("path"),directoryPath=path.join(window.__filename,"../resources/alpha");fs.readdir(directoryPath,function(e,t){if(!e)for(var r=0;r<t.length;++r){var i=t[r];"square.jpg"!=i&&"skin.jpg"!=i&&(Picking.INIT_ALPHAS_NAMES.push(i),Picking.INIT_ALPHAS_PATHS.push(i))}})}};readAlphas();var none=(0,$l7y1s.default)("alphaNone");Picking.ALPHAS_NAMES={},Picking.ALPHAS_NAMES[none]=none,Picking.ALPHAS={},Picking.ALPHAS[none]=null;var $aaf3487eb3e6413c$export$2e2bcd8739ae039=Picking}),parcelRegister("3iqbd",function(e,t){$parcel$export(e.exports,"create",()=>i),$parcel$export(e.exports,"clone",()=>a),$parcel$export(e.exports,"copy",()=>s),$parcel$export(e.exports,"fromValues",()=>n),$parcel$export(e.exports,"set",()=>o),$parcel$export(e.exports,"identity",()=>l),$parcel$export(e.exports,"transpose",()=>u),$parcel$export(e.exports,"invert",()=>h),$parcel$export(e.exports,"adjoint",()=>c),$parcel$export(e.exports,"determinant",()=>d),$parcel$export(e.exports,"multiply",()=>g),$parcel$export(e.exports,"translate",()=>p),$parcel$export(e.exports,"scale",()=>m),$parcel$export(e.exports,"rotate",()=>f),$parcel$export(e.exports,"rotateX",()=>_),$parcel$export(e.exports,"rotateY",()=>v),$parcel$export(e.exports,"rotateZ",()=>T),$parcel$export(e.exports,"fromTranslation",()=>M),$parcel$export(e.exports,"fromScaling",()=>y),$parcel$export(e.exports,"fromRotation",()=>b),$parcel$export(e.exports,"fromXRotation",()=>A),$parcel$export(e.exports,"fromYRotation",()=>S),$parcel$export(e.exports,"fromZRotation",()=>x),$parcel$export(e.exports,"fromRotationTranslation",()=>R),$parcel$export(e.exports,"fromQuat2",()=>E),$parcel$export(e.exports,"getTranslation",()=>C),$parcel$export(e.exports,"getScaling",()=>w),$parcel$export(e.exports,"getRotation",()=>F),$parcel$export(e.exports,"fromRotationTranslationScale",()=>I),$parcel$export(e.exports,"fromRotationTranslationScaleOrigin",()=>D),$parcel$export(e.exports,"fromQuat",()=>V),$parcel$export(e.exports,"frustum",()=>N),$parcel$export(e.exports,"perspective",()=>k),$parcel$export(e.exports,"perspectiveFromFieldOfView",()=>P),$parcel$export(e.exports,"ortho",()=>L),$parcel$export(e.exports,"lookAt",()=>U),$parcel$export(e.exports,"targetTo",()=>B),$parcel$export(e.exports,"str",()=>O),$parcel$export(e.exports,"frob",()=>G),$parcel$export(e.exports,"add",()=>z),$parcel$export(e.exports,"subtract",()=>X),$parcel$export(e.exports,"multiplyScalar",()=>W),$parcel$export(e.exports,"multiplyScalarAndAdd",()=>Y),$parcel$export(e.exports,"exactEquals",()=>H),$parcel$export(e.exports,"equals",()=>j),$parcel$export(e.exports,"mul",()=>q),$parcel$export(e.exports,"sub",()=>K);var r=parcelRequire("amnUE");function i(){var e=new r.ARRAY_TYPE(16);return r.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function a(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function n(e,t,i,a,s,n,o,l,u,h,c,d,g,p,m,f){var _=new r.ARRAY_TYPE(16);return _[0]=e,_[1]=t,_[2]=i,_[3]=a,_[4]=s,_[5]=n,_[6]=o,_[7]=l,_[8]=u,_[9]=h,_[10]=c,_[11]=d,_[12]=g,_[13]=p,_[14]=m,_[15]=f,_}function o(e,t,r,i,a,s,n,o,l,u,h,c,d,g,p,m,f){return e[0]=t,e[1]=r,e[2]=i,e[3]=a,e[4]=s,e[5]=n,e[6]=o,e[7]=l,e[8]=u,e[9]=h,e[10]=c,e[11]=d,e[12]=g,e[13]=p,e[14]=m,e[15]=f,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){if(e===t){var r=t[1],i=t[2],a=t[3],s=t[6],n=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=a,e[13]=n,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function h(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],u=t[7],h=t[8],c=t[9],d=t[10],g=t[11],p=t[12],m=t[13],f=t[14],_=t[15],v=r*o-i*n,T=r*l-a*n,M=r*u-s*n,y=i*l-a*o,b=i*u-s*o,A=a*u-s*l,S=h*m-c*p,x=h*f-d*p,R=h*_-g*p,E=c*f-d*m,C=c*_-g*m,w=d*_-g*f,F=v*w-T*C+M*E+y*R-b*x+A*S;return F?(F=1/F,e[0]=(o*w-l*C+u*E)*F,e[1]=(a*C-i*w-s*E)*F,e[2]=(m*A-f*b+_*y)*F,e[3]=(d*b-c*A-g*y)*F,e[4]=(l*R-n*w-u*x)*F,e[5]=(r*w-a*R+s*x)*F,e[6]=(f*M-p*A-_*T)*F,e[7]=(h*A-d*M+g*T)*F,e[8]=(n*C-o*R+u*S)*F,e[9]=(i*R-r*C-s*S)*F,e[10]=(p*b-m*M+_*v)*F,e[11]=(c*M-h*b-g*v)*F,e[12]=(o*x-n*E-l*S)*F,e[13]=(r*E-i*x+a*S)*F,e[14]=(m*T-p*y-f*v)*F,e[15]=(h*y-c*T+d*v)*F,e):null}function c(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],u=t[7],h=t[8],c=t[9],d=t[10],g=t[11],p=t[12],m=t[13],f=t[14],_=t[15];return e[0]=o*(d*_-g*f)-c*(l*_-u*f)+m*(l*g-u*d),e[1]=-(i*(d*_-g*f)-c*(a*_-s*f)+m*(a*g-s*d)),e[2]=i*(l*_-u*f)-o*(a*_-s*f)+m*(a*u-s*l),e[3]=-(i*(l*g-u*d)-o*(a*g-s*d)+c*(a*u-s*l)),e[4]=-(n*(d*_-g*f)-h*(l*_-u*f)+p*(l*g-u*d)),e[5]=r*(d*_-g*f)-h*(a*_-s*f)+p*(a*g-s*d),e[6]=-(r*(l*_-u*f)-n*(a*_-s*f)+p*(a*u-s*l)),e[7]=r*(l*g-u*d)-n*(a*g-s*d)+h*(a*u-s*l),e[8]=n*(c*_-g*m)-h*(o*_-u*m)+p*(o*g-u*c),e[9]=-(r*(c*_-g*m)-h*(i*_-s*m)+p*(i*g-s*c)),e[10]=r*(o*_-u*m)-n*(i*_-s*m)+p*(i*u-s*o),e[11]=-(r*(o*g-u*c)-n*(i*g-s*c)+h*(i*u-s*o)),e[12]=-(n*(c*f-d*m)-h*(o*f-l*m)+p*(o*d-l*c)),e[13]=r*(c*f-d*m)-h*(i*f-a*m)+p*(i*d-a*c),e[14]=-(r*(o*f-l*m)-n*(i*f-a*m)+p*(i*l-a*o)),e[15]=r*(o*d-l*c)-n*(i*d-a*c)+h*(i*l-a*o),e}function d(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],n=e[5],o=e[6],l=e[7],u=e[8],h=e[9],c=e[10],d=e[11],g=e[12],p=e[13],m=e[14],f=e[15],_=u*p-h*g,v=u*m-c*g,T=u*f-d*g,M=h*m-c*p,y=h*f-d*p;return(t*n-r*s)*(c*f-d*m)-(t*o-i*s)*y+(t*l-a*s)*M+(r*o-i*n)*T-(r*l-a*n)*v+(i*l-a*o)*_}function g(e,t,r){var i=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=t[9],g=t[10],p=t[11],m=t[12],f=t[13],_=t[14],v=t[15],T=r[0],M=r[1],y=r[2],b=r[3];return e[0]=T*i+M*o+y*c+b*m,e[1]=T*a+M*l+y*d+b*f,e[2]=T*s+M*u+y*g+b*_,e[3]=T*n+M*h+y*p+b*v,T=r[4],M=r[5],y=r[6],b=r[7],e[4]=T*i+M*o+y*c+b*m,e[5]=T*a+M*l+y*d+b*f,e[6]=T*s+M*u+y*g+b*_,e[7]=T*n+M*h+y*p+b*v,T=r[8],M=r[9],y=r[10],b=r[11],e[8]=T*i+M*o+y*c+b*m,e[9]=T*a+M*l+y*d+b*f,e[10]=T*s+M*u+y*g+b*_,e[11]=T*n+M*h+y*p+b*v,T=r[12],M=r[13],y=r[14],b=r[15],e[12]=T*i+M*o+y*c+b*m,e[13]=T*a+M*l+y*d+b*f,e[14]=T*s+M*u+y*g+b*_,e[15]=T*n+M*h+y*p+b*v,e}function p(e,t,r){var i,a,s,n,o,l,u,h,c,d,g,p,m=r[0],f=r[1],_=r[2];return t===e?(e[12]=t[0]*m+t[4]*f+t[8]*_+t[12],e[13]=t[1]*m+t[5]*f+t[9]*_+t[13],e[14]=t[2]*m+t[6]*f+t[10]*_+t[14],e[15]=t[3]*m+t[7]*f+t[11]*_+t[15]):(i=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=t[9],g=t[10],p=t[11],e[0]=i,e[1]=a,e[2]=s,e[3]=n,e[4]=o,e[5]=l,e[6]=u,e[7]=h,e[8]=c,e[9]=d,e[10]=g,e[11]=p,e[12]=i*m+o*f+c*_+t[12],e[13]=a*m+l*f+d*_+t[13],e[14]=s*m+u*f+g*_+t[14],e[15]=n*m+h*f+p*_+t[15]),e}function m(e,t,r){var i=r[0],a=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(e,t,i,a){var s,n,o,l,u,h,c,d,g,p,m,f,_,v,T,M,y,b,A,S,x,R,E,C,w=a[0],F=a[1],I=a[2],D=Math.hypot(w,F,I);return D<r.EPSILON?null:(w*=D=1/D,F*=D,I*=D,s=Math.sin(i),o=1-(n=Math.cos(i)),l=t[0],u=t[1],h=t[2],c=t[3],d=t[4],g=t[5],p=t[6],m=t[7],f=t[8],_=t[9],v=t[10],T=t[11],M=w*w*o+n,y=F*w*o+I*s,b=I*w*o-F*s,A=w*F*o-I*s,S=F*F*o+n,x=I*F*o+w*s,R=w*I*o+F*s,E=F*I*o-w*s,C=I*I*o+n,e[0]=l*M+d*y+f*b,e[1]=u*M+g*y+_*b,e[2]=h*M+p*y+v*b,e[3]=c*M+m*y+T*b,e[4]=l*A+d*S+f*x,e[5]=u*A+g*S+_*x,e[6]=h*A+p*S+v*x,e[7]=c*A+m*S+T*x,e[8]=l*R+d*E+f*C,e[9]=u*R+g*E+_*C,e[10]=h*R+p*E+v*C,e[11]=c*R+m*E+T*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function _(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[4],n=t[5],o=t[6],l=t[7],u=t[8],h=t[9],c=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+u*i,e[5]=n*a+h*i,e[6]=o*a+c*i,e[7]=l*a+d*i,e[8]=u*a-s*i,e[9]=h*a-n*i,e[10]=c*a-o*i,e[11]=d*a-l*i,e}function v(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],n=t[1],o=t[2],l=t[3],u=t[8],h=t[9],c=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-u*i,e[1]=n*a-h*i,e[2]=o*a-c*i,e[3]=l*a-d*i,e[8]=s*i+u*a,e[9]=n*i+h*a,e[10]=o*i+c*a,e[11]=l*i+d*a,e}function T(e,t,r){var i=Math.sin(r),a=Math.cos(r),s=t[0],n=t[1],o=t[2],l=t[3],u=t[4],h=t[5],c=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+u*i,e[1]=n*a+h*i,e[2]=o*a+c*i,e[3]=l*a+d*i,e[4]=u*a-s*i,e[5]=h*a-n*i,e[6]=c*a-o*i,e[7]=d*a-l*i,e}function M(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function y(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,t,i){var a,s,n,o=i[0],l=i[1],u=i[2],h=Math.hypot(o,l,u);return h<r.EPSILON?null:(o*=h=1/h,l*=h,u*=h,a=Math.sin(t),n=1-(s=Math.cos(t)),e[0]=o*o*n+s,e[1]=l*o*n+u*a,e[2]=u*o*n-l*a,e[3]=0,e[4]=o*l*n-u*a,e[5]=l*l*n+s,e[6]=u*l*n+o*a,e[7]=0,e[8]=o*u*n+l*a,e[9]=l*u*n-o*a,e[10]=u*u*n+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function A(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function x(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,t,r){var i=t[0],a=t[1],s=t[2],n=t[3],o=i+i,l=a+a,u=s+s,h=i*o,c=i*l,d=i*u,g=a*l,p=a*u,m=s*u,f=n*o,_=n*l,v=n*u;return e[0]=1-(g+m),e[1]=c+v,e[2]=d-_,e[3]=0,e[4]=c-v,e[5]=1-(h+m),e[6]=p+f,e[7]=0,e[8]=d+_,e[9]=p-f,e[10]=1-(h+g),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function E(e,t){var i=new r.ARRAY_TYPE(3),a=-t[0],s=-t[1],n=-t[2],o=t[3],l=t[4],u=t[5],h=t[6],c=t[7],d=a*a+s*s+n*n+o*o;return d>0?(i[0]=(l*o+c*a+u*n-h*s)*2/d,i[1]=(u*o+c*s+h*a-l*n)*2/d,i[2]=(h*o+c*n+l*s-u*a)*2/d):(i[0]=(l*o+c*a+u*n-h*s)*2,i[1]=(u*o+c*s+h*a-l*n)*2,i[2]=(h*o+c*n+l*s-u*a)*2),R(e,t,i),e}function C(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function w(e,t){var r=t[0],i=t[1],a=t[2],s=t[4],n=t[5],o=t[6],l=t[8],u=t[9],h=t[10];return e[0]=Math.hypot(r,i,a),e[1]=Math.hypot(s,n,o),e[2]=Math.hypot(l,u,h),e}function F(e,t){var i=new r.ARRAY_TYPE(3);w(i,t);var a=1/i[0],s=1/i[1],n=1/i[2],o=t[0]*a,l=t[1]*s,u=t[2]*n,h=t[4]*a,c=t[5]*s,d=t[6]*n,g=t[8]*a,p=t[9]*s,m=t[10]*n,f=o+c+m,_=0;return f>0?(_=2*Math.sqrt(f+1),e[3]=.25*_,e[0]=(d-p)/_,e[1]=(g-u)/_,e[2]=(l-h)/_):o>c&&o>m?(_=2*Math.sqrt(1+o-c-m),e[3]=(d-p)/_,e[0]=.25*_,e[1]=(l+h)/_,e[2]=(g+u)/_):c>m?(_=2*Math.sqrt(1+c-o-m),e[3]=(g-u)/_,e[0]=(l+h)/_,e[1]=.25*_,e[2]=(d+p)/_):(_=2*Math.sqrt(1+m-o-c),e[3]=(l-h)/_,e[0]=(g+u)/_,e[1]=(d+p)/_,e[2]=.25*_),e}function I(e,t,r,i){var a=t[0],s=t[1],n=t[2],o=t[3],l=a+a,u=s+s,h=n+n,c=a*l,d=a*u,g=a*h,p=s*u,m=s*h,f=n*h,_=o*l,v=o*u,T=o*h,M=i[0],y=i[1],b=i[2];return e[0]=(1-(p+f))*M,e[1]=(d+T)*M,e[2]=(g-v)*M,e[3]=0,e[4]=(d-T)*y,e[5]=(1-(c+f))*y,e[6]=(m+_)*y,e[7]=0,e[8]=(g+v)*b,e[9]=(m-_)*b,e[10]=(1-(c+p))*b,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function D(e,t,r,i,a){var s=t[0],n=t[1],o=t[2],l=t[3],u=s+s,h=n+n,c=o+o,d=s*u,g=s*h,p=s*c,m=n*h,f=n*c,_=o*c,v=l*u,T=l*h,M=l*c,y=i[0],b=i[1],A=i[2],S=a[0],x=a[1],R=a[2],E=(1-(m+_))*y,C=(g+M)*y,w=(p-T)*y,F=(g-M)*b,I=(1-(d+_))*b,D=(f+v)*b,V=(p+T)*A,N=(f-v)*A,k=(1-(d+m))*A;return e[0]=E,e[1]=C,e[2]=w,e[3]=0,e[4]=F,e[5]=I,e[6]=D,e[7]=0,e[8]=V,e[9]=N,e[10]=k,e[11]=0,e[12]=r[0]+S-(E*S+F*x+V*R),e[13]=r[1]+x-(C*S+I*x+N*R),e[14]=r[2]+R-(w*S+D*x+k*R),e[15]=1,e}function V(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=r+r,o=i+i,l=a+a,u=r*n,h=i*n,c=i*o,d=a*n,g=a*o,p=a*l,m=s*n,f=s*o,_=s*l;return e[0]=1-c-p,e[1]=h+_,e[2]=d-f,e[3]=0,e[4]=h-_,e[5]=1-u-p,e[6]=g+m,e[7]=0,e[8]=d+f,e[9]=g-m,e[10]=1-u-c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function N(e,t,r,i,a,s,n){var o=1/(r-t),l=1/(a-i),u=1/(s-n);return e[0]=2*s*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*o,e[9]=(a+i)*l,e[10]=(n+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=n*s*2*u,e[15]=0,e}function k(e,t,r,i,a){var s,n=1/Math.tan(t/2);return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(s=1/(i-a),e[10]=(a+i)*s,e[14]=2*a*i*s):(e[10]=-1,e[14]=-2*i),e}function P(e,t,r,i){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),n=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(n+o),u=2/(a+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((n-o)*l*.5),e[9]=(a-s)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function L(e,t,r,i,a,s,n){var o=1/(t-r),l=1/(i-a),u=1/(s-n);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*o,e[13]=(a+i)*l,e[14]=(n+s)*u,e[15]=1,e}function U(e,t,i,a){var s,n,o,u,h,c,d,g,p,m,f=t[0],_=t[1],v=t[2],T=a[0],M=a[1],y=a[2],b=i[0],A=i[1],S=i[2];return Math.abs(f-b)<r.EPSILON&&Math.abs(_-A)<r.EPSILON&&Math.abs(v-S)<r.EPSILON?l(e):(m=1/Math.hypot(d=f-b,g=_-A,p=v-S),d*=m,g*=m,p*=m,(m=Math.hypot(s=M*p-y*g,n=y*d-T*p,o=T*g-M*d))?(s*=m=1/m,n*=m,o*=m):(s=0,n=0,o=0),(m=Math.hypot(u=g*o-p*n,h=p*s-d*o,c=d*n-g*s))?(u*=m=1/m,h*=m,c*=m):(u=0,h=0,c=0),e[0]=s,e[1]=u,e[2]=d,e[3]=0,e[4]=n,e[5]=h,e[6]=g,e[7]=0,e[8]=o,e[9]=c,e[10]=p,e[11]=0,e[12]=-(s*f+n*_+o*v),e[13]=-(u*f+h*_+c*v),e[14]=-(d*f+g*_+p*v),e[15]=1,e)}function B(e,t,r,i){var a=t[0],s=t[1],n=t[2],o=i[0],l=i[1],u=i[2],h=a-r[0],c=s-r[1],d=n-r[2],g=h*h+c*c+d*d;g>0&&(h*=g=1/Math.sqrt(g),c*=g,d*=g);var p=l*d-u*c,m=u*h-o*d,f=o*c-l*h;return(g=p*p+m*m+f*f)>0&&(p*=g=1/Math.sqrt(g),m*=g,f*=g),e[0]=p,e[1]=m,e[2]=f,e[3]=0,e[4]=c*f-d*m,e[5]=d*p-h*f,e[6]=h*m-c*p,e[7]=0,e[8]=h,e[9]=c,e[10]=d,e[11]=0,e[12]=a,e[13]=s,e[14]=n,e[15]=1,e}function O(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function G(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function z(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function X(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function W(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Y(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function H(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function j(e,t){var i=e[0],a=e[1],s=e[2],n=e[3],o=e[4],l=e[5],u=e[6],h=e[7],c=e[8],d=e[9],g=e[10],p=e[11],m=e[12],f=e[13],_=e[14],v=e[15],T=t[0],M=t[1],y=t[2],b=t[3],A=t[4],S=t[5],x=t[6],R=t[7],E=t[8],C=t[9],w=t[10],F=t[11],I=t[12],D=t[13],V=t[14],N=t[15];return Math.abs(i-T)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-A)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(l-S)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-x)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(h-R)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(c-E)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(d-C)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(g-w)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(w))&&Math.abs(p-F)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(m-I)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(f-D)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(_-V)<=r.EPSILON*Math.max(1,Math.abs(_),Math.abs(V))&&Math.abs(v-N)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(N))}var q=g,K=X}),parcelRegister("amnUE",function(e,t){$parcel$export(e.exports,"EPSILON",()=>r),$parcel$export(e.exports,"ARRAY_TYPE",()=>i),$parcel$export(e.exports,"RANDOM",()=>a);var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})}),parcelRegister("eIStk",function(e,t){$parcel$export(e.exports,"create",()=>i),$parcel$export(e.exports,"clone",()=>a),$parcel$export(e.exports,"length",()=>s),$parcel$export(e.exports,"fromValues",()=>n),$parcel$export(e.exports,"copy",()=>o),$parcel$export(e.exports,"set",()=>l),$parcel$export(e.exports,"add",()=>u),$parcel$export(e.exports,"subtract",()=>h),$parcel$export(e.exports,"multiply",()=>c),$parcel$export(e.exports,"divide",()=>d),$parcel$export(e.exports,"ceil",()=>g),$parcel$export(e.exports,"floor",()=>p),$parcel$export(e.exports,"min",()=>m),$parcel$export(e.exports,"max",()=>f),$parcel$export(e.exports,"round",()=>_),$parcel$export(e.exports,"scale",()=>v),$parcel$export(e.exports,"scaleAndAdd",()=>T),$parcel$export(e.exports,"distance",()=>M),$parcel$export(e.exports,"squaredDistance",()=>y),$parcel$export(e.exports,"squaredLength",()=>b),$parcel$export(e.exports,"negate",()=>A),$parcel$export(e.exports,"inverse",()=>S),$parcel$export(e.exports,"normalize",()=>x),$parcel$export(e.exports,"dot",()=>R),$parcel$export(e.exports,"cross",()=>E),$parcel$export(e.exports,"lerp",()=>C),$parcel$export(e.exports,"hermite",()=>w),$parcel$export(e.exports,"bezier",()=>F),$parcel$export(e.exports,"random",()=>I),$parcel$export(e.exports,"transformMat4",()=>D),$parcel$export(e.exports,"transformMat3",()=>V),$parcel$export(e.exports,"transformQuat",()=>N),$parcel$export(e.exports,"rotateX",()=>k),$parcel$export(e.exports,"rotateY",()=>P),$parcel$export(e.exports,"rotateZ",()=>L),$parcel$export(e.exports,"angle",()=>U),$parcel$export(e.exports,"zero",()=>B),$parcel$export(e.exports,"str",()=>O),$parcel$export(e.exports,"exactEquals",()=>G),$parcel$export(e.exports,"equals",()=>z),$parcel$export(e.exports,"sub",()=>X),$parcel$export(e.exports,"mul",()=>W),$parcel$export(e.exports,"div",()=>Y),$parcel$export(e.exports,"dist",()=>H),$parcel$export(e.exports,"sqrDist",()=>j),$parcel$export(e.exports,"len",()=>q),$parcel$export(e.exports,"sqrLen",()=>K),$parcel$export(e.exports,"forEach",()=>Z);var r=parcelRequire("amnUE");function i(){var e=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function a(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(e){return Math.hypot(e[0],e[1],e[2])}function n(e,t,i){var a=new r.ARRAY_TYPE(3);return a[0]=e,a[1]=t,a[2]=i,a}function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function l(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function u(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function h(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function c(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function d(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function g(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function p(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function m(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function f(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function _(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function v(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function T(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function M(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])}function y(e,t){var r=t[0]-e[0],i=t[1]-e[1],a=t[2]-e[2];return r*r+i*i+a*a}function b(e){var t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function A(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function S(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function x(e,t){var r=t[0],i=t[1],a=t[2],s=r*r+i*i+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function R(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function E(e,t,r){var i=t[0],a=t[1],s=t[2],n=r[0],o=r[1],l=r[2];return e[0]=a*l-s*o,e[1]=s*n-i*l,e[2]=i*o-a*n,e}function C(e,t,r,i){var a=t[0],s=t[1],n=t[2];return e[0]=a+i*(r[0]-a),e[1]=s+i*(r[1]-s),e[2]=n+i*(r[2]-n),e}function w(e,t,r,i,a,s){var n=s*s,o=n*(2*s-3)+1,l=n*(s-2)+s,u=n*(s-1),h=n*(3-2*s);return e[0]=t[0]*o+r[0]*l+i[0]*u+a[0]*h,e[1]=t[1]*o+r[1]*l+i[1]*u+a[1]*h,e[2]=t[2]*o+r[2]*l+i[2]*u+a[2]*h,e}function F(e,t,r,i,a,s){var n=1-s,o=n*n,l=s*s,u=o*n,h=3*s*o,c=3*l*n,d=l*s;return e[0]=t[0]*u+r[0]*h+i[0]*c+a[0]*d,e[1]=t[1]*u+r[1]*h+i[1]*c+a[1]*d,e[2]=t[2]*u+r[2]*h+i[2]*c+a[2]*d,e}function I(e,t){t=t||1;var i=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,s=Math.sqrt(1-a*a)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=a*t,e}function D(e,t,r){var i=t[0],a=t[1],s=t[2],n=r[3]*i+r[7]*a+r[11]*s+r[15];return n=n||1,e[0]=(r[0]*i+r[4]*a+r[8]*s+r[12])/n,e[1]=(r[1]*i+r[5]*a+r[9]*s+r[13])/n,e[2]=(r[2]*i+r[6]*a+r[10]*s+r[14])/n,e}function V(e,t,r){var i=t[0],a=t[1],s=t[2];return e[0]=i*r[0]+a*r[3]+s*r[6],e[1]=i*r[1]+a*r[4]+s*r[7],e[2]=i*r[2]+a*r[5]+s*r[8],e}function N(e,t,r){var i=r[0],a=r[1],s=r[2],n=r[3],o=t[0],l=t[1],u=t[2],h=a*u-s*l,c=s*o-i*u,d=i*l-a*o,g=a*d-s*c,p=s*h-i*d,m=i*c-a*h,f=2*n;return h*=f,c*=f,d*=f,g*=2,p*=2,m*=2,e[0]=o+h+g,e[1]=l+c+p,e[2]=u+d+m,e}function k(e,t,r,i){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[0],s[1]=a[1]*Math.cos(i)-a[2]*Math.sin(i),s[2]=a[1]*Math.sin(i)+a[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function P(e,t,r,i){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[2]*Math.sin(i)+a[0]*Math.cos(i),s[1]=a[1],s[2]=a[2]*Math.cos(i)-a[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function L(e,t,r,i){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[0]*Math.cos(i)-a[1]*Math.sin(i),s[1]=a[0]*Math.sin(i)+a[1]*Math.cos(i),s[2]=a[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function U(e,t){var r=e[0],i=e[1],a=e[2],s=t[0],n=t[1],o=t[2],l=Math.sqrt(r*r+i*i+a*a)*Math.sqrt(s*s+n*n+o*o);return Math.acos(Math.min(Math.max(l&&R(e,t)/l,-1),1))}function B(e){return e[0]=0,e[1]=0,e[2]=0,e}function O(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function G(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function z(e,t){var i=e[0],a=e[1],s=e[2],n=t[0],o=t[1],l=t[2];return Math.abs(i-n)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(a-o)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(s-l)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))}var X=h,W=c,Y=d,H=M,j=y,q=s,K=b,Z=function(){var e=i();return function(t,r,i,a,s,n){var o,l;for(r||(r=3),i||(i=0),l=a?Math.min(a*r+i,t.length):t.length,o=i;o<l;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],s(e,e,n),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2];return t}}()}),parcelRegister("bSIL4",function(e,t){$parcel$export(e.exports,"default",()=>a);var r=parcelRequire("eIStk"),i={};i.normalizedMouse=function(e,t,r,i){return[2*e/r-1,1-2*t/i]},i.mouseOnUnitSphere=function(e){var t=e[0],i=e[1],a=1-t*t-i*i,s=[t,i,a>0?Math.sqrt(a):0];return r.normalize(s,s)},i.intersectionRayTriangleEdges=function(){var e=1e-15,t=1.000000000000001,i=-.000000000000001,a=[0,0,0],s=[0,0,0],n=[0,0,0];return function(o,l,u,h,c,d){r.cross(a,l,h);var g=r.dot(u,a);if(g>-e&&g<e)return -1;var p=1/g;r.sub(s,o,c);var m=r.dot(s,a)*p;if(m<i||m>t)return -1;r.cross(n,s,u);var f=r.dot(l,n)*p;if(f<i||m+f>t)return -1;var _=r.dot(h,n)*p;return _<i?-1:(d&&r.scaleAndAdd(d,o,l,_),_)}}(),i.intersectionRayTriangle=function(){var e=[0,0,0],t=[0,0,0];return function(a,s,n,o,l,u){return r.sub(e,o,n),r.sub(t,l,n),i.intersectionRayTriangleEdges(a,s,e,t,n,u)}}(),i.distance2PointTriangleEdges=function(){var e=[0,0,0];return function(t,i,a,s,n,o,l,u){r.sub(e,s,t);var h,c,d,g,p,m=r.dot(e,i),f=r.dot(e,a),_=r.sqrLen(e),v=Math.abs(n*l-o*o),T=o*f-l*m,M=o*m-n*f,y=4;if(T+M<=v){if(T<0)M<0?(y=4,m<0?(M=0,-m>=n?(T=1,h=n+2*m+_):(T=-m/n,h=m*T+_)):(T=0,f>=0?(M=0,h=_):-f>=l?(M=1,h=l+2*f+_):(M=-f/l,h=f*M+_))):(y=3,T=0,f>=0?(M=0,h=_):-f>=l?(M=1,h=l+2*f+_):(M=-f/l,h=f*M+_));else if(M<0)y=5,M=0,m>=0?(T=0,h=_):-m>=n?(T=1,h=n+2*m+_):(T=-m/n,h=m*T+_);else{y=0;var b=1/v;T*=b,M*=b,h=T*(n*T+o*M+2*m)+M*(o*T+l*M+2*f)+_}}else T<0?(y=2,c=o+m,(d=l+f)>c?(g=d-c)>=(p=n-2*o+l)?(T=1,M=0,h=n+2*m+_):(M=1-(T=g/p),h=T*(n*T+o*M+2*m)+M*(o*T+l*M+2*f)+_):(T=0,d<=0?(M=1,h=l+2*f+_):f>=0?(M=0,h=_):(M=-f/l,h=f*M+_))):M<0?(y=6,c=o+f,(d=n+m)>c?(g=d-c)>=(p=n-2*o+l)?(M=1,T=0,h=l+2*f+_):h=(T=1-(M=g/p))*(n*T+o*M+2*m)+M*(o*T+l*M+2*f)+_:(M=0,d<=0?(T=1,h=n+2*m+_):m>=0?(T=0,h=_):(T=-m/n,h=m*T+_))):(y=1,(g=l+f-o-m)<=0?(T=0,M=1,h=l+2*f+_):g>=(p=n-2*o+l)?(T=1,M=0,h=n+2*m+_):(M=1-(T=g/p),h=T*(n*T+o*M+2*m)+M*(o*T+l*M+2*f)+_));return h<0&&(h=0),u&&(u[0]=s[0]+T*i[0]+M*a[0],u[1]=s[1]+T*i[1]+M*a[1],u[2]=s[2]+T*i[2]+M*a[2],u[3]=y),h}}(),i.distance2PointTriangle=function(){var e=[0,0,0],t=[0,0,0];return function(a,s,n,o,l){r.sub(e,n,s),r.sub(t,o,s);var u=r.sqrLen(e),h=r.dot(e,t),c=r.sqrLen(t);return i.distance2PointTriangleEdges(a,e,t,s,u,h,c,l)}}(),i.pointInsideTriangle=function(){var e=[0,0,0],t=[0,0,0],i=[0,0,0],a=[0,0,0],s=[0,0,0];return function(n,o,l,u){return r.sub(e,o,l),r.sub(t,o,u),r.sub(i,n,l),r.sub(a,n,u),1e-20>Math.abs(r.len(r.cross(s,e,t))-(r.len(r.cross(s,e,i))+r.len(r.cross(s,t,a))+r.len(r.cross(s,i,a))))}}(),i.triangleInsideSphere=function(e,t,r,a,s){return!!(i.distanceSqToSegment(e,r,a)<t||i.distanceSqToSegment(e,a,s)<t||i.distanceSqToSegment(e,r,s)<t)},i.distanceSqToSegment=function(){var e=[0,0,0],t=[0,0,0];return function(i,a,s){r.sub(e,i,a),r.sub(t,s,a);var n=r.sqrLen(t),o=r.dot(e,t)/n;return o<0?r.sqrLen(e):o>1?r.sqrLen(r.sub(e,i,s)):(e[0]=i[0]-a[0]-o*t[0],e[1]=i[1]-a[1]-o*t[1],e[2]=i[2]-a[2]-o*t[2],r.sqrLen(e))}}(),i.signedAngle2d=function(e,t){var r=e[0],i=e[1],a=t[0],s=t[1];return Math.atan2(r*s-i*a,r*a+i*s)},i.pointPlaneDistance=function(){var e=[0,0,0];return function(t,i,a){return r.dot(r.sub(e,t,i),a)}}(),i.mirrorPoint=function(){var e=[0,0,0];return function(t,a,s){return r.sub(t,t,r.scale(e,s,2*i.pointPlaneDistance(t,a,s)))}}(),i.vertexOnLine=function(){var e=[0,0,0];return function(t,i,a){r.sub(e,a,i);var s=[0,0,0],n=r.dot(e,r.sub(s,t,i));return r.scaleAndAdd(s,i,e,n/r.sqrLen(e))}}(),i.intersectLinePlane=function(e,t,i,a,s){var n=r.dot(r.sub(s,e,i),a),o=r.dot(r.sub(s,t,i),a);if(n===o)return t;var l=-n/(o-n);return r.scaleAndAdd(s,e,r.sub(s,t,e),l)},i.getPerpendicularVector=function(e){var t=[0,0,0];return 0===e[0]?t[0]=1:0===e[1]?t[1]=1:0===e[2]?t[2]=1:(t[0]=e[2],t[1]=e[2],t[2]=-e[0]-e[1],r.normalize(t,t)),t};var a=i}),parcelRegister("im4cd",function(e,t){$parcel$export(e.exports,"default",()=>i);var r={radiusFactor:.75,intensityFactor:0,pressure:.5};r.getPressureIntensity=function(){return 1+r.intensityFactor*(2*r.pressure-1)},r.getPressureRadius=function(){return 1+r.radiusFactor*(2*r.pressure-1)};var i=r}),parcelRegister("jLaD3",function(e,t){$parcel$export(e.exports,"default",()=>s);var r=parcelRequire("eIStk"),i={};i.SCALE=100,i.TAG_FLAG=1,i.SCULPT_FLAG=1,i.STATE_FLAG=1,i.TRI_INDEX=4294967295,i.cursors={},i.cursors.dropper="url(resources/dropper.png) 5 25, auto",i.linearToSRGB1=function(e){return e<.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},i.sRGBToLinear1=function(e){return e<.04045?1/12.92*e:Math.pow(1/1.055*(e+.055),2.4)},i.extend=function(e,t){for(var r=Object.keys(t),i=0,a=r.length;i<a;++i){var s=r[i];void 0===e[s]&&(e[s]=t[s])}return e},i.invert=function(e){for(var t=Object.keys(e),r={},i=0,a=t.length;i<a;++i)r[e[t[i]]]=t[i];return r},i.replaceElement=function(e,t,r){for(var i=0,a=e.length;i<a;++i)if(e[i]===t){e[i]=r;return}},i.removeElement=function(e,t){for(var r=0,i=e.length;r<i;++r)if(e[r]===t){e[r]=e[i-1],e.pop();return}},i.appendArray=function(e,t){var r=e.length,i=t.length;e.length+=i;for(var a=0;a<i;++a)e[r+a]=t[a]},i.isPowerOfTwo=function(e){return 0!==e&&(e&e-1)==0},i.nextHighestPowerOfTwo=function(e){--e;for(var t=1;t<32;t<<=1)e|=e>>t;return e+1};var a=function(e,t){return e-t};i.tidy=function(e){e.sort(a);var t=e.length,r=0,i=0;for(r=1;r<t;++r)e[i]!==e[r]&&(e[++i]=e[r]);r>1&&(e.length=i+1)},i.intersectionArrays=function(e,t){for(var r=0,i=0,a=[],s=e.length,n=t.length;r<s&&i<n;)e[r]<t[i]?r++:e[r]>t[i]?i++:(a.push(e[r]),++r,++i);return a},i.littleEndian=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),i.getBytes=function(e,t){return[e[t].charCodeAt(),e[t+1].charCodeAt(),e[t+2].charCodeAt(),e[t+3].charCodeAt()]},i.getUint32=function(e,t){var r=i.getBytes(e,t);return r[0]<<0|r[1]<<8|r[2]<<16|r[3]<<24},i.getFloat32=function(e,t){var r=i.getBytes(e,t),a=1-2*(r[3]>>7),s=(r[3]<<1&255|r[2]>>7)-127,n=(127&r[2])<<16|r[1]<<8|r[0];return 128===s?0!==n?NaN:1/0*a:-127===s?a*n*1401298464324817e-60:a*(1+11920928955078125e-23*n)*Math.pow(2,s)},i.ab2str=function(e){for(var t="",r=new Uint8Array(e),i=65535,a=0,s=r.length;a<s;a+=i){var n=r.subarray(a,i<s-a?i+a:s);t+=String.fromCharCode.apply(null,n)}return t},i.getMemory=function(){var e=new ArrayBuffer(1e5);return function(t){return e.byteLength>=t?e:e=new ArrayBuffer(t)}}(),i.now=Date.now||function(){return new Date().getTime()},i.throttle=function(e,t){var r,a=[],s=null,n=0,o=function(){n=i.now(),s=null,r=e.apply(e,a)};return function(){for(var l=i.now(),u=t-(l-n),h=a.length=arguments.length,c=0;c<h;++c)a[c]=arguments[c];return u<=0||u>t?(window.clearTimeout(s),s=null,n=l,r=e.apply(e,a)):s||(s=window.setTimeout(o,u)),r}},i.normalizeArrayVec3=function(e,t=e){for(var r=0,i=e.length/3;r<i;++r){var a=3*r,s=e[a],n=e[a+1],o=e[a+2],l=s*s+n*n+o*o;if(0===l){t[a]=1;continue}l=1/Math.sqrt(l),t[a]=s*l,t[a+1]=n*l,t[a+2]=o*l}return t},i.convertArrayVec3toSRGB=function(e,t=e){for(var r=0,a=e.length;r<a;++r)t[r]=i.linearToSRGB1(e[r]);return t},i.convertArrayVec3toLinear=function(e,t=e){for(var r=0,a=e.length;r<a;++r)t[r]=i.sRGBToLinear1(e[r]);return t},i.computeWorldVertices=function(e,t){var i=e.getNbVertices(),a=e.getVertices().subarray(0,3*i);t||(t=new Float32Array(3*i));for(var s=e.getMatrix(),n=r.create(),o=0;o<i;++o){var l=3*o;r.set(n,a[l],a[l+1],a[l+2]),r.transformMat4(n,n,s),t[l]=n[0],t[l+1]=n[1],t[l+2]=n[2]}return t};var s=i}),parcelRegister("l7y1s",function(e,t){$parcel$export(e.exports,"default",()=>m);var r=parcelRequire("idLiu"),i=parcelRequire("8tdmE"),a=parcelRequire("1Jppb"),s=parcelRequire("4ac3c"),n=parcelRequire("et1g0"),o=parcelRequire("jUrL5"),l=parcelRequire("hkYaO"),u=parcelRequire("kzCWw"),h=parcelRequire("fx1YZ"),c=parcelRequire("jjlqn"),d=parcelRequire("bbgYB"),g=function(e){var t=g.languages[g.select][e]||g.languages.english[e];return"string"==typeof t?t:"function"==typeof t?t.apply(this,Array.prototype.slice.call(arguments,1)):(console.error("No TR found for : "+e),e)};g.languages={english:i.default,日本語:s.default,中文:a.default,한국어:n.default,русский:o.default,turkish:l.default,svenska:u.default,français:h.default,deutsch:c.default,italiano:d.default},g.select="english";var p=window.navigator.language||window.navigator.userLanguage;switch(p&&(p=p.substr(0,2)),"ja"===p?g.select="日本語":"zh"===p?g.select="中文":"ko"===p?g.select="한국어":"tr"===p?g.select="turkish":"sv"===p?g.select="svenska":"fr"===p?g.select="français":"de"===p&&(g.select="deutsch"),(0,r.default)().language){case"english":g.select="english";break;case"chinese":g.select="中文";break;case"korean":g.select="한국어";break;case"japanese":g.select="日本語";break;case"russian":g.select="русский";break;case"turkish":g.select="turkish";break;case"swedish":g.select="svenska";break;case"french":g.select="français";break;case"german":g.select="deutsch";break;case"italian":g.select="italiano"}var m=g}),parcelRegister("idLiu",function(e,t){$parcel$export(e.exports,"default",()=>g);var r,i=parcelRequire("eIUYI"),a=i.default.KeyAction,s=function(e,t){return void 0===e?t:"false"!==e&&"0"!==e},n=function(e,t,r,i){var a=parseFloat(e);return a||0===a?Math.max(t,Math.min(r,a)):i},o=function(e,t,r,i){var a=parseInt(e,10);return a||0===a?Math.max(t,Math.min(r,a)):i},l=function(e,t){if(!e)return t;var r=e.split(",");if(r.length<3)return t;var i=t.slice();return i[0]=parseInt(r[0]||0,10)/255,i[1]=parseInt(r[1]||0,10)/255,i[2]=parseInt(r[2]||0,10)/255,void 0!==r[3]&&(i[3]=parseFloat(r[3])),i},u=function(e){var t={};if(t["0".charCodeAt(0)]=a.MOVE,t["1".charCodeAt(0)]=a.BRUSH,t["2".charCodeAt(0)]=a.INFLATE,t["3".charCodeAt(0)]=a.TWIST,t["4".charCodeAt(0)]=a.SMOOTH,t["5".charCodeAt(0)]=a.FLATTEN,t["6".charCodeAt(0)]=a.PINCH,t["7".charCodeAt(0)]=a.CREASE,t["8".charCodeAt(0)]=a.DRAG,t["9".charCodeAt(0)]=a.PAINT,t["E".charCodeAt(0)]=a.TRANSFORM,t["C".charCodeAt(0)]=a.INTENSITY,t["X".charCodeAt(0)]=a.RADIUS,t["N".charCodeAt(0)]=a.NEGATIVE,t["S".charCodeAt(0)]=a.PICKER,t[46]=a.DELETE,t["F".charCodeAt(0)]=a.CAMERA_FRONT,t["T".charCodeAt(0)]=a.CAMERA_TOP,t["L".charCodeAt(0)]=a.CAMERA_LEFT,t[32]=a.CAMERA_RESET,t[37]=a.STRIFE_LEFT,t[39]=a.STRIFE_RIGHT,t[38]=a.STRIFE_UP,t[40]=a.STRIFE_DOWN,t["W".charCodeAt(0)]=a.WIREFRAME,t["R".charCodeAt(0)]=a.REMESH,!e)return t;for(var r=e.split(","),i=0,s=r.length;i<s;i++){var n=r[i].split(":",2);if(2===n.length){var o=n[1].toUpperCase(),l=parseInt(o,10);o=l==l&&l>=10?l:o.charCodeAt(0);var u=a[n[0].toUpperCase()];void 0!==u&&(t[o]=u)}}return t},h=function(){for(var e=window.location.search.substr(1).split("&"),t={},r=0,i=e.length;r<i;r++){var a=e[r].split("=",2);2===a.length&&(t[a[0].toLowerCase()]=a[1])}return t},c=function(e,t,r){if(t){var i=e[t.toUpperCase()];if(void 0!==i)return i}return r},d=function(){if(r)return r;r={};var e=h();return r.language=e.language,r.scalecenter=s(e.scalecenter,!1),r.grid=s(e.grid,!0),r.outline=s(e.outline,!1),r.outlinecolor=l(e.outlinecolor,[.3,0,0,1]),r.mirrorline=s(e.mirrorline,!1),r.darkenunselected=s(e.darkenunselected,!0),r.projection=c(i.default.Projection,e.projection,i.default.Projection.PERSPECTIVE),r.cameramode=c(i.default.CameraMode,e.cameramode,i.default.Projection.ORBIT),r.pivot=s(e.pivot,!0),r.fov=n(e.fov,10,90,45),r.flatshading=s(e.flatshading,!1),r.wireframe=s(e.wireframe,!1),r.curvature=n(e.curvature,0,5,0),r.exposure=n(e.exposure,0,5),r.environment=o(e.environment,0,1/0,0),r.matcap=o(e.matcap,0,1/0,3),r.shader=c(i.default.Shader,e.shader,i.default.Shader.MATCAP),r.filmic=s(e.filmic,!1),r.modelurl=e.modelurl,r.shortcuts=u(e.shortcuts),r};d(),d.getShortKey=function(e){return e>=96&&e<=105&&(e-=48),d().shortcuts[e]};var g=d}),parcelRegister("eIUYI",function(e,t){$parcel$export(e.exports,"default",()=>s);var r=parcelRequire("jLaD3"),i={};i.Action={NOTHING:0,MASK_EDIT:1,SCULPT_EDIT:2,CAMERA_ZOOM:3,CAMERA_ROTATE:4,CAMERA_PAN:5,CAMERA_PAN_ZOOM_ALT:6},i.Tools={BRUSH:0,INFLATE:1,TWIST:2,SMOOTH:3,FLATTEN:4,PINCH:5,CREASE:6,DRAG:7,PAINT:8,MOVE:9,MASKING:10,LOCALSCALE:11,TRANSFORM:12},i.Shader={PBR:0,FLAT:1,NORMAL:2,WIREFRAME:3,UV:4,MATCAP:5,SELECTION:6,BACKGROUND:7,MERGE:8,FXAA:9,CONTOUR:10,PAINTUV:11,BLUR:12},i.Projection={PERSPECTIVE:0,ORTHOGRAPHIC:1},i.CameraMode={ORBIT:0,SPHERICAL:1,PLANE:2},i.MultiState={NONE:0,SCULPT:1,CAMERA:2,PICKING:3};var a=Object.keys(i.Tools).length;i.KeyAction=(0,r.default).extend({INTENSITY:a++,RADIUS:a++,NEGATIVE:a++,PICKER:a++,DELETE:a++,CAMERA_FRONT:a++,CAMERA_TOP:a++,CAMERA_LEFT:a++,CAMERA_RESET:a++,STRIFE_LEFT:a++,STRIFE_RIGHT:a++,STRIFE_UP:a++,STRIFE_DOWN:a++,WIREFRAME:a++,REMESH:a++},i.Tools);var s=i}),parcelRegister("8tdmE",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"Background",backgroundReset:"Reset",backgroundImport:"Import (jpg, png...)",backgroundFill:"Fill",cameraTitle:"Camera",cameraReset:"View",cameraCenter:"Reset (bar)",cameraFront:"Front (F)",cameraLeft:"Left (L)",cameraTop:"Top (T)",cameraMode:"Mode",cameraOrbit:"Orbit (Turntable)",cameraSpherical:"Spherical (Trackball)",cameraPlane:"Plane (Trackball)",cameraProjection:"Projection",cameraPerspective:"Perspective",cameraOrthographic:"Orthographic",cameraFov:"Fov",cameraPivot:"Picking pivot",fileTitle:"Files (import/export)",fileImportTitle:"Import",fileAdd:"Add (obj, sgl, ply, stl)",fileAutoMatrix:"Scale and center",fileVertexSRGB:"sRGB vertex color",fileExportSceneTitle:"Export Scene",fileExportAll:"Export all",fileExportSGL:"Save .sgl (SculptGL)",fileExportOBJ:"Save .obj",fileExportPLY:"Save .ply",fileExportSTL:"Save .stl",fileExportTextureTitle:"Export textures",fileExportTextureSize:"Size",fileExportColor:"Save diffuse",fileExportRoughness:"Save roughness",fileExportMetalness:"Save metalness",sceneTitle:"Scene",sceneReset:"Clear scene",sceneResetConfirm:"Confirm clear scene",sceneAddSphere:"Add sphere",sceneAddCube:"Add cube",sceneAddCylinder:"Add cylinder",sceneAddTorus:"Add torus",sceneSelection:"Selection",sceneMerge:"Merge selection",sceneDuplicate:"Copy selection",sceneDelete:"Delete selection",meshTitle:"Mesh",meshNbVertices:"Vertex : ",meshNbFaces:"Faces : ",topologyTitle:"Topology",multiresTitle:"Multiresolution",multiresSubdivide:"Subdivide",multiresReverse:"Reverse",multiresResolution:"Resolution",multiresNoLower:"There is no lower resolution level.",multiresNoHigher:"There is no higher resolution level.",multiresDelHigher:"Delete higher",multiresDelLower:"Delete lower",multiresSelectLowest:"Select the lowest resolution before reversing.",multiresSelectHighest:"Select the highest resolution before subdividing.",multiresWarnBigMesh:function(e){return"The next subdivision level will reach "+e+' faces.\nIf you know what you are doing, click again on "subdivide".'},multiresNotReversible:"Sorry it is not possile to reverse this mesh.\nThe mesh is not a product of a (loop-catmull) subdivision surface on a manifold mesh.",remeshTitle:"Voxel remeshing (quads)",remeshRemesh:"Remesh",remeshResolution:"Resolution",remeshBlock:"Block",dynamicTitle:"Dynamic Topology",dynamicActivated:"Activated (no quads)",dynamicSubdivision:"Subdivision",dynamicDecimation:"Decimation",dynamicLinear:"Linear subdivision",sculptTitle:"Sculpting & Painting",sculptBrush:"Brush",sculptInflate:"Inflate",sculptTwist:"Twist",sculptSmooth:"Smooth (-Shift)",sculptFlatten:"Flatten",sculptPinch:"Pinch",sculptCrease:"Crease",sculptDrag:"Drag",sculptPaint:"Paint",sculptMasking:"Masking (-Ctrl)",sculptMove:"Move",sculptLocalScale:"Local scale",sculptTransform:"Transform (E)",sculptCommon:"Common",sculptTool:"Tool",sculptSymmetry:"Symmetry",sculptContinuous:"Continuous",sculptRadius:"Radius (-X)",sculptIntensity:"Intensity (-C)",sculptHardness:"Hardness",sculptCulling:"Thin surface (front vertex only)",sculptAlphaTitle:"Alpha",sculptLockPositon:"Lock position",sculptAlphaTex:"Texture",sculptImportAlpha:"Import alpha tex (jpg, png...)",sculptNegative:"Negative (N or -Alt)",sculptColor:"Albedo",sculptRoughness:"Roughness",sculptMetallic:"Metallic",sculptClay:"Clay",sculptAccumulate:"Accumulate (no limit per stroke)",sculptColorGlobal:"Global",sculptPickColor:"Material / Color picker (-S)",sculptTangentialSmoothing:"Relax only",sculptTopologicalCheck:"Topological check",sculptMoveAlongNormal:"Move along normal (N or -Alt)",sculptMaskingClear:"Clear (-Ctrl + Drag)",sculptMaskingInvert:"Invert (-Ctrl + Click)",sculptMaskingBlur:"Blur",sculptMaskingSharpen:"Sharpen",sculptPBRTitle:"PBR materials",sculptPaintAll:"Paint all",sculptExtractTitle:"Extract",sculptExtractThickness:"Thickness",sculptExtractAction:"Extract !",stateTitle:"History",stateUndo:"Undo",stateRedo:"Redo",stateMaxStack:"Max Stack",pressureTitle:"Tablet pressure",pressureRadius:"Pressure radius",pressureIntensity:"Pressure intensity",renderingTitle:"Rendering",renderingGrid:"Show grid",renderingSymmetryLine:"Show mirror line",renderingMatcap:"Matcap",renderingCurvature:"Curvature",renderingPBR:"PBR",renderingTransparency:"Transparency",renderingNormal:"Normal shader",renderingUV:"UV shader",renderingShader:"Shader",renderingMaterial:"Material",renderingImportUV:"Import (jpg, png...)",renderingImportMatcap:"Import (jpg, png...)",renderingExtra:"Extra",renderingFlat:"Flat shading",renderingWireframe:"Wireframe (W)",renderingExposure:"Exposure",renderingEnvironment:"Environment",renderingIsolate:"Isolate/Show (I)",renderingFilmic:"Filmic tonemapping",contour:"Contour",contourShow:"Show contour",contourColor:"Color",darkenUnselected:"Darken unselected",resolution:"Resolution",matcapPearl:"Pearl",matcapClay:"Clay",matcapSkin:"Skin",matcapGreen:"Green",matcapWhite:"White",sketchfabTitle:"Go to Sketchfab !",sketchfabUpload:"Upload",sketchfabUploadMessage:'Please enter your sketchfab API Key.\nYou can also leave "guest" to upload anonymously.\n(a new window will pop up when the uploading and processing is finished)',sketchfabUploadError:function(e){return"Sketchfab upload error :\n"+e},sketchfabUploadSuccess:"Upload success !\nHere is your link :",sketchfabAbort:"Abort the last upload ?",sketchfabUploadProcessing:"Processing...\nYour model will be available at :",about:"About & Help",alphaNone:"None",alphaSquare:"Square",alphaSkin:"Skin",remeshTitleMC:"Voxel remeshing (manifold tris)",remeshRemeshMC:"Remesh",remeshSmoothingMC:"Relax topology"}}),parcelRegister("1Jppb",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"背景",backgroundReset:"重設",backgroundImport:"匯入 (jpg, png...)",backgroundFill:"填充",cameraTitle:"鏡頭",cameraReset:"檢視",cameraCenter:"重設 (空白鍵)",cameraFront:"前視角 (F)",cameraLeft:"左視角 (L)",cameraTop:"俯視角 (T)",cameraMode:"模式",cameraOrbit:"軌道 (轉盤)",cameraSpherical:"球面 (軌跡球)",cameraPlane:"平面 (軌跡球)",cameraProjection:"投影",cameraPerspective:"透視角",cameraOrthographic:"等視角",cameraFov:"視野範圍",cameraPivot:"選擇軸心",fileTitle:"檔案 (匯入/匯出)",fileImportTitle:"匯入",fileAdd:"加入 (obj, sgl, ply, stl)",fileAutoMatrix:"縮放並置中",fileVertexSRGB:"sRGB 頂點色彩",fileExportSceneTitle:"匯出場景",fileExportAll:"匯出出口",fileExportSGL:"儲存 .sgl (SculptGL)",fileExportOBJ:"儲存 .obj",fileExportPLY:"儲存 .ply",fileExportSTL:"儲存 .stl",fileExportTextureTitle:null,fileExportTextureSize:null,fileExportColor:null,fileExportRoughness:null,fileExportMetalness:null,sceneTitle:"場景",sceneReset:"清除場景",sceneResetConfirm:"確認清除場景",sceneAddSphere:"加入球體",sceneAddCube:"加入立方體",sceneAddCylinder:"加入圓柱",sceneAddTorus:"加入圓環",sceneSelection:"選取項目",sceneMerge:"合併選取項目",sceneDuplicate:"刪除選擇",sceneDuplicate:null,meshTitle:"網面",meshNbVertices:"頂點 : ",meshNbFaces:"面 : ",topologyTitle:"網面結構(拓撲)",multiresTitle:"多重解析度",multiresSubdivide:"細分",multiresReverse:"反轉",multiresResolution:"解析度",multiresNoLower:"沒有更低等級的解析度。",multiresNoHigher:"沒有更高等級的解析度。",multiresDelHigher:"刪除較高等級",multiresDelLower:"刪除較低等級",multiresSelectLowest:"反轉前請先選擇最低的解析度。",multiresSelectHighest:"細分前請先選擇最高的解析度。",multiresWarnBigMesh:function(e){return"下一個細分等級會達到 "+e+" 個面。\n若你清楚你自己正在做什麼，再點擊「細分」一次。"},multiresNotReversible:"抱歉，無法反轉此網面。\n此網面不是由流形網面經過細分曲面 (loop-catmull) 而來。",remeshTitle:"立體像素網面重構",remeshRemesh:"網面重構",remeshResolution:"解析度",remeshBlock:"塊狀重構",dynamicTitle:"動態網面結構",dynamicActivated:"啟用 (無四邊形)",dynamicSubdivision:"細分",dynamicDecimation:"削減面數",dynamicLinear:"線性細分",sculptTitle:"雕刻和塗繪",sculptBrush:"筆刷",sculptInflate:"膨脹",sculptTwist:"扭轉",sculptSmooth:"平滑 (-Shift)",sculptFlatten:"抹平",sculptPinch:"捏塑",sculptCrease:"皺褶",sculptDrag:"拖拉",sculptPaint:"塗繪",sculptMasking:"遮罩 (-Ctrl)",sculptMove:"移動",sculptLocalScale:"局部縮放",sculptTransform:"變形 (E)",sculptCommon:"通用",sculptTool:"工具",sculptSymmetry:"對稱",sculptContinuous:"連續",sculptRadius:"半徑 (-X)",sculptIntensity:"強度 (-C)",sculptHardness:"硬度",sculptCulling:"薄曲面 (僅影響前面頂點)",sculptAlphaTitle:"透明色版 (Alpha)",sculptLockPositon:"鎖定位置",sculptAlphaTex:"紋理",sculptImportAlpha:"匯入 alpha 紋理 (jpg, png...)",sculptNegative:"反向 (N 或 -Alt)",sculptColor:"反照率",sculptRoughness:"粗糙度",sculptMetallic:"金屬性",sculptClay:"黏土",sculptAccumulate:"累積 (每道筆劃無限制)",sculptColorGlobal:"總體",sculptPickColor:"選擇材質或顏色 (-S)",sculptTangentialSmoothing:"僅放鬆",sculptTopologicalCheck:"網面結構檢查",sculptMoveAlongNormal:"沿法線方向移動 (N 或 -Alt)",sculptMaskingClear:"清除 (-Ctrl + 拖動)",sculptMaskingInvert:"反轉 (-Ctrl + 點擊)",sculptMaskingBlur:"模糊",sculptMaskingSharpen:"銳利化",sculptPBRTitle:"PBR 材質",sculptPaintAll:"塗繪全部",sculptExtractTitle:"提取",sculptExtractThickness:"厚度",sculptExtractAction:"提取 !",stateTitle:"記錄",stateUndo:"復原",stateRedo:"取消復原",stateMaxStack:"最大推疊",pressureTitle:"感壓繪圖板",pressureRadius:"半徑感壓",pressureIntensity:"強度感壓",renderingTitle:"圖形繪算",renderingGrid:"顯示格線",renderingSymmetryLine:"顯示鏡像線",renderingMatcap:"材質捕捉 (Matcap)",renderingCurvature:"曲率",renderingPBR:"物理式繪算(PBR)",renderingTransparency:"透明",renderingNormal:"法線著色器",renderingUV:"UV 著色器",renderingShader:"著色器",renderingMaterial:"材質",renderingImportUV:"匯入 (jpg, png...)",renderingImportMatcap:"匯入 (jpg, png...)",renderingExtra:"額外",renderingFlat:"平整面",renderingWireframe:"線框 (W)",renderingExposure:"曝光",renderingEnvironment:"環境",renderingIsolate:"隔離/顯示 (I)",renderingFilmic:"電影色調對應",contour:"輪廓",contourShow:"顯示輪廓",contourColor:"顏色",darkenUnselected:"未選取部分變暗",resolution:"解析度",matcapPearl:"珍珠",matcapClay:"黏土",matcapSkin:"膚色",matcapGreen:"綠色",matcapWhite:"白色",sketchfabTitle:"前往 Sketchfab !",sketchfabUpload:"上傳",sketchfabUploadMessage:'請輸入你的 sketchfab API 密鑰.\n你也可以不填寫留下 "guest" 進行匿名上傳。\n(當上傳中和完成時會跳出新視窗)',sketchfabUploadError:function(e){return"Sketchfab 上傳錯誤 :\n"+e},sketchfabUploadSuccess:"上傳成功 !\n這是你的連結 :",sketchfabAbort:"中止最後上傳的項目 ?",sketchfabUploadProcessing:"處理中...\n你的模型將會存放在：",about:"關於和說明",alphaNone:"無",alphaSquare:"方塊",alphaSkin:"皮膚"}}),parcelRegister("4ac3c",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"バックグラウンド",backgroundReset:"リセット",backgroundImport:"インポート  (jpg, png...)",backgroundFill:null,cameraTitle:"カメラ",cameraReset:"View",cameraCenter:null,cameraFront:null,cameraLeft:null,cameraTop:null,cameraMode:"モード",cameraOrbit:null,cameraSpherical:"球体 (Trackball)",cameraPlane:"平面 (Trackball)",cameraProjection:"タイプ",cameraPerspective:"透視投影",cameraOrthographic:"平行投影",cameraFov:"視野",cameraPivot:"ピボット選択",fileTitle:"ファイル (インポート/エクスポート)",fileImportTitle:null,fileAdd:"Add (obj, sgl, ply, stl)",fileAutoMatrix:null,fileVertexSRGB:null,fileExportSceneTitle:null,fileExportAll:null,fileExportSGL:null,fileExportOBJ:null,fileExportPLY:null,fileExportSTL:null,fileExportTextureTitle:null,fileExportTextureSize:null,fileExportColor:null,fileExportRoughness:null,fileExportMetalness:null,sceneTitle:null,sceneReset:null,sceneAddSphere:null,sceneAddCube:null,sceneAddCylinder:null,sceneAddTorus:null,sceneSelection:null,sceneMerge:null,sceneDuplicate:null,meshTitle:"メッシュ",meshNbVertices:null,meshNbFaces:null,topologyTitle:null,multiresTitle:null,multiresSubdivide:null,multiresReverse:null,multiresResolution:null,multiresNoLower:null,multiresNoHigher:null,multiresDelHigher:null,multiresDelLower:null,multiresSelectLowest:null,multiresSelectHighest:null,multiresWarnBigMesh:null,multiresNotReversible:null,remeshTitle:null,remeshRemesh:null,remeshResolution:null,remeshBlock:null,dynamicTitle:null,dynamicActivated:null,dynamicSubdivision:null,dynamicDecimation:null,dynamicLinear:null,sculptTitle:null,sculptBrush:"ブラシ",sculptInflate:"膨張",sculptTwist:"回転",sculptSmooth:"スムーズ化 (-Shift)",sculptFlatten:"フラット化",sculptPinch:"つまむ",sculptCrease:"しわ",sculptDrag:"ドラッグ",sculptPaint:"ペイント",sculptMasking:null,sculptMove:null,sculptLocalScale:null,sculptTransform:null,sculptCommon:null,sculptTool:"ツール",sculptSymmetry:"対称加工",sculptContinuous:"連続加工",sculptRadius:"半径 (-X)",sculptIntensity:"明るさ (-C)",sculptHardness:null,sculptCulling:null,sculptAlphaTitle:null,sculptLockPositon:null,sculptAlphaTex:null,sculptImportAlpha:null,sculptNegative:"ネガティブ (N or -Alt)",sculptColor:null,sculptRoughness:null,sculptMetallic:null,sculptClay:"クレイ",sculptAccumulate:null,sculptColorGlobal:null,sculptPickColor:null,sculptTangentialSmoothing:null,sculptTopologicalCheck:null,sculptMoveAlongNormal:null,sculptMaskingClear:null,sculptMaskingInvert:null,sculptMaskingBlur:null,sculptMaskingSharpen:null,sculptPBRTitle:null,sculptPaintAll:null,sculptExtractTitle:null,sculptExtractThickness:null,sculptExtractAction:null,stateTitle:"履歴",stateUndo:"アンドゥ",stateRedo:"リドゥ",stateMaxStack:null,pressureTitle:"ワコムタブレット",pressureRadius:"圧力半径？",pressureIntensity:"圧力の強さ？",renderingTitle:null,renderingGrid:null,renderingSymmetryLine:null,renderingMatcap:null,renderingCurvature:null,renderingPBR:null,renderingTransparency:"透過",renderingNormal:"ノーマル",renderingUV:null,renderingShader:"シェーダー",renderingMaterial:null,renderingImportUV:null,renderingImportMatcap:null,renderingExtra:null,renderingFlat:"フラットシェーディング",renderingWireframe:"ワイヤーフレーム (W)",renderingExposure:null,renderingEnvironment:null,renderingIsolate:null,renderingFilmic:null,contour:null,contourShow:null,contourColor:null,darkenUnselected:null,resolution:null,matcapPearl:null,matcapClay:"クレイ",matcapSkin:"スキン",matcapGreen:null,matcapWhite:null,sketchfabTitle:"Sketchfabへ移動",sketchfabUpload:"アップロード",sketchfabUploadMessage:null,sketchfabUploadError:null,sketchfabUploadSuccess:null,sketchfabAbort:null,sketchfabUploadProcessing:null,about:null,alphaNone:null,alphaSquare:null,alphaSkin:null}}),parcelRegister("et1g0",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"배경",backgroundReset:"초기화",backgroundImport:"가져오기 (jpg, png...)",backgroundFill:"화면 가득 채우기",cameraTitle:"카메라",cameraReset:"뷰",cameraCenter:"초기화 (bar)",cameraFront:"앞쪽 (F)",cameraLeft:"왼쪽 (L)",cameraTop:"위쪽 (T)",cameraMode:"조작방식",cameraOrbit:"궤도 (Turntable)",cameraSpherical:"구형 (Trackball)",cameraPlane:"평면 (Trackball)",cameraProjection:"사영법",cameraPerspective:"투시원근법",cameraOrthographic:"정사영법",cameraFov:"시야각",cameraPivot:"피봇 찍기",fileTitle:"파일 (가져오기/내보내기)",fileImportTitle:"가져오기",fileAdd:"추가 (obj, sgl, ply, stl)",fileAutoMatrix:"크기조정 및 중앙정렬",fileVertexSRGB:"sRGB 버텍스 색상",fileExportSceneTitle:"장면 내보내기",fileExportAll:"모두 내보내기",fileExportSGL:".sgl 파일로 저장하기",fileExportOBJ:".obj 파일로 저장하기",fileExportPLY:".ply 파일로 저장하기",fileExportSTL:".stl 파일로 저장하기",fileExportTextureTitle:null,fileExportTextureSize:null,fileExportColor:null,fileExportRoughness:null,fileExportMetalness:null,sceneTitle:"장면",sceneReset:"모두 없애기",sceneResetConfirm:"모두 제거 확인",sceneAddSphere:"구 추가하기",sceneAddCube:"정육면체 추가하기",sceneAddCylinder:"기둥 추가하기",sceneAddTorus:"도넛 추가하기",sceneSelection:"선택",sceneMerge:"장면 병합하기",sceneDuplicate:null,sceneDelete:"선택 항목 삭제",meshTitle:"메시",meshNbVertices:"버텍스 개수 : ",meshNbFaces:"페이스 개수 : ",topologyTitle:"토폴로지",multiresTitle:"다중 해상도",multiresSubdivide:"세분화",multiresReverse:"간소화",multiresResolution:"해상도",multiresNoLower:"더 낮은 해상도가 존재하지 않습니다.",multiresNoHigher:"더 높은 해상도가 존재하지 않습니다.",multiresDelHigher:"상위 단계 제거",multiresDelLower:"하위 단계 제거",multiresSelectLowest:"간소화 하기 전에 더 낮은 해상도를 고르세요.",multiresSelectHighest:"세분화 하기 전에 더 높은 해상도를 고르세요",multiresWarnBigMesh:function(e){return"다음 분할 단계의 면 개수는 "+e+' 개가 될 것입니다.\n지금 뭘 하려는건지 정확히 이해하고 있다면 "세분화" 버튼을 다시 누르세요.'},multiresNotReversible:"이 메시는 더이상 병합할 수 없습니다.\n이 메시는 다양체 메시상의 세분화(loop-catmull) 결과가 아닙니다.",remeshTitle:"복셀 리메싱",remeshRemesh:"리메시",remeshResolution:"해상도",remeshBlock:"각지게",dynamicTitle:"동적 토폴로지",dynamicActivated:"활성화 (사각형 유지 안함)",dynamicSubdivision:"세분화",dynamicDecimation:"간소화",dynamicLinear:"선형 세분화",sculptTitle:"스컬핑 & 페인팅",sculptBrush:"브러시",sculptInflate:"부풀리기",sculptTwist:"비틀기",sculptSmooth:"부드럽게 (-Shift)",sculptFlatten:"평평하게",sculptPinch:"꼬집기",sculptCrease:"주름내기",sculptDrag:"잡아끌기",sculptPaint:"칠하기",sculptMasking:"마스킹 (-Ctrl)",sculptMove:"잡아당기기",sculptLocalScale:"지역 스케일",sculptTransform:"변환 (E)",sculptCommon:"일반",sculptTool:"도구",sculptSymmetry:"대칭",sculptContinuous:"누적",sculptRadius:"반경 (-X)",sculptIntensity:"세기 (-C)",sculptHardness:"경도",sculptCulling:"얇은 표면 (앞쪽 면만 적용)",sculptAlphaTitle:"알파",sculptLockPositon:"위치 고정",sculptAlphaTex:"텍스쳐",sculptImportAlpha:"알파 텍스쳐 가져오기 (jpg, png...)",sculptNegative:"반전 (N 또는 -Alt)",sculptColor:"알베도",sculptRoughness:"거칠기",sculptMetallic:"금속",sculptClay:"찰흙",sculptAccumulate:"누적 (획 당으로 제한받지 않음)",sculptColorGlobal:null,sculptPickColor:"재질 / 색상 선택 (-S)",sculptTangentialSmoothing:"완화 한정",sculptTopologicalCheck:"위상 검사",sculptMoveAlongNormal:"법선 방향으로 움직이기",sculptMaskingClear:"초기화 (-Ctrl + Drag)",sculptMaskingInvert:"반전 (-Ctrl + Click)",sculptMaskingBlur:"흐리게",sculptMaskingSharpen:"선명하게",sculptPBRTitle:"PBR 재질",sculptPaintAll:"전부 칠하기",sculptExtractTitle:"추출하기",sculptExtractThickness:"두께",sculptExtractAction:"추출!",stateTitle:"히스토리",stateUndo:"실행 취소",stateRedo:"다시 실행",stateMaxStack:"최대 실행취소 횟수",pressureTitle:"필압",pressureRadius:"필압반경",pressureIntensity:"필압 세기",renderingTitle:"렌더링",renderingGrid:"그리드 보기",renderingSymmetryLine:"대칭선 보기",renderingMatcap:"매트캡",renderingCurvature:"곡률 강조",renderingPBR:"PBR",renderingTransparency:"투명도",renderingNormal:"노말 셰이더",renderingUV:"UV 셰이더",renderingShader:"셰이더",renderingMaterial:"재질",renderingImportUV:"가져오기 (jpg, png...)",renderingImportMatcap:"가져오기 (jpg, png...)",renderingExtra:"그 외",renderingFlat:"플랫 셰이딩",renderingWireframe:"와이어프레임 (W)",renderingExposure:"노출",renderingEnvironment:"환경",renderingIsolate:"하나보기/모두보기 (I)",renderingFilmic:"영화적(filmic) 톤매핑",contour:"윤곽선",contourShow:"윤곽선 보기",contourColor:"색상",darkenUnselected:"선택안된건 어둡게",resolution:"해상도",matcapPearl:"진주",matcapClay:"찰흙",matcapSkin:"피부",matcapGreen:"초록",matcapWhite:"하양",sketchfabTitle:"Sketchfab에 올리기",sketchfabUpload:"올리기",sketchfabUploadMessage:null,sketchfabUploadError:null,sketchfabUploadSuccess:null,sketchfabAbort:null,sketchfabUploadProcessing:null,about:"SculptGL 정보",alphaNone:null,alphaSquare:null,alphaSkin:null}}),parcelRegister("jUrL5",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"Фон",backgroundReset:"Сброс",backgroundImport:"Импорт (jpg, png...)",backgroundFill:"Заполнить",cameraTitle:"Камера",cameraReset:"Вид",cameraCenter:"Сброс (bar)",cameraFront:"Спереди (F)",cameraLeft:"Слева (L)",cameraTop:"Сверху (T)",cameraMode:"Режим камеры",cameraOrbit:"Орбита (Вращение)",cameraSpherical:"Сферическая (трекбол)",cameraPlane:"Плоскость (трекбол)",cameraProjection:"Проекция",cameraPerspective:"Перспективная",cameraOrthographic:"Ортогональная",cameraFov:"Угол обзора",cameraPivot:"Выбор вращения",fileTitle:"Файл",fileImportTitle:"Импорт",fileAdd:"Добавить(obj,sgl,ply,stl)",fileAutoMatrix:"Масштаб-вид",fileVertexSRGB:"Цвета вершин sRGB",fileExportSceneTitle:"Экспорт сцены",fileExportAll:"Экспорт все",fileExportSGL:"Сохранить .sgl",fileExportOBJ:"Сохранить .obj",fileExportPLY:"Сохранить .ply",fileExportSTL:"Сохранить .stl",fileExportTextureTitle:null,fileExportTextureSize:null,fileExportColor:null,fileExportRoughness:null,fileExportMetalness:null,sceneTitle:"Сцена",sceneReset:"Очистить сцену",sceneResetConfirm:"Подтвердить четкую сцену",sceneAddSphere:"Добавить сферу",sceneAddCube:"Добавить куб",sceneAddCylinder:"Добавить цилиндр",sceneAddTorus:"Добавить тор",sceneSelection:"Выбрать",sceneMerge:"Объединить",sceneDuplicate:null,sceneDelete:"Удалить выделение",meshTitle:"Сетка",meshNbVertices:"Вершины : ",meshNbFaces:"Грани : ",topologyTitle:"Топология",multiresTitle:"Детализация",multiresSubdivide:"Увеличить",multiresReverse:"Реверс",multiresResolution:"Разрешение",multiresNoLower:"Ниже уровня не существует.",multiresNoHigher:"Выше уровня не существует.",multiresDelHigher:"Удалить высокое",multiresDelLower:"Удалить низкое",multiresSelectLowest:"Выберете низкий перед реверсом.",multiresSelectHighest:"Выберете бысокий перед увеличением.",multiresWarnBigMesh:function(e){return"Следующий уровень "+e+' faces.\nЕсли вы уверены, снова нажмите на "разрешение".'},multiresNotReversible:"К сожалению это не возможно, чтобы изменить эту сетку.\nСетка не продуктивна.",remeshTitle:"Перестроить воксели",remeshRemesh:"Перестроить",remeshResolution:"Разрешение",remeshBlock:"Блоки-кубики",dynamicTitle:"Динамическая топология",dynamicActivated:"Активировать (без кубиков)",dynamicSubdivision:"Увеличить",dynamicDecimation:"Прореживание",dynamicLinear:"Линейное увеличение",sculptTitle:"Лепить и красить",sculptBrush:"3D Кисть",sculptInflate:"3D Надуть",sculptTwist:"3D Закручивание",sculptSmooth:"3D Сгладить (-Shift)",sculptFlatten:"3D Расплющить",sculptPinch:"3D Сдавить",sculptCrease:"3D Складка",sculptDrag:"3D Тянучка",sculptMove:"3D Перемещать",sculptLocalScale:"3D масштабирование",sculptPaint:"2D Кисть",sculptMasking:"2D Маска (-Ctrl)",sculptTransform:"Трансформация",sculptCommon:"Общее",sculptTool:"Инструмент",sculptSymmetry:"Симетрия",sculptContinuous:"Спрей",sculptRadius:"Размер (-X)",sculptIntensity:"Сила (-C)",sculptHardness:"Жесткость",sculptCulling:"Тонкая поверхность(передние вершины)",sculptAlphaTitle:"Альфа",sculptLockPositon:"Фиксация",sculptAlphaTex:"Текстура",sculptImportAlpha:"Импорт альфа текстуры (jpg, png...)",sculptNegative:"Негатив (N или -Alt)",sculptColor:"Палитра",sculptRoughness:"Шероховатость",sculptMetallic:"Металлический",sculptClay:"Без учета содержимого",sculptAccumulate:"Наращивать без ограничений",sculptColorGlobal:"Глобальный",sculptPickColor:"Пипетка материал (-S)",sculptTangentialSmoothing:"Сглаживание по касательной",sculptTopologicalCheck:"Проверка топологии",sculptMoveAlongNormal:"Перемещать вдоль нормали",sculptMaskingClear:"Очистить (-Ctrl + Drag)",sculptMaskingInvert:"Инверсия (-Ctrl + Click)",sculptMaskingBlur:"Сгладить",sculptMaskingSharpen:"Резко",sculptPBRTitle:"PBR материал",sculptPaintAll:"Краска",sculptExtractTitle:"Извлечь",sculptExtractThickness:"Толщина",sculptExtractAction:"Извлечь!",stateTitle:"История",stateUndo:"Назад",stateRedo:"Вперед",stateMaxStack:"Количество шагов",pressureTitle:"Планшет pressure",pressureRadius:"Нажим-размер",pressureIntensity:"Нажим-жесткость",renderingTitle:"Визуализация",renderingGrid:"Показать сетку",renderingSymmetryLine:"Линия симетрии",renderingMatcap:null,renderingCurvature:"Рельефность",renderingPBR:"PBR",renderingTransparency:"Прозрачность",renderingNormal:"Карта нормалей",renderingUV:"UV",renderingShader:"Шейдеры",renderingMaterial:"Материал",renderingImportUV:"Импорт (jpg, png...)",renderingImportMatcap:"Импорт (jpg, png...)",renderingExtra:"Дополнительно",renderingFlat:"Плоскости",renderingWireframe:"Каркас (W)",renderingExposure:"Экспозиция",renderingEnvironment:"Отражение",renderingIsolate:"Изолировать / Показать (I)",renderingFilmic:"Пленка",contour:"Контур",contourShow:"Показать контур",contourColor:"Цвет",darkenUnselected:"Затемнить невыбранное",resolution:"Разрешение",matcapPearl:"Жемчуг",matcapClay:"Глина",matcapSkin:"Кожа",matcapGreen:"Зеленый",matcapWhite:"Белый",sketchfabTitle:"В Sketchfab.com ",sketchfabUpload:"Загрузить",sketchfabUploadMessage:"Ведите API-ключ sketchfab.\nОставьте слово «guest», чтобы загрузить модель анонимно.\n(По окончании загрузки и обработки откроется новое окно)",sketchfabUploadError:function(e){return"Ошибка загрузки в Sketchfab :\n"+e},sketchfabUploadSuccess:"Загрузка выполнена !\nВаша ссылка:",sketchfabAbort:"Прервать загрузку?",sketchfabUploadProcessing:"Обработка...\nВаша модель будет доступна после:",about:"О программе",alphaNone:"Нет",alphaSquare:"Квадрат",alphaSkin:"Кожа"}}),parcelRegister("hkYaO",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"Arka plan",backgroundReset:"Temizle",backgroundImport:"İçe Aktar (jpg, png...)",backgroundFill:"Doldur",cameraTitle:"Kamera",cameraReset:"Görünüm",cameraCenter:"Temizle (boşluk)",cameraFront:"Ön (F)",cameraLeft:"Sol (L)",cameraTop:"Üst (T)",cameraMode:"Mod",cameraOrbit:"Eksen (Döner Tabla)",cameraSpherical:"Küresel (Trackball)",cameraPlane:"Düzlem (Trackball)",cameraProjection:"İz Düşüm",cameraPerspective:"Perspektif",cameraOrthographic:"Orthografik",cameraFov:"Görüş Alanı",cameraPivot:"Eksen",fileTitle:"Dosyalar (içeri/dışarı)",fileImportTitle:"İçe Aktar",fileAdd:"Aktar (obj, sgl, ply, stl)",fileAutoMatrix:"Ölçekle ve ortala",fileVertexSRGB:"sRGB verteks renk",fileExportSceneTitle:"Sahneyi Dışa Aktar",fileExportAll:"tümünü ver",fileExportSGL:"Kaydet .sgl (SculptGL)",fileExportOBJ:"Kaydet .obj",fileExportPLY:"Kaydet .ply",fileExportSTL:"Kaydet .stl",fileExportTextureTitle:null,fileExportTextureSize:null,fileExportColor:null,fileExportRoughness:null,fileExportMetalness:null,sceneTitle:"Sahne",sceneReset:"Sahneyi temizle",sceneResetConfirm:"Net sahneyi doğrulayın",sceneAddSphere:"Küre ekle",sceneAddCube:"Küp ekle",sceneAddCylinder:"Silindir ekle",sceneAddTorus:"Halka ekle",sceneSelection:"Seçim",sceneMerge:"Seçimi birleştir",sceneDuplicate:null,sceneDelete:"Seçimi sil",meshTitle:"Nesne",meshNbVertices:"Verteks : ",meshNbFaces:"Cephe : ",topologyTitle:"Topoloji",multiresTitle:"Çoklu çözünürlük",multiresSubdivide:"Böl",multiresReverse:"Ters",multiresResolution:"Çözünürlük",multiresNoLower:"Daha düşük çözünürlük yok.",multiresNoHigher:"Daha yüksek çözünürlük yok.",multiresDelHigher:"Üst çözünürlüğü sil",multiresDelLower:"Alt çözünürlüğü sil",multiresSelectLowest:"Tersine çevirmeden önce en düşük çözünürlüğü seç.",multiresSelectHighest:"Tesine çevirmeden önce en yüksek çözünürlüğü seç.",multiresWarnBigMesh:function(e){return"Sonraki çözünürlük "+e+' cepheden oluşacak.\nEğer devam etmek istiyorsanız, tekrar "böl" butonuna basın.'},multiresNotReversible:"Malesef bu nesneyi tersine çevirmek mümkün değil.\nThe mesh is not a product of a (loop-catmull) subdivision surface on a manifold mesh.",remeshTitle:"Voksel Remeshing",remeshRemesh:"Remesh",remeshResolution:"Çözünürlük",remeshBlock:"Engelle",dynamicTitle:"Dinamik Topoloji",dynamicActivated:"Aktifleştirildi (no quads)",dynamicSubdivision:"Altbölüm",dynamicDecimation:"Üstbölüm",dynamicLinear:"Doğrusal altbölüm",sculptTitle:"Oyma & Boyama",sculptBrush:"Fırça",sculptInflate:"Şişir",sculptTwist:"Bükülme",sculptSmooth:"Yumuşat (-Shift)",sculptFlatten:"Düzleştir",sculptPinch:"Çimdik",sculptCrease:"Kıvrım",sculptDrag:"Sürükle",sculptPaint:"Boya",sculptMasking:"Maskeleme (-Ctrl)",sculptMove:"Taşı",sculptLocalScale:"Yerel ölçek",sculptTransform:"Transform (E)",sculptCommon:"Genel",sculptTool:"Araç",sculptSymmetry:"Simetri",sculptContinuous:"Sürekli",sculptRadius:"Yarıçağ (-X)",sculptIntensity:"Yoğunluk (-C)",sculptHardness:"Sertlik",sculptCulling:"İnce yüzey (front vertex only)",sculptAlphaTitle:"Alfa",sculptLockPositon:"Pozisyonu kilitle",sculptAlphaTex:"Kaplama",sculptImportAlpha:"Alfa kaplama yükle (jpg, png...)",sculptNegative:"Negatif (N or -Alt)",sculptColor:"Aklık",sculptRoughness:"Pürüzlülük",sculptMetallic:"Metalik",sculptClay:"Kil",sculptAccumulate:"Biriktir (limitsiz)",sculptColorGlobal:"Evrensel",sculptPickColor:"Materyal / Renk seçici (-S)",sculptTangentialSmoothing:"Rahatlat",sculptTopologicalCheck:"Topoloji kontrol",sculptMoveAlongNormal:"Normal boyunca taşı (N or -Alt)",sculptMaskingClear:"Temizle (-Ctrl + Drag)",sculptMaskingInvert:"Tersine çevir (-Ctrl + Click)",sculptMaskingBlur:"Bulanıklaştır",sculptMaskingSharpen:"Keskinleştir",sculptPBRTitle:"PBR materyali",sculptPaintAll:"Tümünü boya",sculptExtractTitle:"Çıkar",sculptExtractThickness:"Kalınlık",sculptExtractAction:"Çıkar !",stateTitle:"Geçmiş",stateUndo:"Geri Al",stateRedo:"İleri Al",stateMaxStack:"Maksimum Yığın",pressureTitle:"Tablet pressure",pressureRadius:"Basınç çapı",pressureIntensity:"Basınç hassasiyeti",renderingTitle:"Sahneleme",renderingGrid:"Izgarayı göster",renderingSymmetryLine:"aynalama çizgisini göster",renderingMatcap:"Matcap",renderingCurvature:"Eğrilik",renderingPBR:"PBR",renderingTransparency:"Transparanlık",renderingNormal:"Normal shader",renderingUV:"UV shader",renderingShader:"Shader",renderingMaterial:"Materyal",renderingImportUV:"İçe AKtar (jpg, png...)",renderingImportMatcap:"İçe AKtar (jpg, png...)",renderingExtra:"Ekstra",renderingFlat:"Düz gölgeleme",renderingWireframe:"Tel kafes (W)",renderingExposure:"Teşir",renderingEnvironment:"Ortam",renderingIsolate:"İzole/Göster (I)",renderingFilmic:"Film Ton Eşleşmesi",contour:"Kontür",contourShow:"Kontürü göster",contourColor:"Renk",darkenUnselected:"Seçilmeyenleri koyu yap",resolution:"Çözünürlük",matcapPearl:"İnci",matcapClay:"Kil",matcapSkin:"Deri",matcapGreen:"Yeşil",matcapWhite:"Beyaz",sketchfabTitle:"Sketchfab'a git !",sketchfabUpload:"Yükle",sketchfabUploadMessage:'Lütfen sketchfab entegrasyon anahtarını giriniz.\nAnonim olarak kullanmak için "guest" olarak bırakınız.\n(İşleme ve yükleme tamamlandığında yeni bir pencere açılacak)',sketchfabUploadError:function(e){return"Sketchfab yükleme hatası :\n"+e},sketchfabUploadSuccess:"Yükleme başarılı !\nAdresiniz burada :",sketchfabAbort:"Son yüklemeyi iptal et ?",sketchfabUploadProcessing:"Hesaplanıyor...\nModeliniz şu adreste olacak :",about:"Hakkında & Yardım",alphaNone:"Hiç Biri",alphaSquare:"Kare",alphaSkin:"Deri"}}),parcelRegister("kzCWw",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"Bakgrund",backgroundReset:"Återställ",backgroundImport:"Importera (jpg, png...)",backgroundFill:"Fyll",cameraTitle:"Kamera",cameraReset:"Vy",cameraCenter:"Återställ (bar)",cameraFront:"Fram (F)",cameraLeft:"Vänster (L)",cameraTop:"Över (T)",cameraMode:"Läge",cameraOrbit:"Omloppsbana (skivtallrik)",cameraSpherical:"Sfärisk (trackball)",cameraPlane:"Plan (trackball)",cameraProjection:"Projektion",cameraPerspective:"Perspektiv",cameraOrthographic:"Ortografisk",cameraFov:"Fov",cameraPivot:"Plocka pivot",fileTitle:"Filer (import/export)",fileImportTitle:"Importera",fileAdd:"Lägg till (obj, sgl, ply, stl)",fileAutoMatrix:"Skala och centrera",fileVertexSRGB:"sRGB vertexfärg",fileExportSceneTitle:"Exportera Scen",fileExportAll:"Exportera alla",fileExportSGL:"Spara .sgl (SculptGL)",fileExportOBJ:"Spara .obj",fileExportPLY:"Spara .ply",fileExportSTL:"Spara .stl",fileExportTextureTitle:null,fileExportTextureSize:null,fileExportColor:null,fileExportRoughness:null,fileExportMetalness:null,sceneTitle:"Scen",sceneReset:"Rensa scen",sceneResetConfirm:"Bekräfta klar scen",sceneAddSphere:"Lägg till sfär",sceneAddCube:"Lägg till kub",sceneAddCylinder:"Lägg till cylinder",sceneAddTorus:"Lägg till torus",sceneSelection:"Urval",sceneMerge:"Sammanfoga urval",sceneDuplicate:null,sceneDelete:"Radera valet",meshTitle:"Mesh",meshNbVertices:"Vertex : ",meshNbFaces:"Faces : ",topologyTitle:"Topologi",multiresTitle:"Upplösningar",multiresSubdivide:"Dela upp yta",multiresReverse:"Omvänd",multiresResolution:"Upplösning",multiresNoLower:"Det finns ingen lägre upplösningsnivå.",multiresNoHigher:"Det finns ingen högre upplösningsnivå.",multiresDelHigher:"Ta bort högre",multiresDelLower:"Ta bort lägre",multiresSelectLowest:"Välj den lägsta upplösningen innan omvändning.",multiresSelectHighest:"Välj den högsta upplösningen innan uppdelning.",multiresWarnBigMesh:function(e){return"Nästa underavdelning nivå kommer att ha "+e+' faces.\nOm du vet vad du gör, klicka igen på "dela upp yta".'},multiresNotReversible:"Tyvärr, det går inte att omvända denna mesh.\nMeshen är inte en produkt av en (loop-calmull) mångfaldsytindelning.",remeshTitle:"Voxel Meshombyggnation",remeshRemesh:"Bygg om mesh",remeshResolution:"Upplösning",remeshBlock:"Kuber",dynamicTitle:"Dynamisk Topologi",dynamicActivated:"Aktiverad (inga quads)",dynamicSubdivision:"Ytindelning",dynamicDecimation:"Decimering",dynamicLinear:"Linjär ytindelning",sculptTitle:"Skulptering & Måleri",sculptBrush:"Pensel",sculptInflate:"Blås upp",sculptTwist:"Tvista",sculptSmooth:"Jämna ut (-Shift)",sculptFlatten:"Platta till",sculptPinch:"Nyp",sculptCrease:"Vecka",sculptDrag:"Dra",sculptPaint:"Måla",sculptMasking:"Maskera (-Ctrl)",sculptMove:"Flytta",sculptLocalScale:"Skala lokalt",sculptTransform:"Transformera (E)",sculptCommon:"Generellt",sculptTool:"Verktyg",sculptSymmetry:"Symmetri",sculptContinuous:"Kontinuerlig",sculptRadius:"Radie (-X)",sculptIntensity:"Intensitet (-C)",sculptHardness:"Hårdhet",sculptCulling:"Tunn yta (endast främre vertex)",sculptAlphaTitle:"Alfa",sculptLockPositon:"Lås position",sculptAlphaTex:"Textur",sculptImportAlpha:"Importera alfatextur (jpg, png...)",sculptNegative:"Negativ (N or -Alt)",sculptColor:"Albedo",sculptRoughness:"Ytjämnhet",sculptMetallic:"Metallisk",sculptClay:"Lera",sculptAccumulate:"Ackumulera (ingen gräns per strykning)",sculptColorGlobal:"Global",sculptPickColor:"Material / Färgvälgare (-S)",sculptTangentialSmoothing:"Tangentiell utjämning",sculptTopologicalCheck:"Topologisk check",sculptMoveAlongNormal:"Flytta längsmed normal (N or -Alt)",sculptMaskingClear:"Rensa (-Ctrl + Drag)",sculptMaskingInvert:"Invertera (-Ctrl + Click)",sculptMaskingBlur:"Gör suddig",sculptMaskingSharpen:"Gör skarp",sculptPBRTitle:"PBR-material",sculptPaintAll:"Måla allt",sculptExtractTitle:"Extrahera",sculptExtractThickness:"Tjocklek",sculptExtractAction:"Extrahera!",stateTitle:"Historia",stateUndo:"Ångra",stateRedo:"Gör om",stateMaxStack:"Ågra antal steg",pressureTitle:"pressureplatta",pressureRadius:"Tryckradie",pressureIntensity:"Tryckintensitet",renderingTitle:"Rendering",renderingGrid:"Visa rutnät",renderingSymmetryLine:"Visa speglingslinje",renderingMatcap:"MatCap",renderingCurvature:"Kurvatur",renderingPBR:"PBR",renderingTransparency:"Genomskinlighet",renderingNormal:"Normal shader",renderingUV:"UV-shader",renderingShader:"Shader",renderingMaterial:"Material",renderingImportUV:"Importera (jpg, png...)",renderingImportMatcap:"Importera (jpg, png...)",renderingExtra:"Extra",renderingFlat:"Platt shading",renderingWireframe:"Wireframe (W)",renderingExposure:"Exponering",renderingEnvironment:"Miljö",renderingIsolate:"Isolera/Visa (I)",renderingFilmic:"Filmiska färgtoner",contour:"Kontur",contourShow:"Visa kontur",contourColor:"Färg",darkenUnselected:"Skym ej valda",resolution:"Upplösning",matcapPearl:"Pärla",matcapClay:"Lera",matcapSkin:"Hud",matcapGreen:"Grön",matcapWhite:"Vit",sketchfabTitle:"Gå till Sketchfab!",sketchfabUpload:"Ladda upp",sketchfabUploadMessage:'Vänligen fyll i din sketchfab API-nyckel.\nDu kan även ange "guest" för att ladda upp anonymt.\n(ett nytt fönster kommer att öppnas när uppladdning och bearbetning är klar)',sketchfabUploadError:function(e){return"Sketchfab uppladdningsfel:\n"+e},sketchfabUploadSuccess:"Uppladdning lyckades!\nHär är din länk:",sketchfabAbort:"Avbryta senaste uppladdningen?",sketchfabUploadProcessing:"Bearbetar...\nDin modell kommer bli tillgänglig här:",about:"Om & Hjälp",alphaNone:"Ingen",alphaSquare:"Fyrkant",alphaSkin:"Hud"}}),parcelRegister("fx1YZ",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"Fond d'écran",backgroundReset:"Réinitialiser",backgroundImport:"Importer (jpg, png...)",backgroundFill:"Remplir",cameraTitle:"Caméra",cameraReset:"Vue",cameraCenter:"Reset (bar)",cameraFront:"De face (F)",cameraLeft:"De gauche (L)",cameraTop:"De haut (T)",cameraMode:"Mode",cameraOrbit:"Orbite (Turntable)",cameraSpherical:"Spherique (Trackball)",cameraPlane:"Planaire (Trackball)",cameraProjection:"Projection",cameraPerspective:"Perspective",cameraOrthographic:"Orthographique",cameraFov:"Champs de vision",cameraPivot:"Point de pivot",fileTitle:"Fichiers (importer/exporter)",fileImportTitle:"Importer",fileAdd:"Ajouter (obj, sgl, ply, stl)",fileAutoMatrix:"Mise a l'échelle et centrage",fileVertexSRGB:"Couleur de vertex en sRGB",fileExportSceneTitle:"Exporter Scene",fileExportAll:"Tout exporter",fileExportSGL:"Sauver .sgl (SculptGL)",fileExportOBJ:"Sauver .obj",fileExportPLY:"Sauver .ply",fileExportSTL:"Sauver .stl",fileExportTextureTitle:null,fileExportTextureSize:null,fileExportColor:null,fileExportRoughness:null,fileExportMetalness:null,sceneTitle:"Scène",sceneReset:"Réinitialiser scène",sceneResetConfirm:"Confirmer réinitialiser la scène?",sceneAddSphere:"Ajouter sphere",sceneAddCube:"Ajouter cube",sceneAddCylinder:"Ajouter cylindre",sceneAddTorus:"Ajouter tore",sceneSelection:"Sélection",sceneMerge:"Fusionner selection",sceneDuplicate:null,sceneDelete:"Supprimer la sélection",meshTitle:"Mesh",meshNbVertices:"Vertex : ",meshNbFaces:"Faces : ",topologyTitle:"Topologie",multiresTitle:"Multirésolution",multiresSubdivide:"Subdiviser",multiresReverse:"Inverser",multiresResolution:"Résolution",multiresNoLower:"Il n'y a pas de niveau de résolution inférieur.",multiresNoHigher:"Il n'y a pas de niveau de résolution plus élevé.",multiresDelHigher:"Suppression supérieur",multiresDelLower:"Suppression inférieur",multiresSelectLowest:"Sélectionnez la résolution la plus basse avant d'inverser.",multiresSelectHighest:"Sélectionnez la résolution la plus élevée avant de subdiviser.",multiresWarnBigMesh:function(e){return"Le prochain niveau de subdivision atteindra "+e+' faces.\nSi vous savez ce que vous faites, cliquez de nouveau sur "subdiviser".'},multiresNotReversible:"Désolé, il n'est pas possible d'inverser ce maillage.\nLe mesh n'est pas un produit d'une surface de subdivision (loop-catmull) provenant manifold.",remeshTitle:"Remaillage volumétrique",remeshRemesh:"Remaillage",remeshResolution:"Résolution",remeshBlock:"Bloc",dynamicTitle:"Topologie dynamique",dynamicActivated:"Activaté (pas quads)",dynamicSubdivision:"Subdivision",dynamicDecimation:"Décimation",dynamicLinear:"Subdivision linéaire",sculptTitle:"Sculpture & Painture",sculptBrush:"Brosse",sculptInflate:"Gonfler",sculptTwist:"Tordre",sculptSmooth:"Lisser (-Shift)",sculptFlatten:"Aplatir",sculptPinch:"Pincer",sculptCrease:"Plier",sculptDrag:"Tirer",sculptPaint:"Peindre",sculptMasking:"Masquer (-Ctrl)",sculptMove:"Bouger",sculptLocalScale:"Mise à l'échelle locale",sculptTransform:"Transformer (E)",sculptCommon:"Commun",sculptTool:"Outil",sculptSymmetry:"Symétrie",sculptContinuous:"Continu",sculptRadius:"Rayon (-X)",sculptIntensity:"Intensité (-C)",sculptHardness:"Dureté",sculptCulling:"Surface fine (vertex de face uniquement)",sculptAlphaTitle:"Alpha",sculptLockPositon:"Bloquer position",sculptAlphaTex:"Texture",sculptImportAlpha:"Importer texture alpha (jpg, png...)",sculptNegative:"Négatif (N ou -Alt)",sculptColor:"Albedo",sculptRoughness:"Rugosité",sculptMetallic:"Métallique",sculptClay:"Argile",sculptAccumulate:"Accumuler effet",sculptColorGlobal:"Global",sculptPickColor:"Matériau / selection de couleur (-S)",sculptTangentialSmoothing:"Relaxer uniquement",sculptTopologicalCheck:"Vérification topologique",sculptMoveAlongNormal:"Extruder suivant la normale (N ou -Alt)",sculptMaskingClear:"Reset (-Ctrl + Drag)",sculptMaskingInvert:"Inverser (-Ctrl + Click)",sculptMaskingBlur:"Brouiller",sculptMaskingSharpen:"Aiguiser",sculptPBRTitle:"Matériaux physiques (PBR)",sculptPaintAll:"Peindre tout",sculptExtractTitle:"Extraire",sculptExtractThickness:"Epaisseur",sculptExtractAction:"Extraire !",stateTitle:"Historique",stateUndo:"Annuler",stateRedo:"Refaire",stateMaxStack:"Nombre maximale d'action",pressureTitle:"Pression de la tablette",pressureRadius:"Pression sur le rayon",pressureIntensity:"Pression sur l'intensité",renderingTitle:"Rendu",renderingGrid:"Afficher grille",renderingSymmetryLine:"Afficher ligne de symétrie",renderingMatcap:"Matcap",renderingCurvature:"Courbure",renderingPBR:"PBR",renderingTransparency:"Transparence",renderingNormal:"Normal shader",renderingUV:"UV shader",renderingShader:"Shader",renderingMaterial:"Matériau",renderingImportUV:"Importer (jpg, png...)",renderingImportMatcap:"Importer (jpg, png...)",renderingExtra:"Extra",renderingFlat:"Ombrage plat",renderingWireframe:"Fil de fer (W)",renderingExposure:"Exposition",renderingEnvironment:"Environment",renderingIsolate:"Isoler/Afficher (I)",renderingFilmic:"Tonemapping filmique",contour:"Contour",contourShow:"Afficher les contours",contourColor:"Couleur",darkenUnselected:"Assombrir non séléctioné",resolution:"Résolution",matcapPearl:"Perle",matcapClay:"Argile",matcapSkin:"Peau",matcapGreen:"Vert",matcapWhite:"Blanc",sketchfabTitle:"Vers Sketchfab !",sketchfabUpload:"Uploader",sketchfabUploadMessage:"Entrez votre clé d'API sketchfab.\n",sketchfabUploadError:function(e){return"Sketchfab upload error :\n"+e},sketchfabUploadSuccess:"Téléchargement fini !\nVoici le lien :",sketchfabAbort:"Annuler le dernier téléchargement ?",sketchfabUploadProcessing:"En traitement...\nLe modèle sera disponible sur :",about:"A propos & aide",alphaNone:"Vide",alphaSquare:"Carré",alphaSkin:"Peau",remeshTitleMC:"Remaillage surfacique (manifold tris)",remeshRemeshMC:"Remaillage",remeshSmoothingMC:"Lisser topologie"}}),parcelRegister("jjlqn",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"Hintergrund",backgroundReset:"Zurücksetzen",backgroundImport:"Importieren (jpg, png...)",backgroundFill:"Füllen",cameraTitle:"Kamera",cameraReset:"Ansicht",cameraCenter:"Reset (space)",cameraFront:"Front (F)",cameraLeft:"Links (L)",cameraTop:"Oben (T)",cameraMode:"Modus",cameraOrbit:"Orbit (Drehscheibe)",cameraSpherical:"Sphärisch (Rollkugel)",cameraPlane:"Ebene (Rollkugel)",cameraProjection:"Projektion",cameraPerspective:"Perspektivisch",cameraOrthographic:"Orthographisch",cameraFov:"Sichtfeld (fov)",cameraPivot:"Pivot auswählen",fileTitle:"Datei (import/export)",fileImportTitle:"Importieren",fileAdd:"Hinzufügen (obj, sgl, ply, stl)",fileAutoMatrix:"Skalieren und zentrieren",fileVertexSRGB:"Vertexfarbe sRGB",fileExportSceneTitle:"Exportieren",fileExportAll:"Alles Exportieren",fileExportSGL:"Speichern .sgl (SculptGL)",fileExportOBJ:"Speichern .obj",fileExportPLY:"Speichern .ply",fileExportSTL:"Speichern .stl",fileExportTextureTitle:"Texturen exportieren",fileExportTextureSize:"Größe",fileExportColor:"Farben speichern",fileExportRoughness:"Rauheit speichern",fileExportMetalness:"Metallisches speichern",sceneTitle:"Szene",sceneReset:"Szene löschen",sceneResetConfirm:"Bestätige das Löschen der aktuellen Szene",sceneAddSphere:"Kugel hinzufügen",sceneAddCube:"Würfel hinzufügen",sceneAddCylinder:"Zylinder hinzufügen",sceneAddTorus:"Torus hinzufügen",sceneSelection:"Auswahl",sceneMerge:"Auswahl zusammenführen",sceneDuplicate:"Auswahl kopieren",sceneDelete:"Auswahl löschen",meshTitle:"Mesh",meshNbVertices:"Vertex : ",meshNbFaces:"Faces : ",topologyTitle:"Topologie",multiresTitle:"Mehrfachauflösung",multiresSubdivide:"Aufteilen",multiresReverse:"Umkehren",multiresResolution:"Auflösung",multiresNoLower:"Es gibt keine kleinere Auflösung.",multiresNoHigher:"Es gibt keine höhere Auflösung.",multiresDelHigher:"Höhere löschen",multiresDelLower:"Niedrigere löschen",multiresSelectLowest:"Wählen Sie vor dem Umkehren die kleinste Auflösung aus.",multiresSelectHighest:"Wählen Sie vor dem Umkehren die höchste Auflösung aus.",multiresWarnBigMesh:function(e){return"Die nächste Unterteilungsebene wird "+e+' Flächen erreichen\nWenn Sie wissen, was Sie tun, dann klicken Sie nocheinmal auf "umkehren".'},multiresNotReversible:"Es ist leider nicht möglich dieses Netz umzukehren.\nDas Netz ist kein Produkt einer (loop/catmull) Unterteilungsfläche auf eines mannigfaltigen Netzes",remeshTitle:"Voxel remeshing (Vierecke)",remeshRemesh:"Remesh",remeshResolution:"Auflösung",remeshBlock:"Block",dynamicTitle:"Dynamische Topologie",dynamicActivated:"Aktiviert (ohne Vierecke)",dynamicSubdivision:"Aufteilung",dynamicDecimation:"Dezimierung",dynamicLinear:"Lineare Aufteilung",sculptTitle:"Modellieren & Bemalen",sculptBrush:"Pinsel",sculptInflate:"Aufblasen",sculptTwist:"Verdrehen",sculptSmooth:"Glätten (-Shift)",sculptFlatten:"Ebnen",sculptPinch:"Kneifen",sculptCrease:"Falten",sculptDrag:"Ziehen",sculptPaint:"Malen",sculptMasking:"Maskieren (-Strg)",sculptMove:"Bewegen",sculptLocalScale:"Lokales Skalieren",sculptTransform:"Transformieren (E)",sculptCommon:"Allgemein",sculptTool:"Werkzeuge",sculptSymmetry:"Symmetrie",sculptContinuous:"Kontinuierlich",sculptRadius:"Radius (-X)",sculptIntensity:"Intensität (-C)",sculptHardness:"Härte",sculptCulling:"Dünne Oberfläche (nur vorderer vertex)",sculptAlphaTitle:"Alpha",sculptLockPositon:"Verriegelungsposition",sculptAlphaTex:"Textur",sculptImportAlpha:"Alpha tex importieren(jpg, png...)",sculptNegative:"Negativ (N or -Alt)",sculptColor:"Albedo",sculptRoughness:"Rauheit",sculptMetallic:"Metallisches",sculptClay:"Lehm",sculptAccumulate:"Akkumulieren (Kein Limit pro Anschlag)",sculptColorGlobal:"Global",sculptPickColor:"Material / Farb Auswahl (-S)",sculptTangentialSmoothing:"Tangentiale Glättung",sculptTopologicalCheck:"Topologischer Check",sculptMoveAlongNormal:"Normal weiterlaufen (N or -Alt)",sculptMaskingClear:"Löschen (-Ctrl + Drag)",sculptMaskingInvert:"Invertieren (-Ctrl + Click)",sculptMaskingBlur:"Verwischen",sculptMaskingSharpen:"Schärfen",sculptPBRTitle:"PBR Materialen",sculptPaintAll:"Alles Anmalen",sculptExtractTitle:"Extrahieren",sculptExtractThickness:"Dicke",sculptExtractAction:"Extrahieren !",stateTitle:"Verlauf",stateUndo:"Rückgängig",stateRedo:"Wiederholen",stateMaxStack:"Max. Schritte",pressureTitle:"Tablet Druck",pressureRadius:"Druckradius",pressureIntensity:"Druckintensität",renderingTitle:"Rendering",renderingGrid:"Gitter anzeigen",renderingSymmetryLine:"Spiegellinie anzeigen",renderingMatcap:"Matcap",renderingCurvature:"Krümmung",renderingPBR:"PBR",renderingTransparency:"Transparenz",renderingNormal:"Normale Shader",renderingUV:"UV shader",renderingShader:"Shader",renderingMaterial:"Material",renderingImportUV:"Importieren (jpg, png...)",renderingImportMatcap:"Importieren (jpg, png...)",renderingExtra:"Extra",renderingFlat:"Flaches Schattieren",renderingWireframe:"Drahtgitter (W)",renderingExposure:"Belichtung",renderingEnvironment:"Umgebung",renderingIsolate:"Isoliert/Zeige (I)",renderingFilmic:"Filmische Tonzuordnung",contour:"Kontur",contourShow:"Kontur anzeigen",contourColor:"Farbe",darkenUnselected:"Nicht markiertes abdunkeln",resolution:"Auflösung",matcapPearl:"Perle",matcapClay:"Ton",matcapSkin:"Haut",matcapGreen:"Grün",matcapWhite:"Weiß",sketchfabTitle:"Hier gehts zu Sketchfab !",sketchfabUpload:"Hochladen",sketchfabUploadMessage:'Please enter your sketchfab API Key.\nYou can also leave "guest" to upload anonymously.\n(a new window will pop up when the uploading and processing is finished)',sketchfabUploadError:function(e){return"Sketchfab upload error :\n"+e},sketchfabUploadSuccess:"Upload success !\nHere is your link :",sketchfabAbort:"Abort the last upload ?",sketchfabUploadProcessing:"Processing...\nYour model will be available at :",about:"Über & Hilfe (Englisch)",alphaNone:"None",alphaSquare:"Würfel",alphaSkin:"Haut",remeshTitleMC:"Voxel remeshing (mannigfaltige Dreiecke)",remeshRemeshMC:"Remesh",remeshSmoothingMC:"Topologie entspannen"}}),parcelRegister("bbgYB",function(e,t){$parcel$export(e.exports,"default",()=>r);var r={backgroundTitle:"Sfondo",backgroundReset:"Resetta",backgroundImport:"Importa (jpg, png...)",backgroundFill:"Riempi",cameraTitle:"Camera",cameraReset:"Vista",cameraCenter:"Resetta (bar)",cameraFront:"Fronte (F)",cameraLeft:"Sinistra (L)",cameraTop:"Sopra (T)",cameraMode:"Modalitá",cameraOrbit:"Orbita (Ruota intorno)",cameraSpherical:"Sferica (Trackball)",cameraPlane:"Planare (Trackball)",cameraProjection:"Proiezione",cameraPerspective:"Prospettiva",cameraOrthographic:"Ortografica",cameraFov:"Fov",cameraPivot:"Seleziona pivot",fileTitle:"Files (importa/esporta)",fileImportTitle:"Importa",fileAdd:"Aggiungi (obj, sgl, ply, stl)",fileAutoMatrix:"Scala e centra",fileVertexSRGB:"sRGB vertex color",fileExportSceneTitle:"Esporta Scena",fileExportAll:"Exporta tutto",fileExportSGL:"Salva .sgl (SculptGL)",fileExportOBJ:"Salva .obj",fileExportPLY:"Salva .ply",fileExportSTL:"Salva .stl",fileExportTextureTitle:"Esporta textures",fileExportTextureSize:"Dimensione",fileExportColor:"Salva diffuse",fileExportRoughness:"Salva roughness",fileExportMetalness:"Salva metalness",sceneTitle:"Scena",sceneReset:"Pulisci scena",sceneResetConfirm:"Conferma pulitura scena",sceneAddSphere:"Aggiungi sfera",sceneAddCube:"Aggiungi cubo",sceneAddCylinder:"Aggiungi cilindro",sceneAddTorus:"Aggiungi toroide",sceneSelection:"Selezione",sceneMerge:"Unisci selezione",sceneDuplicate:"Copia selezione",sceneDelete:"Elimina selezione",meshTitle:"Mesh",meshNbVertices:"Vertex : ",meshNbFaces:"Faces : ",topologyTitle:"Topologia",multiresTitle:"Multirisoluzione",multiresSubdivide:"Suddivisione",multiresReverse:"Invertire",multiresResolution:"Risoluzione",multiresNoLower:"Non esiste un livello di risoluzione inferiore.",multiresNoHigher:"Non esiste un livello di risoluzione più alto.",multiresDelHigher:"Elimina superiore",multiresDelLower:"Elimina inferiore",multiresSelectLowest:"Selezionare la risoluzione più bassa prima di invertire.",multiresSelectHighest:"Seleziona la risoluzione più alta prima di suddividere.",multiresWarnBigMesh:function(e){return"Il livello di suddivisione successivo raggiungerà "+e+' facce.\nSe sai cosa stai facendo, clicca di nuovo su "Suddividi".'},multiresNotReversible:"Spiacenti, non è possibile invertire questa mesh.\nLa mesh non è un prodotto di una superficie di suddivisione (loop-catmull) su una mesh collettore.",remeshTitle:"Voxel remeshing (quads)",remeshRemesh:"Remesh",remeshResolution:"Risolutione",remeshBlock:"Blocca",dynamicTitle:"Topologia Dinamica",dynamicActivated:"Attivata (no quads)",dynamicSubdivision:"Suddivisione",dynamicDecimation:"Decimazione",dynamicLinear:"Suddivisione Lineare",sculptTitle:"Scalpisci & Dipingi",sculptBrush:"Spazzola",sculptInflate:"Gonfia",sculptTwist:"Torci",sculptSmooth:"Ammorbidisci (-Shift)",sculptFlatten:"Appiattisci",sculptPinch:"Pizzica",sculptCrease:"Piega",sculptDrag:"Trascina",sculptPaint:"Dipingi",sculptMasking:"Maschera (-Ctrl)",sculptMove:"Muovi",sculptLocalScale:"Scala Locale",sculptTransform:"Trasformazioni (E)",sculptCommon:"Comune",sculptTool:"Strumento",sculptSymmetry:"Simmetria",sculptContinuous:"Continua",sculptRadius:"Raggio (-X)",sculptIntensity:"Intensità (-C)",sculptHardness:"Durezza",sculptCulling:"Superficie sottile (solo vertici frontali)",sculptAlphaTitle:"Alpha",sculptLockPositon:"Blocca posizione",sculptAlphaTex:"Texture",sculptImportAlpha:"Importa alpha tex (jpg, png...)",sculptNegative:"Negativo (N or -Alt)",sculptColor:"Albedo",sculptRoughness:"Rugosità",sculptMetallic:"Metallico",sculptClay:"Clay",sculptAccumulate:"Accumulazione (no limit per stroke)",sculptColorGlobal:"Globale",sculptPickColor:"Materiale / Color picker (-S)",sculptTangentialSmoothing:"Solo Relax",sculptTopologicalCheck:"Controllo Topologia",sculptMoveAlongNormal:"Muovi lungo la normale (N o -Alt)",sculptMaskingClear:"Pulisci (-Ctrl + Drag)",sculptMaskingInvert:"Inverti (-Ctrl + Click)",sculptMaskingBlur:"Sfoca",sculptMaskingSharpen:"Nitidezza",sculptPBRTitle:"Materiali PBR",sculptPaintAll:"Dipingi tutto",sculptExtractTitle:"Estrazione",sculptExtractThickness:"Assottigliamento",sculptExtractAction:"Estrai !",stateTitle:"Story",stateUndo:"Indietro",stateRedo:"Avanti",stateMaxStack:"Pila massima",pressureTitle:"Pressione tavoletta",pressureRadius:"Raggio pressione",pressureIntensity:"Intensità pressione",renderingTitle:"Rendering",renderingGrid:"Vedi Griglia",renderingSymmetryLine:"Vedi linea di specchiatura",renderingMatcap:"Matcap",renderingCurvature:"Curvature",renderingPBR:"PBR",renderingTransparency:"Trasparenza",renderingNormal:"Normal shader",renderingUV:"UV shader",renderingShader:"Shader",renderingMaterial:"Materiale",renderingImportUV:"Importa (jpg, png...)",renderingImportMatcap:"Importa (jpg, png...)",renderingExtra:"Extra",renderingFlat:"Shading piatto",renderingWireframe:"Wireframe (W)",renderingExposure:"Esposizione",renderingEnvironment:"Ambiente",renderingIsolate:"Isola/Vedi (I)",renderingFilmic:"Coloritura tipo Film",contour:"Contorno",contourShow:"Vedi contorno",contourColor:"Colore",darkenUnselected:"Scurisci i non selezionati",resolution:"Risolutione",matcapPearl:"Perla",matcapClay:"Argilla",matcapSkin:"Pelle",matcapGreen:"Verde",matcapWhite:"Bianco",sketchfabTitle:"Vai su Sketchfab !",sketchfabUpload:"Upload",sketchfabUploadMessage:'Inserisci la tua chiave API di sketchfab.\nPuoi anche lasciare "guest" per caricare in modo anonimo.\n(verrà visualizzata una nuova finestra al termine del caricamento e dell\'elaborazione)',sketchfabUploadError:function(e){return"Sketchfab errore upload :\n"+e},sketchfabUploadSuccess:"Caricato con successo !\nEcco il tuo link :",sketchfabAbort:"Annulla l'ultimo caricamento?",sketchfabUploadProcessing:"Processing...\nIl tuo modello sarà disponibile su :",about:"Informazioni & Aiuto",alphaNone:"Nessuno",alphaSquare:"Quadrata",alphaSkin:"Pelle",remeshTitleMC:"Voxel remeshing (manifold tris)",remeshRemeshMC:"Remesh",remeshSmoothingMC:"Relax topology"}}),window.Map||(window.Map=function(){this.map={}},window.Map.prototype={set:function(e,t){this.map[e]=t},get:function(e){return this.map[e]}}),!Float32Array.prototype.slice){var $ca74c9a4e0af1b5d$var$slicePolyfill=function(e,t){return new this.constructor(this.subarray(e,t))};Int8Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Uint8Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Uint8ClampedArray.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Int16Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Uint16Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Int32Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Uint32Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Float32Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill,Float64Array.prototype.slice=$ca74c9a4e0af1b5d$var$slicePolyfill}String.prototype.endsWith||(String.prototype.endsWith=function(e){return this.slice(-e.length)===e}),String.prototype.startsWith||(String.prototype.startsWith=function(e){return this.slice(0,e.length)===e});for(var $ca74c9a4e0af1b5d$var$vendors=["moz","webkit"],$ca74c9a4e0af1b5d$var$x=0;$ca74c9a4e0af1b5d$var$x<$ca74c9a4e0af1b5d$var$vendors.length&&!window.requestAnimationFrame;++$ca74c9a4e0af1b5d$var$x)window.requestAnimationFrame=window[$ca74c9a4e0af1b5d$var$vendors[$ca74c9a4e0af1b5d$var$x]+"RequestAnimationFrame"];window.requestAnimationFrame||window.alert("browser is too old. Probably no webgl there anyway");var $eIStk=parcelRequire("eIStk"),$cebfe6726e901212$exports={};!/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */function(e,t,r,i){var a,s=["","webkit","Moz","MS","ms","o"],n=t.createElement("div"),o="function",l=Math.round,u=Math.abs,h=Date.now;function c(e,t,r){return setTimeout(v(e,r),t)}function d(e,t,r){return!!Array.isArray(e)&&(g(e,r[t],r),!0)}function g(e,t,r){var a;if(e){if(e.forEach)e.forEach(t,r);else if(e.length!==i)for(a=0;a<e.length;)t.call(r,e[a],a,e),a++;else for(a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}}function p(t,r,i){var a="DEPRECATED METHOD: "+r+"\n"+i+" AT \n";return function(){var r=Error("get-stack-trace"),i=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,a,i),t.apply(this,arguments)}}a="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var a=arguments[r];if(a!==i&&null!==a)for(var s in a)a.hasOwnProperty(s)&&(t[s]=a[s])}return t}:Object.assign;var m=p(function(e,t,r){for(var a=Object.keys(t),s=0;s<a.length;)(!r||r&&e[a[s]]===i)&&(e[a[s]]=t[a[s]]),s++;return e},"extend","Use `assign`."),f=p(function(e,t){return m(e,t,!0)},"merge","Use `assign`.");function _(e,t,r){var i,s=t.prototype;(i=e.prototype=Object.create(s)).constructor=e,i._super=s,r&&a(i,r)}function v(e,t){return function(){return e.apply(t,arguments)}}function T(e,t){return typeof e==o?e.apply(t&&t[0]||i,t):e}function M(e,t){return e===i?t:e}function y(e,t,r){g(x(t),function(t){e.addEventListener(t,r,!1)})}function b(e,t,r){g(x(t),function(t){e.removeEventListener(t,r,!1)})}function A(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function S(e,t){return e.indexOf(t)>-1}function x(e){return e.trim().split(/\s+/g)}function R(e,t,r){if(e.indexOf&&!r)return e.indexOf(t);for(var i=0;i<e.length;){if(r&&e[i][r]==t||!r&&e[i]===t)return i;i++}return -1}function E(e){return Array.prototype.slice.call(e,0)}function C(e,t,r){for(var i=[],a=[],s=0;s<e.length;){var n=t?e[s][t]:e[s];0>R(a,n)&&i.push(e[s]),a[s]=n,s++}return r&&(i=t?i.sort(function(e,r){return e[t]>r[t]}):i.sort()),i}function w(e,t){for(var r,a,n=t[0].toUpperCase()+t.slice(1),o=0;o<s.length;){if((a=(r=s[o])?r+n:t)in e)return a;o++}return i}var F=1;function I(){return F++}function D(t){var r=t.ownerDocument||t;return r.defaultView||r.parentWindow||e}var V=/mobile|tablet|ip(ad|hone|od)|android/i,N="ontouchstart"in e,k=w(e,"PointerEvent")!==i,P=N&&V.test(navigator.userAgent),L="touch",U="pen",B="mouse",O="kinect",G=25,z=1,X=2,W=4,Y=8,H=1,j=2,q=4,K=8,Z=16,Q=6,J=24,$=30,ee=["x","y"],et=["clientX","clientY"];function er(e,t){var r=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){T(e.options.enable,[e])&&r.handler(t)},this.init()}function ei(e){var t;return new(t=e.options.inputClass||(k?eS:P?eD:N?eP:eT))(e,ea)}function ea(e,t,r){var i=r.pointers.length,a=r.changedPointers.length,s=t&z&&i-a==0,n=t&(W|Y)&&i-a==0;r.isFirst=!!s,r.isFinal=!!n,s&&(e.session={}),r.eventType=t,es(e,r),e.emit("hammer.input",r),e.recognize(r),e.session.prevInput=r}function es(e,t){var r=e.session,i=t.pointers,a=i.length;r.firstInput||(r.firstInput=el(t)),a>1&&!r.firstMultiple?r.firstMultiple=el(t):1===a&&(r.firstMultiple=!1);var s=r.firstInput,n=r.firstMultiple,o=n?n.center:s.center,l=t.center=eu(i);t.timeStamp=h(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=eg(o,l),t.distance=ed(o,l),en(r,t),t.offsetDirection=ec(t.deltaX,t.deltaY);var c=eh(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=u(c.x)>u(c.y)?c.x:c.y,t.scale=n?em(n.pointers,i):1,t.rotation=n?ep(n.pointers,i):0,t.maxPointers=r.prevInput?t.pointers.length>r.prevInput.maxPointers?t.pointers.length:r.prevInput.maxPointers:t.pointers.length,eo(r,t);var d=e.element;A(t.srcEvent.target,d)&&(d=t.srcEvent.target),t.target=d}function en(e,t){var r=t.center,i=e.offsetDelta||{},a=e.prevDelta||{},s=e.prevInput||{};(t.eventType===z||s.eventType===W)&&(a=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=e.offsetDelta={x:r.x,y:r.y}),t.deltaX=a.x+(r.x-i.x),t.deltaY=a.y+(r.y-i.y)}function eo(e,t){var r,a,s,n,o=e.lastInterval||t,l=t.timeStamp-o.timeStamp;if(t.eventType!=Y&&(l>G||o.velocity===i)){var h=t.deltaX-o.deltaX,c=t.deltaY-o.deltaY,d=eh(l,h,c);a=d.x,s=d.y,r=u(d.x)>u(d.y)?d.x:d.y,n=ec(h,c),e.lastInterval=t}else r=o.velocity,a=o.velocityX,s=o.velocityY,n=o.direction;t.velocity=r,t.velocityX=a,t.velocityY=s,t.direction=n}function el(e){for(var t=[],r=0;r<e.pointers.length;)t[r]={clientX:l(e.pointers[r].clientX),clientY:l(e.pointers[r].clientY)},r++;return{timeStamp:h(),pointers:t,center:eu(t),deltaX:e.deltaX,deltaY:e.deltaY}}function eu(e){var t=e.length;if(1===t)return{x:l(e[0].clientX),y:l(e[0].clientY)};for(var r=0,i=0,a=0;a<t;)r+=e[a].clientX,i+=e[a].clientY,a++;return{x:l(r/t),y:l(i/t)}}function eh(e,t,r){return{x:t/e||0,y:r/e||0}}function ec(e,t){return e===t?H:u(e)>=u(t)?e<0?j:q:t<0?K:Z}function ed(e,t,r){r||(r=ee);var i=t[r[0]]-e[r[0]],a=t[r[1]]-e[r[1]];return Math.sqrt(i*i+a*a)}function eg(e,t,r){r||(r=ee);var i=t[r[0]]-e[r[0]];return 180*Math.atan2(t[r[1]]-e[r[1]],i)/Math.PI}function ep(e,t){return eg(t[1],t[0],et)+eg(e[1],e[0],et)}function em(e,t){return ed(t[0],t[1],et)/ed(e[0],e[1],et)}er.prototype={handler:function(){},init:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(D(this.element),this.evWin,this.domHandler)}};var ef={mousedown:z,mousemove:X,mouseup:W},e_="mousedown",ev="mousemove mouseup";function eT(){this.evEl=e_,this.evWin=ev,this.pressed=!1,er.apply(this,arguments)}_(eT,er,{handler:function(e){var t=ef[e.type];t&z&&0===e.button&&(this.pressed=!0),t&X&&1!==e.which&&(t=W),this.pressed&&(t&W&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:B,srcEvent:e}))}});var eM={pointerdown:z,pointermove:X,pointerup:W,pointercancel:Y,pointerout:Y},ey={2:L,3:U,4:B,5:O},eb="pointerdown",eA="pointermove pointerup pointercancel";function eS(){this.evEl=eb,this.evWin=eA,er.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(eb="MSPointerDown",eA="MSPointerMove MSPointerUp MSPointerCancel"),_(eS,er,{handler:function(e){var t=this.store,r=!1,i=eM[e.type.toLowerCase().replace("ms","")],a=ey[e.pointerType]||e.pointerType,s=a==L,n=R(t,e.pointerId,"pointerId");i&z&&(0===e.button||s)?n<0&&(t.push(e),n=t.length-1):i&(W|Y)&&(r=!0),!(n<0)&&(t[n]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),r&&t.splice(n,1))}});var ex={touchstart:z,touchmove:X,touchend:W,touchcancel:Y},eR="touchstart",eE="touchstart touchmove touchend touchcancel";function eC(){this.evTarget=eR,this.evWin=eE,this.started=!1,er.apply(this,arguments)}function ew(e,t){var r=E(e.touches),i=E(e.changedTouches);return t&(W|Y)&&(r=C(r.concat(i),"identifier",!0)),[r,i]}_(eC,er,{handler:function(e){var t=ex[e.type];if(t===z&&(this.started=!0),this.started){var r=ew.call(this,e,t);t&(W|Y)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:L,srcEvent:e})}}});var eF={touchstart:z,touchmove:X,touchend:W,touchcancel:Y},eI="touchstart touchmove touchend touchcancel";function eD(){this.evTarget=eI,this.targetIds={},er.apply(this,arguments)}function eV(e,t){var r=E(e.touches),i=this.targetIds;if(t&(z|X)&&1===r.length)return i[r[0].identifier]=!0,[r,r];var a,s,n=E(e.changedTouches),o=[],l=this.target;if(s=r.filter(function(e){return A(e.target,l)}),t===z)for(a=0;a<s.length;)i[s[a].identifier]=!0,a++;for(a=0;a<n.length;)i[n[a].identifier]&&o.push(n[a]),t&(W|Y)&&delete i[n[a].identifier],a++;if(o.length)return[C(s.concat(o),"identifier",!0),o]}_(eD,er,{handler:function(e){var t=eF[e.type],r=eV.call(this,e,t);r&&this.callback(this.manager,t,{pointers:r[0],changedPointers:r[1],pointerType:L,srcEvent:e})}});var eN=2500,ek=25;function eP(){er.apply(this,arguments);var e=v(this.handler,this);this.touch=new eD(this.manager,e),this.mouse=new eT(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function eL(e,t){e&z?(this.primaryTouch=t.changedPointers[0].identifier,eU.call(this,t)):e&(W|Y)&&eU.call(this,t)}function eU(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var r={x:t.clientX,y:t.clientY};this.lastTouches.push(r);var i=this.lastTouches;setTimeout(function(){var e=i.indexOf(r);e>-1&&i.splice(e,1)},eN)}}function eB(e){for(var t=e.srcEvent.clientX,r=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var a=this.lastTouches[i],s=Math.abs(t-a.x),n=Math.abs(r-a.y);if(s<=ek&&n<=ek)return!0}return!1}_(eP,er,{handler:function(e,t,r){var i=r.pointerType==L,a=r.pointerType==B;if(!a||!r.sourceCapabilities||!r.sourceCapabilities.firesTouchEvents){if(i)eL.call(this,t,r);else if(a&&eB.call(this,r))return;this.callback(e,t,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var eO=w(n.style,"touchAction"),eG=eO!==i,ez="compute",eX="auto",eW="manipulation",eY="none",eH="pan-x",ej="pan-y",eq=eQ();function eK(e,t){this.manager=e,this.set(t)}function eZ(e){if(S(e,eY))return eY;var t=S(e,eH),r=S(e,ej);return t&&r?eY:t||r?t?eH:ej:S(e,eW)?eW:eX}function eQ(){if(!eG)return!1;var t={},r=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!r||e.CSS.supports("touch-action",i)}),t}eK.prototype={set:function(e){e==ez&&(e=this.compute()),eG&&this.manager.element.style&&eq[e]&&(this.manager.element.style[eO]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,function(t){T(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),eZ(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,r=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var i=this.actions,a=S(i,eY)&&!eq[eY],s=S(i,ej)&&!eq[ej],n=S(i,eH)&&!eq[eH];if(a){var o=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(o&&l&&u)return}if((!n||!s)&&(a||s&&r&Q||n&&r&J))return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var eJ=1,e$=2,e0=4,e1=8,e2=8,e3=16,e5=32;function e4(e){this.options=a({},this.defaults,e||{}),this.id=I(),this.manager=null,this.options.enable=M(this.options.enable,!0),this.state=eJ,this.simultaneous={},this.requireFail=[]}function e6(e){return e&e3?"cancel":e&e1?"end":e&e0?"move":e&e$?"start":""}function e8(e){return e==Z?"down":e==K?"up":e==j?"left":e==q?"right":""}function e7(e,t){var r=t.manager;return r?r.get(e):e}function e9(){e4.apply(this,arguments)}function te(){e9.apply(this,arguments),this.pX=null,this.pY=null}function tt(){e9.apply(this,arguments)}function tr(){e4.apply(this,arguments),this._timer=null,this._input=null}function ti(){e9.apply(this,arguments)}function ta(){e9.apply(this,arguments)}function ts(){e4.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function tn(e,t){return(t=t||{}).recognizers=M(t.recognizers,tn.defaults.preset),new tu(e,t)}e4.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(d(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=e7(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return d(e,"dropRecognizeWith",this)||(e=e7(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(d(e,"requireFailure",this))return this;var t=this.requireFail;return -1===R(t,e=e7(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(d(e,"dropRequireFailure",this))return this;e=e7(e,this);var t=R(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,r=this.state;function i(r){t.manager.emit(r,e)}r<e1&&i(t.options.event+e6(r)),i(t.options.event),e.additionalEvent&&i(e.additionalEvent),r>=e1&&i(t.options.event+e6(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=e5},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(e5|eJ)))return!1;e++}return!0},recognize:function(e){var t=a({},e);if(!T(this.options.enable,[this,t])){this.reset(),this.state=e5;return}this.state&(e2|e3|e5)&&(this.state=eJ),this.state=this.process(t),this.state&(e$|e0|e1|e3)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},_(e9,e4,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,r=e.eventType,i=t&(e$|e0),a=this.attrTest(e);return i&&(r&Y||!a)?t|e3:i||a?r&W?t|e1:t&e$?t|e0:e$:e5}}),_(te,e9,{defaults:{event:"pan",threshold:10,pointers:1,direction:$},getTouchAction:function(){var e=this.options.direction,t=[];return e&Q&&t.push(ej),e&J&&t.push(eH),t},directionTest:function(e){var t=this.options,r=!0,i=e.distance,a=e.direction,s=e.deltaX,n=e.deltaY;return a&t.direction||(t.direction&Q?(a=0===s?H:s<0?j:q,r=s!=this.pX,i=Math.abs(e.deltaX)):(a=0===n?H:n<0?K:Z,r=n!=this.pY,i=Math.abs(e.deltaY))),e.direction=a,r&&i>t.threshold&&a&t.direction},attrTest:function(e){return e9.prototype.attrTest.call(this,e)&&(this.state&e$||!(this.state&e$)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=e8(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),_(tt,e9,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[eY]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&e$)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),_(tr,e4,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[eX]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,i=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,i&&r&&(!(e.eventType&(W|Y))||a)){if(e.eventType&z)this.reset(),this._timer=c(function(){this.state=e2,this.tryEmit()},t.time,this);else if(e.eventType&W)return e2}else this.reset();return e5},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===e2&&(e&&e.eventType&W?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),_(ti,e9,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[eY]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&e$)}}),_(ta,e9,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Q|J,pointers:1},getTouchAction:function(){return te.prototype.getTouchAction.call(this)},attrTest:function(e){var t,r=this.options.direction;return r&(Q|J)?t=e.overallVelocity:r&Q?t=e.overallVelocityX:r&J&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&r&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&u(t)>this.options.velocity&&e.eventType&W},emit:function(e){var t=e8(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),_(ts,e4,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[eW]},process:function(e){var t=this.options,r=e.pointers.length===t.pointers,i=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&z&&0===this.count)return this.failTimeout();if(i&&a&&r){if(e.eventType!=W)return this.failTimeout();var s=!this.pTime||e.timeStamp-this.pTime<t.interval,n=!this.pCenter||ed(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,n&&s?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=c(function(){this.state=e2,this.tryEmit()},t.interval,this),e$):e2}return e5},failTimeout:function(){return this._timer=c(function(){this.state=e5},this.options.interval,this),e5},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==e2&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),tn.VERSION="2.0.7",tn.defaults={domEvents:!1,touchAction:ez,enable:!0,inputTarget:null,inputClass:null,preset:[[ti,{enable:!1}],[tt,{enable:!1},["rotate"]],[ta,{direction:Q}],[te,{direction:Q},["swipe"]],[ts],[ts,{event:"doubletap",taps:2},["tap"]],[tr]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var to=1,tl=2;function tu(e,t){this.options=a({},tn.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=ei(this),this.touchAction=new eK(this,this.options.touchAction),th(this,!0),g(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function th(e,t){var r,i=e.element;i.style&&(g(e.options.cssProps,function(a,s){r=w(i.style,s),t?(e.oldCssProps[r]=i.style[r],i.style[r]=a):i.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={}))}function tc(e,r){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=r,r.target.dispatchEvent(i)}tu.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?tl:to},recognize:function(e){var t,r=this.session;if(!r.stopped){this.touchAction.preventDefaults(e);var i=this.recognizers,a=r.curRecognizer;(!a||a&&a.state&e2)&&(a=r.curRecognizer=null);for(var s=0;s<i.length;)t=i[s],r.stopped!==tl&&(!a||t==a||t.canRecognizeWith(a))?t.recognize(e):t.reset(),!a&&t.state&(e$|e0|e1)&&(a=r.curRecognizer=t),s++}},get:function(e){if(e instanceof e4)return e;for(var t=this.recognizers,r=0;r<t.length;r++)if(t[r].options.event==e)return t[r];return null},add:function(e){if(d(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(d(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,r=R(t,e);-1!==r&&(t.splice(r,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var r=this.handlers;return g(x(e),function(e){r[e]=r[e]||[],r[e].push(t)}),this}},off:function(e,t){if(e!==i){var r=this.handlers;return g(x(e),function(e){t?r[e]&&r[e].splice(R(r[e],t),1):delete r[e]}),this}},emit:function(e,t){this.options.domEvents&&tc(e,t);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<r.length;)r[i](t),i++}},destroy:function(){this.element&&th(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(tn,{INPUT_START:z,INPUT_MOVE:X,INPUT_END:W,INPUT_CANCEL:Y,STATE_POSSIBLE:eJ,STATE_BEGAN:e$,STATE_CHANGED:e0,STATE_ENDED:e1,STATE_RECOGNIZED:e2,STATE_CANCELLED:e3,STATE_FAILED:e5,DIRECTION_NONE:H,DIRECTION_LEFT:j,DIRECTION_RIGHT:q,DIRECTION_UP:K,DIRECTION_DOWN:Z,DIRECTION_HORIZONTAL:Q,DIRECTION_VERTICAL:J,DIRECTION_ALL:$,Manager:tu,Input:er,TouchAction:eK,TouchInput:eD,MouseInput:eT,PointerEventInput:eS,TouchMouseInput:eP,SingleTouchInput:eC,Recognizer:e4,AttrRecognizer:e9,Tap:ts,Pan:te,Swipe:ta,Pinch:tt,Rotate:ti,Press:tr,on:y,off:b,each:g,merge:f,extend:m,assign:a,inherit:_,bindFn:v,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=tn,"function"==typeof define&&define.amd?define(function(){return tn}):$cebfe6726e901212$exports?$cebfe6726e901212$exports=tn:e[r]=tn}(window,document,"Hammer");var $im4cd=parcelRequire("im4cd"),$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3"),$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$idLiu=parcelRequire("idLiu"),$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3"),$879d8210211d0bfa$exports={};$parcel$export($879d8210211d0bfa$exports,"create",()=>$879d8210211d0bfa$export$185802fd694ee1f5),$parcel$export($879d8210211d0bfa$exports,"fromMat4",()=>$879d8210211d0bfa$export$b4ad467060d346fe),$parcel$export($879d8210211d0bfa$exports,"clone",()=>$879d8210211d0bfa$export$9cd59f9826255e47),$parcel$export($879d8210211d0bfa$exports,"copy",()=>$879d8210211d0bfa$export$784d13d8ee351f07),$parcel$export($879d8210211d0bfa$exports,"fromValues",()=>$879d8210211d0bfa$export$a82be99ed2a44a7d),$parcel$export($879d8210211d0bfa$exports,"set",()=>$879d8210211d0bfa$export$adaa4cf7ef1b65be),$parcel$export($879d8210211d0bfa$exports,"identity",()=>$879d8210211d0bfa$export$f0954fd7d5368655),$parcel$export($879d8210211d0bfa$exports,"transpose",()=>$879d8210211d0bfa$export$9cb09a71b7d66923),$parcel$export($879d8210211d0bfa$exports,"invert",()=>$879d8210211d0bfa$export$6897c284b6f9f4dc),$parcel$export($879d8210211d0bfa$exports,"adjoint",()=>$879d8210211d0bfa$export$33f3c024b4ae00a1),$parcel$export($879d8210211d0bfa$exports,"determinant",()=>$879d8210211d0bfa$export$a04698f914c55ed9),$parcel$export($879d8210211d0bfa$exports,"multiply",()=>$879d8210211d0bfa$export$2060d2db72cce88f),$parcel$export($879d8210211d0bfa$exports,"translate",()=>$879d8210211d0bfa$export$d73ee8ef04f5226a),$parcel$export($879d8210211d0bfa$exports,"rotate",()=>$879d8210211d0bfa$export$bb628a54ab399bc9),$parcel$export($879d8210211d0bfa$exports,"scale",()=>$879d8210211d0bfa$export$dcdf75081b88279d),$parcel$export($879d8210211d0bfa$exports,"fromTranslation",()=>$879d8210211d0bfa$export$bc9e79e74e9fddf6),$parcel$export($879d8210211d0bfa$exports,"fromRotation",()=>$879d8210211d0bfa$export$926fc125ff3c666c),$parcel$export($879d8210211d0bfa$exports,"fromScaling",()=>$879d8210211d0bfa$export$832ca188ffb1955d),$parcel$export($879d8210211d0bfa$exports,"fromMat2d",()=>$879d8210211d0bfa$export$68f5977575fae9bf),$parcel$export($879d8210211d0bfa$exports,"fromQuat",()=>$879d8210211d0bfa$export$2ff2bbe382249af7),$parcel$export($879d8210211d0bfa$exports,"normalFromMat4",()=>$879d8210211d0bfa$export$966b25ab6dc1b1f9),$parcel$export($879d8210211d0bfa$exports,"projection",()=>$879d8210211d0bfa$export$b74061472fe7c07),$parcel$export($879d8210211d0bfa$exports,"str",()=>$879d8210211d0bfa$export$42d51816ce590c93),$parcel$export($879d8210211d0bfa$exports,"frob",()=>$879d8210211d0bfa$export$326827e8268e9cdb),$parcel$export($879d8210211d0bfa$exports,"add",()=>$879d8210211d0bfa$export$e16d8520af44a096),$parcel$export($879d8210211d0bfa$exports,"subtract",()=>$879d8210211d0bfa$export$4e2d2ead65e5f7e3),$parcel$export($879d8210211d0bfa$exports,"multiplyScalar",()=>$879d8210211d0bfa$export$c697bed75648cdb7),$parcel$export($879d8210211d0bfa$exports,"multiplyScalarAndAdd",()=>$879d8210211d0bfa$export$553579f63bdd7137),$parcel$export($879d8210211d0bfa$exports,"exactEquals",()=>$879d8210211d0bfa$export$f2599a5cf1109d8),$parcel$export($879d8210211d0bfa$exports,"equals",()=>$879d8210211d0bfa$export$e9bab7fafb253603),$parcel$export($879d8210211d0bfa$exports,"mul",()=>$879d8210211d0bfa$export$6e3a27864ab166fe),$parcel$export($879d8210211d0bfa$exports,"sub",()=>$879d8210211d0bfa$export$f93b5905241a7cca);var $amnUE=parcelRequire("amnUE");function $879d8210211d0bfa$export$185802fd694ee1f5(){var e=new $amnUE.ARRAY_TYPE(9);return $amnUE.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function $879d8210211d0bfa$export$b4ad467060d346fe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function $879d8210211d0bfa$export$9cd59f9826255e47(e){var t=new $amnUE.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function $879d8210211d0bfa$export$784d13d8ee351f07(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function $879d8210211d0bfa$export$a82be99ed2a44a7d(e,t,r,i,a,s,n,o,l){var u=new $amnUE.ARRAY_TYPE(9);return u[0]=e,u[1]=t,u[2]=r,u[3]=i,u[4]=a,u[5]=s,u[6]=n,u[7]=o,u[8]=l,u}function $879d8210211d0bfa$export$adaa4cf7ef1b65be(e,t,r,i,a,s,n,o,l,u){return e[0]=t,e[1]=r,e[2]=i,e[3]=a,e[4]=s,e[5]=n,e[6]=o,e[7]=l,e[8]=u,e}function $879d8210211d0bfa$export$f0954fd7d5368655(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function $879d8210211d0bfa$export$9cb09a71b7d66923(e,t){if(e===t){var r=t[1],i=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function $879d8210211d0bfa$export$6897c284b6f9f4dc(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],u=t[7],h=t[8],c=h*n-o*u,d=-h*s+o*l,g=u*s-n*l,p=r*c+i*d+a*g;return p?(p=1/p,e[0]=c*p,e[1]=(-h*i+a*u)*p,e[2]=(o*i-a*n)*p,e[3]=d*p,e[4]=(h*r-a*l)*p,e[5]=(-o*r+a*s)*p,e[6]=g*p,e[7]=(-u*r+i*l)*p,e[8]=(n*r-i*s)*p,e):null}function $879d8210211d0bfa$export$33f3c024b4ae00a1(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],u=t[7],h=t[8];return e[0]=n*h-o*u,e[1]=a*u-i*h,e[2]=i*o-a*n,e[3]=o*l-s*h,e[4]=r*h-a*l,e[5]=a*s-r*o,e[6]=s*u-n*l,e[7]=i*l-r*u,e[8]=r*n-i*s,e}function $879d8210211d0bfa$export$a04698f914c55ed9(e){var t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],n=e[5],o=e[6],l=e[7],u=e[8];return t*(u*s-n*l)+r*(-u*a+n*o)+i*(l*a-s*o)}function $879d8210211d0bfa$export$2060d2db72cce88f(e,t,r){var i=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=r[0],g=r[1],p=r[2],m=r[3],f=r[4],_=r[5],v=r[6],T=r[7],M=r[8];return e[0]=d*i+g*n+p*u,e[1]=d*a+g*o+p*h,e[2]=d*s+g*l+p*c,e[3]=m*i+f*n+_*u,e[4]=m*a+f*o+_*h,e[5]=m*s+f*l+_*c,e[6]=v*i+T*n+M*u,e[7]=v*a+T*o+M*h,e[8]=v*s+T*l+M*c,e}function $879d8210211d0bfa$export$d73ee8ef04f5226a(e,t,r){var i=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=r[0],g=r[1];return e[0]=i,e[1]=a,e[2]=s,e[3]=n,e[4]=o,e[5]=l,e[6]=d*i+g*n+u,e[7]=d*a+g*o+h,e[8]=d*s+g*l+c,e}function $879d8210211d0bfa$export$bb628a54ab399bc9(e,t,r){var i=t[0],a=t[1],s=t[2],n=t[3],o=t[4],l=t[5],u=t[6],h=t[7],c=t[8],d=Math.sin(r),g=Math.cos(r);return e[0]=g*i+d*n,e[1]=g*a+d*o,e[2]=g*s+d*l,e[3]=g*n-d*i,e[4]=g*o-d*a,e[5]=g*l-d*s,e[6]=u,e[7]=h,e[8]=c,e}function $879d8210211d0bfa$export$dcdf75081b88279d(e,t,r){var i=r[0],a=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function $879d8210211d0bfa$export$bc9e79e74e9fddf6(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function $879d8210211d0bfa$export$926fc125ff3c666c(e,t){var r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function $879d8210211d0bfa$export$832ca188ffb1955d(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function $879d8210211d0bfa$export$68f5977575fae9bf(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function $879d8210211d0bfa$export$2ff2bbe382249af7(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=r+r,o=i+i,l=a+a,u=r*n,h=i*n,c=i*o,d=a*n,g=a*o,p=a*l,m=s*n,f=s*o,_=s*l;return e[0]=1-c-p,e[3]=h-_,e[6]=d+f,e[1]=h+_,e[4]=1-u-p,e[7]=g-m,e[2]=d-f,e[5]=g+m,e[8]=1-u-c,e}function $879d8210211d0bfa$export$966b25ab6dc1b1f9(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=t[6],u=t[7],h=t[8],c=t[9],d=t[10],g=t[11],p=t[12],m=t[13],f=t[14],_=t[15],v=r*o-i*n,T=r*l-a*n,M=r*u-s*n,y=i*l-a*o,b=i*u-s*o,A=a*u-s*l,S=h*m-c*p,x=h*f-d*p,R=h*_-g*p,E=c*f-d*m,C=c*_-g*m,w=d*_-g*f,F=v*w-T*C+M*E+y*R-b*x+A*S;return F?(F=1/F,e[0]=(o*w-l*C+u*E)*F,e[1]=(l*R-n*w-u*x)*F,e[2]=(n*C-o*R+u*S)*F,e[3]=(a*C-i*w-s*E)*F,e[4]=(r*w-a*R+s*x)*F,e[5]=(i*R-r*C-s*S)*F,e[6]=(m*A-f*b+_*y)*F,e[7]=(f*M-p*A-_*T)*F,e[8]=(p*b-m*M+_*v)*F,e):null}function $879d8210211d0bfa$export$b74061472fe7c07(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function $879d8210211d0bfa$export$42d51816ce590c93(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function $879d8210211d0bfa$export$326827e8268e9cdb(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function $879d8210211d0bfa$export$e16d8520af44a096(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function $879d8210211d0bfa$export$4e2d2ead65e5f7e3(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function $879d8210211d0bfa$export$c697bed75648cdb7(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function $879d8210211d0bfa$export$553579f63bdd7137(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function $879d8210211d0bfa$export$f2599a5cf1109d8(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function $879d8210211d0bfa$export$e9bab7fafb253603(e,t){var r=e[0],i=e[1],a=e[2],s=e[3],n=e[4],o=e[5],l=e[6],u=e[7],h=e[8],c=t[0],d=t[1],g=t[2],p=t[3],m=t[4],f=t[5],_=t[6],v=t[7],T=t[8];return Math.abs(r-c)<=$amnUE.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-d)<=$amnUE.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-g)<=$amnUE.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-p)<=$amnUE.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(n-m)<=$amnUE.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-f)<=$amnUE.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(l-_)<=$amnUE.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-v)<=$amnUE.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(h-T)<=$amnUE.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))}var $879d8210211d0bfa$export$6e3a27864ab166fe=$879d8210211d0bfa$export$2060d2db72cce88f,$879d8210211d0bfa$export$f93b5905241a7cca=$879d8210211d0bfa$export$4e2d2ead65e5f7e3,$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk");class $8b7843ca4fd4be3b$var$Buffer{constructor(e,t,r){this._gl=e,this._buffer=e.createBuffer(),this._type=t,this._hint=r,this._size=0}bind(){this._buffer||(this._buffer=this._gl.createBuffer()),this._gl.bindBuffer(this._type,this._buffer)}release(){this._gl.deleteBuffer(this._buffer),this._buffer=null,this._size=0}update(e,t){this.bind(),void 0!==t&&t!==e.length&&(e=e.subarray(0,t)),e.length>this._size?(this._gl.bufferData(this._type,e,this._hint),this._size=e.length):this._gl.bufferSubData(this._type,0,e)}}var $8b7843ca4fd4be3b$export$2e2bcd8739ae039=$8b7843ca4fd4be3b$var$Buffer,$eIUYI=parcelRequire("eIUYI"),$7f546e482e35b8d1$exports={};$7f546e482e35b8d1$exports=new URL("mpumalanga_veld_1k.b2fa611a.png",import.meta.url).toString();var $0bcd322711c87694$exports={};$0bcd322711c87694$exports=new URL("venetian_crossroads_1k.82b0e61c.png",import.meta.url).toString();var $59b3415a2a6e55bb$exports={};$59b3415a2a6e55bb$exports=new URL("studio_small_01_1k.22bc26b9.png",import.meta.url).toString();var $b0e68954462048d4$exports={};$b0e68954462048d4$exports=new URL("moonless_golf_1k.5fbf8b93.png",import.meta.url).toString();var $0c30efaf909f938f$exports={};$0c30efaf909f938f$exports=new URL("winter_river_1k.f0fbc914.png",import.meta.url).toString();var $idLiu=parcelRequire("idLiu"),$eIStk=parcelRequire("eIStk"),$idLiu=parcelRequire("idLiu"),$jLaD3=parcelRequire("jLaD3");class $5b1a8011954f2ba8$var$Attribute{constructor(e,t,r,i,a){this._gl=e,this._location=e.getAttribLocation(t,r),this._size=i,this._type=a}unbind(){this._gl.disableVertexAttribArray(this._location)}bindToBuffer(e){var t=this._gl;e.bind(),t.enableVertexAttribArray(this._location),t.vertexAttribPointer(this._location,this._size,this._type,!1,0,0)}}var $5b1a8011954f2ba8$export$2e2bcd8739ae039=$5b1a8011954f2ba8$var$Attribute,$130d523864fda5ae$exports={};$130d523864fda5ae$exports="#define GLSLIFY 1\n// reference\n// https://www.khronos.org/registry/gles/extensions/EXT/EXT_sRGB.txt\n\n#define LIN_SRGB(x) x < 0.0031308 ? x * 12.92 : 1.055 * pow(x, 1.0/2.4) - 0.055\nfloat linearTosRGB(const in float c) {\n    return LIN_SRGB(c);\n}\nvec3 linearTosRGB(const in vec3 c) {\n    return vec3(LIN_SRGB(c.r), LIN_SRGB(c.g), LIN_SRGB(c.b));\n}\nvec4 linearTosRGB(const in vec4 c) {\n    return vec4(LIN_SRGB(c.r), LIN_SRGB(c.g), LIN_SRGB(c.b), c.a);\n}\n\n#define SRGB_LIN(x) x < 0.04045 ? x * (1.0 / 12.92) : pow((x + 0.055) * (1.0 / 1.055), 2.4)\nfloat sRGBToLinear(const in float c) {\n    return SRGB_LIN(c);\n}\nvec3 sRGBToLinear(const in vec3 c) {\n    return vec3(SRGB_LIN(c.r), SRGB_LIN(c.g), SRGB_LIN(c.b));\n}\nvec4 sRGBToLinear(const in vec4 c) {\n    return vec4(SRGB_LIN(c.r), SRGB_LIN(c.g), SRGB_LIN(c.b), c.a);\n}\n\n#define RANGE 5.0\n// http://graphicrants.blogspot.fr/2009/04/rgbm-color-encoding.html\nvec4 encodeRGBM(const in vec3 col) {\n    vec4 rgbm;\n    vec3 color = col / RANGE;\n    rgbm.a = clamp( max( max( color.r, color.g ), max( color.b, 1e-6 ) ), 0.0, 1.0 );\n    rgbm.a = ceil( rgbm.a * 255.0 ) / 255.0;\n    rgbm.rgb = color / rgbm.a;\n    return rgbm;\n}\n\nvec3 decodeRGBM(const in vec4 col) {\n  return RANGE * col.rgb * col.a;\n}\n";var $5cc0213aa3a453e5$exports={};$5cc0213aa3a453e5$exports="// http://madebyevan.com/shaders/curvature/\n#extension GL_OES_standard_derivatives : enable\n#define GLSLIFY 1\nvec3 computeCurvature( const in vec3 vertex, const in vec3 normal, const in vec3 color, const in float str, const in float fov) {\n  if(str < 1e-3)\n    return color;\n#ifndef GL_OES_standard_derivatives\n    return color * pow(length(normal), str * 100.0);\n#else\n  vec3 n = normalize(normal);\n  // Compute curvature\n  vec3 dx = dFdx(n);\n  vec3 dy = dFdy(n);\n  vec3 xneg = n - dx;\n  vec3 xpos = n + dx;\n  vec3 yneg = n - dy;\n  vec3 ypos = n + dy;\n  // fov < 0.0 means ortho\n  float depth = fov > 0.0 ? length(vertex) * fov : -fov;\n  float cur = (cross(xneg, xpos).y - cross(yneg, ypos).x) * str * 80.0 / depth;\n  return mix(mix(color, color * 0.3, clamp(-cur * 15.0, 0.0, 1.0)), color * 2.0, clamp(cur * 25.0, 0.0, 1.0));\n#endif\n}\n";var $bdfea6edb628a28d$var$ShaderBase={};$bdfea6edb628a28d$var$ShaderBase.vertexName="VertexName",$bdfea6edb628a28d$var$ShaderBase.fragmentName="FragmentName",$bdfea6edb628a28d$var$ShaderBase.activeAttributes={vertex:!0,normal:!0,material:!0,color:!0},$bdfea6edb628a28d$var$ShaderBase.showSymmetryLine=(0,$idLiu.default)().mirrorline,$bdfea6edb628a28d$var$ShaderBase.darkenUnselected=(0,$idLiu.default)().darkenunselected,$bdfea6edb628a28d$var$ShaderBase.uniformNames={},$bdfea6edb628a28d$var$ShaderBase.uniformNames.commonUniforms=["uMV","uMVP","uN","uEM","uEN","uFlat","uPlaneO","uPlaneN","uSym","uCurvature","uAlpha","uFov","uDarken"],$bdfea6edb628a28d$var$ShaderBase.strings={},$bdfea6edb628a28d$var$ShaderBase.strings.colorSpaceGLSL=$parcel$interopDefault($130d523864fda5ae$exports),$bdfea6edb628a28d$var$ShaderBase.strings.vertUniforms="uniform mat4 uMV;\nuniform mat4 uMVP;\nuniform mat3 uN;\nuniform mat4 uEM;\nuniform mat3 uEN;\nuniform float uAlpha;",$bdfea6edb628a28d$var$ShaderBase.strings.fragColorUniforms="uniform vec3 uPlaneN;\nuniform vec3 uPlaneO;\nuniform int uSym;\nuniform int uDarken;\nuniform float uCurvature;\nuniform float uFov;\nvarying float vMasking;\nuniform int uFlat;",$bdfea6edb628a28d$var$ShaderBase.strings.fragColorFunction=[$parcel$interopDefault($5cc0213aa3a453e5$exports),$parcel$interopDefault($130d523864fda5ae$exports),"#extension GL_OES_standard_derivatives : enable","vec3 getNormal() {","  #ifndef GL_OES_standard_derivatives","    return normalize(gl_FrontFacing ? vNormal : -vNormal);","  #else","    return uFlat == 0 ? normalize(gl_FrontFacing ? vNormal : -vNormal) : -normalize(cross(dFdy(vVertex), dFdx(vVertex)));","  #endif","}","vec4 encodeFragColor(const in vec3 frag, const in float alpha) {","  vec3 col = computeCurvature(vVertex, vNormal, frag, uCurvature, uFov);","  if(uDarken == 1) col *= 0.3;","  col *= (0.3 + 0.7 * vMasking);","  if(uSym == 1 && abs(dot(uPlaneN, vVertex - uPlaneO)) < 0.15)","      col = min(col * 1.5, 1.0);","  return alpha != 1.0 ? vec4(col * alpha, alpha) : encodeRGBM(col);","}"].join("\n");var $bdfea6edb628a28d$var$processShader=function(e){var t="",r=e.match(/^\s*(#extension).*/gm);if(r)for(var i={},a=0,s=r.length;a<s;++a){var n=r[a].substr(r[a].indexOf("#extension"));e=e.replace(r[a],""),i[n]||(i[n]=!0,t+=n+"\n")}var o="";-1===e.indexOf("#version")&&(o+="#version 100\n");var l="";return/precision\s+(high|low|medium)p\s+float/.test(e)||(l+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n"),e=o+t+l+e};$bdfea6edb628a28d$var$ShaderBase.getOrCreate=function(e){if(this.program)return this;var t="\n#define SHADER_NAME "+this.vertexName+"\n",r="\n#define SHADER_NAME "+this.fragmentName+"\n",i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,$bdfea6edb628a28d$var$processShader(this.vertex+t)),e.compileShader(i);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,$bdfea6edb628a28d$var$processShader(this.fragment+r)),e.compileShader(a);var s=this.program=e.createProgram();e.attachShader(s,i),e.attachShader(s,a),e.linkProgram(s),e.useProgram(s);var n=e.getShaderInfoLog(i),o=e.getShaderInfoLog(a),l=e.getProgramInfoLog(s);return n&&console.warn(this.vertexName+" (vertex)\n"+n),o&&console.warn(this.fragmentName+" (fragment)\n"+o),l&&console.warn(this.fragmentName+" (program)\n"+l),this.initAttributes(e),this.initUniforms(e),this},$bdfea6edb628a28d$var$ShaderBase.initUniforms=function(e){for(var t=this.program,r=this.uniformNames,i=this.uniforms,a=0,s=r.length;a<s;++a){var n=r[a];i[n]=e.getUniformLocation(t,n)}},$bdfea6edb628a28d$var$ShaderBase.updateUniforms=function(){var e=[0,0,0];return function(t,r){var i=t.getGL(),a=$bdfea6edb628a28d$var$ShaderBase.darkenUnselected&&0>r.getIndexSelectMesh(t),s=$bdfea6edb628a28d$var$ShaderBase.showSymmetryLine&&t.getID()===r.getMesh().getID()&&r.getSculptManager().getSymmetry(),n=this.uniforms;i.uniformMatrix4fv(n.uEM,!1,t.getEditMatrix()),i.uniformMatrix3fv(n.uEN,!1,t.getEN()),i.uniformMatrix4fv(n.uMV,!1,t.getMV()),i.uniformMatrix4fv(n.uMVP,!1,t.getMVP()),i.uniformMatrix3fv(n.uN,!1,t.getN()),i.uniform1i(n.uDarken,a?1:0),i.uniform1i(n.uFlat,t.getFlatShading()),i.uniform3fv(n.uPlaneO,$eIStk.transformMat4(e,t.getSymmetryOrigin(),t.getMV())),i.uniform3fv(n.uPlaneN,$eIStk.normalize(e,$eIStk.transformMat3(e,t.getSymmetryNormal(),t.getN()))),i.uniform1i(n.uSym,s?1:0),i.uniform1f(n.uAlpha,t.getOpacity()),i.uniform1f(n.uCurvature,t.getCurvature());var o=r.getCamera();i.uniform1f(n.uFov,o.isOrthographic()?-(25*Math.abs(o._trans[2])):o.getFov())}}(),$bdfea6edb628a28d$var$ShaderBase.draw=function(e,t){e.getGL().useProgram(this.program),this.bindAttributes(e),this.updateUniforms(e,t),this.drawBuffer(e)},$bdfea6edb628a28d$var$ShaderBase.drawBuffer=function(e){var t=e.getGL();e.isUsingDrawArrays()?t.drawArrays(e.getMode(),0,e.getCount()):(e.getIndexBuffer().bind(),t.drawElements(e.getMode(),e.getCount(),t.UNSIGNED_INT,0)),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this.unbindAttributes()},$bdfea6edb628a28d$var$ShaderBase.setTextureParameters=function(e,t){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),(0,$jLaD3.default).isPowerOfTwo(t.width)&&(0,$jLaD3.default).isPowerOfTwo(t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.generateMipmap(e.TEXTURE_2D)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))},$bdfea6edb628a28d$var$ShaderBase.onLoadTexture0=function(e,t,r){this.texture0=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),$bdfea6edb628a28d$var$ShaderBase.setTextureParameters(e,t),e.bindTexture(e.TEXTURE_2D,null),r&&r.render()},$bdfea6edb628a28d$var$ShaderBase.getDummyTexture=function(e){return this._dummyTex||(this._dummyTex=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._dummyTex),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),e.bindTexture(e.TEXTURE_2D,null)),this._dummyTex},$bdfea6edb628a28d$var$ShaderBase.getOrCreateTexture0=function(e,t,r){if(void 0!==this.texture0)return this.texture0;this.texture0=null;var i=new Image;return i.src=t,i.onload=this.onLoadTexture0.bind(this,e,i,r),!1},$bdfea6edb628a28d$var$ShaderBase.initAttributes=function(e){var t=this.program,r=this.attributes;r.aVertex=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,t,"aVertex",3,e.FLOAT),r.aNormal=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,t,"aNormal",3,e.FLOAT),r.aColor=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,t,"aColor",3,e.FLOAT),r.aMaterial=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,t,"aMaterial",3,e.FLOAT)},$bdfea6edb628a28d$var$ShaderBase.bindAttributes=function(e){var t=this.attributes,r=this.activeAttributes;r.vertex&&t.aVertex.bindToBuffer(e.getVertexBuffer()),r.normal&&t.aNormal.bindToBuffer(e.getNormalBuffer()),r.color&&t.aColor.bindToBuffer(e.getColorBuffer()),r.material&&t.aMaterial.bindToBuffer(e.getMaterialBuffer())},$bdfea6edb628a28d$var$ShaderBase.unbindAttributes=function(){var e=this.attributes,t=this.activeAttributes;t.vertex&&e.aVertex.unbind(),t.normal&&e.aNormal.unbind(),t.color&&e.aColor.unbind(),t.material&&e.aMaterial.unbind()},$bdfea6edb628a28d$var$ShaderBase.getCopy=function(){for(var e=Object.keys($bdfea6edb628a28d$var$ShaderBase),t={},r=0,i=e.length;r<i;++r)t[e[r]]=this[e[r]];return t.program=null,t};var $bdfea6edb628a28d$export$2e2bcd8739ae039=$bdfea6edb628a28d$var$ShaderBase,$843bbf9428537939$exports={};$843bbf9428537939$exports="#define GLSLIFY 1\n#define PI 3.1415926535897932384626433832795\n#define PI_2 (2.0 * 3.1415926535897932384626433832795)\n#define INV_PI 1.0 / PI\n#define INV_LOG2 1.4426950408889634073599246810019\n\nuniform sampler2D uTexture0;\nuniform float uExposure;\nuniform mat3 uIblTransform;\nuniform vec3 uSPH[9];\n\nuniform vec2 uEnvSize;\n#define LIMIT_LOD 5.0\n\n// https://mynameismjp.wordpress.com/2008/12/12/logluv-encoding-for-hdr/\nconst mat3 LUVInverse = mat3(6.0013, -2.700, -1.7995, -1.332, 3.1029, -5.7720,\n                             0.3007, -1.088, 5.6268);\nvec3 decodeLUV(const in vec4 logLuv) {\n  float Le = logLuv.z * 255.0 + logLuv.w;\n  vec3 xp;\n  xp.y = exp2((Le - 127.0) / 2.0);\n  xp.z = xp.y / logLuv.y;\n  xp.x = logLuv.x * xp.z;\n  return max(LUVInverse * xp, 0.0);\n}\n\nvec2 toUVMipmap(const in float lod, const in vec2 uv) {\n  float widthForLevel = uEnvSize.x / exp2(lod);\n  vec2 uvSpaceLocal = vec2(1.0) + uv * (widthForLevel - 2.0);\n  uvSpaceLocal.y += uEnvSize.y - widthForLevel * 2.0;\n  return uvSpaceLocal / uEnvSize;\n}\n\nvec2 directionToUV(const in vec3 dir) {\n  vec3 signOct = sign(dir);\n  vec3 uvOct = dir / dot(dir, signOct);\n  if (uvOct.z < 0.0) {\n    uvOct.xy = signOct.xy * (1.0 - abs(uvOct)).yx;\n  }\n  return uvOct.xy * 0.5 + 0.5;\n}\n\nvec3 texturePanoramaLod(const in vec3 direction, const in float rLinear) {\n  float lod = rLinear * (LIMIT_LOD - 1.0);\n  vec2 uvBase = directionToUV(direction);\n  return decodeLUV(mix(texture2D(uTexture0, toUVMipmap(floor(lod), uvBase)),\n                       texture2D(uTexture0, toUVMipmap(ceil(lod), uvBase)),\n                       fract(lod)));\n}\n\nvec3 integrateBRDFApprox(const in vec3 specular, float roughness, float NoV) {\n  const vec4 c0 = vec4(-1, -0.0275, -0.572, 0.022);\n  const vec4 c1 = vec4(1, 0.0425, 1.04, -0.04);\n  vec4 r = roughness * c0 + c1;\n  float a004 = min(r.x * r.x, exp2(-9.28 * NoV)) * r.x + r.y;\n  vec2 AB = vec2(-1.04, 1.04) * a004 + r.zw;\n  return specular * AB.x + AB.y;\n}\n\nvec3 getSpecularDominantDir(const in vec3 N, const in vec3 R,\n                            const in float realRoughness) {\n  float smoothness = 1.0 - realRoughness;\n  return mix(N, R, smoothness * (sqrt(smoothness) + realRoughness));\n}\n\nvec3 approximateSpecularIBL(const in vec3 specularColor, float rLinear,\n                            const in vec3 N, const in vec3 V) {\n  float NoV = clamp(dot(N, V), 0.0, 1.0);\n  vec3 R = normalize((2.0 * NoV) * N - V);\n  R = getSpecularDominantDir(N, R, rLinear);\n  vec3 prefilteredColor = texturePanoramaLod(uIblTransform * R, rLinear);\n  return prefilteredColor * integrateBRDFApprox(specularColor, rLinear, NoV);\n}\n\n// expect shCoefs uniform\n// https://github.com/cedricpinson/envtools/blob/master/Cubemap.cpp#L523\nvec3 sphericalHarmonics(const in vec3 N) {\n  float x = N.x;\n  float y = N.y;\n  float z = -N.z;\n  vec3 result = uSPH[0] + uSPH[1] * y + uSPH[2] * z + uSPH[3] * x +\n                uSPH[4] * y * x + uSPH[5] * y * z +\n                uSPH[6] * (3.0 * z * z - 1.0) + uSPH[7] * (z * x) +\n                uSPH[8] * (x * x - y * y);\n  return max(result, vec3(0.0));\n}\n\nvec3 computeIBL_UE4(const in vec3 N, const in vec3 V, const in vec3 albedo,\n                    const in float roughness, const in vec3 specular) {\n  vec3 color = albedo * sphericalHarmonics(uIblTransform * N);\n  color += approximateSpecularIBL(specular, roughness, N, V);\n  return color;\n}\n";var $cf9005c21d28a2ff$var$ShaderPBR=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$cf9005c21d28a2ff$var$ShaderPBR.vertexName=$cf9005c21d28a2ff$var$ShaderPBR.fragmentName="ShadingPBR",$cf9005c21d28a2ff$var$ShaderPBR.textures={},$cf9005c21d28a2ff$var$ShaderPBR.environments=[{path:$parcel$interopDefault($7f546e482e35b8d1$exports),sph:[.136819,.174125,.253762,.027778,.056838,.131221,.074356,.086793,.099181,-.07904,-.091269,-.102346,-.02755,-.0323,-.039217,.031822,.034773,.039945,.017235,.021044,.026136,-.106608,-.11864,-.132761,.041,.049794,.061183],exposure:2.5,name:"Mpumalanga veld"},{path:$parcel$interopDefault($0bcd322711c87694$exports),sph:[.200626,.198426,.209579,.090452,.127807,.18839,.093188,.103245,.106131,.033349,.054751,.067044,.07435,.08167,.079716,.063127,.08594,.10171,.007751,.00571,-.000791,.104134,.103979,.094236,-.022747,-.028166,-.037714],exposure:2.5,name:"Venetian crossroads"},{path:$parcel$interopDefault($59b3415a2a6e55bb$exports),sph:[.534107,.589985,.617478,.119999,.13048,.128019,.089872,.088707,.088017,.099999,.151282,.138458,.005015,.035588,.027592,.114999,.116739,.120579,-.057997,-.069532,-.070401,.385123,.411714,.454725,.303242,.333004,.35027],exposure:.5,name:"Studio small 01"},{path:$parcel$interopDefault($b0e68954462048d4$exports),sph:[.137579,.112906,.09347,.070711,.066043,.065337,-.029564,-.02072,-.007737,-.037254,-.03327,-.028294,-.023847,-.021208,-.018767,-.007873,-.002587,.003955,.009241,.007711,.006063,.017917,.011733,.007669,.036859,.026285,.01474],exposure:1,name:"Moonless golf"},{path:$parcel$interopDefault($0c30efaf909f938f$exports),sph:[.560145,.554695,.513523,-.213105,-.15519,-.063568,.135182,.114211,.069349,.172852,.15182,.105477,.065753,.06405,.052622,.096352,.086557,.063826,.02183,.01656,.008804,.186193,.16372,.119627,.025363,.022278,.014461],exposure:.5,name:"Winter river"}];var $cf9005c21d28a2ff$var$opts=(0,$idLiu.default)();$cf9005c21d28a2ff$var$ShaderPBR.idEnv=Math.min($cf9005c21d28a2ff$var$opts.environment,$cf9005c21d28a2ff$var$ShaderPBR.environments.length-1),$cf9005c21d28a2ff$var$ShaderPBR.exposure=void 0===$cf9005c21d28a2ff$var$opts.exposure?$cf9005c21d28a2ff$var$ShaderPBR.environments[$cf9005c21d28a2ff$var$ShaderPBR.idEnv].exposure:Math.min($cf9005c21d28a2ff$var$opts.exposure,5),$cf9005c21d28a2ff$var$ShaderPBR.uniforms={},$cf9005c21d28a2ff$var$ShaderPBR.attributes={},$cf9005c21d28a2ff$var$ShaderPBR.uniformNames=["uIblTransform","uTexture0","uAlbedo","uRoughness","uMetallic","uExposure","uSPH","uEnvSize"],Array.prototype.push.apply($cf9005c21d28a2ff$var$ShaderPBR.uniformNames,$bdfea6edb628a28d$export$2e2bcd8739ae039.uniformNames.commonUniforms),$cf9005c21d28a2ff$var$ShaderPBR.vertex=["attribute vec3 aVertex;","attribute vec3 aNormal;","attribute vec3 aColor;","attribute vec3 aMaterial;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.vertUniforms,"uniform float uRoughness;","uniform float uMetallic;","uniform vec3 uAlbedo;","varying vec3 vVertex;","varying vec3 vNormal;","varying vec3 vAlbedo;","varying float vRoughness;","varying float vMetallic;","varying float vMasking;","void main() {","  vAlbedo = uAlbedo.x >= 0.0 ? uAlbedo : aColor;","  vRoughness = uRoughness >= 0.0 ? uRoughness : aMaterial.x;","  vMetallic = uMetallic >= 0.0 ? uMetallic : aMaterial.y;","  vMasking = aMaterial.z;","  vNormal = mix(aNormal, uEN * aNormal, vMasking);","  vNormal = normalize(uN * vNormal);","  vec4 vertex4 = vec4(aVertex, 1.0);","  vertex4 = mix(vertex4, uEM * vertex4, vMasking);","  vVertex = vec3(uMV * vertex4);","  gl_Position = uMVP * vertex4;","}"].join("\n"),$cf9005c21d28a2ff$var$ShaderPBR.fragment=["varying vec3 vVertex;","varying vec3 vNormal;","varying vec3 vAlbedo;","varying float vRoughness;","varying float vMetallic;","uniform float uAlpha;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorUniforms,$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorFunction,$parcel$interopDefault($843bbf9428537939$exports),"","void main(void) {","  vec3 normal = getNormal();","  float roughness = max( 0.0001, vRoughness );","  vec3 linColor = sRGBToLinear(vAlbedo);","  vec3 albedo = linColor * (1.0 - vMetallic);","  vec3 specular = mix( vec3(0.04), linColor, vMetallic);","","  vec3 color = uExposure * computeIBL_UE4( normal, -normalize(vVertex), albedo, roughness, specular );","  gl_FragColor = encodeFragColor(color, uAlpha);","}"].join("\n"),$cf9005c21d28a2ff$var$ShaderPBR.onLoadEnvironment=function(e,t,r,i){if(!e.status||200===e.status||e.response&&e.response.byteLength){var a=e.width||Math.sqrt(e.response.byteLength/8),s=2*a;i.size=[a,s],i.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,i.texture),e.response?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,a,s,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(e.response)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.bindTexture(t.TEXTURE_2D,null),r&&r.render()}},$cf9005c21d28a2ff$var$ShaderPBR.getOrCreateEnvironment=function(e,t,r){if(void 0!==r.texture)return r.texture;if(r.texture=null,r.path.endsWith("png")){var i=new Image;return i.src=r.path,i.onload=$cf9005c21d28a2ff$var$ShaderPBR.onLoadEnvironment.bind(this,i,e,t,r),null}var a=new XMLHttpRequest;return a.open("GET",r.path,!0),a.responseType="arraybuffer",a.onload=$cf9005c21d28a2ff$var$ShaderPBR.onLoadEnvironment.bind(this,a,e,t,r),a.send(null),null};var $cf9005c21d28a2ff$var$uIBLTmp=$879d8210211d0bfa$exports.create();$cf9005c21d28a2ff$var$ShaderPBR.updateUniforms=function(e,t){var r=e.getGL(),i=this.uniforms;$879d8210211d0bfa$exports.fromMat4($cf9005c21d28a2ff$var$uIBLTmp,t.getCamera().getView()),r.uniformMatrix3fv(i.uIblTransform,!1,$879d8210211d0bfa$exports.transpose($cf9005c21d28a2ff$var$uIBLTmp,$cf9005c21d28a2ff$var$uIBLTmp)),r.uniform3fv(i.uAlbedo,e.getAlbedo()),r.uniform1f(i.uRoughness,e.getRoughness()),r.uniform1f(i.uMetallic,e.getMetallic()),r.uniform1f(i.uExposure,$cf9005c21d28a2ff$var$ShaderPBR.exposure);var a=$cf9005c21d28a2ff$var$ShaderPBR.environments[$cf9005c21d28a2ff$var$ShaderPBR.idEnv];r.uniform3fv(i.uSPH,a.sph),a.size&&r.uniform2fv(i.uEnvSize,a.size),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,$cf9005c21d28a2ff$var$ShaderPBR.getOrCreateEnvironment(r,t,a)||this.getDummyTexture(r)),r.uniform1i(i.uTexture0,0),$bdfea6edb628a28d$export$2e2bcd8739ae039.updateUniforms.call(this,e,t)};var $cf9005c21d28a2ff$export$2e2bcd8739ae039=$cf9005c21d28a2ff$var$ShaderPBR,$l7y1s=parcelRequire("l7y1s"),$6215b2c80828115e$exports={};$6215b2c80828115e$exports=new URL("clay.74439e65.jpg",import.meta.url).toString();var $c56f9df39c706dc4$exports={};$c56f9df39c706dc4$exports=new URL("redClay.122f5827.jpg",import.meta.url).toString();var $a8d6dcc2d50690a2$exports={};$a8d6dcc2d50690a2$exports=new URL("matcapFV.fc933a0d.jpg",import.meta.url).toString();var $e53e9ecd886faae5$exports={};$e53e9ecd886faae5$exports=new URL("skinHazardousarts.0f7ff341.jpg",import.meta.url).toString();var $f2eb78851a194348$exports={};$f2eb78851a194348$exports=new URL("skinHazardousarts2.c9b84129.jpg",import.meta.url).toString();var $90e27c36659ec518$exports={};$90e27c36659ec518$exports=new URL("pearl.44a9cf6c.jpg",import.meta.url).toString();var $14fcf07f698782c6$exports={};$14fcf07f698782c6$exports=new URL("skin.1666b97d.jpg",import.meta.url).toString();var $321c92764f020c27$exports={};$321c92764f020c27$exports=new URL("green.adedf4d8.jpg",import.meta.url).toString();var $08431222c1acd38c$exports={};$08431222c1acd38c$exports=new URL("white.bff27ac1.jpg",import.meta.url).toString();var $73d1c4793780e026$var$ShaderMatcap=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$73d1c4793780e026$var$ShaderMatcap.vertexName=$73d1c4793780e026$var$ShaderMatcap.fragmentName="Matcap",$73d1c4793780e026$var$ShaderMatcap.textures={},$73d1c4793780e026$var$ShaderMatcap.createTexture=function(e,t,r){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),$73d1c4793780e026$var$ShaderMatcap.setTextureParameters(e,t),e.bindTexture(e.TEXTURE_2D,null),$73d1c4793780e026$var$ShaderMatcap.textures[r]=i},$73d1c4793780e026$var$ShaderMatcap.matcaps=[{path:$parcel$interopDefault($a8d6dcc2d50690a2$exports),name:"matcap FV"},{path:$parcel$interopDefault($c56f9df39c706dc4$exports),name:"Red clay"},{path:$parcel$interopDefault($e53e9ecd886faae5$exports),name:"Skin hazardousarts"},{path:$parcel$interopDefault($f2eb78851a194348$exports),name:"Skin Hazardousarts2"},{path:$parcel$interopDefault($90e27c36659ec518$exports),name:(0,$l7y1s.default)("matcapPearl")},{path:$parcel$interopDefault($6215b2c80828115e$exports),name:(0,$l7y1s.default)("matcapClay")},{path:$parcel$interopDefault($14fcf07f698782c6$exports),name:(0,$l7y1s.default)("matcapSkin")},{path:$parcel$interopDefault($321c92764f020c27$exports),name:(0,$l7y1s.default)("matcapGreen")},{path:$parcel$interopDefault($08431222c1acd38c$exports),name:(0,$l7y1s.default)("matcapWhite")}],$73d1c4793780e026$var$ShaderMatcap.uniforms={},$73d1c4793780e026$var$ShaderMatcap.attributes={},$73d1c4793780e026$var$ShaderMatcap.uniformNames=["uTexture0","uAlbedo"],Array.prototype.push.apply($73d1c4793780e026$var$ShaderMatcap.uniformNames,$bdfea6edb628a28d$export$2e2bcd8739ae039.uniformNames.commonUniforms),$73d1c4793780e026$var$ShaderMatcap.vertex=["attribute vec3 aVertex;","attribute vec3 aNormal;","attribute vec3 aColor;","attribute vec3 aMaterial;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.vertUniforms,"varying vec3 vVertex;","varying vec3 vNormal;","varying vec3 vColor;","varying float vMasking;","varying vec3 vVertexPres;","uniform vec3 uAlbedo;","void main() {","  vColor = uAlbedo.x >= 0.0 ? uAlbedo : aColor;","  vMasking = aMaterial.z;","  vNormal = mix(aNormal, uEN * aNormal, vMasking);","  vNormal = normalize(uN * vNormal);","  vec4 vertex4 = vec4(aVertex, 1.0);","  vertex4 = mix(vertex4, uEM * vertex4, vMasking);","  vVertex = vec3(uMV * vertex4);","  vVertexPres = vVertex / max(1.0, abs(uMV[3][2]));","  gl_Position = uMVP * vertex4;","}"].join("\n"),$73d1c4793780e026$var$ShaderMatcap.fragment=["uniform sampler2D uTexture0;","varying vec3 vVertex;","varying vec3 vVertexPres;","varying vec3 vNormal;","varying vec3 vColor;","uniform float uAlpha;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorUniforms,$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorFunction,"void main() {","  vec3 normal = getNormal();","  vec3 nm_z = normalize(vVertexPres);","  vec3 nm_x = vec3(-nm_z.z, 0.0, nm_z.x);","  vec3 nm_y = cross(nm_x, nm_z);","  vec2 texCoord = 0.5 + 0.5 * vec2(dot(normal, nm_x), dot(normal, nm_y));","  vec3 color = sRGBToLinear(texture2D(uTexture0, texCoord).rgb) * sRGBToLinear(vColor);","  gl_FragColor = encodeFragColor(color, uAlpha);","}"].join("\n"),$73d1c4793780e026$var$ShaderMatcap.updateUniforms=function(e,t){var r=e.getGL(),i=this.uniforms;r.activeTexture(r.TEXTURE0),e.setTexture0($73d1c4793780e026$var$ShaderMatcap.textures[e.getMatcap()]),r.bindTexture(r.TEXTURE_2D,e.getTexture0()||this.getDummyTexture(r)),r.uniform1i(i.uTexture0,0),r.uniform3fv(i.uAlbedo,e.getAlbedo()),$bdfea6edb628a28d$export$2e2bcd8739ae039.updateUniforms.call(this,e,t)};var $73d1c4793780e026$export$2e2bcd8739ae039=$73d1c4793780e026$var$ShaderMatcap,$db2cdb138510d69b$var$ShaderNormal=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$db2cdb138510d69b$var$ShaderNormal.vertexName=$db2cdb138510d69b$var$ShaderNormal.fragmentName="ShowNormal",$db2cdb138510d69b$var$ShaderNormal.uniforms={},$db2cdb138510d69b$var$ShaderNormal.attributes={},$db2cdb138510d69b$var$ShaderNormal.activeAttributes={vertex:!0,normal:!0,material:!0},$db2cdb138510d69b$var$ShaderNormal.uniformNames=[],Array.prototype.push.apply($db2cdb138510d69b$var$ShaderNormal.uniformNames,$bdfea6edb628a28d$export$2e2bcd8739ae039.uniformNames.commonUniforms),$db2cdb138510d69b$var$ShaderNormal.vertex=["attribute vec3 aVertex;","attribute vec3 aNormal;","attribute vec3 aMaterial;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.vertUniforms,"varying vec3 vVertex;","varying vec3 vNormal;","varying float vMasking;","void main() {","  vMasking = aMaterial.z;","  vNormal = mix(aNormal, uEN * aNormal, vMasking);","  vNormal = normalize(uN * vNormal);","  vec4 vertex4 = vec4(aVertex, 1.0);","  vertex4 = mix(vertex4, uEM *vertex4, vMasking);","  vVertex = vec3(uMV * vertex4);","  gl_Position = uMVP * vertex4;","}"].join("\n"),$db2cdb138510d69b$var$ShaderNormal.fragment=["varying vec3 vVertex;","varying vec3 vNormal;","uniform float uAlpha;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorUniforms,$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorFunction,"void main() {","  gl_FragColor = encodeFragColor(sRGBToLinear(getNormal() * 0.5 + 0.5), uAlpha);","}"].join("\n");var $db2cdb138510d69b$export$2e2bcd8739ae039=$db2cdb138510d69b$var$ShaderNormal,$d7fcce481cfaf241$var$ShaderUV=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$d7fcce481cfaf241$var$ShaderUV.vertexName=$d7fcce481cfaf241$var$ShaderUV.fragmentName="ShowUV",$d7fcce481cfaf241$var$ShaderUV.texPath="resources/uv.png",$d7fcce481cfaf241$var$ShaderUV.uniforms={},$d7fcce481cfaf241$var$ShaderUV.attributes={},$d7fcce481cfaf241$var$ShaderUV.uniformNames=["uTexture0","uAlbedo"],Array.prototype.push.apply($d7fcce481cfaf241$var$ShaderUV.uniformNames,$bdfea6edb628a28d$export$2e2bcd8739ae039.uniformNames.commonUniforms),$d7fcce481cfaf241$var$ShaderUV.vertex=["attribute vec3 aVertex;","attribute vec3 aNormal;","attribute vec3 aColor;","attribute vec2 aTexCoord;","attribute vec3 aMaterial;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.vertUniforms,"varying vec3 vVertex;","varying vec3 vNormal;","varying vec3 vColor;","varying vec2 vTexCoord;","varying float vMasking;","uniform vec3 uAlbedo;","void main() {","  vColor = uAlbedo.x >= 0.0 ? uAlbedo : aColor;","  vTexCoord = aTexCoord;","  vMasking = aMaterial.z;","  vNormal = mix(aNormal, uEN * aNormal, vMasking);","  vNormal = normalize(uN * vNormal);","  vec4 vertex4 = vec4(aVertex, 1.0);","  vertex4 = mix(vertex4, uEM *vertex4, vMasking);","  vVertex = vec3(uMV * vertex4);","  gl_Position = uMVP * vertex4;","}"].join("\n"),$d7fcce481cfaf241$var$ShaderUV.fragment=["uniform sampler2D uTexture0;","varying vec3 vVertex;","varying vec3 vNormal;","varying vec3 vColor;","varying vec2 vTexCoord;","uniform float uAlpha;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorUniforms,$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.fragColorFunction,"void main() {","  vec3 color = sRGBToLinear(texture2D(uTexture0, vTexCoord).rgb) * sRGBToLinear(vColor);","  gl_FragColor = encodeFragColor(color, uAlpha);","}"].join("\n"),$d7fcce481cfaf241$var$ShaderUV.draw=$bdfea6edb628a28d$export$2e2bcd8739ae039.draw,$d7fcce481cfaf241$var$ShaderUV.drawBuffer=$bdfea6edb628a28d$export$2e2bcd8739ae039.drawBuffer,$d7fcce481cfaf241$var$ShaderUV.getOrCreate=$bdfea6edb628a28d$export$2e2bcd8739ae039.getOrCreate,$d7fcce481cfaf241$var$ShaderUV.initUniforms=$bdfea6edb628a28d$export$2e2bcd8739ae039.initUniforms,$d7fcce481cfaf241$var$ShaderUV.initAttributes=function(e){$bdfea6edb628a28d$export$2e2bcd8739ae039.initAttributes.call(this,e),$d7fcce481cfaf241$var$ShaderUV.attributes.aTexCoord=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,$d7fcce481cfaf241$var$ShaderUV.program,"aTexCoord",2,e.FLOAT)},$d7fcce481cfaf241$var$ShaderUV.bindAttributes=function(e){$bdfea6edb628a28d$export$2e2bcd8739ae039.bindAttributes.call(this,e),$d7fcce481cfaf241$var$ShaderUV.attributes.aTexCoord.bindToBuffer(e.getTexCoordBuffer())},$d7fcce481cfaf241$var$ShaderUV.updateUniforms=function(e,t){var r=e.getGL(),i=this.uniforms;r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.getOrCreateTexture0(r,$d7fcce481cfaf241$var$ShaderUV.texPath,t)||this.getDummyTexture(r)),r.uniform1i(i.uTexture0,0),r.uniform3fv(i.uAlbedo,e.getAlbedo()),$bdfea6edb628a28d$export$2e2bcd8739ae039.updateUniforms.call(this,e,t)};var $d7fcce481cfaf241$export$2e2bcd8739ae039=$d7fcce481cfaf241$var$ShaderUV,$9c687efe1492c078$var$ShaderWireframe=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$9c687efe1492c078$var$ShaderWireframe.vertexName=$9c687efe1492c078$var$ShaderWireframe.fragmentName="Wireframe",$9c687efe1492c078$var$ShaderWireframe.uniforms={},$9c687efe1492c078$var$ShaderWireframe.attributes={},$9c687efe1492c078$var$ShaderWireframe.activeAttributes={vertex:!0,material:!0},$9c687efe1492c078$var$ShaderWireframe.uniformNames=["uMVP","uEM"],$9c687efe1492c078$var$ShaderWireframe.vertex="attribute vec3 aVertex;\nattribute vec3 aMaterial;\nuniform mat4 uMVP;\nuniform mat4 uEM;\nvoid main() {\n  vec4 vertex4 = vec4(aVertex, 1.0);\n  vec4 pos = uMVP * mix(vertex4, uEM * vertex4, aMaterial.z);\n  pos[3] += 0.0001;\n  gl_Position = pos;\n}",$9c687efe1492c078$var$ShaderWireframe.fragment="void main() {\n  gl_FragColor = vec4(0.0, 0.0, 0.0, 0.4);\n}",$9c687efe1492c078$var$ShaderWireframe.getOrCreate=$bdfea6edb628a28d$export$2e2bcd8739ae039.getOrCreate,$9c687efe1492c078$var$ShaderWireframe.draw=function(e){var t=e.getGL();t.useProgram(this.program),this.bindAttributes(e),this.updateUniforms(e),e.getWireframeBuffer().bind(),t.drawElements(t.LINES,2*e.getRenderNbEdges(),t.UNSIGNED_INT,0)},$9c687efe1492c078$var$ShaderWireframe.updateUniforms=function(e){var t=e.getGL();t.uniformMatrix4fv(this.uniforms.uMVP,!1,e.getMVP()),t.uniformMatrix4fv(this.uniforms.uEM,!1,e.getEditMatrix())};var $9c687efe1492c078$export$2e2bcd8739ae039=$9c687efe1492c078$var$ShaderWireframe,$7f5e9131247d3047$var$ShaderFlat=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$7f5e9131247d3047$var$ShaderFlat.vertexName=$7f5e9131247d3047$var$ShaderFlat.fragmentName="FlatColor",$7f5e9131247d3047$var$ShaderFlat.uniforms={},$7f5e9131247d3047$var$ShaderFlat.attributes={},$7f5e9131247d3047$var$ShaderFlat.activeAttributes={vertex:!0,material:!0},$7f5e9131247d3047$var$ShaderFlat.uniformNames=["uColor"],Array.prototype.push.apply($7f5e9131247d3047$var$ShaderFlat.uniformNames,$bdfea6edb628a28d$export$2e2bcd8739ae039.uniformNames.commonUniforms),$7f5e9131247d3047$var$ShaderFlat.vertex=["attribute vec3 aVertex;","attribute vec3 aMaterial;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.vertUniforms,"varying vec3 vVertex;","void main() {","  vec4 vertex4 = vec4(aVertex, 1.0);","  gl_Position = uMVP * mix(vertex4, uEM * vertex4, aMaterial.z);","}"].join("\n"),$7f5e9131247d3047$var$ShaderFlat.fragment="uniform vec3 uColor;\nvoid main() {\n  gl_FragColor = vec4(uColor, 1.0);\n}",$7f5e9131247d3047$var$ShaderFlat.updateUniforms=function(e,t){e.getGL().uniform3fv(this.uniforms.uColor,e.getFlatColor()),$bdfea6edb628a28d$export$2e2bcd8739ae039.updateUniforms.call(this,e,t)};var $7f5e9131247d3047$export$2e2bcd8739ae039=$7f5e9131247d3047$var$ShaderFlat,$5f2482c00b58e362$var$ShaderSelection=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$5f2482c00b58e362$var$ShaderSelection.vertexName=$5f2482c00b58e362$var$ShaderSelection.fragmentName="ShowSelection",$5f2482c00b58e362$var$ShaderSelection.uniforms={},$5f2482c00b58e362$var$ShaderSelection.attributes={},$5f2482c00b58e362$var$ShaderSelection.activeAttributes={vertex:!0},$5f2482c00b58e362$var$ShaderSelection.uniformNames=["uMVP","uColor"],$5f2482c00b58e362$var$ShaderSelection.vertex="attribute vec3 aVertex;\nuniform mat4 uMVP;\nvoid main() {\n  gl_Position = uMVP * vec4(aVertex, 1.0);\n}",$5f2482c00b58e362$var$ShaderSelection.fragment="uniform vec3 uColor;\nvoid main() {\n  gl_FragColor = vec4(uColor, 1.0);\n}",$5f2482c00b58e362$var$ShaderSelection.draw=function(e,t,r){var i=e.getGL();i.useProgram(this.program),i.uniform3fv(this.uniforms.uColor,e.getColor()),t&&(i.uniformMatrix4fv(this.uniforms.uMVP,!1,e.getCircleMVP()),$5f2482c00b58e362$var$ShaderSelection.attributes.aVertex.bindToBuffer(e.getCircleBuffer()),i.drawArrays(i.LINE_LOOP,0,e.getCircleBuffer()._size/3)),i.uniformMatrix4fv(this.uniforms.uMVP,!1,e.getDotMVP()),$5f2482c00b58e362$var$ShaderSelection.attributes.aVertex.bindToBuffer(e.getDotBuffer()),i.drawArrays(i.TRIANGLE_FAN,0,e.getDotBuffer()._size/3),r&&(i.uniformMatrix4fv(this.uniforms.uMVP,!1,e.getDotSymmetryMVP()),i.drawArrays(i.TRIANGLE_FAN,0,e.getDotBuffer()._size/3))};var $5f2482c00b58e362$export$2e2bcd8739ae039=$5f2482c00b58e362$var$ShaderSelection,$01ed5f6c39c9c23f$exports={};$01ed5f6c39c9c23f$exports="#define GLSLIFY 1\nuniform int uBackgroundType;\nuniform float uBlur;\n\nvoid main() {\n  vec3 color;\n  if (uBackgroundType == 0) {\n    color = sRGBToLinear(texture2D(uTexture0, vTexCoord).rgb);\n  } else {\n    vec3 dir = uIblTransform * vec3(vTexCoord.xy * 2.0 - 1.0, -1.0);\n    dir = normalize(dir);\n    if (uBackgroundType == 1) {\n      color = texturePanoramaLod(dir, uBlur * uBlur);\n    } else {\n      color = sphericalHarmonics(dir);\n    }\n  }\n  gl_FragColor = encodeRGBM(color);\n}\n";var $340bc032147cd8d3$var$ShaderBackground=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$340bc032147cd8d3$var$ShaderBackground.vertexName=$340bc032147cd8d3$var$ShaderBackground.fragmentName="Background",$340bc032147cd8d3$var$ShaderBackground.uniforms={},$340bc032147cd8d3$var$ShaderBackground.attributes={},$340bc032147cd8d3$var$ShaderBackground.uniformNames=["uTexture0","uBackgroundType","uIblTransform","uSPH","uBlur","uEnvSize"],$340bc032147cd8d3$var$ShaderBackground.vertex="attribute vec2 aVertex;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\nvoid main() {\n  vTexCoord = aTexCoord;\n  gl_Position = vec4(aVertex, 1.0, 1.0);\n}",$340bc032147cd8d3$var$ShaderBackground.fragment=["varying vec2 vTexCoord;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.colorSpaceGLSL,$parcel$interopDefault($843bbf9428537939$exports),$parcel$interopDefault($01ed5f6c39c9c23f$exports)].join("\n"),$340bc032147cd8d3$var$ShaderBackground.draw=function(e){var t=e.getGL();t.useProgram(this.program),this.bindAttributes(e),this.updateUniforms(e),t.drawArrays(t.TRIANGLE_STRIP,0,4)},$340bc032147cd8d3$var$ShaderBackground.initAttributes=function(e){var t=$340bc032147cd8d3$var$ShaderBackground.program,r=$340bc032147cd8d3$var$ShaderBackground.attributes;r.aVertex=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,t,"aVertex",2,e.FLOAT),r.aTexCoord=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,t,"aTexCoord",2,e.FLOAT)},$340bc032147cd8d3$var$ShaderBackground.bindAttributes=function(e){var t=$340bc032147cd8d3$var$ShaderBackground.attributes;t.aVertex.bindToBuffer(e.getVertexBuffer()),t.aTexCoord.bindToBuffer(e.getTexCoordBuffer())};var $340bc032147cd8d3$var$uIBLTmp=$879d8210211d0bfa$exports.create();$340bc032147cd8d3$var$ShaderBackground.updateUniforms=function(e){var t,r=this.uniforms,i=e._main,a=$cf9005c21d28a2ff$export$2e2bcd8739ae039.environments[$cf9005c21d28a2ff$export$2e2bcd8739ae039.idEnv],s=e.getGL();s.uniform1i(r.uBackgroundType,e.getType()),t=0===e.getType()?e.getTexture():$cf9005c21d28a2ff$export$2e2bcd8739ae039.getOrCreateEnvironment(s,i,a)||e.getTexture(),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t),s.uniform1i(r.uTexture0,0),$879d8210211d0bfa$exports.fromMat4($340bc032147cd8d3$var$uIBLTmp,i.getCamera().getView()),s.uniformMatrix3fv(r.uIblTransform,!1,$879d8210211d0bfa$exports.transpose($340bc032147cd8d3$var$uIBLTmp,$340bc032147cd8d3$var$uIBLTmp)),s.uniform3fv(r.uSPH,a.sph),a.size&&s.uniform2fv(r.uEnvSize,a.size),s.uniform1f(r.uBlur,e.getBlur())};var $340bc032147cd8d3$export$2e2bcd8739ae039=$340bc032147cd8d3$var$ShaderBackground,$idLiu=parcelRequire("idLiu"),$5c249f16ed1e39e0$var$ShaderMerge=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$5c249f16ed1e39e0$var$ShaderMerge.vertexName=$5c249f16ed1e39e0$var$ShaderMerge.fragmentName="Merge",$5c249f16ed1e39e0$var$ShaderMerge.FILMIC=(0,$idLiu.default)().filmic,$5c249f16ed1e39e0$var$ShaderMerge.uniforms={},$5c249f16ed1e39e0$var$ShaderMerge.attributes={},$5c249f16ed1e39e0$var$ShaderMerge.uniformNames=["uTexture0","uTexture1","uFilmic"],$5c249f16ed1e39e0$var$ShaderMerge.vertex="attribute vec2 aVertex;\nvarying vec2 vTexCoord;\nvoid main() {\n  vTexCoord = aVertex * 0.5 + 0.5;\n  gl_Position = vec4(aVertex, 0.5, 1.0);\n}",$5c249f16ed1e39e0$var$ShaderMerge.fragment=["uniform sampler2D uTexture0;","uniform sampler2D uTexture1;","uniform int uFilmic;","varying vec2 vTexCoord;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.colorSpaceGLSL,"void main() {","  vec4 transparent = texture2D(uTexture1, vTexCoord);","  vec3 color = decodeRGBM(texture2D(uTexture0, vTexCoord))*(1.0-transparent.a) + transparent.rgb;","  if(uFilmic == 1){","    vec3 x = max(vec3(0.0), color - vec3(0.004));","    gl_FragColor = vec4((x*(6.2*x+0.5))/(x*(6.2*x+1.7)+0.06), 1.0);","  }else{","    gl_FragColor = vec4(linearTosRGB(color), 1.0);","  }","}"].join("\n"),$5c249f16ed1e39e0$var$ShaderMerge.draw=function(e,t){var r=e.getGL();r.useProgram(this.program),$5c249f16ed1e39e0$var$ShaderMerge.attributes.aVertex.bindToBuffer(e.getVertexBuffer()),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t._rttOpaque.getTexture()),r.uniform1i(this.uniforms.uTexture0,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,t._rttTransparent.getTexture()),r.uniform1i(this.uniforms.uTexture1,1),r.uniform1i(this.uniforms.uFilmic,$5c249f16ed1e39e0$var$ShaderMerge.FILMIC),r.drawArrays(r.TRIANGLES,0,3)},$5c249f16ed1e39e0$var$ShaderMerge.initAttributes=function(e){$5c249f16ed1e39e0$var$ShaderMerge.attributes.aVertex=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,$5c249f16ed1e39e0$var$ShaderMerge.program,"aVertex",2,e.FLOAT)};var $5c249f16ed1e39e0$export$2e2bcd8739ae039=$5c249f16ed1e39e0$var$ShaderMerge,$idLiu=parcelRequire("idLiu"),$00a93160bcc9aa3b$exports={};$00a93160bcc9aa3b$exports="#define GLSLIFY 1\n// https://github.com/mattdesl/glsl-fxaa\n#define FXAA_REDUCE_MIN (1.0/ 128.0)\n#define FXAA_REDUCE_MUL (1.0 / 8.0)\n#define FXAA_SPAN_MAX 8.0\n\nvec3 fxaa(const in sampler2D tex, const in vec2 uvNW, const in vec2 uvNE, const in vec2 uvSW, const in vec2 uvSE, const in vec2 uvM, const in vec2 invRes) {\n    const vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(texture2D(tex, uvNW).xyz, luma);\n    float lumaNE = dot(texture2D(tex, uvNE).xyz, luma);\n    float lumaSW = dot(texture2D(tex, uvSW).xyz, luma);\n    float lumaSE = dot(texture2D(tex, uvSE).xyz, luma);\n    float lumaM  = dot(texture2D(tex, uvM).xyz,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir = vec2(-((lumaNW + lumaNE) - (lumaSW + lumaSE)), ((lumaNW + lumaSW) - (lumaNE + lumaSE)));\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX), max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * invRes;\n    \n    vec3 rgbA = 0.5 * ( texture2D(tex, uvM + dir * (1.0 / 3.0 - 0.5)).xyz + texture2D(tex, uvM + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * ( texture2D(tex, uvM - dir * 0.5).xyz + texture2D(tex, uvM + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if((lumaB < lumaMin) || (lumaB > lumaMax))\n      return rgbA;\n    return rgbB;\n}";var $343709ece629d183$var$ShaderFxaa=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$343709ece629d183$var$ShaderFxaa.vertexName=$343709ece629d183$var$ShaderFxaa.fragmentName="Fxaa",$343709ece629d183$var$ShaderFxaa.FILMIC=(0,$idLiu.default)().filmic,$343709ece629d183$var$ShaderFxaa.uniforms={},$343709ece629d183$var$ShaderFxaa.attributes={},$343709ece629d183$var$ShaderFxaa.uniformNames=["uTexture0","uInvSize"],$343709ece629d183$var$ShaderFxaa.vertex="attribute vec2 aVertex;\nuniform vec2 uInvSize;\nvarying vec2 vUVNW;\nvarying vec2 vUVNE;\nvarying vec2 vUVSW;\nvarying vec2 vUVSE;\nvarying vec2 vUVM;\nvoid main() {\n  vUVM = aVertex * 0.5 + 0.5;\n  vUVNW = vUVM + vec2(-1.0, -1.0) * uInvSize;\n  vUVNE = vUVM + vec2(1.0, -1.0) * uInvSize;\n  vUVSW = vUVM + vec2(-1.0, 1.0) * uInvSize;\n  vUVSE = vUVM + vec2(1.0, 1.0) * uInvSize;\n  gl_Position = vec4(aVertex, 0.5, 1.0);\n}",$343709ece629d183$var$ShaderFxaa.fragment=["uniform sampler2D uTexture0;","uniform vec2 uInvSize;","varying vec2 vUVNW;","varying vec2 vUVNE;","varying vec2 vUVSW;","varying vec2 vUVSE;","varying vec2 vUVM;",$parcel$interopDefault($00a93160bcc9aa3b$exports),$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.colorSpaceGLSL,"void main() {","  gl_FragColor = vec4(fxaa(uTexture0, vUVNW, vUVNE, vUVSW, vUVSE, vUVM, uInvSize), 1.0);","}"].join("\n"),$343709ece629d183$var$ShaderFxaa.draw=function(e,t){var r=e.getGL();r.useProgram(this.program),$343709ece629d183$var$ShaderFxaa.attributes.aVertex.bindToBuffer(e.getVertexBuffer()),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t._rttMerge.getTexture()),r.uniform1i(this.uniforms.uTexture0,0),r.uniform2fv(this.uniforms.uInvSize,e.getInverseSize()),r.drawArrays(r.TRIANGLES,0,3)},$343709ece629d183$var$ShaderFxaa.initAttributes=function(e){$343709ece629d183$var$ShaderFxaa.attributes.aVertex=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,$343709ece629d183$var$ShaderFxaa.program,"aVertex",2,e.FLOAT)};var $343709ece629d183$export$2e2bcd8739ae039=$343709ece629d183$var$ShaderFxaa,$idLiu=parcelRequire("idLiu"),$296c43155313efc1$exports={};$296c43155313efc1$exports="#define GLSLIFY 1\nfloat outlineDistance( const in vec2 uv, const in sampler2D tex, const in vec2 invSize ) {\n  float fac0 = 2.0;\n  float fac1 = 1.0;\n  float ox = invSize.x;\n  float oy = invSize.y;\n  vec4 texel0 = texture2D(tex, uv + vec2(ox, oy));\n  vec4 texel1 = texture2D(tex, uv + vec2(ox, 0.0));\n  vec4 texel2 = texture2D(tex, uv + vec2(ox, -oy));\n  vec4 texel3 = texture2D(tex, uv + vec2(0.0, -oy));\n  vec4 texel4 = texture2D(tex, uv + vec2(-ox, -oy));\n  vec4 texel5 = texture2D(tex, uv + vec2(-ox, 0.0));\n  vec4 texel6 = texture2D(tex, uv + vec2(-ox, oy));\n  vec4 texel7 = texture2D(tex, uv + vec2(0.0, oy));\n  vec4 rowx = -fac0 * texel5 + fac0 * texel1 + -fac1 * texel6 + fac1 * texel0 + -fac1 * texel4 + fac1 * texel2;\n  vec4 rowy = -fac0 * texel3 + fac0 * texel7 + -fac1 * texel4 + fac1 * texel6 + -fac1 * texel2 + fac1 * texel0;\n  return dot(rowy, rowy) + dot(rowx, rowx);\n}\n";var $bbc51a120536ab4c$var$ShaderContour=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$bbc51a120536ab4c$var$ShaderContour.vertexName=$bbc51a120536ab4c$var$ShaderContour.fragmentName="SobelContour",$bbc51a120536ab4c$var$ShaderContour.color=(0,$idLiu.default)().outlinecolor,$bbc51a120536ab4c$var$ShaderContour.uniforms={},$bbc51a120536ab4c$var$ShaderContour.attributes={},$bbc51a120536ab4c$var$ShaderContour.uniformNames=["uTexture0","uColor","uInvSize"],$bbc51a120536ab4c$var$ShaderContour.vertex="attribute vec2 aVertex;\nvarying vec2 vTexCoord;\nvoid main() {\n  vTexCoord = aVertex * 0.5 + 0.5;\n  gl_Position = vec4(aVertex, 0.0, 1.0);\n}",$bbc51a120536ab4c$var$ShaderContour.fragment=["#extension GL_OES_standard_derivatives : enable","uniform sampler2D uTexture0;","uniform vec4 uColor;","varying vec2 vTexCoord;","uniform vec2 uInvSize;",$parcel$interopDefault($296c43155313efc1$exports),$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.colorSpaceGLSL,"void main() {","  float mag = outlineDistance(vTexCoord, uTexture0, uInvSize);","  if (mag < 1.5) discard;","  gl_FragColor = vec4(sRGBToLinear(uColor.rgb) * uColor.a, uColor.a);","}"].join("\n"),$bbc51a120536ab4c$var$ShaderContour.draw=function(e){var t=e.getGL();t.useProgram(this.program),$bbc51a120536ab4c$var$ShaderContour.attributes.aVertex.bindToBuffer(e.getVertexBuffer()),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e.getTexture()),t.uniform1i(this.uniforms.uTexture0,0),t.uniform4fv(this.uniforms.uColor,$bbc51a120536ab4c$var$ShaderContour.color),t.uniform2fv(this.uniforms.uInvSize,e.getInverseSize()),t.drawArrays(t.TRIANGLES,0,3)},$bbc51a120536ab4c$var$ShaderContour.initAttributes=function(e){$bbc51a120536ab4c$var$ShaderContour.attributes.aVertex=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,$bbc51a120536ab4c$var$ShaderContour.program,"aVertex",2,e.FLOAT)};var $bbc51a120536ab4c$export$2e2bcd8739ae039=$bbc51a120536ab4c$var$ShaderContour,$54b9f7b0e56a382c$var$ShaderPaintUV=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$54b9f7b0e56a382c$var$ShaderPaintUV.CHANNEL_VALUE=0,$54b9f7b0e56a382c$var$ShaderPaintUV.vertexName=$54b9f7b0e56a382c$var$ShaderPaintUV.fragmentName="PaintUV",$54b9f7b0e56a382c$var$ShaderPaintUV.uniforms={},$54b9f7b0e56a382c$var$ShaderPaintUV.attributes={},$54b9f7b0e56a382c$var$ShaderPaintUV.uniformNames=["uChannelPaint"],$54b9f7b0e56a382c$var$ShaderPaintUV.activeAttributes={color:!0,material:!0},$54b9f7b0e56a382c$var$ShaderPaintUV.vertex="attribute vec2 aTexCoord;\nattribute vec3 aColor;\nattribute vec3 aMaterial;\nvarying vec3 vColor;\nvarying vec2 vMaterial;\nvoid main() {\n  vColor = aColor;\n  vMaterial = aMaterial.xy;\n  gl_Position = vec4((aTexCoord * 2.0 - 1.0) * vec2(1.0, -1.0), 0.5, 1.0);\n}",$54b9f7b0e56a382c$var$ShaderPaintUV.fragment="varying vec3 vColor;\nvarying vec2 vMaterial;\nuniform int uChannelPaint;\nvoid main() {\n  gl_FragColor = vec4(uChannelPaint == 0 ? vColor : uChannelPaint == 1 ? vMaterial.xxx : vMaterial.yyy, 1.0);\n}",$54b9f7b0e56a382c$var$ShaderPaintUV.initAttributes=function(e){$bdfea6edb628a28d$export$2e2bcd8739ae039.initAttributes.call(this,e),$54b9f7b0e56a382c$var$ShaderPaintUV.attributes.aTexCoord=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,$54b9f7b0e56a382c$var$ShaderPaintUV.program,"aTexCoord",2,e.FLOAT)},$54b9f7b0e56a382c$var$ShaderPaintUV.bindAttributes=function(e){$bdfea6edb628a28d$export$2e2bcd8739ae039.bindAttributes.call(this,e),$54b9f7b0e56a382c$var$ShaderPaintUV.attributes.aTexCoord.bindToBuffer(e.getTexCoordBuffer())},$54b9f7b0e56a382c$var$ShaderPaintUV.updateUniforms=function(e){e.getGL().uniform1i(this.uniforms.uChannelPaint,$54b9f7b0e56a382c$var$ShaderPaintUV.CHANNEL_VALUE)};var $54b9f7b0e56a382c$export$2e2bcd8739ae039=$54b9f7b0e56a382c$var$ShaderPaintUV,$0686e9cc68c46de2$var$ShaderBlur=$bdfea6edb628a28d$export$2e2bcd8739ae039.getCopy();$0686e9cc68c46de2$var$ShaderBlur.vertexName=$0686e9cc68c46de2$var$ShaderBlur.fragmentName="Blur",$0686e9cc68c46de2$var$ShaderBlur.INPUT_TEXTURE=null,$0686e9cc68c46de2$var$ShaderBlur.uniforms={},$0686e9cc68c46de2$var$ShaderBlur.attributes={},$0686e9cc68c46de2$var$ShaderBlur.uniformNames=["uTexture0","uInvSize"],$0686e9cc68c46de2$var$ShaderBlur.vertex="attribute vec2 aVertex;\nvarying vec2 vTexCoord;\nvoid main() {\n  vTexCoord = aVertex * 0.5 + 0.5;\n  gl_Position = vec4(aVertex, 0.5, 1.0);\n}",$0686e9cc68c46de2$var$ShaderBlur.fragment=["uniform sampler2D uTexture0;","varying vec2 vTexCoord;","uniform vec2 uInvSize;",$bdfea6edb628a28d$export$2e2bcd8739ae039.strings.colorSpaceGLSL,"void main() {","    const int KER_SIZE = 8;","    vec4 avg = texture2D(uTexture0, vTexCoord);","    if (avg.a < 0.1) {","        for (int i = -KER_SIZE; i <= KER_SIZE; ++i) {","            for (int j = -KER_SIZE; j <= KER_SIZE; ++j) {","                if (i == 0 && j == 0) continue;","                vec4 fetch = texture2D(uTexture0, vTexCoord + vec2(i, j) * uInvSize);","                avg.rgb += sRGBToLinear(fetch.rgb) * fetch.a;","                avg.a += fetch.a;","            }","        }","        avg.rgb = avg.a == 0.0 ? vec3(0.0) : linearTosRGB(avg.rgb / avg.a);","    }","    gl_FragColor = vec4(avg.rgb, 1.0);","}"].join("\n"),$0686e9cc68c46de2$var$ShaderBlur.draw=function(e){var t=e.getGL();t.useProgram(this.program),$0686e9cc68c46de2$var$ShaderBlur.attributes.aVertex.bindToBuffer(e.getVertexBuffer()),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,$0686e9cc68c46de2$var$ShaderBlur.INPUT_TEXTURE.getTexture()),t.uniform1i(this.uniforms.uTexture0,0),t.uniform2fv(this.uniforms.uInvSize,$0686e9cc68c46de2$var$ShaderBlur.INPUT_TEXTURE.getInverseSize()),t.drawArrays(t.TRIANGLES,0,3)},$0686e9cc68c46de2$var$ShaderBlur.initAttributes=function(e){$0686e9cc68c46de2$var$ShaderBlur.attributes.aVertex=new $5b1a8011954f2ba8$export$2e2bcd8739ae039(e,$0686e9cc68c46de2$var$ShaderBlur.program,"aVertex",2,e.FLOAT)};var $0686e9cc68c46de2$export$2e2bcd8739ae039=$0686e9cc68c46de2$var$ShaderBlur,$2a4cd6b5cd522bb1$var$ShaderLib=[];$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.PBR]=$cf9005c21d28a2ff$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.MATCAP]=$73d1c4793780e026$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.NORMAL]=$db2cdb138510d69b$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.UV]=$d7fcce481cfaf241$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.WIREFRAME]=$9c687efe1492c078$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.FLAT]=$7f5e9131247d3047$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.SELECTION]=$5f2482c00b58e362$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.BACKGROUND]=$340bc032147cd8d3$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.MERGE]=$5c249f16ed1e39e0$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.FXAA]=$343709ece629d183$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.CONTOUR]=$bbc51a120536ab4c$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.PAINTUV]=$54b9f7b0e56a382c$export$2e2bcd8739ae039,$2a4cd6b5cd522bb1$var$ShaderLib[$eIUYI.default.Shader.BLUR]=$0686e9cc68c46de2$export$2e2bcd8739ae039;var $2a4cd6b5cd522bb1$export$2e2bcd8739ae039=$2a4cd6b5cd522bb1$var$ShaderLib,$eIUYI=parcelRequire("eIUYI"),$a05e7775935be692$var$_TMP_MATPV=$3iqbd.create(),$a05e7775935be692$var$_TMP_MAT=$3iqbd.create(),$a05e7775935be692$var$_TMP_VEC=[0,0,0],$a05e7775935be692$var$_TMP_AXIS=[0,0,0],$a05e7775935be692$var$_BASE=[0,0,1],$a05e7775935be692$var$DOT_RADIUS=50;class $a05e7775935be692$var$Selection{constructor(e){this._gl=e,this._circleBuffer=new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.STATIC_DRAW),this._dotBuffer=new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.STATIC_DRAW),this._cacheDotMVP=$3iqbd.create(),this._cacheDotSymMVP=$3iqbd.create(),this._cacheCircleMVP=$3iqbd.create(),this._color=new Float32Array([.8,0,0]),this._offsetX=0,this._isEditMode=!1,this.init()}getGL(){return this._gl}getCircleBuffer(){return this._circleBuffer}getDotBuffer(){return this._dotBuffer}getCircleMVP(){return this._cacheCircleMVP}getDotMVP(){return this._cacheDotMVP}getDotSymmetryMVP(){return this._cacheDotSymMVP}getColor(){return this._color}setIsEditMode(e){this._isEditMode=e}getIsEditMode(){return this._isEditMode}setOffsetX(e){this._offsetX=e}getOffsetX(){return this._offsetX}init(){this.getCircleBuffer().update(this._getCircleVertices(1)),this.getDotBuffer().update(this._getDotVertices(.05,10))}release(){this.getCircleBuffer().release(),this.getDotBuffer().release()}_getCircleVertices(e=1,t=50,r=!1){for(var i=2*Math.PI,a=r?1:0,s=r?t+2:t,n=new Float32Array(3*s),o=a;o<s;++o){var l=3*o,u=i*o/t;n[l]=Math.cos(u)*e,n[l+1]=Math.sin(u)*e}return n}_getDotVertices(e,t){return this._getCircleVertices(e,t,!0)}_updateMatricesBackground(e,t){var r=t.getSculptManager().getCurrentTool().getScreenRadius(),i=.5*e._width,a=.5*e._height;$3iqbd.ortho($a05e7775935be692$var$_TMP_MATPV,-i,i,-a,a,-10,10),$3iqbd.identity($a05e7775935be692$var$_TMP_MAT),$3iqbd.translate($a05e7775935be692$var$_TMP_MAT,$a05e7775935be692$var$_TMP_MAT,$eIStk.set($a05e7775935be692$var$_TMP_VEC,-i+t._mouseX+this._offsetX,a-t._mouseY,0)),$3iqbd.scale(this._cacheCircleMVP,$a05e7775935be692$var$_TMP_MAT,$eIStk.set($a05e7775935be692$var$_TMP_VEC,r,r,r)),$3iqbd.mul(this._cacheCircleMVP,$a05e7775935be692$var$_TMP_MATPV,this._cacheCircleMVP),$3iqbd.scale(this._cacheDotMVP,$a05e7775935be692$var$_TMP_MAT,$eIStk.set($a05e7775935be692$var$_TMP_VEC,$a05e7775935be692$var$DOT_RADIUS,$a05e7775935be692$var$DOT_RADIUS,$a05e7775935be692$var$DOT_RADIUS)),$3iqbd.mul(this._cacheDotMVP,$a05e7775935be692$var$_TMP_MATPV,this._cacheDotMVP),$3iqbd.scale(this._cacheDotSymMVP,this._cacheDotSymMVP,[0,0,0])}_updateMatricesMesh(e,t){var r=t.getPicking(),i=t.getPickingSymmetry(),a=Math.sqrt(r.computeWorldRadius2(!0)),s=t.getSculptManager().getCurrentTool().getScreenRadius(),n=r.getMesh(),o=a/s*$a05e7775935be692$var$DOT_RADIUS;r.polyLerp(n.getNormals(),$a05e7775935be692$var$_TMP_AXIS),$eIStk.transformMat3($a05e7775935be692$var$_TMP_AXIS,$a05e7775935be692$var$_TMP_AXIS,$879d8210211d0bfa$exports.normalFromMat4($a05e7775935be692$var$_TMP_MAT,n.getMatrix())),$eIStk.normalize($a05e7775935be692$var$_TMP_AXIS,$a05e7775935be692$var$_TMP_AXIS);var l=Math.acos($eIStk.dot($a05e7775935be692$var$_BASE,$a05e7775935be692$var$_TMP_AXIS));$eIStk.cross($a05e7775935be692$var$_TMP_AXIS,$a05e7775935be692$var$_BASE,$a05e7775935be692$var$_TMP_AXIS),$3iqbd.identity($a05e7775935be692$var$_TMP_MAT),$3iqbd.translate($a05e7775935be692$var$_TMP_MAT,$a05e7775935be692$var$_TMP_MAT,$eIStk.transformMat4($a05e7775935be692$var$_TMP_VEC,r.getIntersectionPoint(),n.getMatrix())),$3iqbd.rotate($a05e7775935be692$var$_TMP_MAT,$a05e7775935be692$var$_TMP_MAT,l,$a05e7775935be692$var$_TMP_AXIS),$3iqbd.mul($a05e7775935be692$var$_TMP_MATPV,e.getProjection(),e.getView()),$3iqbd.scale(this._cacheCircleMVP,$a05e7775935be692$var$_TMP_MAT,$eIStk.set($a05e7775935be692$var$_TMP_VEC,a,a,a)),$3iqbd.mul(this._cacheCircleMVP,$a05e7775935be692$var$_TMP_MATPV,this._cacheCircleMVP),$3iqbd.scale(this._cacheDotMVP,$a05e7775935be692$var$_TMP_MAT,$eIStk.set($a05e7775935be692$var$_TMP_VEC,o,o,o)),$3iqbd.mul(this._cacheDotMVP,$a05e7775935be692$var$_TMP_MATPV,this._cacheDotMVP),$eIStk.transformMat4($a05e7775935be692$var$_TMP_VEC,i.getIntersectionPoint(),n.getMatrix()),$3iqbd.identity($a05e7775935be692$var$_TMP_MAT),$3iqbd.translate($a05e7775935be692$var$_TMP_MAT,$a05e7775935be692$var$_TMP_MAT,$a05e7775935be692$var$_TMP_VEC),$3iqbd.rotate($a05e7775935be692$var$_TMP_MAT,$a05e7775935be692$var$_TMP_MAT,l,$a05e7775935be692$var$_TMP_AXIS),$3iqbd.scale($a05e7775935be692$var$_TMP_MAT,$a05e7775935be692$var$_TMP_MAT,$eIStk.set($a05e7775935be692$var$_TMP_VEC,o,o,o)),$3iqbd.mul(this._cacheDotSymMVP,$a05e7775935be692$var$_TMP_MATPV,$a05e7775935be692$var$_TMP_MAT)}render(e){var t=e.getPicking().getMesh()&&!this._isEditMode;t?this._updateMatricesMesh(e.getCamera(),e):this._updateMatricesBackground(e.getCamera(),e);var r=e._action===$eIUYI.default.Action.NOTHING;$eIStk.set(this._color,.8,r&&t?0:.4,0),$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[(0,$eIUYI.default).Shader.SELECTION].getOrCreate(this._gl).draw(this,r,e.getSculptManager().getSymmetry()),this._isEditMode=!1}}var $a05e7775935be692$export$2e2bcd8739ae039=$a05e7775935be692$var$Selection,$eIUYI=parcelRequire("eIUYI"),$eIStk=parcelRequire("eIStk"),$im4cd=parcelRequire("im4cd"),$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3");class $498fabb45675e18e$var$SculptBase{constructor(e){this._main=e,this._cbContinuous=this.updateContinuous.bind(this),this._lastMouseX=0,this._lastMouseY=0}setToolMesh(e){this._forceToolMesh=e}getMesh(){return this._forceToolMesh||this._main.getMesh()}start(e){var t=this._main,r=t.getPicking();if(!r.intersectionMouseMeshes())return!1;var i=t.setOrUnsetMesh(r.getMesh(),e);if(!i)return!1;r.initAlpha();var a=t.getSculptManager().getSymmetry()?t.getPickingSymmetry():null;return a&&(a.intersectionMouseMesh(i),a.initAlpha()),this.pushState(),this._lastMouseX=t._mouseX,this._lastMouseY=t._mouseY,this.startSculpt(),!0}end(){this.getMesh()&&this.getMesh().balanceOctree()}pushState(){this._main.getStateManager().pushStateGeometry(this.getMesh())}startSculpt(){!0!==this._lockPosition&&this.sculptStroke()}preUpdate(e){var t=this._main,r=t.getPicking(),i=t._action===$eIUYI.default.Action.SCULPT_EDIT;if(!i||e){i?r.intersectionMouseMesh():r.intersectionMouseMeshes();var a=r.getMesh();a&&t.getSculptManager().getSymmetry()&&t.getPickingSymmetry().intersectionMouseMesh(a)}}update(e){if(!0===this._lockPosition)return this.updateSculptLock(e);this.sculptStroke()}updateSculptLock(e){var t=this._main;e||this._main.getStateManager().getCurrentState().undo();var r=t.getPicking(),i=this._radius,a=t.getSculptManager().getSymmetry()?t.getPickingSymmetry():null,s=t._mouseX-this._lastMouseX,n=t._mouseY-this._lastMouseY;this._radius=Math.sqrt(s*s+n*n);var o=s/this._radius,l=n/this._radius;this.makeStroke(this._lastMouseX+.001*o,this._lastMouseY+.001*l,r,a),this._radius=i,this.updateRender(),t.setCanvasCursor("default")}sculptStroke(){var e=this._main,t=e.getPicking(),r=e.getSculptManager().getSymmetry()?e.getPickingSymmetry():null,i=e._mouseX-this._lastMouseX,a=e._mouseY-this._lastMouseY,s=Math.sqrt(i*i+a*a),n=.15*this._radius*e.getPixelRatio();if(!(s<=n)){var o=1/Math.floor(s/n);i*=o,a*=o;for(var l=this._lastMouseX+i,u=this._lastMouseY+a,h=o;h<=1&&this.makeStroke(l,u,t,r);h+=o)l+=i,u+=a;this.updateRender(),this._lastMouseX=e._mouseX,this._lastMouseY=e._mouseY}}updateRender(){this.updateMeshBuffers(),this._main.render()}makeStroke(e,t,r,i){var a,s=this.getMesh();r.intersectionMouseMesh(s,e,t);var n=r.getMesh();n&&(r.pickVerticesInSphere(r.getLocalRadius2()),r.computePickedNormal());var o=s.isDynamic&&!this._lockPosition;return o&&n&&this.stroke(r,!1),i&&(i.intersectionMouseMesh(s,e,t),(a=i.getMesh())&&(i.setLocalRadius2(r.getLocalRadius2()),i.pickVerticesInSphere(i.getLocalRadius2()),i.computePickedNormal())),!o&&n&&this.stroke(r,!1),a&&this.stroke(i,!0),n||a}updateMeshBuffers(){var e=this.getMesh();e.isDynamic?e.updateBuffers():e.updateGeometryBuffers()}updateContinuous(){if(this._lockPosition)return this.update(!0);var e=this._main,t=e.getPicking(),r=e.getSculptManager().getSymmetry()?e.getPickingSymmetry():null;this.makeStroke(e._mouseX,e._mouseY,t,r),this.updateRender()}getFrontVertices(e,t){for(var r=e.length,i=new Uint32Array((0,$jLaD3.default).getMemory(4*r),0,r),a=0,s=this.getMesh().getNormals(),n=t[0],o=t[1],l=t[2],u=0;u<r;++u){var h=e[u],c=3*h;s[c]*n+s[c+1]*o+s[c+2]*l<=0&&(i[a++]=h)}return new Uint32Array(i.subarray(0,a))}areaNormal(e){for(var t=this.getMesh(),r=t.getNormals(),i=t.getMaterials(),a=0,s=0,n=0,o=0,l=e.length;o<l;++o){var u=3*e[o],h=i[u+2];a+=r[u]*h,s+=r[u+1]*h,n+=r[u+2]*h}var c=Math.sqrt(a*a+s*s+n*n);if(0!==c)return[a*(c=1/c),s*c,n*c]}areaCenter(e){for(var t=this.getMesh(),r=t.getVertices(),i=t.getMaterials(),a=e.length,s=0,n=0,o=0,l=0,u=0;u<a;++u){var h=3*e[u],c=i[h+2];l+=c,s+=r[h]*c,n+=r[h+1]*c,o+=r[h+2]*c}return[s/l,n/l,o/l]}updateProxy(e){var t=this.getMesh(),r=t.getVertices(),i=t.getVerticesProxy();if(r!==i)for(var a=t.getVerticesStateFlags(),s=$jLaD3.default.STATE_FLAG,n=0,o=e.length;n<o;++n){var l=e[n];if(a[l]!==s){var u=3*l;i[u]=r[u],i[u+1]=r[u+1],i[u+2]=r[u+2]}}}laplacianSmooth(e,t,r){for(var i=this.getMesh(),a=i.getVerticesRingVertStartCount(),s=i.getVerticesRingVert(),n=s instanceof Array?s:null,o=i.getVerticesOnEdge(),l=r||i.getVertices(),u=e.length,h=0;h<u;++h){var c,d,g=3*h,p=e[h];n?(s=n[p],c=0,d=s.length):d=(c=a[2*p])+a[2*p+1];var m=0,f=d-c;if(f<=2){m=3*p,t[g]=l[m],t[g+1]=l[m+1],t[g+2]=l[m+2];continue}var _=0,v=0,T=0,M=0;if(1===o[p]){var y=0;for(M=c;M<d;++M)1===o[m=s[M]]&&(m*=3,_+=l[m],v+=l[m+1],T+=l[m+2],++y);if(y>=2){t[g]=_/y,t[g+1]=v/y,t[g+2]=T/y;continue}_=v=T=0}for(M=c;M<d;++M)_+=l[m=3*s[M]],v+=l[m+1],T+=l[m+2];t[g]=_/f,t[g+1]=v/f,t[g+2]=T/f}}dynamicTopology(e){var t=this.getMesh(),r=e.getPickedVertices();if(!t.isDynamic)return r;var i=t.getSubdivisionFactor(),a=t.getDecimationFactor();if(0===i&&0===a)return r;0===r.length&&(r=t.getVerticesFromFaces([e.getPickedFace()]),this._main.getStateManager().pushVertices(r));var s=t.getFacesFromVertices(r),n=e.getLocalRadius2(),o=e.getIntersectionPoint(),l=n*(1.1-i)*.2,u=l/4.2025*a;this._main.getStateManager().pushFaces(s),i&&(s=t.subdivide(s,o,n,l,this._main.getStateManager())),a&&(s=t.decimate(s,o,n,u,this._main.getStateManager()));for(var h=(r=t.getVerticesFromFaces(s)).length,c=$jLaD3.default.SCULPT_FLAG,d=t.getVerticesSculptFlags(),g=new Uint32Array((0,$jLaD3.default).getMemory(4*h),0,h),p=0,m=0;m<h;++m){var f=r[m];d[f]===c&&(g[p++]=f)}return g=new Uint32Array(g.subarray(0,p)),t.updateTopology(s,r),t.updateGeometry(s,r),g}getUnmaskedVertices(){return this.filterMaskedVertices(0,1/0)}getMaskedVertices(){return this.filterMaskedVertices(-1/0,1)}filterMaskedVertices(e=-1/0,t=1/0){for(var r=this.getMesh(),i=r.getMaterials(),a=r.getNbVertices(),s=new Uint32Array((0,$jLaD3.default).getMemory(4*a),0,a),n=0,o=0;o<a;++o){var l=i[3*o+2];l>e&&l<t&&(s[n++]=o)}return new Uint32Array(s.subarray(0,n))}postRender(e){e.render(this._main)}addSculptToScene(){}getScreenRadius(){return(this._radius||1)*this._main.getPixelRatio()}}var $498fabb45675e18e$export$2e2bcd8739ae039=$498fabb45675e18e$var$SculptBase,$im4cd=parcelRequire("im4cd");class $38e57fae688bbc00$var$Flatten extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._intensity=.75,this._negative=!0,this._culling=!1,this._idAlpha=0,this._lockPosition=!1}stroke(e){var t=e.getPickedVertices(),r=this._intensity*(0,$im4cd.default).getPressureIntensity();this._main.getStateManager().pushVertices(t),t=this.dynamicTopology(e);var i=this.getFrontVertices(t,e.getEyeDirection());this._culling&&(t=i);var a=this.areaNormal(i);if(a){var s=this.areaCenter(i);e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this.flatten(t,a,s,e.getIntersectionPoint(),e.getLocalRadius2(),r,e);var n=this.getMesh();n.updateGeometry(n.getFacesFromVertices(t),t)}}flatten(e,t,r,i,a,s,n){for(var o=this.getMesh(),l=o.getVertices(),u=o.getMaterials(),h=Math.sqrt(a),c=!1===this._accumulate&&!1===this._lockPosition?o.getVerticesProxy():l,d=i[0],g=i[1],p=i[2],m=r[0],f=r[1],_=r[2],v=t[0],T=t[1],M=t[2],y=this._negative?-1:1,b=0,A=e.length;b<A;++b){var S=3*e[b],x=l[S],R=l[S+1],E=l[S+2],C=(x-m)*v+(R-f)*T+(E-_)*M;if(!(C*y>0)){var w=c[S]-d,F=c[S+1]-g,I=c[S+2]-p,D=Math.sqrt(w*w+F*F+I*I)/h;if(!(D>=1)){var V=D*D;V=3*V*V-4*V*D+1,V*=C*s*u[S+2]*n.getAlpha(x,R,E),l[S]-=v*V,l[S+1]-=T*V,l[S+2]-=M*V}}}}}var $38e57fae688bbc00$export$2e2bcd8739ae039=$38e57fae688bbc00$var$Flatten;class $cd3217c15e86483a$var$Brush extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._intensity=.5,this._negative=!1,this._clay=!0,this._culling=!1,this._accumulate=!0,this._idAlpha=0,this._lockPosition=!1}stroke(e){var t=e.getPickedVertices(),r=this._intensity*(0,$im4cd.default).getPressureIntensity();this._accumulate||this._lockPosition||this.updateProxy(t),this._main.getStateManager().pushVertices(t),this._lockPosition||(t=this.dynamicTopology(e));var i=this.getFrontVertices(t,e.getEyeDirection());this._culling&&(t=i);var a=e.getLocalRadius2();if(e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this._clay){var s=this.areaNormal(i);if(!s)return;var n=this._lockPosition?e.getIntersectionPoint():this.areaCenter(i),o=.1*Math.sqrt(a);$eIStk.scaleAndAdd(n,n,s,this._negative?-o:o),$38e57fae688bbc00$export$2e2bcd8739ae039.prototype.flatten.call(this,t,s,n,e.getIntersectionPoint(),a,r,e)}else this.brush(t,e.getPickedNormal(),e.getIntersectionPoint(),a,r,e);var l=this.getMesh();l.updateGeometry(l.getFacesFromVertices(t),t)}brush(e,t,r,i,a,s){var n=this.getMesh(),o=n.getVertices(),l=n.getMaterials(),u=this._accumulate||this._lockPosition?o:n.getVerticesProxy(),h=Math.sqrt(i),c=a*h*.1;this._negative&&(c=-c);for(var d=r[0],g=r[1],p=r[2],m=t[0],f=t[1],_=t[2],v=0,T=e.length;v<T;++v){var M=3*e[v],y=u[M]-d,b=u[M+1]-g,A=u[M+2]-p,S=Math.sqrt(y*y+b*b+A*A)/h;if(!(S>=1)){var x=o[M],R=o[M+1],E=o[M+2],C=S*S;C=3*C*C-4*C*S+1,C*=l[M+2]*c*s.getAlpha(x,R,E),o[M]=x+m*C,o[M+1]=R+f*C,o[M+2]=E+_*C}}}}var $cd3217c15e86483a$export$2e2bcd8739ae039=$cd3217c15e86483a$var$Brush,$im4cd=parcelRequire("im4cd");class $d1028195f8dc1f1f$var$Inflate extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._intensity=.3,this._negative=!1,this._culling=!1,this._idAlpha=0,this._lockPosition=!1}stroke(e){var t=e.getPickedVertices(),r=this._intensity*(0,$im4cd.default).getPressureIntensity();this.updateProxy(t),this._main.getStateManager().pushVertices(t),t=this.dynamicTopology(e),this._culling&&(t=this.getFrontVertices(t,e.getEyeDirection())),e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this.inflate(t,e.getIntersectionPoint(),e.getLocalRadius2(),r,e);var i=this.getMesh();i.updateGeometry(i.getFacesFromVertices(t),t)}inflate(e,t,r,i,a){var s=this.getMesh(),n=s.getVertices(),o=s.getMaterials(),l=s.getVerticesProxy(),u=s.getNormals(),h=Math.sqrt(r),c=i*h*.1;this._negative&&(c=-c);for(var d=t[0],g=t[1],p=t[2],m=0,f=e.length;m<f;++m){var _=3*e[m],v=l[_]-d,T=l[_+1]-g,M=l[_+2]-p,y=Math.sqrt(v*v+T*T+M*M)/h;if(!(y>=1)){var b=y*y;b=3*b*b-4*b*y+1,b*=c;var A=n[_],S=n[_+1],x=n[_+2],R=u[_],E=u[_+1],C=u[_+2];b/=Math.sqrt(R*R+E*E+C*C),b*=o[_+2]*a.getAlpha(A,S,x),n[_]=A+R*b,n[_+1]=S+E*b,n[_+2]=x+C*b}}}}var $d1028195f8dc1f1f$export$2e2bcd8739ae039=$d1028195f8dc1f1f$var$Inflate,$e92e4eb8d35aaf31$exports={};$parcel$export($e92e4eb8d35aaf31$exports,"create",()=>$e92e4eb8d35aaf31$export$185802fd694ee1f5),$parcel$export($e92e4eb8d35aaf31$exports,"identity",()=>$e92e4eb8d35aaf31$export$f0954fd7d5368655),$parcel$export($e92e4eb8d35aaf31$exports,"setAxisAngle",()=>$e92e4eb8d35aaf31$export$4286ddefc8f49512),$parcel$export($e92e4eb8d35aaf31$exports,"getAxisAngle",()=>$e92e4eb8d35aaf31$export$3f70be5e7d7dc51),$parcel$export($e92e4eb8d35aaf31$exports,"getAngle",()=>$e92e4eb8d35aaf31$export$b363da9ded343252),$parcel$export($e92e4eb8d35aaf31$exports,"dot",()=>$e92e4eb8d35aaf31$export$94132a0e348806d4),$parcel$export($e92e4eb8d35aaf31$exports,"multiply",()=>$e92e4eb8d35aaf31$export$2060d2db72cce88f),$parcel$export($e92e4eb8d35aaf31$exports,"rotateX",()=>$e92e4eb8d35aaf31$export$a59c8716592e09af),$parcel$export($e92e4eb8d35aaf31$exports,"rotateY",()=>$e92e4eb8d35aaf31$export$cf71e4d4ca4d1cfd),$parcel$export($e92e4eb8d35aaf31$exports,"rotateZ",()=>$e92e4eb8d35aaf31$export$ea6eae3365de5b9c),$parcel$export($e92e4eb8d35aaf31$exports,"calculateW",()=>$e92e4eb8d35aaf31$export$fb72b72e8d764d4e),$parcel$export($e92e4eb8d35aaf31$exports,"exp",()=>$e92e4eb8d35aaf31$export$b310ec824aaee37f),$parcel$export($e92e4eb8d35aaf31$exports,"ln",()=>$e92e4eb8d35aaf31$export$876cb1b29620556f),$parcel$export($e92e4eb8d35aaf31$exports,"pow",()=>$e92e4eb8d35aaf31$export$9c297f60e22e3389),$parcel$export($e92e4eb8d35aaf31$exports,"scale",()=>$e92e4eb8d35aaf31$export$dcdf75081b88279d),$parcel$export($e92e4eb8d35aaf31$exports,"slerp",()=>$e92e4eb8d35aaf31$export$1544d9bc2995de08),$parcel$export($e92e4eb8d35aaf31$exports,"random",()=>$e92e4eb8d35aaf31$export$4385e60b38654f68),$parcel$export($e92e4eb8d35aaf31$exports,"invert",()=>$e92e4eb8d35aaf31$export$6897c284b6f9f4dc),$parcel$export($e92e4eb8d35aaf31$exports,"conjugate",()=>$e92e4eb8d35aaf31$export$7679f47e72c62560),$parcel$export($e92e4eb8d35aaf31$exports,"fromMat3",()=>$e92e4eb8d35aaf31$export$272a1eb8e5a4b55b),$parcel$export($e92e4eb8d35aaf31$exports,"fromEuler",()=>$e92e4eb8d35aaf31$export$7a404a587ea85af),$parcel$export($e92e4eb8d35aaf31$exports,"str",()=>$e92e4eb8d35aaf31$export$42d51816ce590c93),$parcel$export($e92e4eb8d35aaf31$exports,"clone",()=>$e92e4eb8d35aaf31$export$9cd59f9826255e47),$parcel$export($e92e4eb8d35aaf31$exports,"fromValues",()=>$e92e4eb8d35aaf31$export$a82be99ed2a44a7d),$parcel$export($e92e4eb8d35aaf31$exports,"copy",()=>$e92e4eb8d35aaf31$export$784d13d8ee351f07),$parcel$export($e92e4eb8d35aaf31$exports,"set",()=>$e92e4eb8d35aaf31$export$adaa4cf7ef1b65be),$parcel$export($e92e4eb8d35aaf31$exports,"add",()=>$e92e4eb8d35aaf31$export$e16d8520af44a096),$parcel$export($e92e4eb8d35aaf31$exports,"mul",()=>$e92e4eb8d35aaf31$export$6e3a27864ab166fe),$parcel$export($e92e4eb8d35aaf31$exports,"lerp",()=>$e92e4eb8d35aaf31$export$3a89f8d6f6bf6c9f),$parcel$export($e92e4eb8d35aaf31$exports,"length",()=>$e92e4eb8d35aaf31$export$f24224f1c91d8156),$parcel$export($e92e4eb8d35aaf31$exports,"len",()=>$e92e4eb8d35aaf31$export$fc1400facf92c78),$parcel$export($e92e4eb8d35aaf31$exports,"squaredLength",()=>$e92e4eb8d35aaf31$export$ab44e1323ffc8376),$parcel$export($e92e4eb8d35aaf31$exports,"sqrLen",()=>$e92e4eb8d35aaf31$export$99d8dd3f32a3435),$parcel$export($e92e4eb8d35aaf31$exports,"normalize",()=>$e92e4eb8d35aaf31$export$a3295358bff77e),$parcel$export($e92e4eb8d35aaf31$exports,"exactEquals",()=>$e92e4eb8d35aaf31$export$f2599a5cf1109d8),$parcel$export($e92e4eb8d35aaf31$exports,"equals",()=>$e92e4eb8d35aaf31$export$e9bab7fafb253603),$parcel$export($e92e4eb8d35aaf31$exports,"rotationTo",()=>$e92e4eb8d35aaf31$export$72d66f5842c00904),$parcel$export($e92e4eb8d35aaf31$exports,"sqlerp",()=>$e92e4eb8d35aaf31$export$699b0866ca50f6cb),$parcel$export($e92e4eb8d35aaf31$exports,"setAxes",()=>$e92e4eb8d35aaf31$export$937ca0a544b2d712);var $amnUE=parcelRequire("amnUE"),$eIStk=parcelRequire("eIStk"),$amnUE=parcelRequire("amnUE");function $e38eb280d3b76273$export$185802fd694ee1f5(){var e=new $amnUE.ARRAY_TYPE(4);return $amnUE.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function $e38eb280d3b76273$export$9cd59f9826255e47(e){var t=new $amnUE.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function $e38eb280d3b76273$export$a82be99ed2a44a7d(e,t,r,i){var a=new $amnUE.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a}function $e38eb280d3b76273$export$784d13d8ee351f07(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function $e38eb280d3b76273$export$adaa4cf7ef1b65be(e,t,r,i,a){return e[0]=t,e[1]=r,e[2]=i,e[3]=a,e}function $e38eb280d3b76273$export$e16d8520af44a096(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function $e38eb280d3b76273$export$dcdf75081b88279d(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function $e38eb280d3b76273$export$f24224f1c91d8156(e){return Math.hypot(e[0],e[1],e[2],e[3])}function $e38eb280d3b76273$export$ab44e1323ffc8376(e){var t=e[0],r=e[1],i=e[2],a=e[3];return t*t+r*r+i*i+a*a}function $e38eb280d3b76273$export$a3295358bff77e(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=r*r+i*i+a*a+s*s;return n>0&&(n=1/Math.sqrt(n)),e[0]=r*n,e[1]=i*n,e[2]=a*n,e[3]=s*n,e}function $e38eb280d3b76273$export$94132a0e348806d4(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function $e38eb280d3b76273$export$3a89f8d6f6bf6c9f(e,t,r,i){var a=t[0],s=t[1],n=t[2],o=t[3];return e[0]=a+i*(r[0]-a),e[1]=s+i*(r[1]-s),e[2]=n+i*(r[2]-n),e[3]=o+i*(r[3]-o),e}function $e38eb280d3b76273$export$f2599a5cf1109d8(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function $e38eb280d3b76273$export$e9bab7fafb253603(e,t){var r=e[0],i=e[1],a=e[2],s=e[3],n=t[0],o=t[1],l=t[2],u=t[3];return Math.abs(r-n)<=$amnUE.EPSILON*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=$amnUE.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(a-l)<=$amnUE.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(s-u)<=$amnUE.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}function $e92e4eb8d35aaf31$export$185802fd694ee1f5(){var e=new $amnUE.ARRAY_TYPE(4);return $amnUE.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function $e92e4eb8d35aaf31$export$f0954fd7d5368655(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function $e92e4eb8d35aaf31$export$4286ddefc8f49512(e,t,r){var i=Math.sin(r*=.5);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(r),e}function $e92e4eb8d35aaf31$export$3f70be5e7d7dc51(e,t){var r=2*Math.acos(t[3]),i=Math.sin(r/2);return i>$amnUE.EPSILON?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),r}function $e92e4eb8d35aaf31$export$b363da9ded343252(e,t){var r=$e92e4eb8d35aaf31$export$94132a0e348806d4(e,t);return Math.acos(2*r*r-1)}function $e92e4eb8d35aaf31$export$2060d2db72cce88f(e,t,r){var i=t[0],a=t[1],s=t[2],n=t[3],o=r[0],l=r[1],u=r[2],h=r[3];return e[0]=i*h+n*o+a*u-s*l,e[1]=a*h+n*l+s*o-i*u,e[2]=s*h+n*u+i*l-a*o,e[3]=n*h-i*o-a*l-s*u,e}function $e92e4eb8d35aaf31$export$a59c8716592e09af(e,t,r){r*=.5;var i=t[0],a=t[1],s=t[2],n=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=i*l+n*o,e[1]=a*l+s*o,e[2]=s*l-a*o,e[3]=n*l-i*o,e}function $e92e4eb8d35aaf31$export$cf71e4d4ca4d1cfd(e,t,r){r*=.5;var i=t[0],a=t[1],s=t[2],n=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=i*l-s*o,e[1]=a*l+n*o,e[2]=s*l+i*o,e[3]=n*l-a*o,e}function $e92e4eb8d35aaf31$export$ea6eae3365de5b9c(e,t,r){r*=.5;var i=t[0],a=t[1],s=t[2],n=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=i*l+a*o,e[1]=a*l-i*o,e[2]=s*l+n*o,e[3]=n*l-s*o,e}function $e92e4eb8d35aaf31$export$fb72b72e8d764d4e(e,t){var r=t[0],i=t[1],a=t[2];return e[0]=r,e[1]=i,e[2]=a,e[3]=Math.sqrt(Math.abs(1-r*r-i*i-a*a)),e}function $e92e4eb8d35aaf31$export$b310ec824aaee37f(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=Math.sqrt(r*r+i*i+a*a),o=Math.exp(s),l=n>0?o*Math.sin(n)/n:0;return e[0]=r*l,e[1]=i*l,e[2]=a*l,e[3]=o*Math.cos(n),e}function $e92e4eb8d35aaf31$export$876cb1b29620556f(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=Math.sqrt(r*r+i*i+a*a),o=n>0?Math.atan2(n,s)/n:0;return e[0]=r*o,e[1]=i*o,e[2]=a*o,e[3]=.5*Math.log(r*r+i*i+a*a+s*s),e}function $e92e4eb8d35aaf31$export$9c297f60e22e3389(e,t,r){return $e92e4eb8d35aaf31$export$876cb1b29620556f(e,t),$e92e4eb8d35aaf31$export$dcdf75081b88279d(e,e,r),$e92e4eb8d35aaf31$export$b310ec824aaee37f(e,e),e}function $e92e4eb8d35aaf31$export$1544d9bc2995de08(e,t,r,i){var a,s,n,o,l,u=t[0],h=t[1],c=t[2],d=t[3],g=r[0],p=r[1],m=r[2],f=r[3];return(s=u*g+h*p+c*m+d*f)<0&&(s=-s,g=-g,p=-p,m=-m,f=-f),1-s>$amnUE.EPSILON?(n=Math.sin(a=Math.acos(s)),o=Math.sin((1-i)*a)/n,l=Math.sin(i*a)/n):(o=1-i,l=i),e[0]=o*u+l*g,e[1]=o*h+l*p,e[2]=o*c+l*m,e[3]=o*d+l*f,e}function $e92e4eb8d35aaf31$export$4385e60b38654f68(e){var t=$amnUE.RANDOM(),r=$amnUE.RANDOM(),i=$amnUE.RANDOM(),a=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=s*Math.sin(2*Math.PI*i),e[3]=s*Math.cos(2*Math.PI*i),e}function $e92e4eb8d35aaf31$export$6897c284b6f9f4dc(e,t){var r=t[0],i=t[1],a=t[2],s=t[3],n=r*r+i*i+a*a+s*s,o=n?1/n:0;return e[0]=-r*o,e[1]=-i*o,e[2]=-a*o,e[3]=s*o,e}function $e92e4eb8d35aaf31$export$7679f47e72c62560(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function $e92e4eb8d35aaf31$export$272a1eb8e5a4b55b(e,t){var r,i=t[0]+t[4]+t[8];if(i>0)r=Math.sqrt(i+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var s=(a+1)%3,n=(a+2)%3;r=Math.sqrt(t[3*a+a]-t[3*s+s]-t[3*n+n]+1),e[a]=.5*r,r=.5/r,e[3]=(t[3*s+n]-t[3*n+s])*r,e[s]=(t[3*s+a]+t[3*a+s])*r,e[n]=(t[3*n+a]+t[3*a+n])*r}return e}function $e92e4eb8d35aaf31$export$7a404a587ea85af(e,t,r,i){var a=.5*Math.PI/180,s=Math.sin(t*=a),n=Math.cos(t),o=Math.sin(r*=a),l=Math.cos(r),u=Math.sin(i*=a),h=Math.cos(i);return e[0]=s*l*h-n*o*u,e[1]=n*o*h+s*l*u,e[2]=n*l*u-s*o*h,e[3]=n*l*h+s*o*u,e}function $e92e4eb8d35aaf31$export$42d51816ce590c93(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}!function(){$e38eb280d3b76273$export$185802fd694ee1f5()}();var $e92e4eb8d35aaf31$export$9cd59f9826255e47=$e38eb280d3b76273$export$9cd59f9826255e47,$e92e4eb8d35aaf31$export$a82be99ed2a44a7d=$e38eb280d3b76273$export$a82be99ed2a44a7d,$e92e4eb8d35aaf31$export$784d13d8ee351f07=$e38eb280d3b76273$export$784d13d8ee351f07,$e92e4eb8d35aaf31$export$adaa4cf7ef1b65be=$e38eb280d3b76273$export$adaa4cf7ef1b65be,$e92e4eb8d35aaf31$export$e16d8520af44a096=$e38eb280d3b76273$export$e16d8520af44a096,$e92e4eb8d35aaf31$export$6e3a27864ab166fe=$e92e4eb8d35aaf31$export$2060d2db72cce88f,$e92e4eb8d35aaf31$export$dcdf75081b88279d=$e38eb280d3b76273$export$dcdf75081b88279d,$e92e4eb8d35aaf31$export$94132a0e348806d4=$e38eb280d3b76273$export$94132a0e348806d4,$e92e4eb8d35aaf31$export$3a89f8d6f6bf6c9f=$e38eb280d3b76273$export$3a89f8d6f6bf6c9f,$e92e4eb8d35aaf31$export$f24224f1c91d8156=$e38eb280d3b76273$export$f24224f1c91d8156,$e92e4eb8d35aaf31$export$fc1400facf92c78=$e92e4eb8d35aaf31$export$f24224f1c91d8156,$e92e4eb8d35aaf31$export$ab44e1323ffc8376=$e38eb280d3b76273$export$ab44e1323ffc8376,$e92e4eb8d35aaf31$export$99d8dd3f32a3435=$e92e4eb8d35aaf31$export$ab44e1323ffc8376,$e92e4eb8d35aaf31$export$a3295358bff77e=$e38eb280d3b76273$export$a3295358bff77e,$e92e4eb8d35aaf31$export$f2599a5cf1109d8=$e38eb280d3b76273$export$f2599a5cf1109d8,$e92e4eb8d35aaf31$export$e9bab7fafb253603=$e38eb280d3b76273$export$e9bab7fafb253603,$e92e4eb8d35aaf31$export$72d66f5842c00904=function(){var e=$eIStk.create(),t=$eIStk.fromValues(1,0,0),r=$eIStk.fromValues(0,1,0);return function(i,a,s){var n=$eIStk.dot(a,s);return n<-.999999?($eIStk.cross(e,t,a),1e-6>$eIStk.len(e)&&$eIStk.cross(e,r,a),$eIStk.normalize(e,e),$e92e4eb8d35aaf31$export$4286ddefc8f49512(i,e,Math.PI),i):n>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):($eIStk.cross(e,a,s),i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=1+n,$e92e4eb8d35aaf31$export$a3295358bff77e(i,i))}}(),$e92e4eb8d35aaf31$export$699b0866ca50f6cb=function(){var e=$e92e4eb8d35aaf31$export$185802fd694ee1f5(),t=$e92e4eb8d35aaf31$export$185802fd694ee1f5();return function(r,i,a,s,n,o){return $e92e4eb8d35aaf31$export$1544d9bc2995de08(e,i,n,o),$e92e4eb8d35aaf31$export$1544d9bc2995de08(t,a,s,o),$e92e4eb8d35aaf31$export$1544d9bc2995de08(r,e,t,2*o*(1-o)),r}}(),$e92e4eb8d35aaf31$export$937ca0a544b2d712=function(){var e=$879d8210211d0bfa$export$185802fd694ee1f5();return function(t,r,i,a){return e[0]=i[0],e[3]=i[1],e[6]=i[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],$e92e4eb8d35aaf31$export$a3295358bff77e(t,$e92e4eb8d35aaf31$export$272a1eb8e5a4b55b(t,e))}}(),$4ce98914b6676340$exports={};$parcel$export($4ce98914b6676340$exports,"create",()=>$4ce98914b6676340$export$185802fd694ee1f5),$parcel$export($4ce98914b6676340$exports,"clone",()=>$4ce98914b6676340$export$9cd59f9826255e47),$parcel$export($4ce98914b6676340$exports,"fromValues",()=>$4ce98914b6676340$export$a82be99ed2a44a7d),$parcel$export($4ce98914b6676340$exports,"copy",()=>$4ce98914b6676340$export$784d13d8ee351f07),$parcel$export($4ce98914b6676340$exports,"set",()=>$4ce98914b6676340$export$adaa4cf7ef1b65be),$parcel$export($4ce98914b6676340$exports,"add",()=>$4ce98914b6676340$export$e16d8520af44a096),$parcel$export($4ce98914b6676340$exports,"subtract",()=>$4ce98914b6676340$export$4e2d2ead65e5f7e3),$parcel$export($4ce98914b6676340$exports,"multiply",()=>$4ce98914b6676340$export$2060d2db72cce88f),$parcel$export($4ce98914b6676340$exports,"divide",()=>$4ce98914b6676340$export$cd007d971a5a2143),$parcel$export($4ce98914b6676340$exports,"ceil",()=>$4ce98914b6676340$export$803ce6b71a0a94b2),$parcel$export($4ce98914b6676340$exports,"floor",()=>$4ce98914b6676340$export$a3fe094919f356fd),$parcel$export($4ce98914b6676340$exports,"min",()=>$4ce98914b6676340$export$96ec731ed4dcb222),$parcel$export($4ce98914b6676340$exports,"max",()=>$4ce98914b6676340$export$8960430cfd85939f),$parcel$export($4ce98914b6676340$exports,"round",()=>$4ce98914b6676340$export$2077e0241d6afd3c),$parcel$export($4ce98914b6676340$exports,"scale",()=>$4ce98914b6676340$export$dcdf75081b88279d),$parcel$export($4ce98914b6676340$exports,"scaleAndAdd",()=>$4ce98914b6676340$export$19cedf1da84ba854),$parcel$export($4ce98914b6676340$exports,"distance",()=>$4ce98914b6676340$export$9f17032d917177de),$parcel$export($4ce98914b6676340$exports,"squaredDistance",()=>$4ce98914b6676340$export$88e6ebb4fe54f538),$parcel$export($4ce98914b6676340$exports,"length",()=>$4ce98914b6676340$export$f24224f1c91d8156),$parcel$export($4ce98914b6676340$exports,"squaredLength",()=>$4ce98914b6676340$export$ab44e1323ffc8376),$parcel$export($4ce98914b6676340$exports,"negate",()=>$4ce98914b6676340$export$aef51622e549b8b0),$parcel$export($4ce98914b6676340$exports,"inverse",()=>$4ce98914b6676340$export$70ae2c07e401031b),$parcel$export($4ce98914b6676340$exports,"normalize",()=>$4ce98914b6676340$export$a3295358bff77e),$parcel$export($4ce98914b6676340$exports,"dot",()=>$4ce98914b6676340$export$94132a0e348806d4),$parcel$export($4ce98914b6676340$exports,"cross",()=>$4ce98914b6676340$export$bb646b20bb93d339),$parcel$export($4ce98914b6676340$exports,"lerp",()=>$4ce98914b6676340$export$3a89f8d6f6bf6c9f),$parcel$export($4ce98914b6676340$exports,"random",()=>$4ce98914b6676340$export$4385e60b38654f68),$parcel$export($4ce98914b6676340$exports,"transformMat2",()=>$4ce98914b6676340$export$b732428d73874bfc),$parcel$export($4ce98914b6676340$exports,"transformMat2d",()=>$4ce98914b6676340$export$3e55bc4b3707dfd3),$parcel$export($4ce98914b6676340$exports,"transformMat3",()=>$4ce98914b6676340$export$f0bfa0a0024626ee),$parcel$export($4ce98914b6676340$exports,"transformMat4",()=>$4ce98914b6676340$export$5ffbd13800309d59),$parcel$export($4ce98914b6676340$exports,"rotate",()=>$4ce98914b6676340$export$bb628a54ab399bc9),$parcel$export($4ce98914b6676340$exports,"angle",()=>$4ce98914b6676340$export$944b09d2ad10b378),$parcel$export($4ce98914b6676340$exports,"zero",()=>$4ce98914b6676340$export$7f9972325ebfd559),$parcel$export($4ce98914b6676340$exports,"str",()=>$4ce98914b6676340$export$42d51816ce590c93),$parcel$export($4ce98914b6676340$exports,"exactEquals",()=>$4ce98914b6676340$export$f2599a5cf1109d8),$parcel$export($4ce98914b6676340$exports,"equals",()=>$4ce98914b6676340$export$e9bab7fafb253603),$parcel$export($4ce98914b6676340$exports,"len",()=>$4ce98914b6676340$export$fc1400facf92c78),$parcel$export($4ce98914b6676340$exports,"sub",()=>$4ce98914b6676340$export$f93b5905241a7cca),$parcel$export($4ce98914b6676340$exports,"mul",()=>$4ce98914b6676340$export$6e3a27864ab166fe),$parcel$export($4ce98914b6676340$exports,"div",()=>$4ce98914b6676340$export$159d9494db57879b),$parcel$export($4ce98914b6676340$exports,"dist",()=>$4ce98914b6676340$export$6c4a311cc157c764),$parcel$export($4ce98914b6676340$exports,"sqrDist",()=>$4ce98914b6676340$export$2422cd6c492a8b3a),$parcel$export($4ce98914b6676340$exports,"sqrLen",()=>$4ce98914b6676340$export$99d8dd3f32a3435),$parcel$export($4ce98914b6676340$exports,"forEach",()=>$4ce98914b6676340$export$4b80e395e36b5a56);var $amnUE=parcelRequire("amnUE");function $4ce98914b6676340$export$185802fd694ee1f5(){var e=new $amnUE.ARRAY_TYPE(2);return $amnUE.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function $4ce98914b6676340$export$9cd59f9826255e47(e){var t=new $amnUE.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function $4ce98914b6676340$export$a82be99ed2a44a7d(e,t){var r=new $amnUE.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r}function $4ce98914b6676340$export$784d13d8ee351f07(e,t){return e[0]=t[0],e[1]=t[1],e}function $4ce98914b6676340$export$adaa4cf7ef1b65be(e,t,r){return e[0]=t,e[1]=r,e}function $4ce98914b6676340$export$e16d8520af44a096(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function $4ce98914b6676340$export$4e2d2ead65e5f7e3(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function $4ce98914b6676340$export$2060d2db72cce88f(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function $4ce98914b6676340$export$cd007d971a5a2143(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function $4ce98914b6676340$export$803ce6b71a0a94b2(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function $4ce98914b6676340$export$a3fe094919f356fd(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function $4ce98914b6676340$export$96ec731ed4dcb222(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function $4ce98914b6676340$export$8960430cfd85939f(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function $4ce98914b6676340$export$2077e0241d6afd3c(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function $4ce98914b6676340$export$dcdf75081b88279d(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function $4ce98914b6676340$export$19cedf1da84ba854(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function $4ce98914b6676340$export$9f17032d917177de(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1])}function $4ce98914b6676340$export$88e6ebb4fe54f538(e,t){var r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function $4ce98914b6676340$export$f24224f1c91d8156(e){return Math.hypot(e[0],e[1])}function $4ce98914b6676340$export$ab44e1323ffc8376(e){var t=e[0],r=e[1];return t*t+r*r}function $4ce98914b6676340$export$aef51622e549b8b0(e,t){return e[0]=-t[0],e[1]=-t[1],e}function $4ce98914b6676340$export$70ae2c07e401031b(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function $4ce98914b6676340$export$a3295358bff77e(e,t){var r=t[0],i=t[1],a=r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function $4ce98914b6676340$export$94132a0e348806d4(e,t){return e[0]*t[0]+e[1]*t[1]}function $4ce98914b6676340$export$bb646b20bb93d339(e,t,r){var i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function $4ce98914b6676340$export$3a89f8d6f6bf6c9f(e,t,r,i){var a=t[0],s=t[1];return e[0]=a+i*(r[0]-a),e[1]=s+i*(r[1]-s),e}function $4ce98914b6676340$export$4385e60b38654f68(e,t){t=t||1;var r=2*$amnUE.RANDOM()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function $4ce98914b6676340$export$b732428d73874bfc(e,t,r){var i=t[0],a=t[1];return e[0]=r[0]*i+r[2]*a,e[1]=r[1]*i+r[3]*a,e}function $4ce98914b6676340$export$3e55bc4b3707dfd3(e,t,r){var i=t[0],a=t[1];return e[0]=r[0]*i+r[2]*a+r[4],e[1]=r[1]*i+r[3]*a+r[5],e}function $4ce98914b6676340$export$f0bfa0a0024626ee(e,t,r){var i=t[0],a=t[1];return e[0]=r[0]*i+r[3]*a+r[6],e[1]=r[1]*i+r[4]*a+r[7],e}function $4ce98914b6676340$export$5ffbd13800309d59(e,t,r){var i=t[0],a=t[1];return e[0]=r[0]*i+r[4]*a+r[12],e[1]=r[1]*i+r[5]*a+r[13],e}function $4ce98914b6676340$export$bb628a54ab399bc9(e,t,r,i){var a=t[0]-r[0],s=t[1]-r[1],n=Math.sin(i),o=Math.cos(i);return e[0]=a*o-s*n+r[0],e[1]=a*n+s*o+r[1],e}function $4ce98914b6676340$export$944b09d2ad10b378(e,t){var r=e[0],i=e[1],a=t[0],s=t[1],n=Math.sqrt(r*r+i*i)*Math.sqrt(a*a+s*s);return Math.acos(Math.min(Math.max(n&&(r*a+i*s)/n,-1),1))}function $4ce98914b6676340$export$7f9972325ebfd559(e){return e[0]=0,e[1]=0,e}function $4ce98914b6676340$export$42d51816ce590c93(e){return"vec2("+e[0]+", "+e[1]+")"}function $4ce98914b6676340$export$f2599a5cf1109d8(e,t){return e[0]===t[0]&&e[1]===t[1]}function $4ce98914b6676340$export$e9bab7fafb253603(e,t){var r=e[0],i=e[1],a=t[0],s=t[1];return Math.abs(r-a)<=$amnUE.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=$amnUE.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))}var $4ce98914b6676340$export$fc1400facf92c78=$4ce98914b6676340$export$f24224f1c91d8156,$4ce98914b6676340$export$f93b5905241a7cca=$4ce98914b6676340$export$4e2d2ead65e5f7e3,$4ce98914b6676340$export$6e3a27864ab166fe=$4ce98914b6676340$export$2060d2db72cce88f,$4ce98914b6676340$export$159d9494db57879b=$4ce98914b6676340$export$cd007d971a5a2143,$4ce98914b6676340$export$6c4a311cc157c764=$4ce98914b6676340$export$9f17032d917177de,$4ce98914b6676340$export$2422cd6c492a8b3a=$4ce98914b6676340$export$88e6ebb4fe54f538,$4ce98914b6676340$export$99d8dd3f32a3435=$4ce98914b6676340$export$ab44e1323ffc8376,$4ce98914b6676340$export$4b80e395e36b5a56=function(){var e=$4ce98914b6676340$export$185802fd694ee1f5();return function(t,r,i,a,s,n){var o,l;for(r||(r=2),i||(i=0),l=a?Math.min(a*r+i,t.length):t.length,o=i;o<l;o+=r)e[0]=t[o],e[1]=t[o+1],s(e,e,n),t[o]=e[0],t[o+1]=e[1];return t}}(),$eIStk=parcelRequire("eIStk"),$bSIL4=parcelRequire("bSIL4");class $afddf47358a7c3bf$var$Twist extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=75,this._culling=!1,this._twistData={normal:[0,0,0],center:[0,0]},this._twistDataSym={normal:[0,0,0],center:[0,0]},this._idAlpha=0}startSculpt(){var e=this._main,t=e._mouseX,r=e._mouseY,i=e.getPicking();if(this.initTwistData(i,t,r,this._twistData),e.getSculptManager().getSymmetry()){var a=e.getPickingSymmetry();a.intersectionMouseMesh(),a.setLocalRadius2(i.getLocalRadius2()),a.getMesh()&&this.initTwistData(a,t,r,this._twistDataSym)}}initTwistData(e,t,r,i){e.pickVerticesInSphere(e.getLocalRadius2()),$eIStk.negate(i.normal,e.getEyeDirection()),$4ce98914b6676340$exports.set(i.center,t,r)}sculptStroke(){var e=this._main,t=e._mouseX,r=e._mouseY,i=e._lastMouseX,a=e._lastMouseY,s=e.getPicking(),n=s.getLocalRadius2();if(s.pickVerticesInSphere(n),this.stroke(s,t,r,i,a,this._twistData),e.getSculptManager().getSymmetry()){var o=e.getPickingSymmetry();o.getMesh()&&(o.pickVerticesInSphere(n),this.stroke(o,i,a,t,r,this._twistDataSym))}this.updateRender(),e.setCanvasCursor("default")}stroke(e,t,r,i,a,s){var n=e.getPickedVertices();this._main.getStateManager().pushVertices(n),n=this.dynamicTopology(e),this._culling&&(n=this.getFrontVertices(n,e.getEyeDirection())),e.updateAlpha(!1),e.setIdAlpha(this._idAlpha),this.twist(n,e.getIntersectionPoint(),e.getLocalRadius2(),t,r,i,a,s,e);var o=this.getMesh();o.updateGeometry(o.getFacesFromVertices(n),n)}twist(e,t,r,i,a,s,n,o,l){var u=this.getMesh(),h=o.center,c=[i-h[0],a-h[1]];if(!(30>$4ce98914b6676340$exports.len(c))){$4ce98914b6676340$exports.normalize(c,c);var d=o.normal,g=[0,0,0,0],p=[s-h[0],n-h[1]];$4ce98914b6676340$exports.normalize(p,p);for(var m=(0,$bSIL4.default).signedAngle2d(c,p),f=u.getVertices(),_=u.getMaterials(),v=1/Math.sqrt(r),T=t[0],M=t[1],y=t[2],b=[0,0,0],A=0,S=e.length;A<S;++A){var x=3*e[A],R=f[x],E=f[x+1],C=f[x+2],w=R-T,F=E-M,I=C-y,D=Math.sqrt(w*w+F*F+I*I)*v,V=D*D;V=m*_[x+2]*l.getAlpha(R,E,C)*(3*V*V-4*V*D+1),$e92e4eb8d35aaf31$exports.setAxisAngle(g,d,V),$eIStk.set(b,R,E,C),$eIStk.sub(b,b,t),$eIStk.transformQuat(b,b,g),$eIStk.add(b,b,t),f[x]=b[0],f[x+1]=b[1],f[x+2]=b[2]}}}}var $afddf47358a7c3bf$export$2e2bcd8739ae039=$afddf47358a7c3bf$var$Twist,$jLaD3=parcelRequire("jLaD3"),$im4cd=parcelRequire("im4cd");class $fc2de5f83d9fa7b6$var$Smooth extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._intensity=.75,this._culling=!1,this._tangent=!1,this._idAlpha=0,this._lockPosition=!1}stroke(e){var t=e.getPickedVertices(),r=this._intensity*(0,$im4cd.default).getPressureIntensity();this._main.getStateManager().pushVertices(t),this._culling&&(t=this.getFrontVertices(t,e.getEyeDirection())),e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this._tangent?this.smoothTangent(t,r,e):this.smooth(t,r,e);var i=this.getMesh();i.updateGeometry(i.getFacesFromVertices(t),t)}smooth(e,t,r){var i=this.getMesh(),a=i.getVertices(),s=i.getMaterials(),n=e.length,o=new Float32Array((0,$jLaD3.default).getMemory(12*n),0,3*n);this.laplacianSmooth(e,o);for(var l=0;l<n;++l){var u=3*e[l],h=a[u],c=a[u+1],d=a[u+2],g=3*l,p=t*s[u+2];r&&(p*=r.getAlpha(h,c,d));var m=1-p;a[u]=h*m+o[g]*p,a[u+1]=c*m+o[g+1]*p,a[u+2]=d*m+o[g+2]*p}}smoothTangent(e,t,r){var i=this.getMesh(),a=i.getVertices(),s=i.getMaterials(),n=i.getNormals(),o=e.length,l=new Float32Array((0,$jLaD3.default).getMemory(12*o),0,3*o);this.laplacianSmooth(e,l);for(var u=0;u<o;++u){var h=3*e[u],c=a[h],d=a[h+1],g=a[h+2],p=n[h],m=n[h+1],f=n[h+2],_=p*p+m*m+f*f;if(0!==_){_=1/Math.sqrt(_),p*=_,m*=_,f*=_;var v=3*u,T=l[v],M=l[v+1],y=l[v+2],b=p*(T-c)+m*(M-d)+f*(y-g),A=t*s[h+2];r&&(A*=r.getAlpha(c,d,g)),a[h]=c+(T-p*b-c)*A,a[h+1]=d+(M-m*b-d)*A,a[h+2]=g+(y-f*b-g)*A}}}smoothAlongNormals(e,t,r){var i=this.getMesh(),a=i.getVertices(),s=i.getMaterials(),n=i.getNormals(),o=e.length,l=new Float32Array((0,$jLaD3.default).getMemory(12*o),0,3*o);this.laplacianSmooth(e,l);for(var u=0;u<o;++u){var h=3*e[u],c=a[h],d=a[h+1],g=a[h+2],p=n[h],m=n[h+1],f=n[h+2],_=3*u,v=1/(p*p+m*m+f*f),T=p*(l[_]-c)+m*(l[_+1]-d)+f*(l[_+2]-g);T*=v*t*s[h+2],r&&(T*=r.getAlpha(c,d,g)),a[h]=c+p*T,a[h+1]=d+m*T,a[h+2]=g+f*T}}}var $fc2de5f83d9fa7b6$export$2e2bcd8739ae039=$fc2de5f83d9fa7b6$var$Smooth,$im4cd=parcelRequire("im4cd");class $f23af9aa057fe464$var$Pinch extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._intensity=.75,this._negative=!1,this._culling=!1,this._idAlpha=0,this._lockPosition=!1}stroke(e){var t=e.getPickedVertices(),r=this._intensity*(0,$im4cd.default).getPressureIntensity();this._main.getStateManager().pushVertices(t),t=this.dynamicTopology(e),this._culling&&(t=this.getFrontVertices(t,e.getEyeDirection())),e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this.pinch(t,e.getIntersectionPoint(),e.getLocalRadius2(),r,e);var i=this.getMesh();i.updateGeometry(i.getFacesFromVertices(t),t)}pinch(e,t,r,i,a){var s=this.getMesh(),n=s.getVertices(),o=s.getMaterials(),l=Math.sqrt(r),u=t[0],h=t[1],c=t[2],d=.05*i;this._negative&&(d=-d);for(var g=0,p=e.length;g<p;++g){var m=3*e[g],f=n[m],_=n[m+1],v=n[m+2],T=u-f,M=h-_,y=c-v,b=Math.sqrt(T*T+M*M+y*y)/l,A=b*b;A=d*o[m+2]*a.getAlpha(f,_,v)*(3*A*A-4*A*b+1),n[m]=f+T*A,n[m+1]=_+M*A,n[m+2]=v+y*A}}}var $f23af9aa057fe464$export$2e2bcd8739ae039=$f23af9aa057fe464$var$Pinch,$im4cd=parcelRequire("im4cd");class $8e546a38e5c2478e$var$Crease extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=25,this._intensity=.75,this._negative=!0,this._culling=!1,this._idAlpha=0,this._lockPosition=!1}stroke(e){var t=e.getPickedVertices(),r=this._intensity*(0,$im4cd.default).getPressureIntensity();this.updateProxy(t),this._main.getStateManager().pushVertices(t),t=this.dynamicTopology(e),this._culling&&(t=this.getFrontVertices(t,e.getEyeDirection())),e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this.crease(t,e.getPickedNormal(),e.getIntersectionPoint(),e.getLocalRadius2(),r,e);var i=this.getMesh();i.updateGeometry(i.getFacesFromVertices(t),t)}crease(e,t,r,i,a,s){var n=this.getMesh(),o=n.getVertices(),l=n.getMaterials(),u=n.getVerticesProxy(),h=Math.sqrt(i),c=r[0],d=r[1],g=r[2],p=t[0],m=t[1],f=t[2],_=.07*a,v=_*h;this._negative&&(v=-v);for(var T=0,M=e.length;T<M;++T){var y=3*e[T],b=c-u[y],A=d-u[y+1],S=g-u[y+2],x=Math.sqrt(b*b+A*A+S*S)/h;if(!(x>=1)){var R=o[y],E=o[y+1],C=o[y+2],w=x*x;w=3*w*w-4*w*x+1,w*=l[y+2]*s.getAlpha(R,E,C);var F=Math.pow(w,5)*v;w*=_,o[y]=R+b*w+p*F,o[y+1]=E+A*w+m*F,o[y+2]=C+S*w+f*F}}}}var $8e546a38e5c2478e$export$2e2bcd8739ae039=$8e546a38e5c2478e$var$Crease,$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$bSIL4=parcelRequire("bSIL4");class $d6e4e75caaffaa9a$var$Drag extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=150,this._dragDir=[0,0,0],this._dragDirSym=[0,0,0],this._idAlpha=0}sculptStroke(){var e=this._main,t=this.getMesh(),r=e.getPicking(),i=e.getSculptManager().getSymmetry()?e.getPickingSymmetry():null,a=e._mouseX-this._lastMouseX,s=e._mouseY-this._lastMouseY,n=1/Math.floor(Math.sqrt(a*a+s*s)/(.15*this._radius));a*=n,s*=n;var o=this._lastMouseX,l=this._lastMouseY;if(r.getMesh()){r._mesh=t,i&&(i._mesh=t,$eIStk.copy(i.getIntersectionPoint(),r.getIntersectionPoint()),(0,$bSIL4.default).mirrorPoint(i.getIntersectionPoint(),t.getSymmetryOrigin(),t.getSymmetryNormal()));for(var u=0;u<1&&this.makeStroke(o,l,r,i);u+=n)o+=a,l+=s;this.updateRender(),this._lastMouseX=e._mouseX,this._lastMouseY=e._mouseY}}makeStroke(e,t,r,i){var a=this.getMesh();return this.updateDragDir(r,e,t),r.pickVerticesInSphere(r.getLocalRadius2()),r.computePickedNormal(),a.isDynamic&&this.stroke(r,!1),i&&(this.updateDragDir(i,e,t,!0),i.setLocalRadius2(r.getLocalRadius2()),i.pickVerticesInSphere(i.getLocalRadius2())),a.isDynamic||this.stroke(r,!1),i&&this.stroke(i,!0),!0}stroke(e,t){var r=e.getPickedVertices();this._main.getStateManager().pushVertices(r),r=this.dynamicTopology(e),e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this.drag(r,e.getIntersectionPoint(),e.getLocalRadius2(),t,e);var i=this.getMesh();i.updateGeometry(i.getFacesFromVertices(r),r)}drag(e,t,r,i,a){for(var s=this.getMesh(),n=s.getVertices(),o=s.getMaterials(),l=Math.sqrt(r),u=t[0],h=t[1],c=t[2],d=i?this._dragDirSym:this._dragDir,g=d[0],p=d[1],m=d[2],f=0,_=e.length;f<_;++f){var v=3*e[f],T=n[v],M=n[v+1],y=n[v+2],b=T-u,A=M-h,S=y-c,x=Math.sqrt(b*b+A*A+S*S)/l,R=x*x;R=o[v+2]*a.getAlpha(T,M,y)*(3*R*R-4*R*x+1),n[v]=T+g*R,n[v+1]=M+p*R,n[v+2]=y+m*R}}updateDragDir(e,t,r,i){var a=this.getMesh(),s=e.unproject(t,r,0),n=e.unproject(t,r,.1),o=$3iqbd.create();$3iqbd.invert(o,a.getMatrix()),$eIStk.transformMat4(s,s,o),$eIStk.transformMat4(n,n,o);var l=this._dragDir;if(i){l=this._dragDirSym;var u=a.getSymmetryOrigin(),h=a.getSymmetryNormal();(0,$bSIL4.default).mirrorPoint(s,u,h),(0,$bSIL4.default).mirrorPoint(n,u,h)}var c=e.getIntersectionPoint();e.setIntersectionPoint((0,$bSIL4.default).vertexOnLine(c,s,n)),$eIStk.sub(l,e.getIntersectionPoint(),c),e._mesh=a,e.updateLocalAndWorldRadius2();var d=e.getEyeDirection();$eIStk.sub(d,n,s),$eIStk.normalize(d,d)}}var $d6e4e75caaffaa9a$export$2e2bcd8739ae039=$d6e4e75caaffaa9a$var$Drag,$eIStk=parcelRequire("eIStk"),$im4cd=parcelRequire("im4cd");class $fd04370735fc088d$var$Paint extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._hardness=.75,this._intensity=.75,this._culling=!1,this._color=$eIStk.fromValues(1,.766,.336),this._material=$eIStk.fromValues(.3,.95,0),this._pickColor=!1,this._pickCallback=null,this._idAlpha=0,this._lockPosition=!1,this._writeAlbedo=!0,this._writeRoughness=!0,this._writeMetalness=!0}end(){this._pickColor=!1,super.end()}pushState(e){(!this._pickColor||e)&&this._main.getStateManager().pushStateColorAndMaterial(this.getMesh())}startSculpt(){if(this._pickColor)return this.pickColor(this._main.getPicking());super.startSculpt()}update(e){if(!0===this._pickColor)return this.updatePickColor();super.update(e)}updateContinuous(){if(!0===this._pickColor)return this.updatePickColor();super.updateContinuous()}updateMeshBuffers(){var e=this.getMesh();e.isDynamic?e.updateBuffers():(e.updateColorBuffer(),e.updateMaterialBuffer())}updatePickColor(){var e=this._main.getPicking();e.intersectionMouseMesh()&&this.pickColor(e)}setPickCallback(e){this._pickCallback=e}pickColor(e){var t=this.getMesh(),r=this._color;e.polyLerp(t.getMaterials(),r);var i=r[0],a=r[1];e.polyLerp(t.getColors(),r),this._pickCallback(r,i,a)}stroke(e){var t=e.getPickedVertices(),r=this._intensity*(0,$im4cd.default).getPressureIntensity();this._main.getStateManager().pushVertices(t),t=this.dynamicTopology(e),this._culling&&(t=this.getFrontVertices(t,e.getEyeDirection())),e.updateAlpha(this._lockPosition),e.setIdAlpha(this._idAlpha),this.paint(t,e.getIntersectionPoint(),e.getLocalRadius2(),r,this._hardness,e);var i=this.getMesh();i.updateDuplicateColorsAndMaterials(t),i.isUsingDrawArrays()&&i.updateDrawArrays(i.getFacesFromVertices(t))}paint(e,t,r,i,a,s){for(var n=this.getMesh(),o=n.getVertices(),l=n.getColors(),u=n.getMaterials(),h=this._color,c=this._material[0],d=this._material[1],g=Math.sqrt(r),p=h[0],m=h[1],f=h[2],_=t[0],v=t[1],T=t[2],M=2*(1-a),y=0,b=e.length;y<b;++y){var A=3*e[y],S=o[A],x=o[A+1],R=o[A+2],E=S-_,C=x-v,w=R-T,F=Math.sqrt(E*E+C*C+w*w)/g;F>1&&(F=1);var I=Math.pow(1-F,M),D=1-(I*=i*u[A+2]*s.getAlpha(S,x,R));this._writeAlbedo&&(l[A]=l[A]*D+p*I,l[A+1]=l[A+1]*D+m*I,l[A+2]=l[A+2]*D+f*I),this._writeRoughness&&(u[A]=u[A]*D+c*I),this._writeMetalness&&(u[A+1]=u[A+1]*D+d*I)}}paintAll(){var e=this.getMesh(),t=this.getUnmaskedVertices();if(0!==t.length){this.pushState(!0),this._main.getStateManager().pushVertices(t);for(var r=e.getColors(),i=e.getMaterials(),a=this._color,s=this._material[0],n=this._material[1],o=a[0],l=a[1],u=a[2],h=0,c=t.length;h<c;++h){var d=3*t[h],g=i[d+2],p=1-g;this._writeAlbedo&&(r[d]=r[d]*p+o*g,r[d+1]=r[d+1]*p+l*g,r[d+2]=r[d+2]*p+u*g),this._writeRoughness&&(i[d]=i[d]*p+s*g),this._writeMetalness&&(i[d+1]=i[d+1]*p+n*g)}e.updateDuplicateColorsAndMaterials(),e.updateDrawArrays(),this.updateRender()}}}var $fd04370735fc088d$export$2e2bcd8739ae039=$fd04370735fc088d$var$Paint,$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$bSIL4=parcelRequire("bSIL4");class $05a5cbad9d98bec0$var$Move extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=150,this._intensity=1,this._topoCheck=!0,this._negative=!1,this._moveData={center:[0,0,0],dir:[0,0],vProxy:null},this._moveDataSym={center:[0,0,0],dir:[0,0],vProxy:null},this._idAlpha=0}startSculpt(){var e=this._main,t=e.getPicking();if(this.initMoveData(t,this._moveData),e.getSculptManager().getSymmetry()){var r=e.getPickingSymmetry();r.intersectionMouseMesh(),r.setLocalRadius2(t.getLocalRadius2()),r.getMesh()&&this.initMoveData(r,this._moveDataSym)}}initMoveData(e,t){this._topoCheck?e.pickVerticesInSphereTopological(e.getLocalRadius2()):e.pickVerticesInSphere(e.getLocalRadius2()),$eIStk.copy(t.center,e.getIntersectionPoint());var r=e.getPickedVertices();this._main.getStateManager().pushVertices(r);for(var i=e.getMesh().getVertices(),a=r.length,s=t.vProxy=new Float32Array(3*a),n=0;n<a;++n){var o=3*r[n],l=3*n;s[l]=i[o],s[l+1]=i[o+1],s[l+2]=i[o+2]}}copyVerticesProxy(e,t){for(var r=e.getPickedVertices(),i=this.getMesh().getVertices(),a=t.vProxy,s=0,n=r.length;s<n;++s){var o=3*r[s],l=3*s;i[o]=a[l],i[o+1]=a[l+1],i[o+2]=a[l+2]}}sculptStroke(){var e=this._main,t=e.getPicking(),r=e.getPickingSymmetry(),i=e.getSculptManager().getSymmetry()&&r.getMesh();t.updateAlpha(this._lockPosition),t.setIdAlpha(this._idAlpha),i&&(r.updateAlpha(!1),r.setIdAlpha(this._idAlpha)),this.copyVerticesProxy(t,this._moveData),i&&this.copyVerticesProxy(r,this._moveDataSym);var a=e._mouseX,s=e._mouseY;this.updateMoveDir(t,a,s),this.move(t.getPickedVertices(),t.getIntersectionPoint(),t.getLocalRadius2(),this._moveData,t),i&&(this.updateMoveDir(r,a,s,!0),this.move(r.getPickedVertices(),r.getIntersectionPoint(),r.getLocalRadius2(),this._moveDataSym,r));var n=this.getMesh();n.updateGeometry(n.getFacesFromVertices(t.getPickedVertices()),t.getPickedVertices()),i&&n.updateGeometry(n.getFacesFromVertices(r.getPickedVertices()),r.getPickedVertices()),this.updateRender(),e.setCanvasCursor("default")}move(e,t,r,i,a){for(var s=this.getMesh(),n=s.getVertices(),o=s.getMaterials(),l=Math.sqrt(r),u=i.vProxy,h=t[0],c=t[1],d=t[2],g=i.dir,p=g[0],m=g[1],f=g[2],_=0,v=e.length;_<v;++_){var T=3*e[_],M=3*_,y=u[M],b=u[M+1],A=u[M+2],S=y-h,x=b-c,R=A-d,E=Math.sqrt(S*S+x*x+R*R)/l,C=E*E;C=o[T+2]*a.getAlpha(y,b,A)*(3*C*C-4*C*E+1),n[T]+=p*C,n[T+1]+=m*C,n[T+2]+=f*C}}updateMoveDir(e,t,r,i){var a=this.getMesh(),s=e.unproject(t,r,0),n=e.unproject(t,r,.1),o=$3iqbd.create();$3iqbd.invert(o,a.getMatrix()),$eIStk.transformMat4(s,s,o),$eIStk.transformMat4(n,n,o);var l=i?this._moveDataSym:this._moveData;if(i){var u=a.getSymmetryOrigin(),h=a.getSymmetryNormal();(0,$bSIL4.default).mirrorPoint(s,u,h),(0,$bSIL4.default).mirrorPoint(n,u,h)}if(this._negative){var c=$eIStk.dist((0,$bSIL4.default).vertexOnLine(l.center,s,n),l.center);$eIStk.normalize(l.dir,e.computePickedNormal()),$eIStk.scale(l.dir,l.dir,t<this._lastMouseX?-c:c)}else $eIStk.sub(l.dir,(0,$bSIL4.default).vertexOnLine(l.center,s,n),l.center);$eIStk.scale(l.dir,l.dir,this._intensity);var d=e.getEyeDirection();$eIStk.sub(d,n,s),$eIStk.normalize(d,d)}}var $05a5cbad9d98bec0$export$2e2bcd8739ae039=$05a5cbad9d98bec0$var$Move,$eIStk=parcelRequire("eIStk"),$jLaD3=parcelRequire("jLaD3"),$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3");class $64ccfa62ef6977e4$var$OctreeCell{constructor(e){this._parent=e||null,this._depth=e?e._depth+1:0,this._children=[],this._aabbLoose=[1/0,1/0,1/0,-1/0,-1/0,-1/0],this._aabbSplit=[1/0,1/0,1/0,-1/0,-1/0,-1/0],this._iFaces=[],this._flag=0}resetNbFaces(e){var t=this._iFaces;t.length=e;for(var r=0;r<e;++r)t[r]=r}build(e){var t=0,r=$64ccfa62ef6977e4$var$OctreeCell.STACK;r[0]=this;for(var i=1,a=[];i>0;){var s=r[--i],n=s._iFaces.length;if(n>$64ccfa62ef6977e4$var$OctreeCell.MAX_FACES&&s._depth<$64ccfa62ef6977e4$var$OctreeCell.MAX_DEPTH){s.constructChildren(e);var o=s._children;for(t=0;t<8;++t)r[i+t]=o[t];i+=8}else n>0&&a.push(s)}var l=a.length;for(t=0;t<l;++t)a[t].constructLeaf(e)}constructLeaf(e){for(var t=this._iFaces,r=t.length,i=1/0,a=1/0,s=1/0,n=-1/0,o=-1/0,l=-1/0,u=e.getFaceBoxes(),h=e.getFacePosInLeaf(),c=e.getFaceLeaf(),d=0;d<r;++d){var g=t[d];c[g]=this,h[g]=d;var p=u[g*=6],m=u[g+1],f=u[g+2],_=u[g+3],v=u[g+4],T=u[g+5];p<i&&(i=p),_>n&&(n=_),m<a&&(a=m),v>o&&(o=v),f<s&&(s=f),T>l&&(l=T)}this.expandsAabbLoose(i,a,s,n,o,l)}constructChildren(e){for(var t=this._aabbSplit,r=t[0],i=t[1],a=t[2],s=t[3],n=t[4],o=t[5],l=(s-r)*.5,u=(n-i)*.5,h=(o-a)*.5,c=(s+r)*.5,d=(n+i)*.5,g=(o+a)*.5,p=new $64ccfa62ef6977e4$var$OctreeCell(this),m=new $64ccfa62ef6977e4$var$OctreeCell(this),f=new $64ccfa62ef6977e4$var$OctreeCell(this),_=new $64ccfa62ef6977e4$var$OctreeCell(this),v=new $64ccfa62ef6977e4$var$OctreeCell(this),T=new $64ccfa62ef6977e4$var$OctreeCell(this),M=new $64ccfa62ef6977e4$var$OctreeCell(this),y=new $64ccfa62ef6977e4$var$OctreeCell(this),b=p._iFaces,A=m._iFaces,S=f._iFaces,x=_._iFaces,R=v._iFaces,E=T._iFaces,C=M._iFaces,w=y._iFaces,F=e.getFaceCenters(),I=this._iFaces,D=I.length,V=0;V<D;++V){var N=I[V],k=3*N,P=F[k],L=F[k+1],U=F[k+2];P>c?L>d?U>g?C.push(N):E.push(N):U>g?S.push(N):A.push(N):L>d?U>g?w.push(N):R.push(N):U>g?x.push(N):b.push(N)}p.setAabbSplit(r,i,a,c,d,g),m.setAabbSplit(r+l,i,a,c+l,d,g),f.setAabbSplit(c,d-u,g,s,n-u,o),_.setAabbSplit(r,i,a+h,c,d,g+h),v.setAabbSplit(r,i+u,a,c,d+u,g),T.setAabbSplit(c,d,g-h,s,n,o-h),M.setAabbSplit(c,d,g,s,n,o),y.setAabbSplit(c-l,d,g,s-l,n,o),this._children.length=0,this._children.push(p,m,f,_,v,T,M,y),I.length=0}setAabbSplit(e,t,r,i,a,s){var n=this._aabbSplit;n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=a,n[5]=s}setAabbLoose(e,t,r,i,a,s){var n=this._aabbLoose;n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=a,n[5]=s}collectIntersectRay(e,t,r,i){var a=e[0],s=e[1],n=e[2],o=1/t[0],l=1/t[1],u=1/t[2],h=0,c=$64ccfa62ef6977e4$var$OctreeCell.STACK;c[0]=this;for(var d=1;d>0;){var g=c[--d],p=g._aabbLoose,m=(p[0]-a)*o,f=(p[3]-a)*o,_=(p[1]-s)*l,v=(p[4]-s)*l,T=(p[2]-n)*u,M=(p[5]-n)*u,y=Math.max(Math.min(m,f),Math.min(_,v),Math.min(T,M)),b=Math.min(Math.max(m,f),Math.max(_,v),Math.max(T,M));if(!(b<0)&&!(y>b)){var A=g._children;if(8===A.length){for(var S=0;S<8;++S)c[d+S]=A[S];d+=8}else{i&&i.push(g);var x=g._iFaces;r.set(x,h),h+=x.length}}}return new Uint32Array(r.subarray(0,h))}collectIntersectSphere(e,t,r,i){var a=e[0],s=e[1],n=e[2],o=0,l=$64ccfa62ef6977e4$var$OctreeCell.STACK;l[0]=this;for(var u=1;u>0;){var h=l[--u],c=h._aabbLoose,d=0,g=0,p=0;if(!((d=c[0]>a?c[0]-a:c[3]<a?c[3]-a:0)*d+(g=c[1]>s?c[1]-s:c[4]<s?c[4]-s:0)*g+(p=c[2]>n?c[2]-n:c[5]<n?c[5]-n:0)*p>t)){var m=h._children;if(8===m.length){for(var f=0;f<8;++f)l[u+f]=m[f];u+=8}else{i&&i.push(h);var _=h._iFaces;r.set(_,o),o+=_.length}}}return new Uint32Array(r.subarray(0,o))}addFace(e,t,r,i,a,s,n,o,l,u){var h=$64ccfa62ef6977e4$var$OctreeCell.STACK;h[0]=this;for(var c=1;c>0;){var d=h[--c],g=d._aabbSplit;if(!(o<=g[0])&&!(l<=g[1])&&!(u<=g[2])&&!(o>g[3])&&!(l>g[4])&&!(u>g[5])){var p=d._aabbLoose;t<p[0]&&(p[0]=t),r<p[1]&&(p[1]=r),i<p[2]&&(p[2]=i),a>p[3]&&(p[3]=a),s>p[4]&&(p[4]=s),n>p[5]&&(p[5]=n);var m=d._children;if(8!==m.length)return d._iFaces.push(e),d;for(var f=0;f<8;++f)h[c+f]=m[f];c+=8}}}pruneIfPossible(){for(var e=this;e._parent;){var t=e._parent,r=t._children;if(0===r.length)return;for(var i=0;i<8;++i){var a=r[i];if(a._iFaces.length>0||8===a._children.length)return}r.length=0,e=t}}expandsAabbLoose(e,t,r,i,a,s){for(var n=this;n;){var o=n._aabbLoose,l=!1;e<o[0]&&(o[0]=e,l=!0),t<o[1]&&(o[1]=t,l=!0),r<o[2]&&(o[2]=r,l=!0),i>o[3]&&(o[3]=i,l=!0),a>o[4]&&(o[4]=a,l=!0),s>o[5]&&(o[5]=s,l=!0),n=l?n._parent:null}}}$64ccfa62ef6977e4$var$OctreeCell.FLAG=0,$64ccfa62ef6977e4$var$OctreeCell.MAX_DEPTH=8,$64ccfa62ef6977e4$var$OctreeCell.MAX_FACES=100,function(){for(var e=1+7*$64ccfa62ef6977e4$var$OctreeCell.MAX_DEPTH,t=$64ccfa62ef6977e4$var$OctreeCell.STACK=Array(e),r=0;r<e;++r)t[r]=null}();var $64ccfa62ef6977e4$export$2e2bcd8739ae039=$64ccfa62ef6977e4$var$OctreeCell,$idLiu=parcelRequire("idLiu"),$d57031a28bd8d861$var$RenderData=function(e){var t=(0,$idLiu.default)();return{_gl:e,_shaderType:t.shader,_flatShading:t.flatshading,_showWireframe:t.wireframe,_matcap:Math.min(t.matcap,$73d1c4793780e026$export$2e2bcd8739ae039.matcaps.length-1),_curvature:Math.min(t.curvature,5),_texture0:null,_useDrawArrays:!1,_vertexBuffer:new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.DYNAMIC_DRAW),_normalBuffer:new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.DYNAMIC_DRAW),_colorBuffer:new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.DYNAMIC_DRAW),_materialBuffer:new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.DYNAMIC_DRAW),_texCoordBuffer:new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.STATIC_DRAW),_indexBuffer:new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ELEMENT_ARRAY_BUFFER,e.STATIC_DRAW),_wireframeBuffer:new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ELEMENT_ARRAY_BUFFER,e.STATIC_DRAW),_albedo:new Float32Array([-1,-1,-1]),_roughness:-.18,_metallic:-.78,_alpha:1,_flatColor:new Float32Array([1,0,0]),_mode:e.TRIANGLES}};$d57031a28bd8d861$var$RenderData.ONLY_DRAW_ARRAYS=!1;var $d57031a28bd8d861$export$2e2bcd8739ae039=$d57031a28bd8d861$var$RenderData,$21255fc29769c8d7$var$DEF_ROUGHNESS=.18,$21255fc29769c8d7$var$DEF_METALNESS=.08;class $21255fc29769c8d7$var$Mesh{constructor(){this._id=$21255fc29769c8d7$var$Mesh.ID++,this._meshData=null,this._transformData=null,this._renderData=null,this._isVisible=!0}static sortFunction(e,t){var r=e.isTransparent(),i=t.isTransparent();return r&&!i?1:!r&&i?-1:(t.getDepth()-e.getDepth())*(r&&i?1:-1)}setID(e){this._id=e}isVisible(){return this._isVisible}setVisible(e){this._isVisible=e}setVertices(e){this._meshData._verticesXYZ=e,this._meshData._nbVertices=e.length/3}setFaces(e){this._meshData._facesABCD=e,this._meshData._nbFaces=e.length/4}setTexCoords(e){this._meshData._texCoordsST=e,this._meshData._nbTexCoords=e.length/2}setColors(e){this._meshData._colorsRGB=e}setMaterials(e){this._meshData._materialsPBR=e}setVerticesDuplicateStartCount(e){this._meshData._duplicateStartCount=e}setFacesTexCoord(e){this._meshData._UVfacesABCD=e}setMeshData(e){this._meshData=e}setRenderData(e){this._renderData=e}setTransformData(e){this._transformData=e}setNbVertices(e){this._meshData._nbVertices=e}setNbFaces(e){this._meshData._nbFaces=e}getID(){return this._id}getRenderData(){return this._renderData}getMeshData(){return this._meshData}getTransformData(){return this._transformData}getNbVertices(){return this._meshData._nbVertices}getNbFaces(){return this._meshData._nbFaces}getNbQuads(){return this.getNbTriangles()-this.getNbFaces()}getNbTriangles(){return this._meshData._trianglesABC.length/3}getNbTexCoords(){return this._meshData._nbTexCoords}hasUV(){return null!==this._meshData._texCoordsST}getVertices(){return this._meshData._verticesXYZ}getColors(){return this._meshData._colorsRGB}getNormals(){return this._meshData._normalsXYZ}getMaterials(){return this._meshData._materialsPBR}getVerticesTagFlags(){return this._meshData._vertTagFlags}getVerticesSculptFlags(){return this._meshData._vertSculptFlags}getVerticesStateFlags(){return this._meshData._vertStateFlags}getVerticesRingVertStartCount(){return this._meshData._vrvStartCount}getVerticesRingVert(){return this._meshData._vertRingVert}getVerticesRingFaceStartCount(){return this._meshData._vrfStartCount}getVerticesRingFace(){return this._meshData._vertRingFace}getVerticesOnEdge(){return this._meshData._vertOnEdge}getVerticesProxy(){return this._meshData._vertProxy}getFaces(){return this._meshData._facesABCD}hasOnlyTriangles(){return this.getNbTriangles()===this.getNbFaces()}hasOnlyQuads(){return this.getNbTriangles()===2*this.getNbFaces()}getFaceNormals(){return this._meshData._faceNormalsXYZ}getFaceBoxes(){return this._meshData._faceBoxes}getFaceCenters(){return this._meshData._faceCentersXYZ}getFacesTagFlags(){return this._meshData._facesTagFlags}getFaceEdges(){return this._meshData._faceEdges}getFacesToTriangles(){return this._meshData._facesToTriangles}getTrianglesTexCoord(){return this._meshData._UVtrianglesABC}getTriangles(){return this._meshData._trianglesABC}getEdges(){return this._meshData._edges}getNbEdges(){return this._meshData._edges.length}getTexCoords(){return this._meshData._texCoordsST}getVerticesDuplicateStartCount(){return this._meshData._duplicateStartCount}getFacesTexCoord(){return this._meshData._UVfacesABCD}getVerticesDrawArrays(){return this._meshData._DAverticesXYZ||this.updateDrawArrays(),this._meshData._DAverticesXYZ}getNormalsDrawArrays(){return this._meshData._DAnormalsXYZ}getColorsDrawArrays(){return this._meshData._DAcolorsRGB}getMaterialsDrawArrays(){return this._meshData._DAmaterialsPBR}getTexCoordsDrawArrays(){return this._meshData._DAtexCoordsST}getOctree(){return this._meshData._octree}getCenter(){return this._transformData._center}getMV(){return this._transformData._lastComputedMV}getMVP(){return this._transformData._lastComputedMVP}getN(){return this._transformData._lastComputedN}getEN(){return this._transformData._lastComputedEN}getDepth(){return this._transformData._lastComputedDepth}getMatrix(){return this._transformData._matrix}getEditMatrix(){return this._transformData._editMatrix}getScale2(){var e=this._transformData._matrix;return e[0]*e[0]+e[4]*e[4]+e[8]*e[8]}getScale(){return Math.sqrt(this.getScale2())}getSymmetryOrigin(){var e=$eIStk.create(),t=this._transformData,r=t._symmetryOffset*this.computeLocalRadius();return $eIStk.scaleAndAdd(e,t._center,t._symmetryNormal,r)}getSymmetryOffset(){return this._transformData._symmetryOffset}setSymmetryOffset(e){this._transformData._symmetryOffset=e}getSymmetryNormal(){return this._transformData._symmetryNormal}getFacePosInLeaf(){return this._meshData._facePosInLeaf}getFaceLeaf(){return this._meshData._faceLeaf}getLeavesToUpdate(){return this._meshData._leavesToUpdate}getLocalBound(){return this._meshData._octree._aabbLoose}getRenderNbEdges(){return this.getNbEdges()}init(){this.initColorsAndMaterials(),this.allocateArrays(),this.initTopology(),this.updateGeometry(),this._renderData&&this.updateDuplicateColorsAndMaterials(),this.updateCenter()}initTopology(){this.initFaceRings(),this.optimize(),this.initEdges(),this.initVertexRings(),this.initRenderTriangles()}updateGeometry(e,t){this.updateFacesAabbAndNormal(e),this.updateVerticesNormal(t),this.updateOctree(e),this._renderData&&(this.updateDuplicateGeometry(t),this.updateDrawArrays(e))}allocateArrays(){var e=this.getNbVertices();if(this.hasUV()){var t=this._meshData._texCoordsST.length/2,r=new Float32Array(3*t);r.set(this._meshData._verticesXYZ),this._meshData._verticesXYZ=r,this._meshData._normalsXYZ=new Float32Array(3*t),r=new Float32Array(3*t),this._meshData._colorsRGB&&r.set(this._meshData._colorsRGB),this._meshData._colorsRGB=r,r=new Float32Array(3*t),this._meshData._materialsPBR&&r.set(this._meshData._materialsPBR),this._meshData._materialsPBR=r}else this._meshData._normalsXYZ=this._meshData._normalsXYZ||new Float32Array(3*e),this._meshData._colorsRGB=this._meshData._colorsRGB||new Float32Array(3*e),this._meshData._materialsPBR=this._meshData._materialsPBR||new Float32Array(3*e);this._meshData._vertOnEdge=new Uint8Array(e),this._meshData._vrvStartCount=new Uint32Array(2*e),this._meshData._vrfStartCount=new Uint32Array(2*e),this._meshData._vertTagFlags=new Int32Array(e),this._meshData._vertSculptFlags=new Int32Array(e),this._meshData._vertStateFlags=new Int32Array(e),this._meshData._vertProxy=new Float32Array(3*e);var i=this.getNbFaces();this._meshData._faceEdges=new Uint32Array(4*i),this._meshData._facesToTriangles=new Uint32Array(i),this._meshData._faceBoxes=new Float32Array(6*i),this._meshData._faceNormalsXYZ=new Float32Array(3*i),this._meshData._faceCentersXYZ=new Float32Array(3*i),this._meshData._facesTagFlags=new Int32Array(i),this._meshData._facePosInLeaf=new Uint32Array(i);var a=this._meshData._faceLeaf;a.length=i;for(var s=0;s<i;++s)a[s]=null}initColorsAndMaterials(){var e=this.getNbVertices(),t=0,r=3*e;if(!this._meshData._colorsRGB||this._meshData._colorsRGB.length!==r){var i=this._meshData._colorsRGB=new Float32Array(r);for(t=0;t<r;++t)i[t]=1}if(!this._meshData._materialsPBR||this._meshData._materialsPBR.length!==r){var a=this._meshData._materialsPBR=new Float32Array(r);for(t=0;t<e;++t){var s=3*t;a[s]=$21255fc29769c8d7$var$DEF_ROUGHNESS,a[s+1]=$21255fc29769c8d7$var$DEF_METALNESS,a[s+2]=1}}}initFaceRings(){var e=this.getFaces(),t=this.getNbVertices(),r=this.getNbFaces(),i=0,a=0,s=new Uint32Array(t);for(i=0;i<r;++i){a=4*i,s[e[a]]++,s[e[a+1]]++,s[e[a+2]]++;var n=e[a+3];n!==$jLaD3.default.TRI_INDEX&&s[n]++}var o=this.getVerticesRingFaceStartCount(),l=0;for(i=0;i<t;++i){var u=s[i];o[2*i]=l,o[2*i+1]=u,l+=u}var h=new Uint32Array((0,$jLaD3.default).getMemory(4*r*6),0,6*r);for(i=0,l=0;i<r;++i){var c=e[a=4*i],d=e[a+1],g=e[a+2],p=e[a+3];h[o[2*c]+--s[c]]=i,h[o[2*d]+--s[d]]=i,h[o[2*g]+--s[g]]=i,p!==$jLaD3.default.TRI_INDEX&&(h[o[2*p]+--s[p]]=i,++l)}this._meshData._vertRingFace=new Uint32Array(h.subarray(0,3*r+l))}updateVerticesNormal(e){for(var t=this.getVerticesRingFaceStartCount(),r=this.getVerticesRingFace(),i=r instanceof Array?r:null,a=this.getNormals(),s=this.getFaceNormals(),n=void 0===e,o=n?this.getNbVertices():e.length,l=0;l<o;++l){var u,h,c=n?l:e[l];i?(r=i[c],u=0,h=r.length):h=(u=t[2*c])+t[2*c+1];for(var d=0,g=0,p=0,m=u;m<h;++m){var f=3*r[m];d+=s[f],g+=s[f+1],p+=s[f+2]}var _=h-u;0!==_&&(_=1/_),a[c*=3]=d*_,a[c+1]=g*_,a[c+2]=p*_}}initVertexRings(){for(var e=this.getVerticesRingVertStartCount(),t=this._meshData._vertRingVert=new Uint32Array(2*this.getNbEdges()),r=this.getVerticesRingFaceStartCount(),i=this.getVerticesRingFace(),a=this.getVerticesTagFlags(),s=this.getVerticesOnEdge(),n=this.getFaces(),o=0,l=0,u=this.getNbVertices();l<u;++l){for(var h=++$jLaD3.default.TAG_FLAG,c=r[2*l],d=c+r[2*l+1],g=0,p=c;p<d;++p){var m=4*i[p],f=n[m],_=n[m+1],v=n[m+2],T=n[m+3];f===l?f=T!==$jLaD3.default.TRI_INDEX?T:v:_===l||T===l?_=v:v===l&&T!==$jLaD3.default.TRI_INDEX&&(f=T),a[f]!==h&&(t[o+g++]=f,a[f]=h),a[_]!==h&&(t[o+g++]=_,a[_]=h)}e[2*l]=o,e[2*l+1]=g,o+=g,d-c!==g&&(s[l]=1)}}expandsVertices(e,t){var r=++$jLaD3.default.TAG_FLAG,i=e.length,a=this.getVerticesRingVertStartCount(),s=this.getVerticesRingVert(),n=s instanceof Array?s:null,o=this.getVerticesTagFlags(),l=i,u=this.getNbVertices(),h=new Uint32Array((0,$jLaD3.default).getMemory(4*u),0,u);h.set(e);var c=0;for(c=0;c<i;++c)o[h[c]]=r;for(var d=0;t;){for(--t,c=d;c<i;++c){var g,p,m=h[c];n?(s=n[m],g=0,p=s.length):p=(g=a[2*m])+a[2*m+1];for(var f=g;f<p;++f){var _=s[f];o[_]!==r&&(o[_]=r,h[l++]=_)}}d=i,i=l}return new Uint32Array(h.subarray(0,l))}getVerticesFromFaces(e){for(var t=++$jLaD3.default.TAG_FLAG,r=e.length,i=this.getVerticesTagFlags(),a=this.getFaces(),s=0,n=new Uint32Array((0,$jLaD3.default).getMemory(4*e.length*4),0,4*e.length),o=0;o<r;++o){var l=4*e[o],u=a[l],h=a[l+1],c=a[l+2],d=a[l+3];i[u]!==t&&(i[u]=t,n[s++]=u),i[h]!==t&&(i[h]=t,n[s++]=h),i[c]!==t&&(i[c]=t,n[s++]=c),d!==$jLaD3.default.TRI_INDEX&&i[d]!==t&&(i[d]=t,n[s++]=d)}return new Uint32Array(n.subarray(0,s))}updateFacesAabbAndNormal(e){for(var t=this.getFaceNormals(),r=this.getFaceBoxes(),i=this.getFaceCenters(),a=this.getVertices(),s=this.getFaces(),n=void 0===e,o=n?this.getNbFaces():e.length,l=0;l<o;++l){var u=n?l:e[l],h=3*u,c=4*u,d=6*u,g=3*s[c],p=3*s[c+1],m=3*s[c+2],f=s[c+3],_=f!==$jLaD3.default.TRI_INDEX;_&&(f*=3);var v=a[g],T=a[g+1],M=a[g+2],y=a[p],b=a[p+1],A=a[p+2],S=a[m],x=a[m+1],R=a[m+2],E=y-v,C=b-T,w=A-M,F=S-v,I=x-T,D=R-M,V=C*D-w*I,N=w*F-E*D,k=E*I-C*F,P=v<y?v<S?v:S:y<S?y:S,L=v>y?v>S?v:S:y>S?y:S,U=T<b?T<x?T:x:b<x?b:x,B=T>b?T>x?T:x:b>x?b:x,O=M<A?M<R?M:R:A<R?A:R,G=M>A?M>R?M:R:A>R?A:R;if(_){var z=a[f],X=a[f+1],W=a[f+2];z<P&&(P=z),z>L&&(L=z),X<U&&(U=X),X>B&&(B=X),W<O&&(O=W),W>G&&(G=W),E=S-z,V+=(C=x-X)*D-(w=R-W)*I,N+=w*F-E*D,k+=E*I-C*F}t[h]=V,t[h+1]=N,t[h+2]=k,r[d]=P,r[d+1]=U,r[d+2]=O,r[d+3]=L,r[d+4]=B,r[d+5]=G,i[h]=(P+L)*.5,i[h+1]=(U+B)*.5,i[h+2]=(O+G)*.5}}expandsFaces(e,t){var r=++$jLaD3.default.TAG_FLAG,i=e.length,a=this.getVerticesRingFaceStartCount(),s=this.getVerticesRingFace(),n=s instanceof Array?s:null,o=this.getFacesTagFlags(),l=this.getFaces(),u=i,h=new Uint32Array((0,$jLaD3.default).getMemory(4*this.getNbFaces()),0,this.getNbFaces());h.set(e);var c=0;for(c=0;c<i;++c)o[h[c]]=r;for(var d=0;t;){for(--t,c=d;c<i;++c)for(var g=4*h[c],p=0;p<4;++p){var m,f,_=l[g+p];if(_!==$jLaD3.default.TRI_INDEX){n?(s=n[_],m=0,f=s.length):f=(m=a[2*_])+a[2*_+1];for(var v=m;v<f;++v){var T=s[v];o[T]!==r&&(o[T]=r,h[u++]=T)}}}d=i,i=u}return new Uint32Array(h.subarray(0,u))}getFacesFromVertices(e){for(var t=++$jLaD3.default.TAG_FLAG,r=e.length,i=this.getVerticesRingFaceStartCount(),a=this.getVerticesRingFace(),s=a instanceof Array?a:null,n=this.getFacesTagFlags(),o=0,l=new Uint32Array((0,$jLaD3.default).getMemory(4*this.getNbFaces()),0,this.getNbFaces()),u=0;u<r;++u){var h,c,d=e[u];s?(a=s[d],h=0,c=a.length):c=(h=i[2*d])+i[2*d+1];for(var g=h;g<c;++g){var p=a[g];n[p]!==t&&(n[p]=t,l[o++]=p)}}return new Uint32Array(l.subarray(0,o))}initRenderTriangles(){this.hasUV()&&(this._meshData._UVtrianglesABC=this.computeTrianglesFromFaces(this.getFacesTexCoord())),this._meshData._trianglesABC=this.computeTrianglesFromFaces(this.getFaces())}computeTrianglesFromFaces(e){for(var t=this.getNbFaces(),r=this.getFacesToTriangles(),i=new Uint32Array((0,$jLaD3.default).getMemory(4*t*6),0,6*t),a=0,s=0;s<t;++s){r[s]=a;var n=4*s,o=e[n],l=e[n+1],u=e[n+2],h=e[n+3],c=3*a;i[c]=o,i[c+1]=l,i[c+2]=u,++a,h!==$jLaD3.default.TRI_INDEX&&(i[c=3*a]=o,i[c+1]=u,i[c+2]=h,++a)}return new Uint32Array(i.subarray(0,3*a))}initEdges(){for(var e=this.getFaces(),t=this.getFaceEdges(),r=0,i=new Uint32Array(this.getNbVertices()),a=this.getVerticesRingFaceStartCount(),s=this.getVerticesRingFace(),n=0,o=this.getNbVertices();n<o;++n)for(var l=a[2*n],u=l+a[2*n+1],h=r,c=l;c<u;++c){var d=4*s[c],g=e[d],p=e[d+1],m=e[d+2],f=e[d+3],_=0,v=0;f===$jLaD3.default.TRI_INDEX?(n>g&&(_=i[g],v=d+(n===p?0:2),_<=h?(t[v]=r,i[g]=++r):t[v]=_-1),n>p&&(_=i[p],v=d+(n===g?0:1),_<=h?(t[v]=r,i[p]=++r):t[v]=_-1),n>m&&(_=i[m],v=d+(n===g?2:1),_<=h?(t[v]=r,i[m]=++r):t[v]=_-1),t[d+3]=$jLaD3.default.TRI_INDEX):(n>g&&n!==m&&(_=i[g],v=d+(n===p?0:3),_<=h?(t[v]=r,i[g]=++r):t[v]=_-1),n>p&&n!==f&&(_=i[p],v=d+(n===g?0:1),_<=h?(t[v]=r,i[p]=++r):t[v]=_-1),n>m&&n!==g&&(_=i[m],v=d+(n===p?1:2),_<=h?(t[v]=r,i[m]=++r):t[v]=_-1),n>f&&n!==p&&(_=i[f],v=d+(n===g?3:2),_<=h?(t[v]=r,i[f]=++r):t[v]=_-1))}for(var T=this._meshData._edges=new Uint8ClampedArray(r),M=0,y=this.getNbFaces();M<y;++M){var b=4*M;T[t[b]]++,T[t[b+1]]++,T[t[b+2]]++;var A=t[b+3];A!==$jLaD3.default.TRI_INDEX&&T[A]++}}getWireframe(){var e=this.getNbEdges(),t=this.isUsingDrawArrays();if(t){if(this._meshData._drawArraysWireframe&&this._meshData._drawArraysWireframe.length===2*e)return this._meshData._drawArraysWireframe;u=this._meshData._drawArraysWireframe=new Uint32Array(2*e)}else{if(this._meshData._drawElementsWireframe&&this._meshData._drawElementsWireframe.length===2*e)return this._meshData._drawElementsWireframe;u=this._meshData._drawElementsWireframe=new Uint32Array(2*e)}for(var r=this.getFaces(),i=this.getFaceEdges(),a=this.getNbFaces(),s=this.getFacesToTriangles(),n=0,o=new Uint8Array(e),l=0;l<a;++l){var u,h,c,d,g=4*l,p=r[g+3],m=p!==$jLaD3.default.TRI_INDEX;if(t){var f=3*s[l];h=f,c=f+1,d=f+2,m&&(p=f+5)}else h=r[g],c=r[g+1],d=r[g+2];var _=i[g],v=i[g+1],T=i[g+2],M=i[g+3];0===o[_]&&(o[_]=1,u[2*n]=h,u[2*n+1]=c,n++),0===o[v]&&(o[v]=1,u[2*n]=c,u[2*n+1]=d,n++),0===o[T]&&(o[T]=1,u[2*n]=d,u[2*n+1]=m?p:h,n++),m&&0===o[M]&&(o[M]=1,u[2*n]=p,u[2*n+1]=h,n++)}return t?this._meshData._drawArraysWireframe:this._meshData._drawElementsWireframe}updateDuplicateGeometry(e){if(this.isUsingTexCoords()&&this.hasUV())for(var t=this.getVertices(),r=this.getColors(),i=this.getMaterials(),a=this.getNormals(),s=this.getVerticesDuplicateStartCount(),n=void 0===e,o=n?this.getNbVertices():e.length,l=0;l<o;++l){var u=n?l:e[l],h=s[2*u];if(0!==h)for(var c=h+s[2*u+1],d=3*u,g=t[d],p=t[d+1],m=t[d+2],f=a[d],_=a[d+1],v=a[d+2],T=r[d],M=r[d+1],y=r[d+2],b=i[d],A=i[d+1],S=i[d+2],x=h;x<c;++x){var R=3*x;t[R]=g,t[R+1]=p,t[R+2]=m,a[R]=f,a[R+1]=_,a[R+2]=v,r[R]=T,r[R+1]=M,r[R+2]=y,i[R]=b,i[R+1]=A,i[R+2]=S}}}updateDuplicateColorsAndMaterials(e){if(this.isUsingTexCoords()&&this.hasUV())for(var t=this.getColors(),r=this.getMaterials(),i=this.getVerticesDuplicateStartCount(),a=void 0===e,s=a?this.getNbVertices():e.length,n=0;n<s;++n){var o=a?n:e[n],l=i[2*o];if(0!==l)for(var u=l+i[2*o+1],h=3*o,c=t[h],d=t[h+1],g=t[h+2],p=r[h],m=r[h+1],f=r[h+2],_=l;_<u;++_){var v=3*_;t[v]=c,t[v+1]=d,t[v+2]=g,r[v]=p,r[v+1]=m,r[v+2]=f}}}initTexCoordsDataFromOBJData(e,t){var r=this.getFaces(),i=r.length;if(i==t.length){var a=e.length/2;for(n=0;n<i;++n)t[n]>=a&&(t[n]=r[n]);var s=this.getNbVertices(),n=0,o=0,l=0,u=0,h=new Int32Array(s),c=new Float32Array((0,$jLaD3.default).getMemory(8*s),0,2*s),d=[],g=0,p=0;for(n=0;n<i;++n)if((l=r[n])!==$jLaD3.default.TRI_INDEX){var m=t[n];if((u=h[l])!==m+1){if(0===u){h[l]=m+1,c[2*l]=e[2*m],c[2*l+1]=e[2*m+1];continue}if(u>0){h[l]=--g,d.push([m]),++p;continue}var f=d[-u-1],_=f.length;for(o=0;o<_&&f[o]!==m;++o);o===_&&(++p,f.push(m))}}var v=new Float32Array((s+p)*2);v.set(c);var T=this._meshData._duplicateStartCount=new Uint32Array(2*s);for(n=0,g=0;n<s;++n)if(!((u=h[n])>=0)){var M=d[-u-1],y=M.length,b=s+g;for(T[2*n]=b,T[2*n+1]=y,g+=y,o=0;o<y;++o){var A=2*M[o],S=(b+o)*2;v[S]=e[A],v[S+1]=e[A+1]}}var x=new Uint32Array(r);for(n=0,i=r.length;n<i;++n)if((l=x[n])!==$jLaD3.default.TRI_INDEX&&!((u=h[l])>0)){var R=t[n],E=d[-u-1],C=E.length;for(o=0;o<C;++o)if(R===E[o]){x[n]=T[2*l]+o;break}}this.setTexCoords(v),this.setFacesTexCoord(x)}}setAlreadyDrawArrays(){this._meshData._DAverticesXYZ=this.getVertices(),this._meshData._DAnormalsXYZ=this.getNormals(),this._meshData._DAcolorsRGB=this.getColors(),this._meshData._DAmaterialsPBR=this.getMaterials()}updateDrawArrays(e){if(this.isUsingDrawArrays()){var t=this.getVertices(),r=this.getNormals(),i=this.getColors(),a=this.getMaterials(),s=this.getFaces(),n=this.getNbTriangles(),o=this.hasOnlyTriangles()?null:this.getFacesToTriangles(),l=void 0===e,u=this._meshData._DAverticesXYZ,h=this._meshData._DAnormalsXYZ,c=this._meshData._DAcolorsRGB,d=this._meshData._DAmaterialsPBR;(!u||u.length<9*n)&&(u=this._meshData._DAverticesXYZ=new Float32Array(9*n),h=this._meshData._DAnormalsXYZ=new Float32Array(9*n),c=this._meshData._DAcolorsRGB=new Float32Array(9*n),d=this._meshData._DAmaterialsPBR=new Float32Array(9*n));for(var g=l?this.getNbFaces():e.length,p=0;p<g;++p){var m=l?p:e[p],f=9*(o?o[m]:m),_=3*s[m*=4],v=3*s[m+1],T=3*s[m+2];u[f]=t[_],u[f+1]=t[_+1],u[f+2]=t[_+2],u[f+3]=t[v],u[f+4]=t[v+1],u[f+5]=t[v+2],u[f+6]=t[T],u[f+7]=t[T+1],u[f+8]=t[T+2],c[f]=i[_],c[f+1]=i[_+1],c[f+2]=i[_+2],c[f+3]=i[v],c[f+4]=i[v+1],c[f+5]=i[v+2],c[f+6]=i[T],c[f+7]=i[T+1],c[f+8]=i[T+2],d[f]=a[_],d[f+1]=a[_+1],d[f+2]=a[_+2],d[f+3]=a[v],d[f+4]=a[v+1],d[f+5]=a[v+2],d[f+6]=a[T],d[f+7]=a[T+1],d[f+8]=a[T+2],h[f]=r[_],h[f+1]=r[_+1],h[f+2]=r[_+2],h[f+3]=r[v],h[f+4]=r[v+1],h[f+5]=r[v+2],h[f+6]=r[T],h[f+7]=r[T+1],h[f+8]=r[T+2];var M=s[m+3];M!==$jLaD3.default.TRI_INDEX&&(M*=3,u[f+=9]=t[_],u[f+1]=t[_+1],u[f+2]=t[_+2],u[f+3]=t[T],u[f+4]=t[T+1],u[f+5]=t[T+2],u[f+6]=t[M],u[f+7]=t[M+1],u[f+8]=t[M+2],c[f]=i[_],c[f+1]=i[_+1],c[f+2]=i[_+2],c[f+3]=i[T],c[f+4]=i[T+1],c[f+5]=i[T+2],c[f+6]=i[M],c[f+7]=i[M+1],c[f+8]=i[M+2],d[f]=a[_],d[f+1]=a[_+1],d[f+2]=a[_+2],d[f+3]=a[T],d[f+4]=a[T+1],d[f+5]=a[T+2],d[f+6]=a[M],d[f+7]=a[M+1],d[f+8]=a[M+2],h[f]=r[_],h[f+1]=r[_+1],h[f+2]=r[_+2],h[f+3]=r[T],h[f+4]=r[T+1],h[f+5]=r[T+2],h[f+6]=r[M],h[f+7]=r[M+1],h[f+8]=r[M+2])}this.isUsingTexCoords()&&this.updateDrawArraysTexCoord(e)}}updateDrawArraysTexCoord(e){var t=this.getNbTriangles(),r=this.getFacesToTriangles(),i=void 0===e,a=this._meshData._DAtexCoordsST;a&&a.length===6*t||(a=this._meshData._DAtexCoordsST=new Float32Array(6*t));for(var s=this.getTexCoords(),n=this.getFacesTexCoord(),o=i?this.getNbFaces():e.length,l=0;l<o;++l){var u=i?l:e[l],h=6*r[u],c=2*n[u*=4],d=2*n[u+1],g=2*n[u+2];a[h]=s[c],a[h+1]=s[c+1],a[h+2]=s[d],a[h+3]=s[d+1],a[h+4]=s[g],a[h+5]=s[g+1];var p=n[u+3];p!==$jLaD3.default.TRI_INDEX&&(p*=3,a[h+=6]=s[c],a[h+1]=s[c+1],a[h+2]=s[g],a[h+3]=s[g+1],a[h+4]=s[p],a[h+5]=s[p+1])}}updateCenter(){var e=this.getLocalBound();$eIStk.set(this._transformData._center,(e[0]+e[3])*.5,(e[1]+e[4])*.5,(e[2]+e[5])*.5)}updateMatrices(e){$879d8210211d0bfa$exports.normalFromMat4(this._transformData._lastComputedEN,this._transformData._editMatrix),$3iqbd.mul(this._transformData._lastComputedMV,e.getView(),this._transformData._matrix),$879d8210211d0bfa$exports.normalFromMat4(this._transformData._lastComputedN,this._transformData._lastComputedMV),$3iqbd.mul(this._transformData._lastComputedMVP,e.getProjection(),this._transformData._lastComputedMV);var t=this._transformData._center,r=this._transformData._lastComputedMVP;this._transformData._lastComputedDepth=r[2]*t[0]+r[6]*t[1]+r[10]*t[2]+r[14]}computeLocalRadius(){var e=this.getLocalBound();return .5*$eIStk.dist([e[0],e[1],e[2]],[e[3],e[4],e[5]])}normalizeSize(){var e=$jLaD3.default.SCALE/(2*this.computeLocalRadius());$3iqbd.scale(this._transformData._matrix,this._transformData._matrix,[e,e,e])}computeWorldBound(){var e=this._meshData._worldBound,t=this.getLocalBound(),r=this.getMatrix();e[0]=e[3]=r[12],e[1]=e[4]=r[13],e[2]=e[5]=r[14];for(var i=0;i<3;++i)for(var a=4*i,s=t[i],n=t[i+3],o=0;o<3;++o){var l=r[a+o],u=l*n,h=l*s;u<h?(e[o]+=u,e[o+3]+=h):(e[o]+=h,e[o+3]+=u)}return e}intersectRay(e,t,r){var i=this.getNbFaces(),a=new Uint32Array((0,$jLaD3.default).getMemory(4*i),0,i);return this._meshData._octree.collectIntersectRay(e,t,a,r?this._meshData._leavesToUpdate:void 0)}intersectSphere(e,t,r){var i=this.getNbFaces(),a=new Uint32Array((0,$jLaD3.default).getMemory(4*i),0,i);return this._meshData._octree.collectIntersectSphere(e,t,a,r?this._meshData._leavesToUpdate:void 0)}updateOctree(e){e?this.updateOctreeAdd(this.updateOctreeRemove(e)):this.computeOctree()}computeAabb(){for(var e=this.getNbVertices(),t=this.getVertices(),r=1/0,i=1/0,a=1/0,s=-1/0,n=-1/0,o=-1/0,l=0;l<e;++l){var u=3*l,h=t[u],c=t[u+1],d=t[u+2];h<r&&(r=h),h>s&&(s=h),c<i&&(i=c),c>n&&(n=c),d<a&&(a=d),d>o&&(o=d)}return[r,i,a,s,n,o]}computeOctree(){var e=this.computeAabb(),t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],n=e[5],o=a-t,l=s-r,u=n-i,h=.2*Math.sqrt(o*o+l*l+u*u),c=1e-16;a-t<1e-16&&(t-=h,a+=h),s-r<c&&(r-=h,s+=h),n-i<c&&(i-=h,n+=h);var d=.3*o,g=.3*l,p=.3*u,m=t-d,f=a+d,_=r-g,v=s+g,T=i-p,M=n+p,y=this._meshData._octree=new $64ccfa62ef6977e4$export$2e2bcd8739ae039;y.resetNbFaces(this.getNbFaces()),y.setAabbLoose(t,r,i,a,s,n),y.setAabbSplit(m,_,T,f,v,M),y.build(this)}updateOctreeRemove(e){for(var t=this.getFaceCenters(),r=this.getFaceBoxes(),i=this._meshData._facePosInLeaf,a=this._meshData._faceLeaf,s=e.length,n=0,o=new Uint32Array((0,$jLaD3.default).getMemory(4*s),0,s),l=0;l<s;++l){var u=e[l],h=6*u,c=3*u,d=a[u],g=d._aabbSplit,p=t[c],m=t[c+1],f=t[c+2];if(p<=g[0]||m<=g[1]||f<=g[2]||p>g[3]||m>g[4]||f>g[5]){o[n++]=e[l];var _=d._iFaces;if(_.length>0){var v=_[_.length-1],T=i[u];_[T]=v,i[v]=T,_.pop()}}else d.expandsAabbLoose(r[h],r[h+1],r[h+2],r[h+3],r[h+4],r[h+5])}return new Uint32Array(o.subarray(0,n))}updateOctreeAdd(e){for(var t=this.getFaceCenters(),r=this.getFaceBoxes(),i=this._meshData._facePosInLeaf,a=this._meshData._faceLeaf,s=e.length,n=this._meshData._octree,o=n._aabbSplit,l=o[0],u=o[1],h=o[2],c=o[3],d=o[4],g=o[5],p=0;p<s;++p){var m=e[p],f=6*m,_=r[f],v=r[f+1],T=r[f+2],M=r[f+3],y=r[f+4],b=r[f+5];if(_>c||M<l||v>d||y<u||T>g||b<h){this.computeOctree(),this._meshData._leavesToUpdate.length=0;break}var A=3*m,S=n.addFace(m,_,v,T,M,y,b,t[A],t[A+1],t[A+2]);if(S)i[m]=S._iFaces.length-1,a[m]=S;else{var x=a[m]._iFaces;i[m]=x.length,x.push(e[p])}}}balanceOctree(){++$64ccfa62ef6977e4$export$2e2bcd8739ae039.FLAG;for(var e=this._meshData._leavesToUpdate,t=e.length,r=0;r<t;++r){var i=e[r];i._flag!==$64ccfa62ef6977e4$export$2e2bcd8739ae039.FLAG&&(0===i._iFaces.length?i.pruneIfPossible():i._iFaces.length>$64ccfa62ef6977e4$export$2e2bcd8739ae039.MAX_FACES&&i._depth<$64ccfa62ef6977e4$export$2e2bcd8739ae039.MAX_DEPTH&&i.build(this),i._flag=$64ccfa62ef6977e4$export$2e2bcd8739ae039.FLAG)}e.length=0}setFlatColor(e){this.getFlatColor().set(e)}setAlbedo(e){this.getAlbedo().set(e)}setMode(e){this._renderData._mode=e}setRoughness(e){this._renderData._roughness=e}setMetallic(e){this._renderData._metallic=e}setOpacity(e){this._renderData._alpha=e}setTexture0(e){this._renderData._texture0=e}setMatcap(e){this._renderData._matcap=e}setCurvature(e){this._renderData._curvature=e}setFlatShading(e){this._renderData._flatShading=e}setShowWireframe(e){this._renderData._showWireframe=!$d57031a28bd8d861$export$2e2bcd8739ae039.ONLY_DRAW_ARRAYS&&e,this.updateWireframeBuffer()}setUseDrawArrays(e){this._renderData._useDrawArrays=e}getGL(){return this._renderData._gl}getCount(){var e=this.getGL();return this.getMode()===e.TRIANGLES?3*this.getNbTriangles():this.getMode()===e.LINES?this.getNbVertices():0}getVertexBuffer(){return this._renderData._vertexBuffer}getNormalBuffer(){return this._renderData._normalBuffer}getColorBuffer(){return this._renderData._colorBuffer}getMaterialBuffer(){return this._renderData._materialBuffer}getTexCoordBuffer(){return this._renderData._texCoordBuffer}getIndexBuffer(){return this._renderData._indexBuffer}getWireframeBuffer(){return this._renderData._wireframeBuffer}getRoughness(){return this._renderData._roughness}getMetallic(){return this._renderData._metallic}getOpacity(){return this._renderData._alpha}getFlatColor(){return this._renderData._flatColor}getMode(){return this._renderData._mode}getAlbedo(){return this._renderData._albedo}getTexture0(){return this._renderData._texture0}getMatcap(){return this._renderData._matcap}getCurvature(){return this._renderData._curvature}getFlatShading(){return this._renderData._flatShading}getShowWireframe(){return this._renderData._showWireframe}isUsingDrawArrays(){return this._renderData._useDrawArrays||$d57031a28bd8d861$export$2e2bcd8739ae039.ONLY_DRAW_ARRAYS}isUsingTexCoords(){var e=this._renderData._shaderType;return e===$eIUYI.default.Shader.UV||e===$eIUYI.default.Shader.PAINTUV}isTransparent(){return this._renderData._alpha<.99}getShaderType(){return this._renderData._shaderType}setShaderType(e){var t=this.hasUV();if(e===$eIUYI.default.Shader.UV&&!t){if(this._renderData._shaderType!==$eIUYI.default.Shader.UV)return;e=$eIUYI.default.Shader.MATCAP}this._renderData._shaderType=e,t&&(this.updateDuplicateGeometry(),this.updateDrawArrays()),this.updateBuffers()}initRender(){this.setShaderType(this._renderData._shaderType),this.setShowWireframe(this.getShowWireframe())}render(e){this.isVisible()&&$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[this.getShaderType()].getOrCreate(this.getGL()).draw(this,e)}renderWireframe(e){this.isVisible()&&$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[(0,$eIUYI.default).Shader.WIREFRAME].getOrCreate(this.getGL()).draw(this,e)}renderFlatColor(e){this.isVisible()&&$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[(0,$eIUYI.default).Shader.FLAT].getOrCreate(this.getGL()).draw(this,e)}getRenderNbVertices(){return this.isUsingDrawArrays()?this.getCount():this.isUsingTexCoords()?this.getNbTexCoords():this.getNbVertices()}updateVertexBuffer(){var e=this.isUsingDrawArrays()?this.getVerticesDrawArrays():this.getVertices();this.getVertexBuffer().update(e,3*this.getRenderNbVertices())}updateNormalBuffer(){var e=this.isUsingDrawArrays()?this.getNormalsDrawArrays():this.getNormals();this.getNormalBuffer().update(e,3*this.getRenderNbVertices())}updateColorBuffer(){var e=this.isUsingDrawArrays()?this.getColorsDrawArrays():this.getColors();this.getColorBuffer().update(e,3*this.getRenderNbVertices())}updateMaterialBuffer(){var e=this.isUsingDrawArrays()?this.getMaterialsDrawArrays():this.getMaterials();this.getMaterialBuffer().update(e,3*this.getRenderNbVertices())}updateTexCoordBuffer(){if(this.isUsingTexCoords()){var e=this.isUsingDrawArrays()?this.getTexCoordsDrawArrays():this.getTexCoords();this.getTexCoordBuffer().update(e,2*this.getRenderNbVertices())}}updateIndexBuffer(){if(!this.isUsingDrawArrays()){var e=this.isUsingTexCoords()?this.getTrianglesTexCoord():this.getTriangles();this.getIndexBuffer().update(e,3*this.getNbTriangles())}}updateWireframeBuffer(){this.getShowWireframe()&&this.getWireframeBuffer().update(this.getWireframe(),2*this.getNbEdges())}updateGeometryBuffers(){this.updateVertexBuffer(),this.updateNormalBuffer()}updateBuffers(){this.updateGeometryBuffers(),this.updateColorBuffer(),this.updateMaterialBuffer(),this.updateTexCoordBuffer(),this.updateIndexBuffer(),this.updateWireframeBuffer()}release(){this.getTexture0()&&this.getGL().deleteTexture(this.getTexture0()),this.getVertexBuffer().release(),this.getNormalBuffer().release(),this.getColorBuffer().release(),this.getMaterialBuffer().release(),this.getIndexBuffer().release(),this.getWireframeBuffer().release()}copyRenderConfig(e){this.setFlatShading(e.getFlatShading()),this.setShowWireframe(e.getShowWireframe()),this.setShaderType(e.getShaderType()),this.setMatcap(e.getMatcap()),this.setTexture0(e.getTexture0()),this.setCurvature(e.getCurvature()),this.setOpacity(e.getOpacity())}copyTransformData(e){$eIStk.copy(this.getCenter(),e.getCenter()),$3iqbd.copy(this.getMatrix(),e.getMatrix()),$3iqbd.copy(this.getEditMatrix(),e.getEditMatrix()),$eIStk.copy(this.getSymmetryNormal(),e.getSymmetryNormal())}copyData(e){this.setVertices(e.getVertices().slice()),this.setFaces(e.getFaces().slice()),this.setColors(e.getColors().slice()),this.setMaterials(e.getMaterials().slice()),e.hasUV()&&this.initTexCoordsDataFromOBJData(e.getTexCoords(),e.getFacesTexCoord()),this.init(),this.initRender(),this.copyTransformData(e),this.copyRenderConfig(e)}optimize(){0!==this.getNbFaces()&&$21255fc29769c8d7$var$Mesh.OPTIMIZE&&(this.optimizePostTransform(),this.optimizePreTransform(),this.initFaceRings())}computeCacheScore(){var e=this.getFaces(),t=this.getNbFaces(),r=32,i=[];i.length=r;for(var a=0,s=0,n=0;n<t;++n)for(var o=3*n,l=e[o+3]!==$jLaD3.default.TRI_INDEX?4:3,u=0;u<l;++u){var h=e[o+u];for(s=0;s<r;++s){if(void 0===i[s]){i[s]=h,a++;break}if(i[s]===h)break}s===r&&(a++,i.shift(),i.push(h))}return{ACMR:a/t,ACTVR:a/this.getNbVertices()}}optimizePostTransform(){var e=0,t=32,r=this.hasUV(),i=this.getFaces(),a=r?this.getFacesTexCoord():i,s=this.getNbFaces(),n=this.getNbVertices(),o=r?this.getNbTexCoords():n,l=this.getVerticesDuplicateStartCount(),u=new Uint32Array(o-n);if(r)for(e=0;e<o;++e)for(var h=l[2*e],c=h+l[2*e+1],d=h;d<c;++d)u[d-n]=e;var g=this.getVerticesRingFaceStartCount(),p=this.getVerticesRingFace(),m=new Int32Array(o);for(e=0;e<n;++e)m[e]=g[2*e+1];for(e=n;e<o;++e)m[e]=g[2*u[e-n]+1];for(var f=new Uint32Array(o),_=t+1,v=0,T=new Uint32Array((0,$jLaD3.default).getMemory(4*s*4),0,4*s),M=0,y=new Uint8Array(s),b=new Uint32Array(4*s),A=r?new Uint32Array(4*s):b,S=0,x=0;x>=0;){var R=[],E=x>=n?u[x-n]:x,C=g[2*E],w=C+g[2*E+1];for(e=C;e<w;++e){var F=p[e];if(!y[F]){y[F]=1;var I=4*F,D=T[M++]=b[S++]=a[I],V=T[M++]=b[S++]=a[I+1],N=T[M++]=b[S++]=a[I+2],k=b[S++]=a[I+3],P=k!==$jLaD3.default.TRI_INDEX;r&&(A[S-4]=i[I],A[S-3]=i[I+1],A[S-2]=i[I+2],A[S-1]=i[I+3]),R.push(D,V,N),--m[D],--m[V],--m[N],_-f[D]>t&&(f[D]=_++),_-f[V]>t&&(f[V]=_++),_-f[N]>t&&(f[N]=_++),P&&(T[M++]=k,R.push(k),--m[k],_-f[k]>t&&(f[k]=_++))}}x=-1;var L=-1,U=R.length;for(e=0;e<U;++e){var B=R[e],O=m[B];if(!(O<=0)){var G=0,z=_-f[B];z+2*O<=t&&(G=z),G>L&&(L=G,x=B)}}if(-1===x){for(;M>0;){var X=T[--M];if(m[X]>0){x=X;break}}if(-1===x){for(;v<o;)if(m[v++]>0){x=v-1;break}}}}a.set(b.subarray(0,4*s)),r&&i.set(A.subarray(0,4*s))}optimizePreTransform(){var e=this.getVertices(),t=this.getColors(),r=this.getMaterials(),i=this.getNbVertices(),a=this.getFaces(),s=4*this.getNbFaces(),n=new Float32Array(3*i),o=new Float32Array(3*i),l=new Float32Array(3*i),u=new Uint32Array(i),h=0,c=0;for(c=0;c<s;++c){var d=a[c];if(d!==$jLaD3.default.TRI_INDEX){var g=u[d]-1;if(-1===g){var p=3*h,m=3*d;n[p]=e[m],n[p+1]=e[m+1],n[p+2]=e[m+2],o[p]=t[m],o[p+1]=t[m+1],o[p+2]=t[m+2],l[p]=r[m],l[p+1]=r[m+1],l[p+2]=r[m+2],g=h++,u[d]=g+1}a[c]=g}}var f=i-h;if(f>0&&this.setNbVertices(h),this.hasUV()){var _=this.getFacesTexCoord();for(c=0;c<s;++c){var v=_[c];v<i?_[c]=u[v]-1:v!==$jLaD3.default.TRI_INDEX&&(_[c]-=f)}var T=this.getNbTexCoords(),M=this.getNbTexCoords()-f,y=this.getTexCoords(),b=new Float32Array(2*M),A=new Uint32Array(2*h),S=this.getVerticesDuplicateStartCount();for(c=0;c<i;++c){var x=2*c,R=S[x],E=(u[c]-1)*2;E<0||(R>0&&(A[E]=R-f,A[E+1]=S[x+1]),b[E]=y[x],b[E+1]=y[x+1])}for(c=i;c<T;++c){var C=2*c,w=(c-f)*2;b[w]=y[C],b[w+1]=y[C+1]}this.setVerticesDuplicateStartCount(A),this.setTexCoords(b)}e.set(n),t.set(o),r.set(l)}}$21255fc29769c8d7$var$Mesh.OPTIMIZE=!0,$21255fc29769c8d7$var$Mesh.ID=0;var $21255fc29769c8d7$export$2e2bcd8739ae039=$21255fc29769c8d7$var$Mesh,$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$f1a3ee82198e0c76$var$TransformData=function(){return{_center:$eIStk.create(),_matrix:$3iqbd.create(),_editMatrix:$3iqbd.create(),_symmetryNormal:[1,0,0],_symmetryOffset:0,_lastComputedMV:$3iqbd.create(),_lastComputedMVP:$3iqbd.create(),_lastComputedN:$879d8210211d0bfa$exports.create(),_lastComputedEN:$879d8210211d0bfa$exports.create(),_lastComputedDepth:0,_lastWorldBound:[1/0,1/0,1/0,-1/0,-1/0,-1/0]}},$f1a3ee82198e0c76$export$2e2bcd8739ae039=$f1a3ee82198e0c76$var$TransformData,$67e58e7d9ba114ff$var$MeshData=function(){return{_nbVertices:0,_nbFaces:0,_nbTexCoords:0,_verticesXYZ:null,_normalsXYZ:null,_colorsRGB:null,_materialsPBR:null,_vertOnEdge:null,_vertRingFace:null,_vrfStartCount:null,_vrvStartCount:null,_vertRingVert:null,_vertTagFlags:null,_vertSculptFlags:null,_vertStateFlags:null,_vertProxy:null,_facesABCD:null,_faceEdges:null,_faceNormalsXYZ:null,_facesToTriangles:null,_trianglesABC:null,_facesTagFlags:null,_edges:null,_drawArraysWireframe:null,_drawElementsWireframe:null,_texCoordsST:null,_duplicateStartCount:null,_UVfacesABCD:null,_UVtrianglesABC:null,_DAverticesXYZ:null,_DAnormalsXYZ:null,_DAcolorsRGB:null,_DAmaterialsPBR:null,_DAtexCoordsST:null,_octree:null,_faceBoxes:null,_faceCentersXYZ:null,_facePosInLeaf:null,_faceLeaf:[],_leavesToUpdate:[],_worldBound:[1/0,1/0,1/0,-1/0,-1/0,-1/0]}},$67e58e7d9ba114ff$export$2e2bcd8739ae039=$67e58e7d9ba114ff$var$MeshData;class $b44e1ac6efd62b42$var$MeshStatic extends $21255fc29769c8d7$export$2e2bcd8739ae039{constructor(e){super(),this._id=$21255fc29769c8d7$export$2e2bcd8739ae039.ID++,e&&(this._renderData=new $d57031a28bd8d861$export$2e2bcd8739ae039(e,this)),this._meshData=new $67e58e7d9ba114ff$export$2e2bcd8739ae039,this._transformData=new $f1a3ee82198e0c76$export$2e2bcd8739ae039}}var $b44e1ac6efd62b42$export$2e2bcd8739ae039=$b44e1ac6efd62b42$var$MeshStatic;class $45cf5a2300ba5ed4$var$Masking extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._hardness=.25,this._intensity=1,this._negative=!0,this._culling=!1,this._idAlpha=0,this._lockPosition=!1,this._thickness=1}pushState(){this._main.getStateManager().pushStateColorAndMaterial(this.getMesh())}updateMeshBuffers(){var e=this.getMesh();e.isDynamic?e.updateBuffers():e.updateMaterialBuffer()}stroke(e){$fd04370735fc088d$export$2e2bcd8739ae039.prototype.stroke.call(this,e)}dynamicTopology(e){return e.getPickedVertices()}paint(e,t,r,i,a,s){for(var n=this.getMesh(),o=n.getVertices(),l=n.getMaterials(),u=Math.sqrt(r),h=t[0],c=t[1],d=t[2],g=2*(1-a),p=this._negative?-i:i,m=0,f=e.length;m<f;++m){var _=3*e[m],v=o[_],T=o[_+1],M=o[_+2],y=v-h,b=T-c,A=M-d,S=Math.sqrt(y*y+b*b+A*A)/u;S>1&&(S=1);var x=Math.pow(1-S,g);x*=p*s.getAlpha(v,T,M),l[_+2]=Math.min(Math.max(l[_+2]+x,0),1)}}updateAndRenderMask(){var e=this.getMesh();e.updateDuplicateColorsAndMaterials(),e.updateDrawArrays(),this.updateRender()}blur(){var e=this.getMesh(),t=this.getMaskedVertices();if(0!==t.length){t=e.expandsVertices(t,1),this.pushState(),this._main.getStateManager().pushVertices(t);var r=e.getMaterials(),i=t.length,a=new Float32Array(3*i);this.laplacianSmooth(t,a,r);for(var s=0;s<i;++s)r[3*t[s]+2]=a[3*s+2];this.updateAndRenderMask()}}sharpen(){var e=this.getMesh(),t=this.getMaskedVertices();if(0!==t.length){this.pushState(),this._main.getStateManager().pushVertices(t);for(var r=e.getMaterials(),i=t.length,a=0;a<i;++a){var s=3*t[a]+2,n=r[s];r[s]=n>.5?Math.min(n+.1,1):Math.max(n-1,0)}this.updateAndRenderMask()}}clear(){var e=this.getMesh(),t=this.getMaskedVertices();if(0!==t.length){this.pushState(),this._main.getStateManager().pushVertices(t);for(var r=e.getMaterials(),i=0,a=t.length;i<a;++i)r[3*t[i]+2]=1;this.updateAndRenderMask()}}invert(e,t){var r=t;r||(r=this.getMesh()),e||this._main.getStateManager().pushStateCustom(this.invert.bind(this,!0,r));for(var i=r.getMaterials(),a=0,s=r.getNbVertices();a<s;++a)i[3*a+2]=1-i[3*a+2];this.updateAndRenderMask()}remapAndMirrorIndices(e,t,r){var i=this.getMesh().getNbVertices(),a=new Uint32Array((0,$jLaD3.default).getMemory(4*i),0,i),s=0,n=0,o=r.length;for(s=0;s<o;++s)a[r[s]]=s;var l=2*t;for(s=0;s<l;++s){n=4*s;var u=s<t?0:o;e[n]=a[e[n]]+u,e[n+1]=a[e[n+1]]+u,e[n+2]=a[e[n+2]]+u;var h=e[n+3];h!==$jLaD3.default.TRI_INDEX&&(e[n+3]=a[h]+u)}var c=e.length/4;for(s=l;s<c;++s)e[n=4*s]=a[e[n]],e[n+1]=a[e[n+1]],e[n+2]=a[e[n+2]]+o,e[n+3]=a[e[n+3]]+o}invertFaces(e){for(var t=0,r=e.length/4;t<r;++t){var i=4*t,a=e[i];e[i]=e[i+2],e[i+2]=a}}extractFaces(e,t,r){for(var i=this.getMesh(),a=i.getFaces(),s=i.getMaterials(),n=i.getVerticesOnEdge(),o=0===this._thickness,l=e.length,u=new Uint32Array((0,$jLaD3.default).getMemory(48*l),0,12*l),h=o?l:2*l,c=0;c<l;++c){var d=4*c,g=4*e[c],p=u[d]=a[g],m=u[d+1]=a[g+1],f=u[d+2]=a[g+2],_=u[d+3]=a[g+3];if(!o){var v=_!==$jLaD3.default.TRI_INDEX,T=s[3*p+2]>=r||n[p]>=1,M=s[3*m+2]>=r||n[m]>=1,y=s[3*f+2]>=r||n[f]>=1,b=!!v&&(s[3*_+2]>=r||n[_]>=1);d+=4*l,u[d]=f,u[d+1]=m,u[d+2]=p,u[d+3]=_,M&&(T&&(u[d=4*h++]=u[d+3]=m,u[d+1]=u[d+2]=p),y&&(u[d=4*h++]=u[d+3]=f,u[d+1]=u[d+2]=m)),v?b&&(T&&(u[d=4*h++]=u[d+3]=p,u[d+1]=u[d+2]=_),y&&(u[d=4*h++]=u[d+3]=_,u[d+1]=u[d+2]=f)):T&&y&&(u[d=4*h++]=u[d+3]=p,u[d+1]=u[d+2]=f)}}var A=new Uint32Array(u.subarray(0,4*h));return this.remapAndMirrorIndices(A,l,t),this._thickness>0&&this.invertFaces(A),A}extractVertices(e){var t=this.getMesh(),r=t.getVertices(),i=t.getNormals(),a=t.getMatrix(),s=$879d8210211d0bfa$exports.normalFromMat4($879d8210211d0bfa$exports.create(),a),n=e.length,o=new Float32Array(6*n),l=[0,0,0],u=[0,0,0],h=3*n,c=this._thickness,d=.01;c<0&&(d=-d);for(var g=0;g<n;++g){var p=3*g,m=3*e[g];l[0]=r[m],l[1]=r[m+1],l[2]=r[m+2],u[0]=i[m],u[1]=i[m+1],u[2]=i[m+2],$eIStk.transformMat3(u,u,s),$eIStk.normalize(u,u),$eIStk.transformMat4(l,l,a),$eIStk.scaleAndAdd(l,l,u,d),o[p]=l[0],o[p+1]=l[1],o[p+2]=l[2],$eIStk.scaleAndAdd(l,l,u,c),o[p+=h]=l[0],o[p+1]=l[1],o[p+2]=l[2]}return o}smoothBorder(e,t){for(var r=2*t.length,i=new Uint32Array(e.getNbFaces()-r),a=0,s=i.length;a<s;++a)i[a]=r+a;var n=e.expandsVertices(e.getVerticesFromFaces(i),1),o=new $fc2de5f83d9fa7b6$export$2e2bcd8739ae039;o.setToolMesh(e),o.smooth(n,1),o.smooth(n,1),o.smooth(n,1)}extract(){var e=this.getMesh(),t=.5,r=this.filterMaskedVertices(-1/0,t);if(0!==r.length){var i=e.getFacesFromVertices(r);r=e.getVerticesFromFaces(i);var a=this.extractFaces(i,r,t),s=this.extractVertices(r),n=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(e.getGL());n.setVertices(s),n.setFaces(a),n.initColorsAndMaterials(),n.allocateArrays(),n.initTopology(),0!==this._thickness&&this.smoothBorder(n,i),n.updateGeometry(),n.updateDuplicateColorsAndMaterials(),n.copyRenderConfig(e),n.initRender();var o=this._main;o.addNewMesh(n),o.setMesh(e)}}}var $45cf5a2300ba5ed4$export$2e2bcd8739ae039=$45cf5a2300ba5ed4$var$Masking;class $022917702718d467$var$LocalScale extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._radius=50,this._culling=!1,this._idAlpha=0}startSculpt(){var e=this._main;if(e.getSculptManager().getSymmetry()){var t=e.getPickingSymmetry();t.intersectionMouseMesh(),t.setLocalRadius2(e.getPicking().getLocalRadius2())}}sculptStroke(){var e=this._main,t=e._mouseX-e._lastMouseX,r=e.getPicking(),i=r.getLocalRadius2();if(r.pickVerticesInSphere(i),this.stroke(r,t),e.getSculptManager().getSymmetry()){var a=e.getPickingSymmetry();a.getMesh()&&(a.pickVerticesInSphere(i),this.stroke(a,t))}this.updateRender()}stroke(e,t){var r=e.getPickedVertices();this._main.getStateManager().pushVertices(r),r=this.dynamicTopology(e),this._culling&&(r=this.getFrontVertices(r,e.getEyeDirection())),e.updateAlpha(!1),e.setIdAlpha(this._idAlpha),this.scale(r,e.getIntersectionPoint(),e.getLocalRadius2(),t,e);var i=this.getMesh();i.updateGeometry(i.getFacesFromVertices(r),r)}scale(e,t,r,i,a){for(var s=this.getMesh(),n=s.getVertices(),o=s.getMaterials(),l=.01*i,u=Math.sqrt(r),h=t[0],c=t[1],d=t[2],g=0,p=e.length;g<p;++g){var m=3*e[g],f=n[m],_=n[m+1],v=n[m+2],T=f-h,M=_-c,y=v-d,b=Math.sqrt(T*T+M*M+y*y)/u,A=b*b;A=l*o[m+2]*a.getAlpha(f,_,v)*(3*A*A-4*A*b+1),n[m]=f+T*A,n[m+1]=_+M*A,n[m+2]=v+y*A}}}var $022917702718d467$export$2e2bcd8739ae039=$022917702718d467$var$LocalScale,$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$jLaD3=parcelRequire("jLaD3"),$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$jLaD3=parcelRequire("jLaD3"),$c6bd98145394d9cf$var$Edge=function(e,t){this.previous=null,this.next=null,this.v1=e,this.v2=t},$c6bd98145394d9cf$var$detectHole=function(e){if(!(e.length<=2)){var t=e.length,r=e[0].v1,i=e[0].v2,a=e[0],s=a;e[0]=e[--t];for(var n=0;n<t;){var o=e[n];if(o.v1===i){if(o.previous=s,s.next=o,s=o,i=e[n].v2,e[n]=e[--t],i===r)break;n=0}else n++}if(e.length=t,i===r)return a.previous=s,s.next=a,a}},$c6bd98145394d9cf$var$detectHoles=function(e){for(var t=e.getEdges(),r=e.getFaces(),i=e.getFaceEdges(),a=[],s=0,n=e.getNbFaces();s<n;++s){var o=4*s,l=i[o+3],u=l!==$jLaD3.default.TRI_INDEX;1===t[i[o]]&&a.push(new $c6bd98145394d9cf$var$Edge(r[o],r[o+1])),1===t[i[o+1]]&&a.push(new $c6bd98145394d9cf$var$Edge(r[o+1],r[o+2])),1===t[i[o+2]]&&a.push(new $c6bd98145394d9cf$var$Edge(r[o+2],r[u?o+3:o])),u&&1===t[l]&&a.push(new $c6bd98145394d9cf$var$Edge(r[o+3],r[o]))}for(var h=[];;){var c=$c6bd98145394d9cf$var$detectHole(a);if(!c)break;h.push(c)}return h},$c6bd98145394d9cf$var$advancingFrontMesh=function(e,t,r,i,a,s){var n=e.getVertices(),o=e.getColors(),l=e.getMaterials(),u=e.getNbVertices()+i.length/3,h=t,c=0,d=0,g=0,p=0,m=0,f=0,_=0,v=0,T=0,M=0;do{var y=h.next,b=h.v1,A=h.v2,S=y.v2;r.push(b,A,u,$jLaD3.default.TRI_INDEX),b*=3,A*=3,S*=3,M++,c+=n[b],d+=n[b+1],g+=n[b+2],p+=o[b],m+=o[b+1],f+=o[b+2],_+=l[b],v+=l[b+1],T+=l[b+2];var x=n[A],R=n[A+1],E=n[A+2],C=n[b]-x,w=n[b+1]-R,F=n[b+2]-E,I=n[S]-x,D=n[S+1]-R,V=n[S+2]-E,N=C*C+w*w+F*F,k=I*I+D*D+V*V;h.angle=Math.acos((C*I+w*D+F*V)/Math.sqrt(N*k)),h=y}while(h!==t)i.push(c/M,d/M,g/M),a.push(p/M,m/M,f/M),s.push(_/M,v/M,T/M)},$c6bd98145394d9cf$var$createMesh=function(e,t,r,i,a){var s=new $b44e1ac6efd62b42$export$2e2bcd8739ae039;return s.setID(e.getID()),s.setVertices(t),i&&s.setColors(i),a&&s.setMaterials(a),s.setFaces(r),s.setTransformData(e.getTransformData()),s.setRenderData(e.getRenderData()),$21255fc29769c8d7$export$2e2bcd8739ae039.OPTIMIZE=!1,s.init(),$21255fc29769c8d7$export$2e2bcd8739ae039.OPTIMIZE=!0,s},$c6bd98145394d9cf$var$closeHoles=function(e){var t=$c6bd98145394d9cf$var$detectHoles(e);if(0===t.length)return e;for(var r=[],i=[],a=[],s=[],n=0,o=t.length;n<o;++n)$c6bd98145394d9cf$var$advancingFrontMesh(e,t[n],r,i,a,s);var l=3*e.getNbVertices(),u=l+i.length,h=new Float32Array(u);h.set(e.getVertices().subarray(0,l));var c=new Float32Array(u);c.set(e.getColors().subarray(0,l));var d=new Float32Array(u);d.set(e.getMaterials().subarray(0,l)),u>l&&(h.set(i,l),c.set(a,l),d.set(s,l));var g=new Uint32Array(4*e.getNbFaces()+r.length);return g.set(e.getFaces()),r.length>0&&g.set(r,4*e.getNbFaces()),$c6bd98145394d9cf$var$createMesh(e,h,g,c,d)},$c6bd98145394d9cf$var$HoleFilling={};$c6bd98145394d9cf$var$HoleFilling.createClosedMesh=function(e){var t=$c6bd98145394d9cf$var$closeHoles(e);if(t===e){var r=3*e.getNbVertices(),i=4*e.getNbFaces(),a=new Uint32Array(e.getFaces().subarray(0,i)),s=new Float32Array(e.getVertices().subarray(0,r)),n=new Float32Array(e.getColors().subarray(0,r)),o=new Float32Array(e.getMaterials().subarray(0,r));t=$c6bd98145394d9cf$var$createMesh(e,s,a,n,o)}return t};var $c6bd98145394d9cf$export$2e2bcd8739ae039=$c6bd98145394d9cf$var$HoleFilling,$773910d9e2ae5857$var$SurfaceNets={};$773910d9e2ae5857$var$SurfaceNets.BLOCK=!1;var $773910d9e2ae5857$var$computeCubeEdges=function(){for(var e=new Uint32Array(24),t=0,r=0;r<8;++r)for(var i=1;i<=4;i<<=1){var a=r^i;r<=a&&(e[t++]=r,e[t++]=a)}return e},$773910d9e2ae5857$var$computeEdgeTable=function(e){for(var t=new Uint32Array(256),r=0;r<256;++r){for(var i=0,a=0;a<24;a+=2)i|=!!(r&1<<e[a])!=!!(r&1<<e[a+1])?1<<(a>>1):0;t[r]=i}return t},$773910d9e2ae5857$var$cubeEdges=$773910d9e2ae5857$var$computeCubeEdges(),$773910d9e2ae5857$var$edgeTable=$773910d9e2ae5857$var$computeEdgeTable($773910d9e2ae5857$var$cubeEdges),$773910d9e2ae5857$var$readScalarValues=function(e,t,r,i,a,s){for(var n=e.colorField,o=e.materialField,l=e.distanceField,u=0,h=0,c=0,d=0,g=0,p=0,m=0,f=0,_=0,v=r[0],T=r[0]*r[1],M=0;M<2;++M)for(var y=0;y<2;++y)for(var b=0;b<2;++b){var A=i+b+y*v+M*T,S=3*A,x=l[A];t[_]=x,f|=x<0?1<<_:0,_++,x!==1/0&&(m+=x=Math.min(1/Math.abs(x),1e15),u+=n[S]*x,h+=n[S+1]*x,c+=n[S+2]*x,d+=o[S]*x,g+=o[S+1]*x,p+=o[S+2]*x)}return 0!==f&&255!==f&&(m>0&&(m=1/m),a.push(u*m,h*m,c*m),s.push(d*m,g*m,p*m)),f},$773910d9e2ae5857$var$vTemp=[0,0,0],$773910d9e2ae5857$var$interpolateVertices=function(e,t,r,i,a){$773910d9e2ae5857$var$vTemp[0]=$773910d9e2ae5857$var$vTemp[1]=$773910d9e2ae5857$var$vTemp[2]=0;for(var s=0,n=0;n<12;++n)if(e&1<<n&&(++s,!$773910d9e2ae5857$var$SurfaceNets.BLOCK)){var o=t[n<<1],l=t[(n<<1)+1],u=r[o],h=u-r[l];if(!(1e-7>Math.abs(h))){h=u/h;for(var c=0,d=1;c<3;++c,d<<=1){var g=o&d;g!==(l&d)?$773910d9e2ae5857$var$vTemp[c]+=g?1-h:h:$773910d9e2ae5857$var$vTemp[c]+=g?1:0}}}for(var p=1/s,m=0;m<3;++m)$773910d9e2ae5857$var$vTemp[m]=i[m]+p*$773910d9e2ae5857$var$vTemp[m];a.push($773910d9e2ae5857$var$vTemp[0],$773910d9e2ae5857$var$vTemp[1],$773910d9e2ae5857$var$vTemp[2])},$773910d9e2ae5857$var$createFace=function(e,t,r,i,a,s,n){for(var o=0;o<3;++o)if(e&1<<o){var l=(o+1)%3,u=(o+2)%3;if(0!==s[l]&&0!==s[u]){var h=i[l],c=i[u];1&t?n.push(r[a],r[a-h],r[a-h-c],r[a-c]):n.push(r[a],r[a-c],r[a-h-c],r[a-h])}}};$773910d9e2ae5857$var$SurfaceNets.computeSurface=function(e){var t=e.dims,r=[],i=[],a=[],s=[],n=0,o=new Int32Array(3),l=new Int32Array([1,t[0]+1,(t[0]+1)*(t[1]+1)]),u=new Float32Array(8),h=1,c=new Int32Array(2*l[2]);for(o[2]=0;o[2]<t[2]-1;++o[2],n+=t[0],h^=1,l[2]=-l[2]){var d=1+(t[0]+1)*(1+h*(t[1]+1));for(o[1]=0;o[1]<t[1]-1;++o[1],++n,d+=2)for(o[0]=0;o[0]<t[0]-1;++o[0],++n,++d){var g=$773910d9e2ae5857$var$readScalarValues(e,u,t,n,i,a);if(0!==g&&255!==g){var p=$773910d9e2ae5857$var$edgeTable[g];c[d]=r.length/3,$773910d9e2ae5857$var$interpolateVertices(p,$773910d9e2ae5857$var$cubeEdges,u,o,r),$773910d9e2ae5857$var$createFace(p,g,c,l,d,o,s)}}}return{colors:new Float32Array(i),materials:new Float32Array(a),vertices:new Float32Array(r),faces:new Uint32Array(s)}};var $773910d9e2ae5857$export$2e2bcd8739ae039=$773910d9e2ae5857$var$SurfaceNets,$jLaD3=parcelRequire("jLaD3"),$41ad927f17ec0f0a$var$MarchingCubes={};$41ad927f17ec0f0a$var$MarchingCubes.BLOCK=!1;var $41ad927f17ec0f0a$var$edgeTable=new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),$41ad927f17ec0f0a$var$triTable=[[],[0,8,3],[0,1,9],[1,8,3,9,8,1],[1,2,10],[0,8,3,1,2,10],[9,2,10,0,2,9],[2,8,3,2,10,8,10,9,8],[3,11,2],[0,11,2,8,11,0],[1,9,0,2,3,11],[1,11,2,1,9,11,9,8,11],[3,10,1,11,10,3],[0,10,1,0,8,10,8,11,10],[3,9,0,3,11,9,11,10,9],[9,8,10,10,8,11],[4,7,8],[4,3,0,7,3,4],[0,1,9,8,4,7],[4,1,9,4,7,1,7,3,1],[1,2,10,8,4,7],[3,4,7,3,0,4,1,2,10],[9,2,10,9,0,2,8,4,7],[2,10,9,2,9,7,2,7,3,7,9,4],[8,4,7,3,11,2],[11,4,7,11,2,4,2,0,4],[9,0,1,8,4,7,2,3,11],[4,7,11,9,4,11,9,11,2,9,2,1],[3,10,1,3,11,10,7,8,4],[1,11,10,1,4,11,1,0,4,7,11,4],[4,7,8,9,0,11,9,11,10,11,0,3],[4,7,11,4,11,9,9,11,10],[9,5,4],[9,5,4,0,8,3],[0,5,4,1,5,0],[8,5,4,8,3,5,3,1,5],[1,2,10,9,5,4],[3,0,8,1,2,10,4,9,5],[5,2,10,5,4,2,4,0,2],[2,10,5,3,2,5,3,5,4,3,4,8],[9,5,4,2,3,11],[0,11,2,0,8,11,4,9,5],[0,5,4,0,1,5,2,3,11],[2,1,5,2,5,8,2,8,11,4,8,5],[10,3,11,10,1,3,9,5,4],[4,9,5,0,8,1,8,10,1,8,11,10],[5,4,0,5,0,11,5,11,10,11,0,3],[5,4,8,5,8,10,10,8,11],[9,7,8,5,7,9],[9,3,0,9,5,3,5,7,3],[0,7,8,0,1,7,1,5,7],[1,5,3,3,5,7],[9,7,8,9,5,7,10,1,2],[10,1,2,9,5,0,5,3,0,5,7,3],[8,0,2,8,2,5,8,5,7,10,5,2],[2,10,5,2,5,3,3,5,7],[7,9,5,7,8,9,3,11,2],[9,5,7,9,7,2,9,2,0,2,7,11],[2,3,11,0,1,8,1,7,8,1,5,7],[11,2,1,11,1,7,7,1,5],[9,5,8,8,5,7,10,1,3,10,3,11],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0],[11,10,5,7,11,5],[10,6,5],[0,8,3,5,10,6],[9,0,1,5,10,6],[1,8,3,1,9,8,5,10,6],[1,6,5,2,6,1],[1,6,5,1,2,6,3,0,8],[9,6,5,9,0,6,0,2,6],[5,9,8,5,8,2,5,2,6,3,2,8],[2,3,11,10,6,5],[11,0,8,11,2,0,10,6,5],[0,1,9,2,3,11,5,10,6],[5,10,6,1,9,2,9,11,2,9,8,11],[6,3,11,6,5,3,5,1,3],[0,8,11,0,11,5,0,5,1,5,11,6],[3,11,6,0,3,6,0,6,5,0,5,9],[6,5,9,6,9,11,11,9,8],[5,10,6,4,7,8],[4,3,0,4,7,3,6,5,10],[1,9,0,5,10,6,8,4,7],[10,6,5,1,9,7,1,7,3,7,9,4],[6,1,2,6,5,1,4,7,8],[1,2,5,5,2,6,3,0,4,3,4,7],[8,4,7,9,0,5,0,6,5,0,2,6],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9],[3,11,2,7,8,4,10,6,5],[5,10,6,4,7,2,4,2,0,2,7,11],[0,1,9,4,7,8,2,3,11,5,10,6],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6],[8,4,7,3,11,5,3,5,1,5,11,6],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11],[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7],[6,5,9,6,9,11,4,7,9,7,11,9],[10,4,9,6,4,10],[4,10,6,4,9,10,0,8,3],[10,0,1,10,6,0,6,4,0],[8,3,1,8,1,6,8,6,4,6,1,10],[1,4,9,1,2,4,2,6,4],[3,0,8,1,2,9,2,4,9,2,6,4],[0,2,4,4,2,6],[8,3,2,8,2,4,4,2,6],[10,4,9,10,6,4,11,2,3],[0,8,2,2,8,11,4,9,10,4,10,6],[3,11,2,0,1,6,0,6,4,6,1,10],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1],[9,6,4,9,3,6,9,1,3,11,6,3],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1],[3,11,6,3,6,0,0,6,4],[6,4,8,11,6,8],[7,10,6,7,8,10,8,9,10],[0,7,3,0,10,7,0,9,10,6,7,10],[10,6,7,1,10,7,1,7,8,1,8,0],[10,6,7,10,7,1,1,7,3],[1,2,6,1,6,8,1,8,9,8,6,7],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9],[7,8,0,7,0,6,6,0,2],[7,3,2,6,7,2],[2,3,11,10,6,8,10,8,9,8,6,7],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11],[11,2,1,11,1,7,10,6,1,6,7,1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6],[0,9,1,11,6,7],[7,8,0,7,0,6,3,11,0,11,6,0],[7,11,6],[7,6,11],[3,0,8,11,7,6],[0,1,9,11,7,6],[8,1,9,8,3,1,11,7,6],[10,1,2,6,11,7],[1,2,10,3,0,8,6,11,7],[2,9,0,2,10,9,6,11,7],[6,11,7,2,10,3,10,8,3,10,9,8],[7,2,3,6,2,7],[7,0,8,7,6,0,6,2,0],[2,7,6,2,3,7,0,1,9],[1,6,2,1,8,6,1,9,8,8,7,6],[10,7,6,10,1,7,1,3,7],[10,7,6,1,7,10,1,8,7,1,0,8],[0,3,7,0,7,10,0,10,9,6,10,7],[7,6,10,7,10,8,8,10,9],[6,8,4,11,8,6],[3,6,11,3,0,6,0,4,6],[8,6,11,8,4,6,9,0,1],[9,4,6,9,6,3,9,3,1,11,3,6],[6,8,4,6,11,8,2,10,1],[1,2,10,3,0,11,0,6,11,0,4,6],[4,11,8,4,6,11,0,2,9,2,10,9],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3],[8,2,3,8,4,2,4,6,2],[0,4,2,4,6,2],[1,9,0,2,3,4,2,4,6,4,3,8],[1,9,4,1,4,2,2,4,6],[8,1,3,8,6,1,8,4,6,6,10,1],[10,1,0,10,0,6,6,0,4],[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3],[10,9,4,6,10,4],[4,9,5,7,6,11],[0,8,3,4,9,5,11,7,6],[5,0,1,5,4,0,7,6,11],[11,7,6,8,3,4,3,5,4,3,1,5],[9,5,4,10,1,2,7,6,11],[6,11,7,1,2,10,0,8,3,4,9,5],[7,6,11,5,4,10,4,2,10,4,0,2],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6],[7,2,3,7,6,2,5,4,9],[9,5,4,0,8,6,0,6,2,6,8,7],[3,6,2,3,7,6,1,5,0,5,4,0],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8],[9,5,4,10,1,6,1,7,6,1,3,7],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10],[7,6,10,7,10,8,5,4,10,4,8,10],[6,9,5,6,11,9,11,8,9],[3,6,11,0,6,3,0,5,6,0,9,5],[0,11,8,0,5,11,0,1,5,5,6,11],[6,11,3,6,3,5,5,3,1],[1,2,10,9,5,11,9,11,8,11,5,6],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5],[6,11,3,6,3,5,2,10,3,10,5,3],[5,8,9,5,2,8,5,6,2,3,8,2],[9,5,6,9,6,0,0,6,2],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8],[1,5,6,2,1,6],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6],[10,1,0,10,0,6,9,5,0,5,6,0],[0,3,8,5,6,10],[10,5,6],[11,5,10,7,5,11],[11,5,10,11,7,5,8,3,0],[5,11,7,5,10,11,1,9,0],[10,7,5,10,11,7,9,8,1,8,3,1],[11,1,2,11,7,1,7,5,1],[0,8,3,1,2,7,1,7,5,7,2,11],[9,7,5,9,2,7,9,0,2,2,11,7],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2],[2,5,10,2,3,5,3,7,5],[8,2,0,8,5,2,8,7,5,10,2,5],[9,0,1,5,10,3,5,3,7,3,10,2],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2],[1,3,5,3,7,5],[0,8,7,0,7,1,1,7,5],[9,0,3,9,3,5,5,3,7],[9,8,7,5,9,7],[5,8,4,5,10,8,10,11,8],[5,0,4,5,11,0,5,10,11,11,3,0],[0,1,9,8,4,10,8,10,11,10,4,5],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4],[2,5,1,2,8,5,2,11,8,4,5,8],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5],[9,4,5,2,11,3],[2,5,10,3,5,2,3,4,5,3,8,4],[5,10,2,5,2,4,4,2,0],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9],[5,10,2,5,2,4,1,9,2,9,4,2],[8,4,5,8,5,3,3,5,1],[0,4,5,1,0,5],[8,4,5,8,5,3,9,0,5,0,3,5],[9,4,5],[4,11,7,4,9,11,9,10,11],[0,8,3,4,9,7,9,11,7,9,10,11],[1,10,11,1,11,4,1,4,0,7,4,11],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4],[4,11,7,9,11,4,9,2,11,9,1,2],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3],[11,7,4,11,4,2,2,4,0],[11,7,4,11,4,2,8,3,4,3,2,4],[2,9,10,2,7,9,2,3,7,7,4,9],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10],[1,10,2,8,7,4],[4,9,1,4,1,7,7,1,3],[4,9,1,4,1,7,0,8,1,8,7,1],[4,0,3,7,4,3],[4,8,7],[9,10,8,10,11,8],[3,0,9,3,9,11,11,9,10],[0,1,10,0,10,8,8,10,11],[3,1,10,11,3,10],[1,2,11,1,11,9,9,11,8],[3,0,9,3,9,11,1,2,9,2,11,9],[0,2,11,8,0,11],[3,2,11],[2,3,8,2,8,10,10,8,9],[9,10,2,0,9,2],[2,3,8,2,8,10,0,1,8,1,10,8],[1,10,2],[1,3,8,9,1,8],[0,9,1],[0,3,8],[]],$41ad927f17ec0f0a$var$cubeVerts=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]],$41ad927f17ec0f0a$var$edgeIndex=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]],$41ad927f17ec0f0a$var$readScalarValues=function(e,t,r,i,a,s){for(var n=e.colorField,o=e.materialField,l=e.distanceField,u=0,h=0,c=0,d=0,g=0,p=0,m=0,f=0,_=r[0],v=r[0]*r[1],T=0;T<8;++T){var M=$41ad927f17ec0f0a$var$cubeVerts[T],y=i+M[0]+M[1]*_+M[2]*v,b=3*y,A=l[y];t[T]=A,f|=A>0?1<<T:0,A!==1/0&&(m+=A=Math.min(1/Math.abs(A),1e15),u+=n[b]*A,h+=n[b+1]*A,c+=n[b+2]*A,d+=o[b]*A,g+=o[b+1]*A,p+=o[b+2]*A)}return 0!==$41ad927f17ec0f0a$var$edgeTable[f]&&(m>0&&(m=1/m),a[0]=u*m,a[1]=h*m,a[2]=c*m,s[0]=d*m,s[1]=g*m,s[2]=p*m),f};$41ad927f17ec0f0a$var$MarchingCubes.computeSurface=function(e){var t=e.dims,r=new Map,i=[],a=[],s=[],n=[],o=0,l=new Int32Array(3),u=new Float32Array(8),h=Array(12),c=new Float32Array(3),d=new Float32Array(3),g=new Float32Array(3);for(l[2]=0;l[2]<t[2]-1;++l[2],o+=t[0])for(l[1]=0;l[1]<t[1]-1;++l[1],++o)for(l[0]=0;l[0]<t[0]-1;++l[0],++o){var p=$41ad927f17ec0f0a$var$readScalarValues(e,u,t,o,d,g),m=$41ad927f17ec0f0a$var$edgeTable[p];if(0!==m){for(var f=0;f<12;++f)if(m&1<<f){var _=$41ad927f17ec0f0a$var$edgeIndex[f],v=$41ad927f17ec0f0a$var$cubeVerts[_[0]],T=$41ad927f17ec0f0a$var$cubeVerts[_[1]],M=u[_[0]],y=u[_[1]],b=M-y,A=0;Math.abs(b)>1e-6&&(A=M/b);for(var S=0;S<3;++S)c[S]=l[S]+v[S]+A*(T[S]-v[S]);var x=c[0]+"+"+c[1]+"+"+c[2],R=r.get(x);R>=0?h[f]=R:(h[f]=i.length/3,r.set(x,h[f]),i.push(c[0],c[1],c[2]),a.push(d[0],d[1],d[2]),s.push(g[0],g[1],g[2]))}for(var E=$41ad927f17ec0f0a$var$triTable[p],C=0;C<E.length;C+=3)n.push(h[E[C]],h[E[C+1]],h[E[C+2]],$jLaD3.default.TRI_INDEX)}}return{colors:new Float32Array(a),materials:new Float32Array(s),vertices:new Float32Array(i),faces:new Uint32Array(n)}};var $41ad927f17ec0f0a$export$2e2bcd8739ae039=$41ad927f17ec0f0a$var$MarchingCubes,$bSIL4=parcelRequire("bSIL4"),$jLaD3=parcelRequire("jLaD3"),$eIUYI=parcelRequire("eIUYI"),$7b5b7262d1062d78$var$Remesh={};$7b5b7262d1062d78$var$Remesh.RESOLUTION=150,$7b5b7262d1062d78$var$Remesh.BLOCK=!1,$7b5b7262d1062d78$var$Remesh.SMOOTHING=!0;var $7b5b7262d1062d78$var$floodFill=function(e){var t=e.step,r=e.dims,i=r[0],a=i*r[1],s=e.crossedEdges,n=e.distanceField,o=n.length,l=new Uint8Array(o),u=new Int32Array(o);u[0]=0;for(var h=1,c=[-1,1,-i,i,-a,a],d=[0,0,1,1,2,2],g=c.length,p=0,m=0;h>0;){var f=u[--h];if(n[f]<t)for(p=0;p<g;++p){var _=c[p];(m=f+_)>=o||m<0||1===l[m]||n[m]===1/0||0!==s[(_>=0?f:m)*3+d[p]]||(l[m]=1,u[h++]=m)}else for(p=0;p<g;++p)(m=f+c[p])>=o||m<0||1===l[m]||(l[m]=1,u[h++]=m)}for(var v=0;v<o;++v)0===n[v]&&console.log("hit"),0===l[v]&&(n[v]=-n[v])},$7b5b7262d1062d78$var$voxelize=function(e,t){for(var r=t.min,i=t.step,a=t.dims,s=1/i,n=r[0],o=r[1],l=r[2],u=a[0],h=u*a[1],c=t.distanceField,d=t.crossedEdges,g=t.colorField,p=t.materialField,m=e.getTriangles(),f=e.getVertices(),_=e.getColors(),v=e.getMaterials(),T=e.getNbTriangles(),M=[0,0,0],y=[0,0,0],b=[0,0,0],A=[0,0,0],S=[0,0,0],x=[0,0,0],R=[0,0,0,0],E=[[1,0,0],[0,1,0],[0,0,1]],C=1/3,w=0;w<T;++w)for(var F=3*w,I=3*m[F],D=3*m[F+1],V=3*m[F+2],N=M[0]=f[I],k=M[1]=f[I+1],P=M[2]=f[I+2],L=y[0]=f[D],U=y[1]=f[D+1],B=y[2]=f[D+2],O=b[0]=f[V],G=b[1]=f[V+1],z=b[2]=f[V+2],X=(_[I]+_[D]+_[V])*C,W=(_[I+1]+_[D+1]+_[V+1])*C,Y=(_[I+2]+_[D+2]+_[V+2])*C,H=(v[I]+v[D]+v[V])*C,j=(v[I+1]+v[D+1]+v[V+1])*C,q=(v[I+2]+v[D+2]+v[V+2])*C,K=N<L?N<O?N:O:L<O?L:O,Z=N>L?N>O?N:O:L>O?L:O,Q=k<U?k<G?k:G:U<G?U:G,J=k>U?k>G?k:G:U>G?U:G,$=P<B?P<z?P:z:B<z?B:z,ee=P>B?P>z?P:z:B>z?B:z,et=A[0]=L-N,er=A[1]=U-k,ei=A[2]=B-P,ea=S[0]=O-N,es=S[1]=G-k,en=S[2]=z-P,eo=et*et+er*er+ei*ei,el=et*ea+er*es+ei*en,eu=ea*ea+es*es+en*en,eh=Math.floor((K-n)*s),ec=Math.floor((Q-o)*s),ed=Math.floor(($-l)*s),eg=Math.ceil((Z-n)*s),ep=Math.ceil((J-o)*s),em=Math.ceil((ee-l)*s),ef=ed;ef<=em;++ef)for(var e_=ec;e_<=ep;++e_)for(var ev=eh;ev<=eg;++ev){var eT=n+ev*i,eM=o+e_*i,ey=l+ef*i,eb=ev+e_*u+ef*h;x[0]=eT,x[1]=eM,x[2]=ey;var eA=(0,$bSIL4.default).distance2PointTriangleEdges(x,A,S,M,eo,el,eu,R);if((eA=Math.sqrt(eA))<c[eb]){c[eb]=eA;var eS=3*eb;g[eS]=X,g[eS+1]=W,g[eS+2]=Y,p[eS]=H,p[eS+1]=j,p[eS+2]=q}if(!(eA>i))for(var ex=0;ex<3;++ex){var eR=R[ex]-x[ex];if(!(eR<0)&&!(eR>i)){var eE=3*eb+ex;if(1!==d[eE]){var eC=(0,$bSIL4.default).intersectionRayTriangleEdges(x,E[ex],A,S,M);eC<0||eC>i||(d[eE]=1)}}}}},$7b5b7262d1062d78$var$createVoxelData=function(e){for(var t=Math.max(e[3]-e[0],e[4]-e[1],e[5]-e[2])/$7b5b7262d1062d78$var$Remesh.RESOLUTION,r=1.51*t,i=1.51*t,a=[e[0]-r,e[1]-r,e[2]-r],s=[e[3]+i,e[4]+i,e[5]+i],n=Math.ceil((s[0]-a[0])/t),o=Math.ceil((s[1]-a[1])/t),l=Math.ceil((s[2]-a[2])/t),u=n*o*l,h=(0,$jLaD3.default).getMemory(31*u),c=new Float32Array(h,0,u),d=new Float32Array(h,4*u,3*u),g=new Float32Array(h,16*u,3*u),p=new Uint8Array(h,28*u,3*u),m=0;m<u;++m)c[m]=1/0;for(var f=0,_=3*u;f<_;++f)p[f]=0;for(var v=0,T=3*u;v<T;++v)d[v]=g[v]=-1;var M={};return M.dims=[n,o,l],M.step=t,M.min=a,M.max=s,M.crossedEdges=p,M.distanceField=c,M.colorField=d,M.materialField=g,M},$7b5b7262d1062d78$var$createMesh=function(e,t,r,i,a){var s=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(e.getGL());return s.setID(e.getID()),s.setFaces(t),s.setVertices(r),i&&s.setColors(i),a&&s.setMaterials(a),s.setRenderData(e.getRenderData()),s.init(),s.initRender(),s},$7b5b7262d1062d78$var$prepareMeshes=function(e){for(var t=[1/0,1/0,1/0,-1/0,-1/0,-1/0],r=[0,0,0],i=0,a=e.length;i<a;++i){var s=e[i];s.isUsingTexCoords()&&s.setShaderType($eIUYI.default.Shader.MATCAP);for(var n=s.getMatrix(),o=(s=e[i]=$c6bd98145394d9cf$export$2e2bcd8739ae039.createClosedMesh(s)).getVertices(),l=0,u=s.getNbVertices();l<u;++l){var h=3*l;r[0]=o[h],r[1]=o[h+1],r[2]=o[h+2],$eIStk.transformMat4(r,r,n);var c=o[h]=r[0],d=o[h+1]=r[1],g=o[h+2]=r[2];c<t[0]&&(t[0]=c),d<t[1]&&(t[1]=d),g<t[2]&&(t[2]=g),c>t[3]&&(t[3]=c),d>t[4]&&(t[4]=d),g>t[5]&&(t[5]=g)}}return t},$7b5b7262d1062d78$var$alignMeshBound=function(e,t){var r=[t[0],t[1],t[2]],i=[t[3],t[4],t[5]],a=$eIStk.dist(r,i),s=$eIStk.add([],r,i);$eIStk.scale(s,s,.5);var n=e.getLocalBound(),o=[n[0],n[1],n[2]],l=[n[3],n[4],n[5]],u=$eIStk.dist(o,l),h=$eIStk.add([],o,l);$eIStk.scale(h,h,.5);var c=a/u,d=$eIStk.scale([],s,1/c);$eIStk.sub(d,d,h);var g=e.getMatrix();$3iqbd.identity(g),$3iqbd.scale(g,g,[c,c,c]),$3iqbd.translate(g,g,d)},$7b5b7262d1062d78$var$tangentialSmoothing=function(e){for(var t=e.getNbVertices(),r=new Uint32Array(t),i=0;i<t;++i)r[i]=i;var a=new $fc2de5f83d9fa7b6$export$2e2bcd8739ae039;a.setToolMesh(e),a.smoothTangent(r,1),e.updateGeometry(),e.updateGeometryBuffers()};$7b5b7262d1062d78$var$Remesh.remesh=function(e,t,r){console.time("remesh total"),console.time("1. prepareMeshes");var i,a=$7b5b7262d1062d78$var$prepareMeshes(e=e.slice());console.timeEnd("1. prepareMeshes"),console.time("2. voxelization");for(var s=$7b5b7262d1062d78$var$createVoxelData(a),n=0,o=e.length;n<o;++n)$7b5b7262d1062d78$var$voxelize(e[n],s);console.timeEnd("2. voxelization"),console.time("3. flood"),$7b5b7262d1062d78$var$floodFill(s),console.timeEnd("3. flood"),r?(console.time("4. marchingCubes"),$41ad927f17ec0f0a$export$2e2bcd8739ae039.BLOCK=$7b5b7262d1062d78$var$Remesh.BLOCK,i=$41ad927f17ec0f0a$export$2e2bcd8739ae039.computeSurface(s),console.timeEnd("4. marchingCubes")):(console.time("4. surfaceNets"),$773910d9e2ae5857$export$2e2bcd8739ae039.BLOCK=$7b5b7262d1062d78$var$Remesh.BLOCK,i=$773910d9e2ae5857$export$2e2bcd8739ae039.computeSurface(s),console.timeEnd("4. surfaceNets")),console.time("5. createMesh");var l=$7b5b7262d1062d78$var$createMesh(t,i.faces,i.vertices,i.colors,i.materials);return console.timeEnd("5. createMesh"),$7b5b7262d1062d78$var$alignMeshBound(l,a),r&&$7b5b7262d1062d78$var$Remesh.SMOOTHING&&(console.time("6. tangential smoothing"),$7b5b7262d1062d78$var$tangentialSmoothing(l),console.timeEnd("6. tangential smoothing")),console.timeEnd("remesh total"),console.log("\n"),l},$7b5b7262d1062d78$var$Remesh.mergeArrays=function(e,t){var r,i,a=0,s=0,n=0,o=0,l=e.length,u=0;for(r=0;r<l;++r)a+=e[r].getNbVertices(),s+=e[r].getNbFaces(),n+=e[r].getNbQuads(),o+=e[r].getNbTriangles();t.nbVertices=a,t.nbFaces=s,t.nbQuads=n,t.nbTriangles=o;var h=t.vertices=void 0!==t.vertices?new Float32Array(3*a):null,c=t.colors=void 0!==t.colors?new Float32Array(3*a):null,d=t.materials=void 0!==t.materials?new Float32Array(3*a):null,g=t.faces=void 0!==t.faces?new Uint32Array(4*s):null,p=t.triangles=void 0!==t.triangles?new Uint32Array(3*o):null,m=[0,0,0],f=0,_=0,v=0,T=0;for(r=0;r<l;++r){var M=e[r],y=M.getVertices(),b=M.getColors(),A=M.getMaterials(),S=M.getFaces(),x=M.getTriangles(),R=M.getNbVertices(),E=M.getNbFaces(),C=M.getNbTriangles(),w=M.getMatrix();for(i=0;i<R;++i)u=3*i,m[0]=y[u],m[1]=y[u+1],m[2]=y[u+2],$eIStk.transformMat4(m,m,w),h[f+u]=m[0],h[f+u+1]=m[1],h[f+u+2]=m[2],c&&(c[f+u]=b[u],c[f+u+1]=b[u+1],c[f+u+2]=b[u+2]),d&&(d[f+u]=A[u],d[f+u+1]=A[u+1],d[f+u+2]=A[u+2]);if(f+=3*R,g)for(i=0;i<E;++i)g[_+(u=4*i)]=S[u]+T,g[_+u+1]=S[u+1]+T,g[_+u+2]=S[u+2]+T,g[_+u+3]=S[u+3]===$jLaD3.default.TRI_INDEX?$jLaD3.default.TRI_INDEX:S[u+3]+T;if(p)for(i=0;i<C;++i)p[v+(u=3*i)]=x[u]+T,p[v+u+1]=x[u+1]+T,p[v+u+2]=x[u+2]+T;T+=R,_+=4*E,v+=3*C}return t},$7b5b7262d1062d78$var$Remesh.mergeMeshes=function(e,t){var r={vertices:null,colors:null,materials:null,faces:null};return $7b5b7262d1062d78$var$Remesh.mergeArrays(e,r),$7b5b7262d1062d78$var$createMesh(t,r.faces,r.vertices,r.colors,r.materials)};var $7b5b7262d1062d78$export$2e2bcd8739ae039=$7b5b7262d1062d78$var$Remesh,$b6dcdf3e14e2ed09$var$Primitives={},$b6dcdf3e14e2ed09$var$createPlaneArray=function(e=-.5,t=0,r=-.5,i=1,a=0,s=0,n=0,o=0,l=1){var u=new Float32Array(4);u[0]=0,u[1]=1,u[2]=2,u[3]=3;var h=new Float32Array(12);return h[0]=e,h[1]=t,h[2]=r,h[3]=e+i,h[4]=t+a,h[5]=r+s,h[6]=e+i+n,h[7]=t+a+o,h[8]=r+s+l,h[9]=e+n,h[10]=t+o,h[11]=r+l,{faces:u,vertices:h}},$b6dcdf3e14e2ed09$var$createCubeArray=function(e=1){var t=new Float32Array(24);t[1]=t[2]=t[4]=t[6]=t[7]=t[9]=t[10]=t[11]=t[14]=t[18]=t[21]=t[23]=-(.5*e),t[0]=t[3]=t[5]=t[8]=t[12]=t[13]=t[15]=t[16]=t[17]=t[19]=t[20]=t[22]=.5*e;var r=new Float32Array(28);r[0]=r[6]=r[8]=r[10]=r[11]=r[13]=r[16]=r[23]=r[25]=.5,r[1]=r[3]=1,r[2]=r[4]=r[9]=r[12]=r[14]=r[15]=r[18]=.25,r[5]=r[7]=r[21]=r[24]=r[26]=r[27]=.75,r[17]=r[19]=r[20]=r[22]=0;var i=new Uint32Array(24),a=new Uint32Array(24);return i[0]=i[8]=i[21]=a[0]=0,i[1]=i[11]=i[12]=a[1]=1,i[2]=i[15]=i[16]=a[2]=a[15]=a[16]=2,i[3]=i[19]=i[22]=a[3]=a[19]=a[22]=3,i[4]=i[9]=i[20]=a[4]=a[9]=4,i[7]=i[10]=i[13]=a[5]=a[18]=a[23]=5,i[6]=i[14]=i[17]=a[6]=a[14]=a[17]=6,i[5]=i[18]=i[23]=a[7]=a[10]=7,a[8]=8,a[11]=9,a[12]=10,a[13]=11,a[20]=12,a[21]=13,{vertices:t,uv:r,faces:i,facesUV:a}},$b6dcdf3e14e2ed09$var$createCylinderArray=function(e=.5,t=.5,r=2,i=64,a=64,s=!0,n=!0){var o,l=s&&0===e,u=n&&0===t,h=.5*r,c=(a+1)*i,d=a*i;s&&(c+=1,d+=i),n&&(c+=1,d+=i),(l||u)&&(c-=i,d-=i);var g=new Float32Array(3*c),p=new Uint32Array(4*d),m=0,f=0,_=0,v=0,T=l?1:0,M=u?a-1:a;for(_=T;_<=M;_++){var y=_/a,b=y*(t-e)+e;for(v=0;v<i;v++){var A=2*Math.PI*v/i;g[f=3*m++]=b*Math.sin(A),g[f+1]=-y*r+h,g[f+2]=b*Math.cos(A)}}for(v=0,m=0;v<i;v++){var S=v===i-1?0:v+1;for(_=T;_<M;_++)p[f=4*m++]=i*_+v,p[f+1]=i*(_+1)+v,p[f+2]=i*(_+1)+S,p[f+3]=i*_+S}if(s)for(v=0,o=(n?g.length-6:g.length-3)/3,g[3*o+1]=h;v<i;v++)p[f=4*m++]=v,p[f+1]=v===i-1?0:v+1,p[f+2]=o,p[f+3]=$jLaD3.default.TRI_INDEX;if(n){o=(g.length-3)/3,g[3*o+1]=-h,l&&--_;var x=i*_;for(v=0;v<i;v++)p[f=4*m++]=v===i-1?x:x+v+1,p[f+1]=x+v,p[f+2]=o,p[f+3]=$jLaD3.default.TRI_INDEX}return{vertices:g,faces:p}},$b6dcdf3e14e2ed09$var$createTorusArray=function(e=.5,t=.1,r=2*Math.PI,i=32,a=128){var s=2*Math.PI-r<.01,n=i*a,o=n;s||(n+=2,o+=i);var l=s?a:a-1,u=new Float32Array(3*n),h=new Uint32Array(4*o),c=0,d=0,g=0,p=0;for(g=0;g<a;++g)for(p=0;p<i;++p){var m=g/l*r,f=p/i*Math.PI*2;u[d=3*c++]=(e+t*Math.cos(f))*Math.cos(m),u[d+1]=t*Math.sin(f),u[d+2]=(e+t*Math.cos(f))*Math.sin(m)}for(g=0,c=0;g<l;++g){var _=g===a-1?0:g+1;for(p=0;p<i;++p){h[d=4*c++]=i*g+p;var v=p===i-1?0:p+1;h[d+1]=i*g+v,h[d+2]=i*_+v,h[d+3]=i*_+p}}if(!s){var T=(u.length-6)/3;for(p=0,u[3*T]=e;p<i;p++)h[d=4*c++]=T,h[d+1]=p===i-1?0:p+1,h[d+2]=p,h[d+3]=$jLaD3.default.TRI_INDEX;u[3*++T]=e*Math.cos(r),u[3*T+2]=e*Math.sin(r);var M=i*g;for(p=0;p<i;p++)h[d=4*c++]=T,h[d+1]=M+p,h[d+2]=p===i-1?M:M+p+1,h[d+3]=$jLaD3.default.TRI_INDEX}return{vertices:u,faces:h}},$b6dcdf3e14e2ed09$var$createGridArray=function(e=-.5,t=0,r=-.5,i=1,a=0,s=0,n=0,o=0,l=1,u=20,h=u){var c=new Float32Array(((u+=2)+(h+=2))*6),d=0,g=0,p=i/(u-1),m=a/(u-1),f=s/(u-1),_=e+i+n,v=t+a+o,T=r+s+l;for(d=0;d<u;++d)c[g=6*d]=e+p*d,c[g+1]=t+m*d,c[g+2]=r+f*d,c[g+3]=_-p*(u-d-1),c[g+4]=v-m*(u-d-1),c[g+5]=T-f*(u-d-1);for(d=0,p=n/(h-1),m=o/(h-1),f=l/(h-1);d<h;++d)c[g=(u+d)*6]=e+p*d,c[g+1]=t+m*d,c[g+2]=r+f*d,c[g+3]=_-p*(h-d-1),c[g+4]=v-m*(h-d-1),c[g+5]=T-f*(h-d-1);return{vertices:c}},$b6dcdf3e14e2ed09$var$createMesh=function(e,t){var r=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(e);return r.setVertices(t.vertices),t.faces&&r.setFaces(t.faces),t.uv&&t.facesUV&&r.initTexCoordsDataFromOBJData(t.uv,t.facesUV),r.init(),e&&r.initRender(),r},$b6dcdf3e14e2ed09$var$slice=Array.prototype.slice;$b6dcdf3e14e2ed09$var$Primitives.createGrid=function(e){var t=$b6dcdf3e14e2ed09$var$createMesh(e,$b6dcdf3e14e2ed09$var$createGridArray.apply(this,$b6dcdf3e14e2ed09$var$slice.call(arguments,1)));return e&&(t.setMode(e.LINES),t.setUseDrawArrays(!0),t.setAlreadyDrawArrays()),t},$b6dcdf3e14e2ed09$var$Primitives.createCube=function(e){return $b6dcdf3e14e2ed09$var$createMesh(e,$b6dcdf3e14e2ed09$var$createCubeArray.apply(this,$b6dcdf3e14e2ed09$var$slice.call(arguments,1)))},$b6dcdf3e14e2ed09$var$Primitives.createCylinder=function(e){return $b6dcdf3e14e2ed09$var$createMesh(e,$b6dcdf3e14e2ed09$var$createCylinderArray.apply(this,$b6dcdf3e14e2ed09$var$slice.call(arguments,1)))},$b6dcdf3e14e2ed09$var$Primitives.createTorus=function(e){return $b6dcdf3e14e2ed09$var$createMesh(e,$b6dcdf3e14e2ed09$var$createTorusArray.apply(this,$b6dcdf3e14e2ed09$var$slice.call(arguments,1)))},$b6dcdf3e14e2ed09$var$Primitives.createPlane=function(e){return $b6dcdf3e14e2ed09$var$createMesh(e,$b6dcdf3e14e2ed09$var$createPlaneArray.apply(this,$b6dcdf3e14e2ed09$var$slice.call(arguments,1)))},$b6dcdf3e14e2ed09$var$Primitives.createArrow=function(e,t=.5,r=2,i=5,a=.2,s=4,n=1){var o=$b6dcdf3e14e2ed09$var$createMesh(null,$b6dcdf3e14e2ed09$var$createCylinderArray(t,t,r,s,n)),l=$b6dcdf3e14e2ed09$var$createMesh(null,$b6dcdf3e14e2ed09$var$createCylinderArray(0,t*i,r*a,s,n));l.getMatrix()[13]=.5*r;var u={vertices:null,faces:null};return $7b5b7262d1062d78$export$2e2bcd8739ae039.mergeArrays([o,l],u),$b6dcdf3e14e2ed09$var$createMesh(e,u)},$b6dcdf3e14e2ed09$var$Primitives.createLine2D=function(e,t=0,r=0,i=0,a=0){var s=$b6dcdf3e14e2ed09$var$createMesh(e,{vertices:new Float32Array([t,r,0,i,a,0])});return e&&(s.setMode(e.LINES),s.setUseDrawArrays(!0),s.setAlreadyDrawArrays()),s};var $b6dcdf3e14e2ed09$export$2e2bcd8739ae039=$b6dcdf3e14e2ed09$var$Primitives,$eIUYI=parcelRequire("eIUYI"),$ee04aa65786ae509$var$COLOR_X=$eIStk.fromValues(.7,.2,.2),$ee04aa65786ae509$var$COLOR_Y=$eIStk.fromValues(.2,.7,.2),$ee04aa65786ae509$var$COLOR_Z=$eIStk.fromValues(.2,.2,.7),$ee04aa65786ae509$var$COLOR_GREY=$eIStk.fromValues(.4,.4,.4),$ee04aa65786ae509$var$COLOR_SW=$eIStk.fromValues(.8,.4,.2),$ee04aa65786ae509$var$GIZMO_SIZE=80,$ee04aa65786ae509$var$ARROW_LENGTH=2.5,$ee04aa65786ae509$var$ARROW_CONE_THICK=6,$ee04aa65786ae509$var$ARROW_CONE_LENGTH=.25,$ee04aa65786ae509$var$THICKNESS=.02,$ee04aa65786ae509$var$THICKNESS_PICK=5*$ee04aa65786ae509$var$THICKNESS,$ee04aa65786ae509$var$ROT_RADIUS=1.5,$ee04aa65786ae509$var$SCALE_RADIUS=1.3*$ee04aa65786ae509$var$ROT_RADIUS,$ee04aa65786ae509$var$CUBE_SIDE=.35,$ee04aa65786ae509$var$CUBE_SIDE_PICK=1.2*$ee04aa65786ae509$var$CUBE_SIDE,$ee04aa65786ae509$var$_TMP_QUAT=$e92e4eb8d35aaf31$exports.create(),$ee04aa65786ae509$var$createGizmo=function(e,t=-1){return{_finalMatrix:$3iqbd.create(),_baseMatrix:$3iqbd.create(),_color:$eIStk.create(),_colorSelect:$eIStk.fromValues(1,1,0),_drawGeo:null,_pickGeo:null,_isSelected:!1,_type:e,_nbAxis:t,_lastInter:[0,0,0],updateMatrix(){$3iqbd.copy(this._drawGeo.getMatrix(),this._finalMatrix),$3iqbd.copy(this._pickGeo.getMatrix(),this._finalMatrix)},updateFinalMatrix(e){$3iqbd.mul(this._finalMatrix,e,this._baseMatrix)}}},$ee04aa65786ae509$var$TRANS_X=1,$ee04aa65786ae509$var$TRANS_Y=2,$ee04aa65786ae509$var$TRANS_Z=4,$ee04aa65786ae509$var$ROT_X=8,$ee04aa65786ae509$var$ROT_Y=16,$ee04aa65786ae509$var$ROT_Z=32,$ee04aa65786ae509$var$ROT_W=64,$ee04aa65786ae509$var$PLANE_X=128,$ee04aa65786ae509$var$PLANE_Y=256,$ee04aa65786ae509$var$PLANE_Z=512,$ee04aa65786ae509$var$SCALE_X=1024,$ee04aa65786ae509$var$SCALE_Y=2048,$ee04aa65786ae509$var$SCALE_Z=4096,$ee04aa65786ae509$var$SCALE_W=8192,$ee04aa65786ae509$var$TRANS_XYZ=$ee04aa65786ae509$var$TRANS_X|$ee04aa65786ae509$var$TRANS_Y|$ee04aa65786ae509$var$TRANS_Z,$ee04aa65786ae509$var$ROT_XYZ=$ee04aa65786ae509$var$ROT_X|$ee04aa65786ae509$var$ROT_Y|$ee04aa65786ae509$var$ROT_Z,$ee04aa65786ae509$var$PLANE_XYZ=$ee04aa65786ae509$var$PLANE_X|$ee04aa65786ae509$var$PLANE_Y|$ee04aa65786ae509$var$PLANE_Z,$ee04aa65786ae509$var$SCALE_XYZW=$ee04aa65786ae509$var$SCALE_X|$ee04aa65786ae509$var$SCALE_Y|$ee04aa65786ae509$var$SCALE_Z|$ee04aa65786ae509$var$SCALE_W;class $ee04aa65786ae509$var$Gizmo{static get TRANS_X(){return $ee04aa65786ae509$var$TRANS_X}static get TRANS_Y(){return $ee04aa65786ae509$var$TRANS_Y}static get TRANS_Z(){return $ee04aa65786ae509$var$TRANS_Z}static get ROT_X(){return $ee04aa65786ae509$var$ROT_X}static get ROT_Y(){return $ee04aa65786ae509$var$ROT_Y}static get ROT_Z(){return $ee04aa65786ae509$var$ROT_Z}static get ROT_W(){return $ee04aa65786ae509$var$ROT_W}static get PLANE_X(){return $ee04aa65786ae509$var$PLANE_X}static get PLANE_Y(){return $ee04aa65786ae509$var$PLANE_Y}static get PLANE_Z(){return $ee04aa65786ae509$var$PLANE_Z}static get SCALE_X(){return $ee04aa65786ae509$var$SCALE_X}static get SCALE_Y(){return $ee04aa65786ae509$var$SCALE_Y}static get SCALE_Z(){return $ee04aa65786ae509$var$SCALE_Z}static get SCALE_W(){return $ee04aa65786ae509$var$SCALE_W}static get TRANS_XYZ(){return $ee04aa65786ae509$var$TRANS_XYZ}static get ROT_XYZ(){return $ee04aa65786ae509$var$ROT_XYZ}static get PLANE_XYZ(){return $ee04aa65786ae509$var$PLANE_XYZ}static get SCALE_XYZW(){return $ee04aa65786ae509$var$SCALE_XYZW}constructor(e){this._main=e,this._gl=e._gl,this._activatedType=$ee04aa65786ae509$var$Gizmo.TRANS_XYZ|$ee04aa65786ae509$var$Gizmo.ROT_XYZ|$ee04aa65786ae509$var$Gizmo.PLANE_XYZ|$ee04aa65786ae509$var$Gizmo.SCALE_XYZW|$ee04aa65786ae509$var$Gizmo.ROT_W,this._transX=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.TRANS_X,0),this._transY=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.TRANS_Y,1),this._transZ=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.TRANS_Z,2),this._planeX=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.PLANE_X,0),this._planeY=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.PLANE_Y,1),this._planeZ=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.PLANE_Z,2),this._scaleX=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.SCALE_X,0),this._scaleY=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.SCALE_Y,1),this._scaleZ=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.SCALE_Z,2),this._scaleW=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.SCALE_W),this._rotX=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.ROT_X,0),this._rotY=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.ROT_Y,1),this._rotZ=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.ROT_Z,2),this._rotW=$ee04aa65786ae509$var$createGizmo($ee04aa65786ae509$var$Gizmo.ROT_W),this._lineHelper=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createLine2D(this._gl),this._lineHelper.setShaderType($eIUYI.default.Shader.FLAT),this._lastDistToEye=0,this._isEditing=!1,this._selected=null,this._pickables=[],this._editLineOrigin=[0,0,0],this._editLineDirection=[0,0,0],this._editOffset=[0,0,0],this._editLocal=[],this._editTrans=$3iqbd.create(),this._editScaleRot=[],this._editLocalInv=[],this._editTransInv=$3iqbd.create(),this._editScaleRotInv=[],this._initTranslate(),this._initRotate(),this._initScale(),this._initPickables()}setActivatedType(e){this._activatedType=e,this._initPickables()}_initPickables(){var e=this._pickables;e.length=0;var t=this._activatedType;t&$ee04aa65786ae509$var$TRANS_X&&e.push(this._transX._pickGeo),t&$ee04aa65786ae509$var$TRANS_Y&&e.push(this._transY._pickGeo),t&$ee04aa65786ae509$var$TRANS_Z&&e.push(this._transZ._pickGeo),t&$ee04aa65786ae509$var$PLANE_X&&e.push(this._planeX._pickGeo),t&$ee04aa65786ae509$var$PLANE_Y&&e.push(this._planeY._pickGeo),t&$ee04aa65786ae509$var$PLANE_Z&&e.push(this._planeZ._pickGeo),t&$ee04aa65786ae509$var$ROT_X&&e.push(this._rotX._pickGeo),t&$ee04aa65786ae509$var$ROT_Y&&e.push(this._rotY._pickGeo),t&$ee04aa65786ae509$var$ROT_Z&&e.push(this._rotZ._pickGeo),t&$ee04aa65786ae509$var$SCALE_X&&e.push(this._scaleX._pickGeo),t&$ee04aa65786ae509$var$SCALE_Y&&e.push(this._scaleY._pickGeo),t&$ee04aa65786ae509$var$SCALE_Z&&e.push(this._scaleZ._pickGeo),t&$ee04aa65786ae509$var$SCALE_W&&e.push(this._scaleW._pickGeo)}_createArrow(e,t,r){var i=e._baseMatrix;$3iqbd.rotate(i,i,.5*Math.PI,t),$3iqbd.translate(i,i,[0,.5*$ee04aa65786ae509$var$ARROW_LENGTH,0]),$eIStk.copy(e._color,r),e._pickGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createArrow(this._gl,$ee04aa65786ae509$var$THICKNESS_PICK,$ee04aa65786ae509$var$ARROW_LENGTH,.4*$ee04aa65786ae509$var$ARROW_CONE_THICK),e._pickGeo._gizmo=e,e._drawGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createArrow(this._gl,$ee04aa65786ae509$var$THICKNESS,$ee04aa65786ae509$var$ARROW_LENGTH,$ee04aa65786ae509$var$ARROW_CONE_THICK,$ee04aa65786ae509$var$ARROW_CONE_LENGTH),e._drawGeo.setShaderType($eIUYI.default.Shader.FLAT)}_createPlane(e,t,r,i,a,s,n,o){$eIStk.copy(e._color,t),e._pickGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createPlane(this._gl,0,0,0,r,i,a,s,n,o),e._pickGeo._gizmo=e,e._drawGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createPlane(this._gl,0,0,0,r,i,a,s,n,o),e._drawGeo.setShaderType($eIUYI.default.Shader.FLAT)}_initTranslate(){var e=[0,0,0];this._createArrow(this._transX,$eIStk.set(e,0,0,-1),$ee04aa65786ae509$var$COLOR_X),this._createArrow(this._transY,$eIStk.set(e,0,1,0),$ee04aa65786ae509$var$COLOR_Y),this._createArrow(this._transZ,$eIStk.set(e,1,0,0),$ee04aa65786ae509$var$COLOR_Z);var t=.2*$ee04aa65786ae509$var$ARROW_LENGTH;this._createPlane(this._planeX,$ee04aa65786ae509$var$COLOR_X,0,t,0,0,0,t),this._createPlane(this._planeY,$ee04aa65786ae509$var$COLOR_Y,t,0,0,0,0,t),this._createPlane(this._planeZ,$ee04aa65786ae509$var$COLOR_Z,t,0,0,0,t,0)}_createCircle(e,t,r,i=$ee04aa65786ae509$var$ROT_RADIUS,a=1){$eIStk.copy(e._color,r),e._pickGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createTorus(this._gl,i,$ee04aa65786ae509$var$THICKNESS_PICK*a,t,6,64),e._pickGeo._gizmo=e,e._drawGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createTorus(this._gl,i,$ee04aa65786ae509$var$THICKNESS*a,t,6,64),e._drawGeo.setShaderType($eIUYI.default.Shader.FLAT)}_initRotate(){this._createCircle(this._rotX,Math.PI,$ee04aa65786ae509$var$COLOR_X),this._createCircle(this._rotY,Math.PI,$ee04aa65786ae509$var$COLOR_Y),this._createCircle(this._rotZ,Math.PI,$ee04aa65786ae509$var$COLOR_Z),this._createCircle(this._rotW,2*Math.PI,$ee04aa65786ae509$var$COLOR_GREY)}_createCube(e,t,r){var i=e._baseMatrix;$3iqbd.rotate(i,i,.5*Math.PI,t),$3iqbd.translate(i,i,[0,$ee04aa65786ae509$var$ROT_RADIUS,0]),$eIStk.copy(e._color,r),e._pickGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createCube(this._gl,$ee04aa65786ae509$var$CUBE_SIDE_PICK),e._pickGeo._gizmo=e,e._drawGeo=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createCube(this._gl,$ee04aa65786ae509$var$CUBE_SIDE),e._drawGeo.setShaderType($eIUYI.default.Shader.FLAT)}_initScale(){var e=[0,0,0];this._createCube(this._scaleX,$eIStk.set(e,0,0,-1),$ee04aa65786ae509$var$COLOR_X),this._createCube(this._scaleY,$eIStk.set(e,0,1,0),$ee04aa65786ae509$var$COLOR_Y),this._createCube(this._scaleZ,$eIStk.set(e,1,0,0),$ee04aa65786ae509$var$COLOR_Z),this._createCircle(this._scaleW,2*Math.PI,$ee04aa65786ae509$var$COLOR_SW,$ee04aa65786ae509$var$SCALE_RADIUS,2)}_updateArcRotation(e){$ee04aa65786ae509$var$_TMP_QUAT[0]=e[2],$ee04aa65786ae509$var$_TMP_QUAT[1]=0,$ee04aa65786ae509$var$_TMP_QUAT[2]=-e[0],$ee04aa65786ae509$var$_TMP_QUAT[3]=1+e[1],$e92e4eb8d35aaf31$exports.normalize($ee04aa65786ae509$var$_TMP_QUAT,$ee04aa65786ae509$var$_TMP_QUAT),$3iqbd.fromQuat(this._rotW._baseMatrix,$ee04aa65786ae509$var$_TMP_QUAT),$3iqbd.fromQuat(this._scaleW._baseMatrix,$ee04aa65786ae509$var$_TMP_QUAT),$e92e4eb8d35aaf31$exports.rotateZ($ee04aa65786ae509$var$_TMP_QUAT,$e92e4eb8d35aaf31$exports.identity($ee04aa65786ae509$var$_TMP_QUAT),.5*Math.PI),$e92e4eb8d35aaf31$exports.rotateY($ee04aa65786ae509$var$_TMP_QUAT,$ee04aa65786ae509$var$_TMP_QUAT,Math.atan2(-e[1],-e[2])),$3iqbd.fromQuat(this._rotX._baseMatrix,$ee04aa65786ae509$var$_TMP_QUAT),$e92e4eb8d35aaf31$exports.rotateY($ee04aa65786ae509$var$_TMP_QUAT,$e92e4eb8d35aaf31$exports.identity($ee04aa65786ae509$var$_TMP_QUAT),Math.atan2(-e[0],-e[2])),$3iqbd.fromQuat(this._rotY._baseMatrix,$ee04aa65786ae509$var$_TMP_QUAT),$e92e4eb8d35aaf31$exports.rotateX($ee04aa65786ae509$var$_TMP_QUAT,$e92e4eb8d35aaf31$exports.identity($ee04aa65786ae509$var$_TMP_QUAT),.5*Math.PI),$e92e4eb8d35aaf31$exports.rotateY($ee04aa65786ae509$var$_TMP_QUAT,$ee04aa65786ae509$var$_TMP_QUAT,Math.atan2(-e[0],e[1])),$3iqbd.fromQuat(this._rotZ._baseMatrix,$ee04aa65786ae509$var$_TMP_QUAT)}_computeCenterGizmo(e=[0,0,0]){for(var t=this._main.getSelectedMeshes(),r=[0,0,0],i=[0,0,0],a=0;a<t.length;++a){var s=t[a];$eIStk.transformMat4(i,s.getCenter(),s.getEditMatrix()),$eIStk.transformMat4(i,i,s.getMatrix()),$eIStk.add(r,r,i)}return $eIStk.scale(e,r,1/t.length),e}_updateMatrices(){var e=this._main.getCamera(),t=this._computeCenterGizmo(),r=e.computePosition();this._lastDistToEye=this._isEditing?this._lastDistToEye:$eIStk.dist(r,t);var i=this._lastDistToEye*$ee04aa65786ae509$var$GIZMO_SIZE/e.getConstantScreen(),a=$3iqbd.create();$3iqbd.translate(a,a,t),$3iqbd.scale(a,a,[i,i,i]),this._updateArcRotation($eIStk.normalize(r,$eIStk.sub(r,t,r))),this._transX.updateFinalMatrix(a),this._transY.updateFinalMatrix(a),this._transZ.updateFinalMatrix(a),this._planeX.updateFinalMatrix(a),this._planeY.updateFinalMatrix(a),this._planeZ.updateFinalMatrix(a),this._rotX.updateFinalMatrix(a),this._rotY.updateFinalMatrix(a),this._rotZ.updateFinalMatrix(a),this._rotW.updateFinalMatrix(a),this._scaleX.updateFinalMatrix(a),this._scaleY.updateFinalMatrix(a),this._scaleZ.updateFinalMatrix(a),this._scaleW.updateFinalMatrix(a)}_drawGizmo(e){e.updateMatrix();var t=e._drawGeo;t.setFlatColor(e._isSelected?e._colorSelect:e._color),t.updateMatrices(this._main.getCamera()),t.render(this._main)}_updateLineHelper(e,t,r,i){var a=this._lineHelper.getVertices(),s=this._main,n=s.getCanvasWidth(),o=s.getCanvasHeight();a[0]=e/n*2-1,a[1]=(o-t)/o*2-1,a[3]=r/n*2-1,a[4]=(o-i)/o*2-1,this._lineHelper.updateVertexBuffer()}_saveEditMatrices(){var e=this._main.getSelectedMeshes(),t=this._computeCenterGizmo();$3iqbd.translate(this._editTrans,$3iqbd.identity(this._editTrans),t),$3iqbd.invert(this._editTransInv,this._editTrans);for(var r=0;r<e.length;++r)this._editLocal[r]=$3iqbd.create(),this._editScaleRot[r]=$3iqbd.create(),this._editLocalInv[r]=$3iqbd.create(),this._editScaleRotInv[r]=$3iqbd.create(),$3iqbd.copy(this._editLocal[r],e[r].getMatrix()),$3iqbd.copy(this._editScaleRot[r],this._editLocal[r]),this._editScaleRot[r][12]=this._editScaleRot[r][13]=this._editScaleRot[r][14]=0,$3iqbd.invert(this._editLocalInv[r],this._editLocal[r]),$3iqbd.invert(this._editScaleRotInv[r],this._editScaleRot[r])}_startRotateEdit(){var e=this._main,t=e.getCamera(),r=[0,0,0];this._computeCenterGizmo(r),$eIStk.copy(r,t.project(r));var i=this._editLineDirection,a=0===this._selected._nbAxis?-1:1,s=this._selected._lastInter;$eIStk.set(i,-a*s[2],-a*s[1],a*s[0]),$eIStk.transformMat4(i,i,this._selected._finalMatrix),$eIStk.copy(i,t.project(i)),$4ce98914b6676340$exports.normalize(i,$4ce98914b6676340$exports.sub(i,i,r)),$4ce98914b6676340$exports.set(this._editLineOrigin,e._mouseX,e._mouseY)}_startTranslateEdit(){var e=this._main,t=e.getCamera(),r=this._editLineOrigin,i=this._editLineDirection;this._computeCenterGizmo(r);var a=this._selected._nbAxis;-1!==a&&($eIStk.set(i,0,0,0)[a]=1),$eIStk.add(i,r,i),$eIStk.copy(r,t.project(r)),$eIStk.copy(i,t.project(i)),$4ce98914b6676340$exports.normalize(i,$4ce98914b6676340$exports.sub(i,i,r));var s=this._editOffset;s[0]=e._mouseX-r[0],s[1]=e._mouseY-r[1]}_startPlaneEdit(){var e=this._main,t=e.getCamera(),r=this._editLineOrigin;this._computeCenterGizmo(r),$eIStk.copy(r,t.project(r));var i=this._editOffset;i[0]=e._mouseX-r[0],i[1]=e._mouseY-r[1],$4ce98914b6676340$exports.set(this._editLineOrigin,e._mouseX,e._mouseY)}_startScaleEdit(){this._startTranslateEdit()}_updateRotateEdit(){var e=this._main,t=this._editLineOrigin,r=this._editLineDirection,i=[e._mouseX,e._mouseY,0];$4ce98914b6676340$exports.sub(i,i,t);var a=$4ce98914b6676340$exports.dot(i,r);this._updateLineHelper(t[0],t[1],t[0]+r[0]*a,t[1]+r[1]*a);var s=7*a/Math.min(e.getCanvasWidth(),e.getCanvasHeight());s%=2*Math.PI;for(var n=this._selected._nbAxis,o=this._main.getSelectedMeshes(),l=0;l<o.length;++l){var u=o[l].getEditMatrix();$3iqbd.identity(u),0===n?$3iqbd.rotateX(u,u,-s):1===n?$3iqbd.rotateY(u,u,-s):2===n&&$3iqbd.rotateZ(u,u,-s),this._scaleRotateEditMatrix(u,l)}e.render()}_updateTranslateEdit(){var e=this._main,t=e.getCamera(),r=this._editLineOrigin,i=this._editLineDirection,a=[e._mouseX,e._mouseY,0];$4ce98914b6676340$exports.sub(a,a,r),$4ce98914b6676340$exports.sub(a,a,this._editOffset),$4ce98914b6676340$exports.scaleAndAdd(a,r,i,$4ce98914b6676340$exports.dot(a,i)),this._updateLineHelper(r[0],r[1],a[0],a[1]);var s=t.unproject(a[0],a[1],0),n=t.unproject(a[0],a[1],.1);$eIStk.transformMat4(s,s,this._editTransInv),$eIStk.transformMat4(n,n,this._editTransInv),$eIStk.normalize(a,$eIStk.sub(a,n,s));var o=[0,0,0];o[this._selected._nbAxis]=1;var l=-$eIStk.dot(a,o),u=$eIStk.dot(s,a),h=Math.abs(1-l*l),c=-$eIStk.dot(s,o);o[this._selected._nbAxis]=(l*u-c)/h,this._updateMatrixTranslate(o),e.render()}_updatePlaneEdit(){var e=this._main,t=e.getCamera(),r=[e._mouseX,e._mouseY,0];$4ce98914b6676340$exports.sub(r,r,this._editOffset),this._updateLineHelper(this._editLineOrigin[0],this._editLineOrigin[1],e._mouseX,e._mouseY);var i=t.unproject(r[0],r[1],0),a=t.unproject(r[0],r[1],.1);$eIStk.transformMat4(i,i,this._editTransInv),$eIStk.transformMat4(a,a,this._editTransInv);var s=[0,0,0];s[this._selected._nbAxis]=1;var n=$eIStk.dot(i,s),o=$eIStk.dot(a,s);if(n===o)return!1;var l=-n/(o-n);s[0]=i[0]+(a[0]-i[0])*l,s[1]=i[1]+(a[1]-i[1])*l,s[2]=i[2]+(a[2]-i[2])*l,this._updateMatrixTranslate(s),e.render()}_updateMatrixTranslate(e){for(var t=[0,0,0],r=this._main.getSelectedMeshes(),i=0;i<r.length;++i){$eIStk.transformMat4(t,e,this._editScaleRotInv[i]);var a=r[i].getEditMatrix();$3iqbd.identity(a),$3iqbd.translate(a,a,t)}}_updateScaleEdit(){var e=this._main;e.getMesh();var t=this._editLineOrigin,r=this._editLineDirection,i=this._selected._nbAxis,a=[e._mouseX,e._mouseY,0];-1!==i&&($4ce98914b6676340$exports.sub(a,a,t),$4ce98914b6676340$exports.scaleAndAdd(a,t,r,$4ce98914b6676340$exports.dot(a,r))),this._updateLineHelper(t[0],t[1],a[0],a[1]);var s=$eIStk.len(this._editOffset),n=[1,1,1],o=Math.max(-.99,($4ce98914b6676340$exports.dist(t,a)-s)/s);-1===i?(n[0]+=o,n[1]+=o,n[2]+=o):n[i]+=o;for(var l=this._main.getSelectedMeshes(),u=0;u<l.length;++u){var h=l[u].getEditMatrix();$3iqbd.identity(h),$3iqbd.scale(h,h,n),this._scaleRotateEditMatrix(h,u)}e.render()}_scaleRotateEditMatrix(e,t){$3iqbd.mul(e,this._editTrans,e),$3iqbd.mul(e,e,this._editTransInv),$3iqbd.mul(e,this._editLocalInv[t],e),$3iqbd.mul(e,e,this._editLocal[t])}addGizmoToScene(e){return e.push(this._transX._drawGeo),e.push(this._transY._drawGeo),e.push(this._transZ._drawGeo),e.push(this._planeX._drawGeo),e.push(this._planeY._drawGeo),e.push(this._planeZ._drawGeo),e.push(this._rotX._drawGeo),e.push(this._rotY._drawGeo),e.push(this._rotZ._drawGeo),e.push(this._rotW._drawGeo),e.push(this._scaleX._drawGeo),e.push(this._scaleY._drawGeo),e.push(this._scaleZ._drawGeo),e.push(this._scaleW._drawGeo),e}render(){this._updateMatrices();var e=this._isEditing&&this._selected?this._selected._type:this._activatedType;e&$ee04aa65786ae509$var$ROT_W&&this._drawGizmo(this._rotW),e&$ee04aa65786ae509$var$TRANS_X&&this._drawGizmo(this._transX),e&$ee04aa65786ae509$var$TRANS_Y&&this._drawGizmo(this._transY),e&$ee04aa65786ae509$var$TRANS_Z&&this._drawGizmo(this._transZ),e&$ee04aa65786ae509$var$PLANE_X&&this._drawGizmo(this._planeX),e&$ee04aa65786ae509$var$PLANE_Y&&this._drawGizmo(this._planeY),e&$ee04aa65786ae509$var$PLANE_Z&&this._drawGizmo(this._planeZ),e&$ee04aa65786ae509$var$ROT_X&&this._drawGizmo(this._rotX),e&$ee04aa65786ae509$var$ROT_Y&&this._drawGizmo(this._rotY),e&$ee04aa65786ae509$var$ROT_Z&&this._drawGizmo(this._rotZ),e&$ee04aa65786ae509$var$SCALE_X&&this._drawGizmo(this._scaleX),e&$ee04aa65786ae509$var$SCALE_Y&&this._drawGizmo(this._scaleY),e&$ee04aa65786ae509$var$SCALE_Z&&this._drawGizmo(this._scaleZ),e&$ee04aa65786ae509$var$SCALE_W&&this._drawGizmo(this._scaleW),this._isEditing&&this._lineHelper.render(this._main)}onMouseOver(){if(this._isEditing){var e=this._selected._type;return e&$ee04aa65786ae509$var$ROT_XYZ?this._updateRotateEdit():e&$ee04aa65786ae509$var$TRANS_XYZ?this._updateTranslateEdit():e&$ee04aa65786ae509$var$PLANE_XYZ?this._updatePlaneEdit():e&$ee04aa65786ae509$var$SCALE_XYZW&&this._updateScaleEdit(),!0}var t=this._main,r=t.getPicking(),i=t._mouseX,a=t._mouseY,s=this._pickables;r.intersectionMouseMeshes(s,i,a),this._selected&&(this._selected._isSelected=!1);var n=r.getMesh();return n?(this._selected=n._gizmo,this._selected._isSelected=!0,$eIStk.copy(this._selected._lastInter,r.getIntersectionPoint()),!0):(this._selected=null,!1)}onMouseDown(){var e=this._selected;if(!e)return!1;this._isEditing=!0;var t=e._type;return this._saveEditMatrices(),t&$ee04aa65786ae509$var$ROT_XYZ?this._startRotateEdit():t&$ee04aa65786ae509$var$TRANS_XYZ?this._startTranslateEdit():t&$ee04aa65786ae509$var$PLANE_XYZ?this._startPlaneEdit():t&$ee04aa65786ae509$var$SCALE_XYZW&&this._startScaleEdit(),!0}onMouseUp(){this._isEditing=!1}}var $ee04aa65786ae509$export$2e2bcd8739ae039=$ee04aa65786ae509$var$Gizmo;class $7cfb8673666575ce$var$Transform extends $498fabb45675e18e$export$2e2bcd8739ae039{constructor(e){super(e),this._gizmo=new $ee04aa65786ae509$export$2e2bcd8739ae039(e)}isIdentity(e){return 1===e[0]&&1===e[5]&&1===e[10]&&1===e[15]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]}preUpdate(){var e=this._main.getPicking(),t=e.getMesh();this._gizmo.onMouseOver(),e._mesh=t,this._main.setCanvasCursor("default")}start(e){var t=this._main,r=this.getMesh(),i=t.getPicking();return r&&this._gizmo.onMouseDown()?(i._mesh=r,!0):!!(i.intersectionMouseMeshes(t.getMeshes(),t._mouseX,t._mouseY)&&t.setOrUnsetMesh(i.getMesh(),e))&&(this._lastMouseX=t._mouseX,this._lastMouseY=t._mouseY,!1)}end(){if(this._gizmo.onMouseUp(),!(!this.getMesh()||this.isIdentity(this.getMesh().getEditMatrix()))){for(var e=this._main.getSelectedMeshes(),t=0;t<e.length;++t){this._forceToolMesh=e[t],this.pushState(),t>0&&(this._main.getStateManager().getCurrentState().squash=!0);var r=this.getUnmaskedVertices();this._main.getStateManager().pushVertices(r),this.applyEditMatrix(r),0!==r.length&&this.updateMeshBuffers()}this._forceToolMesh=null}}applyEditMatrix(e){for(var t=this.getMesh(),r=t.getEditMatrix(),i=t.getMaterials(),a=t.getVertices(),s=[0,0,0],n=0,o=e.length;n<o;++n){var l=3*e[n],u=i[l+2],h=s[0]=a[l],c=s[1]=a[l+1],d=s[2]=a[l+2];$eIStk.transformMat4(s,s,r);var g=1-u;a[l]=h*g+s[0]*u,a[l+1]=c*g+s[1]*u,a[l+2]=d*g+s[2]*u}$eIStk.transformMat4(t.getCenter(),t.getCenter(),r),$3iqbd.identity(r),e.length===t.getNbVertices()?t.updateGeometry():t.updateGeometry(t.getFacesFromVertices(e),e)}update(){}postRender(){this.getMesh()&&this._gizmo.render()}addSculptToScene(e){this.getMesh()&&this._gizmo.addGizmoToScene(e)}}var $7cfb8673666575ce$export$2e2bcd8739ae039=$7cfb8673666575ce$var$Transform,$44b556fb7f1fceec$var$Tools=[];$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.BRUSH]=$cd3217c15e86483a$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.INFLATE]=$d1028195f8dc1f1f$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.TWIST]=$afddf47358a7c3bf$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.SMOOTH]=$fc2de5f83d9fa7b6$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.FLATTEN]=$38e57fae688bbc00$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.PINCH]=$f23af9aa057fe464$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.CREASE]=$8e546a38e5c2478e$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.DRAG]=$d6e4e75caaffaa9a$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.PAINT]=$fd04370735fc088d$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.MOVE]=$05a5cbad9d98bec0$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.MASKING]=$45cf5a2300ba5ed4$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.LOCALSCALE]=$022917702718d467$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.TRANSFORM]=$7cfb8673666575ce$export$2e2bcd8739ae039,$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.BRUSH].uiName="sculptBrush",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.INFLATE].uiName="sculptInflate",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.TWIST].uiName="sculptTwist",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.SMOOTH].uiName="sculptSmooth",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.FLATTEN].uiName="sculptFlatten",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.PINCH].uiName="sculptPinch",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.CREASE].uiName="sculptCrease",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.DRAG].uiName="sculptDrag",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.PAINT].uiName="sculptPaint",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.MOVE].uiName="sculptMove",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.MASKING].uiName="sculptMasking",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.LOCALSCALE].uiName="sculptLocalScale",$44b556fb7f1fceec$var$Tools[$eIUYI.default.Tools.TRANSFORM].uiName="sculptTransform";var $44b556fb7f1fceec$export$2e2bcd8739ae039=$44b556fb7f1fceec$var$Tools,$eIUYI=parcelRequire("eIUYI");class $320b95c990abaa4b$var$SculptManager{constructor(e){this._main=e,this._toolIndex=$eIUYI.default.Tools.BRUSH,this._tools=[],this._symmetry=!0,this._continuous=!1,this._sculptTimer=-1,this._selection=new $a05e7775935be692$export$2e2bcd8739ae039(e._gl),this.init()}setToolIndex(e){this._toolIndex=e}getToolIndex(){return this._toolIndex}getCurrentTool(){return this._tools[this._toolIndex]}getSymmetry(){return this._symmetry}getTool(e){return this._tools[e]}getSelection(){return this._selection}init(){for(var e=this._main,t=this._tools,r=0,i=$44b556fb7f1fceec$export$2e2bcd8739ae039.length;r<i;++r)$44b556fb7f1fceec$export$2e2bcd8739ae039[r]&&(t[r]=new $44b556fb7f1fceec$export$2e2bcd8739ae039[r](e))}canBeContinuous(){switch(this._toolIndex){case $eIUYI.default.Tools.TWIST:case $eIUYI.default.Tools.MOVE:case $eIUYI.default.Tools.DRAG:case $eIUYI.default.Tools.LOCALSCALE:case $eIUYI.default.Tools.TRANSFORM:return!1;default:return!0}}isUsingContinuous(){return this._continuous&&this.canBeContinuous()}start(e){var t=this.getCurrentTool(),r=t.start(e);return this._main.getPicking().getMesh()&&this.isUsingContinuous()&&(this._sculptTimer=window.setInterval(t._cbContinuous,16.6)),r}end(){this.getCurrentTool().end(),-1!==this._sculptTimer&&(clearInterval(this._sculptTimer),this._sculptTimer=-1)}preUpdate(){this.getCurrentTool().preUpdate(this.canBeContinuous())}update(){this.isUsingContinuous()||this.getCurrentTool().update()}postRender(){this.getCurrentTool().postRender(this._selection)}addSculptToScene(e){return this.getCurrentTool().addSculptToScene(e)}}var $320b95c990abaa4b$export$2e2bcd8739ae039=$320b95c990abaa4b$var$SculptManager,$jLaD3=parcelRequire("jLaD3"),$58f48ae8f3043d67$var$Subdivision={};$58f48ae8f3043d67$var$Subdivision.LINEAR=!1;class $58f48ae8f3043d67$var$OddVertexComputer{constructor(e,t,r,i){this._vArOut=t,this._cArOut=r,this._mArOut=i,this._vAr=e.getVertices(),this._cAr=e.getColors(),this._mAr=e.getMaterials(),this._eAr=e.getEdges(),this._nbVertices=e.getNbVertices(),this._tagEdges=new Int32Array(e.getNbEdges())}computeTriangleEdgeVertex(e,t,r,i){var a=this._vAr,s=this._cAr,n=this._mAr,o=this._eAr,l=this._vArOut,u=this._cArOut,h=this._mArOut,c=this._tagEdges,d=3*e,g=3*t,p=3*r,m=c[i]-1,f=-1===m?this._nbVertices++:m,_=3*f,v=o[i];if(1===v||v>=3||$58f48ae8f3043d67$var$Subdivision.LINEAR){if(-1!==m)return f;c[i]=f+1,l[_]=.5*(a[d]+a[g]),l[_+1]=.5*(a[d+1]+a[g+1]),l[_+2]=.5*(a[d+2]+a[g+2]),u[_]=.5*(s[d]+s[g]),u[_+1]=.5*(s[d+1]+s[g+1]),u[_+2]=.5*(s[d+2]+s[g+2]),h[_]=.5*(n[d]+n[g]),h[_+1]=.5*(n[d+1]+n[g+1]),h[_+2]=.5*(n[d+2]+n[g+2])}else -1===m?(c[i]=f+1,l[_]=.125*a[p]+.375*(a[d]+a[g]),l[_+1]=.125*a[p+1]+.375*(a[d+1]+a[g+1]),l[_+2]=.125*a[p+2]+.375*(a[d+2]+a[g+2]),u[_]=.125*s[p]+.375*(s[d]+s[g]),u[_+1]=.125*s[p+1]+.375*(s[d+1]+s[g+1]),u[_+2]=.125*s[p+2]+.375*(s[d+2]+s[g+2]),h[_]=.125*n[p]+.375*(n[d]+n[g]),h[_+1]=.125*n[p+1]+.375*(n[d+1]+n[g+1]),h[_+2]=.125*n[p+2]+.375*(n[d+2]+n[g+2])):(l[_]+=.125*a[p],l[_+1]+=.125*a[p+1],l[_+2]+=.125*a[p+2],u[_]+=.125*s[p],u[_+1]+=.125*s[p+1],u[_+2]+=.125*s[p+2],h[_]+=.125*n[p],h[_+1]+=.125*n[p+1],h[_+2]+=.125*n[p+2]);return f}computeQuadEdgeVertex(e,t,r,i,a){var s=this._vAr,n=this._cAr,o=this._mAr,l=this._eAr,u=this._vArOut,h=this._cArOut,c=this._mArOut,d=this._tagEdges,g=3*e,p=3*t,m=3*r,f=3*i,_=d[a]-1,v=-1===_?this._nbVertices++:_,T=3*v,M=l[a];if(1===M||M>=3||$58f48ae8f3043d67$var$Subdivision.LINEAR){if(-1!==_)return v;d[a]=v+1,u[T]=.5*(s[g]+s[p]),u[T+1]=.5*(s[g+1]+s[p+1]),u[T+2]=.5*(s[g+2]+s[p+2]),h[T]=.5*(n[g]+n[p]),h[T+1]=.5*(n[g+1]+n[p+1]),h[T+2]=.5*(n[g+2]+n[p+2]),c[T]=.5*(o[g]+o[p]),c[T+1]=.5*(o[g+1]+o[p+1]),c[T+2]=.5*(o[g+2]+o[p+2])}else -1===_?(d[a]=v+1,u[T]=.0625*(s[m]+s[f])+.375*(s[g]+s[p]),u[T+1]=.0625*(s[m+1]+s[f+1])+.375*(s[g+1]+s[p+1]),u[T+2]=.0625*(s[m+2]+s[f+2])+.375*(s[g+2]+s[p+2]),h[T]=.0625*(n[m]+n[f])+.375*(n[g]+n[p]),h[T+1]=.0625*(n[m+1]+n[f+1])+.375*(n[g+1]+n[p+1]),h[T+2]=.0625*(n[m+2]+n[f+2])+.375*(n[g+2]+n[p+2]),c[T]=.0625*(o[m]+o[f])+.375*(o[g]+o[p]),c[T+1]=.0625*(o[m+1]+o[f+1])+.375*(o[g+1]+o[p+1]),c[T+2]=.0625*(o[m+2]+o[f+2])+.375*(o[g+2]+o[p+2])):(u[T]+=.0625*(s[m]+s[f]),u[T+1]+=.0625*(s[m+1]+s[f+1]),u[T+2]+=.0625*(s[m+2]+s[f+2]),h[T]+=.0625*(n[m]+n[f]),h[T+1]+=.0625*(n[m+1]+n[f+1]),h[T+2]+=.0625*(n[m+2]+n[f+2]),c[T]+=.0625*(o[m]+o[f]),c[T+1]+=.0625*(o[m+1]+o[f+1]),c[T+2]+=.0625*(o[m+2]+o[f+2]));return v}computeFaceVertex(e,t,r,i){var a=3*e,s=3*t,n=3*r,o=3*i,l=this._vAr,u=this._cAr,h=this._mAr,c=this._vArOut,d=this._cArOut,g=this._mArOut,p=this._nbVertices++,m=3*p;return c[m]=.25*(l[a]+l[s]+l[n]+l[o]),c[m+1]=.25*(l[a+1]+l[s+1]+l[n+1]+l[o+1]),c[m+2]=.25*(l[a+2]+l[s+2]+l[n+2]+l[o+2]),d[m]=.25*(u[a]+u[s]+u[n]+u[o]),d[m+1]=.25*(u[a+1]+u[s+1]+u[n+1]+u[o+1]),d[m+2]=.25*(u[a+2]+u[s+2]+u[n+2]+u[o+2]),g[m]=.25*(h[a]+h[s]+h[n]+h[o]),g[m+1]=.25*(h[a+1]+h[s+1]+h[n+1]+h[o+1]),g[m+2]=.25*(h[a+2]+h[s+2]+h[n+2]+h[o+2]),p}}var $58f48ae8f3043d67$var$applyEvenSmooth=function(e,t,r,i){var a=e.getNbVertices();r.set(e.getColors().subarray(0,3*a)),i.set(e.getMaterials().subarray(0,3*a));for(var s=e.getVertices(),n=e.getFaces(),o=e.getEdges(),l=e.getFaceEdges(),u=e.getVerticesOnEdge(),h=e.getVerticesRingVertStartCount(),c=e.getVerticesRingVert(),d=e.getVerticesRingFaceStartCount(),g=e.getVerticesRingFace(),p=e.hasOnlyTriangles(),m=0;m<a;++m){var f=3*m,_=0,v=0,T=0,M=0,y=0,b=0,A=0;if(u[m]||$58f48ae8f3043d67$var$Subdivision.LINEAR){var S=d[2*m],x=S+d[2*m+1];for(b=S;b<x;++b){var R=4*g[b],E=n[R],C=n[R+1],w=n[R+2],F=n[R+3],I=F===$jLaD3.default.TRI_INDEX;A=$jLaD3.default.TRI_INDEX,E===m?1===o[l[R]]?A=C:1===o[l[I?R+2:R+3]]&&(A=I?w:F):C===m?1===o[l[R]]?A=E:1===o[l[R+1]]&&(A=w):w===m?1===o[l[R+1]]?A=C:1===o[l[R+2]]&&(A=I?E:F):F===m&&(1===o[l[R+2]]?A=w:1===o[l[R+3]]&&(A=E)),A!==$jLaD3.default.TRI_INDEX&&(A*=3,_+=s[A],v+=s[A+1],T+=s[A+2],M++)}M<2?(t[f]=s[f],t[f+1]=s[f+1],t[f+2]=s[f+2]):(M=.25/M,y=.75,t[f]=s[f]*y+_*M,t[f+1]=s[f+1]*y+v*M,t[f+2]=s[f+2]*y+T*M);continue}var D=h[2*m],V=h[2*m+1],N=D+V;for(b=D;b<N;++b)_+=s[A=3*c[b]],v+=s[A+1],T+=s[A+2];if(p){6===V?(M=.0625,y=.625):3===V?(M=.1875,y=.4375):(M=.375/V,y=.625),t[f]=s[f]*y+_*M,t[f+1]=s[f+1]*y+v*M,t[f+2]=s[f+2]*y+T*M;continue}var k=0,P=0,L=0,U=0,B=d[2*m],O=B+d[2*m+1],G=0;for(b=B;b<O;++b){var z=n[(A=4*g[b])+3];if(z!==$jLaD3.default.TRI_INDEX){G++;var X=n[A],W=n[A+1],Y=n[A+2],H=0;H=X===m?3*Y:W===m?3*z:Y===m?3*X:3*W,k+=s[H],P+=s[H+1],L+=s[H+2]}}if(G===O-B){4===V?(y=.5625,M=.09375,U=.015625):y=1-((M=1.5/(V*V))+(U=.25/(V*V)))*V,t[f]=s[f]*y+_*M+k*U,t[f+1]=s[f+1]*y+v*M+P*U,t[f+2]=s[f+2]*y+T*M+L*U;continue}if(0===G){6===V?(M=.0625,y=.625):3===V?(M=.1875,y=.4375):(M=.375/V,y=.625),t[f]=s[f]*y+_*M,t[f+1]=s[f+1]*y+v*M,t[f+2]=s[f+2]*y+T*M;continue}M=.5*(y=1/(1+.5*V+.25*G)),U=.25*y,t[f]=s[f]*y+_*M+k*U,t[f+1]=s[f+1]*y+v*M+P*U,t[f+2]=s[f+2]*y+T*M+L*U}},$58f48ae8f3043d67$var$applyOddSmooth=function(e,t,r,i,a){for(var s=e.getFaces(),n=e.getFaceEdges(),o=new $58f48ae8f3043d67$var$OddVertexComputer(e,t,r,i),l=0,u=e.getNbFaces();l<u;++l){var h,c,d,g,p,m=4*l,f=s[m],_=s[m+1],v=s[m+2],T=s[m+3],M=T!==$jLaD3.default.TRI_INDEX;M?(h=o.computeQuadEdgeVertex(f,_,v,T,n[m]),c=o.computeQuadEdgeVertex(_,v,T,f,n[m+1]),d=o.computeQuadEdgeVertex(v,T,f,_,n[m+2]),g=o.computeQuadEdgeVertex(T,f,_,v,n[m+3]),p=o.computeFaceVertex(f,_,v,T)):(h=o.computeTriangleEdgeVertex(f,_,v,n[m]),c=o.computeTriangleEdgeVertex(_,v,f,n[m+1]),d=o.computeTriangleEdgeVertex(v,f,_,n[m+2])),a&&(m*=4,M?(a[m+1]=a[m+4]=h,a[m+6]=a[m+9]=c,a[m+11]=a[m+14]=d,a[m+3]=a[m+12]=g,a[m+2]=a[m+7]=a[m+8]=a[m+13]=p,a[m]=f,a[m+5]=_,a[m+10]=v,a[m+15]=T):(a[m]=a[m+5]=a[m+8]=h,a[m+1]=a[m+10]=a[m+12]=c,a[m+2]=a[m+6]=a[m+14]=d,a[m+3]=a[m+7]=a[m+11]=a[m+15]=$jLaD3.default.TRI_INDEX,a[m+4]=f,a[m+9]=_,a[m+13]=v))}return o._tagEdges},$58f48ae8f3043d67$var$computeFaceTexCoords=function(e,t,r){for(var i=e.getFacesTexCoord(),a=t.getFaces(),s=new Uint32Array(a.length),n=e.getFaceEdges(),o=e.getNbVertices(),l=t.getNbVertices()-o,u=t.getVerticesDuplicateStartCount(),h=t.getTexCoords(),c=0,d=e.getNbFaces();c<d;++c){var g=4*c,p=i[g],m=i[g+1],f=i[g+2],_=i[g+3];p>=o&&(p+=l),m>=o&&(m+=l),f>=o&&(f+=l),_!==$jLaD3.default.TRI_INDEX&&_>=o&&(_+=l);var v=n[g],T=r[v]-1;T<0?T=u[(-T-1)*2]:u[2*T]>0&&(r[v]=-T);var M=r[v=n[g+1]]-1;M<0?M=u[(-M-1)*2]:u[2*M]>0&&(r[v]=-M);var y=r[v=n[g+2]]-1;if(y<0?y=u[(-y-1)*2]:u[2*y]>0&&(r[v]=-y),g*=4,_!==$jLaD3.default.TRI_INDEX){var b=r[v=n[4*c+3]]-1;b<0?b=u[(-b-1)*2]:u[2*b]>0&&(r[v]=-b),s[g+1]=s[g+4]=T,s[g+6]=s[g+9]=M,s[g+11]=s[g+14]=y,s[g+3]=s[g+12]=b,s[g+2]=s[g+7]=s[g+8]=s[g+13]=a[g+2],s[g]=p,s[g+5]=m,s[g+10]=f,s[g+15]=_;var A=2*a[g+2];h[A]=(h[2*p]+h[2*m]+h[2*f]+h[2*_])*.25,h[A+1]=(h[2*p+1]+h[2*m+1]+h[2*f+1]+h[2*_+1])*.25}else s[g]=s[g+5]=s[g+8]=T,s[g+1]=s[g+10]=s[g+12]=M,s[g+2]=s[g+6]=s[g+14]=y,s[g+3]=s[g+7]=s[g+11]=s[g+15]=$jLaD3.default.TRI_INDEX,s[g+4]=p,s[g+9]=m,s[g+13]=f}t.setFacesTexCoord(s)},$58f48ae8f3043d67$var$computeTexCoords=function(e,t,r){var i=t.getNbVertices(),a=new Uint32Array(2*i);a.set(e.getVerticesDuplicateStartCount());var s=e.getFaces(),n=e.getFacesTexCoord(),o=3*t.getNbFaces(),l=e.getTexCoords(),u=new Float32Array((0,$jLaD3.default).getMemory(8*o),0,2*o),h=0,c=e.getNbVertices(),d=i-c;for(h=0;h<c;++h){var g=a[2*h];g>0&&(a[2*h]=g+d)}u.set(l),u.set(l.subarray(2*c),(c+d)*2);var p=d+e.getNbTexCoords(),m=e.getFaceEdges(),f=new Uint32Array(r.length),_=new Uint32Array(r.length);for(h=0,c=s.length;h<c;++h){var v=m[h];if(v!==$jLaD3.default.TRI_INDEX){var T=(h+1)%4==0?h-3:h+1,M=n[h],y=n[T];y===$jLaD3.default.TRI_INDEX&&(y=n[h-2]);var b=r[v]-1,A=_[v],S=M>y?M:y,x=M<y?M:y;0!==A?(A!==S||f[v]!==x)&&(u[2*p]=(l[2*M]+l[2*y])*.5,u[2*p+1]=(l[2*M+1]+l[2*y+1])*.5,a[2*b]=p++,a[2*b+1]=1):(u[2*b]=(l[2*M]+l[2*y])*.5,u[2*b+1]=(l[2*M+1]+l[2*y+1])*.5,f[v]=x,_[v]=S)}}var R=new Float32Array(2*p);R.set(u.subarray(0,2*p)),t.setTexCoords(R),t.setVerticesDuplicateStartCount(a),$58f48ae8f3043d67$var$computeFaceTexCoords(e,t,r)};$58f48ae8f3043d67$var$Subdivision.fullSubdivision=function(e,t){var r=e.getNbVertices()+e.getNbEdges()+e.getNbQuads();t.setVertices(new Float32Array(3*r)),t.setColors(new Float32Array(3*r)),t.setMaterials(new Float32Array(3*r)),t.setFaces(new Uint32Array(16*e.getNbFaces())),$58f48ae8f3043d67$var$applyEvenSmooth(e,t.getVertices(),t.getColors(),t.getMaterials());var i=$58f48ae8f3043d67$var$applyOddSmooth(e,t.getVertices(),t.getColors(),t.getMaterials(),t.getFaces());e.hasUV()&&$58f48ae8f3043d67$var$computeTexCoords(e,t,i),t.allocateArrays()},$58f48ae8f3043d67$var$Subdivision.partialSubdivision=function(e,t,r,i){$58f48ae8f3043d67$var$applyEvenSmooth(e,t,r,i),$58f48ae8f3043d67$var$applyOddSmooth(e,t,r,i)};var $58f48ae8f3043d67$export$2e2bcd8739ae039=$58f48ae8f3043d67$var$Subdivision,$jLaD3=parcelRequire("jLaD3"),$491e67b70bcf5ebd$var$Import={};$491e67b70bcf5ebd$var$Import.importOBJ=function(e,t){for(var r=[],i=[],a=[],s=[],n=[],o=[],l=[],u=[],h=[],c=0,d=0,g=0,p=0,m=e.split("\n"),f=[],_=1/255,v=m.length,T=0;T<v;++T){var M=m[T].trim();if(0!==M.length){var y=M[0];if("v"===y)" "===(x=M[1])?(f=M.split(/\s+/),i.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f[4]&&a.push(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])),++g):"t"===x&&(f=M.split(/\s+/),l.push(parseFloat(f[1]),parseFloat(f[2])),++p);else if("f"===y){var b=(f=M.split(/\s+/)).length-1;if(b<3)continue;for(var A=Math.ceil(b/2)-1,S=0;S<A;++S){var x,R,E=S+1,C=S+2,w=b-E,F=b-S;w===C&&(w=F,F=$jLaD3.default.TRI_INDEX);var I=f[E].split("/"),D=f[C].split("/"),V=f[w].split("/"),N=F!==$jLaD3.default.TRI_INDEX;N&&(R=f[F].split("/"));var k=parseInt(I[0],10),P=parseInt(D[0],10),L=parseInt(V[0],10),U=N?parseInt(R[0],10):void 0;if((!N||U!==k&&U!==P&&U!==L)&&k!==P&&k!==L&&P!==L){if(k=(k<0?k+g:k-1)-c,P=(P<0?P+g:P-1)-c,L=(L<0?L+g:L-1)-c,N&&(U=(U<0?U+g:U-1)-c),u.push(k,P,L,N?U:$jLaD3.default.TRI_INDEX),I[1]){var B=parseInt(I[1],10),O=parseInt(D[1],10),G=parseInt(V[1],10),z=N?parseInt(R[1],10):void 0;B=(B<0?B+p:B-1)-d,O=(O<0?O+p:O-1)-d,G=(G<0?G+p:G-1)-d,N&&(z=(z<0?z+p:z-1)-d),h.push(B,O,G,N?z:$jLaD3.default.TRI_INDEX)}else h.length>0&&h.push(k,P,L,N?U:$jLaD3.default.TRI_INDEX)}}}else if("#"===y){if("M"!==M[1])continue;if(M.startsWith("#MRGB "))for(var X=(f=M.split(/\s+/))[1],W=2,Y=X.length;W<Y;W+=8){var H=parseInt(X.substr(W,6),16);s.push((H>>16)*_,(H>>8&255)*_,(255&H)*_)}else if(M.startsWith("#MAT "))for(var j=(f=M.split(/\s+/))[1],q=0,K=j.length;q<K;q+=6){var Z=parseInt(j.substr(q,6),16);o.push((Z>>16)*_,(Z>>8&255)*_,(255&Z)*_)}}else M.startsWith("o ")&&(r.length>0&&($491e67b70bcf5ebd$var$Import.initMeshOBJ(r[r.length-1],i,u,a,n,l,h,s,o),c=g,d=p),r.push(new $b44e1ac6efd62b42$export$2e2bcd8739ae039(t)))}}return 0===r.length&&(r[0]=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(t)),$491e67b70bcf5ebd$var$Import.initMeshOBJ(r[r.length-1],i,u,a,n,l,h,s,o),r},$491e67b70bcf5ebd$var$Import.initMeshOBJ=function(e,t,r,i,a,s,n,o,l){e.setVertices(new Float32Array(t)),e.setFaces(new Uint32Array(r)),o.length===t.length?e.setColors(new Float32Array(o)):i.length===t.length&&e.setColors(new Float32Array(i)),l.length===t.length?e.setMaterials(new Float32Array(l)):a.length===t.length&&e.setMaterials(new Float32Array(a)),s.length>0&&n.length===r.length&&e.initTexCoordsDataFromOBJData(s,n),t.length=r.length=0,o.length=i.length=0,l.length=a.length=0,s.length=n.length=0};var $491e67b70bcf5ebd$export$2e2bcd8739ae039=$491e67b70bcf5ebd$var$Import,$jLaD3=parcelRequire("jLaD3"),$6b702f87fbf51a08$var$Export={};$6b702f87fbf51a08$var$Export.VERSION=3,$6b702f87fbf51a08$var$Export.exportSGL=function(e,t){var r,i=e.length,a=4*(9+31*i),s=0;for(s=0;s<i;++s)a+=12*(r=e[s]).getNbVertices(),r.getColors()&&(a+=12*r.getNbVertices()),r.getMaterials()&&(a+=12*r.getNbVertices()),a+=16*r.getNbFaces(),r.hasUV()&&(a+=8*r.getNbTexCoords()+16*r.getNbFaces());var n=new ArrayBuffer(a),o=new Float32Array(n),l=new Uint32Array(n),u=0;l[u++]=$6b702f87fbf51a08$var$Export.VERSION,l[u++]=t._showGrid,l[u++]=$bdfea6edb628a28d$export$2e2bcd8739ae039.showSymmetryLine,l[u++]=t._showContour;var h=t.getCamera();for(s=0,l[u++]=h.getProjectionType(),l[u++]=h.getMode(),o[u++]=h.getFov(),l[u++]=h.getUsePivot(),l[u++]=i;s<i;++s){r=e[s],l[u++]=r.getShaderType(),l[u++]=r.getMatcap(),l[u++]=r.getShowWireframe(),l[u++]=r.getFlatShading(),o[u++]=r.getOpacity(),o.set(r.getCenter(),u),u+=3,o.set(r.getMatrix(),u),u+=16,o[u++]=r.getScale();var c=r.getNbVertices();l[u++]=c,o.set(r.getVertices().subarray(0,3*c),u),u+=3*c;var d=r.getColors()?c:0;l[u++]=d,d>0&&o.set(r.getColors().subarray(0,3*c),u),u+=3*d;var g=r.getMaterials()?c:0;l[u++]=g,g>0&&o.set(r.getMaterials().subarray(0,3*c),u),u+=3*g;var p=r.getNbFaces();l[u++]=p,l.set(r.getFaces().subarray(0,4*p),u),u+=4*p;var m=r.hasUV(),f=r.getNbTexCoords();l[u++]=m?f:0,m&&(o.set(r.getTexCoords().subarray(0,2*f),u),u+=2*f),l[u++]=m?p:0,m&&(l.set(r.getFacesTexCoord().subarray(0,4*p),u),u+=4*p)}return new Blob([new DataView(n,0,4*u)])};var $6b702f87fbf51a08$export$2e2bcd8739ae039=$6b702f87fbf51a08$var$Export,$8355994ff35b4c21$var$Import={},$8355994ff35b4c21$var$handleNegativeIndexFace=function(e){for(var t=new Uint32Array(e),r=t.length/4,i=0;i<r;++i){var a=4*i+3;e[a]<0&&(t[a]=$jLaD3.default.TRI_INDEX)}return t};$8355994ff35b4c21$var$Import.importSGL=function(e,t,r){var i=new Float32Array(e),a=new Uint32Array(e),s=new Int32Array(e),n=0,o=a[n++];if(o>$6b702f87fbf51a08$export$2e2bcd8739ae039.VERSION)return[];if(o>=2){r._showGrid=a[n++],$bdfea6edb628a28d$export$2e2bcd8739ae039.showSymmetryLine=a[n++],r._showContour=a[n++];var l=r.getCamera();l.setProjectionType(a[n++]),l.setMode(a[n++]),l.setFov(i[n++]),l.setUsePivot(a[n++])}for(var u=a[n++],h=Array(u),c=0;c<u;++c){var d=h[c]=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(t);if(o>=2){var g=d.getRenderData();g._shaderType=a[n++],g._matcap=a[n++],g._showWireframe=a[n++],g._flatShading=a[n++],g._alpha=i[n++]}d.getCenter().set(i.subarray(n,n+3)),n+=3,d.getMatrix().set(i.subarray(n,n+16)),n+=16,n++;var p=a[n++];d.setVertices(i.subarray(n,n+3*p)),n+=3*p,(p=a[n++])>0&&d.setColors(i.subarray(n,n+3*p)),n+=3*p,(p=a[n++])>0&&d.setMaterials(i.subarray(n,n+3*p)),n+=3*p,p=a[n++],o<=2?d.setFaces($8355994ff35b4c21$var$handleNegativeIndexFace(s.subarray(n,n+4*p))):d.setFaces(a.subarray(n,n+4*p)),n+=4*p;var m=null;(p=a[n++])&&(m=i.subarray(n,n+2*p)),n+=2*p;var f=null;(p=a[n++])&&(f=o<=2?$8355994ff35b4c21$var$handleNegativeIndexFace(s.subarray(n,n+4*p)):a.subarray(n,n+4*p)),n+=4*p,m&&f&&d.initTexCoordsDataFromOBJData(m,f)}return h};var $8355994ff35b4c21$export$2e2bcd8739ae039=$8355994ff35b4c21$var$Import,$jLaD3=parcelRequire("jLaD3"),$74440fc68cbef395$var$Import={},$74440fc68cbef395$var$typeToOctet=function(e){switch(e){case"uchar":case"char":case"int8":case"uint8":return 1;case"ushort":case"short":case"int16":case"uint16":return 2;case"uint":case"int":case"float":case"int32":case"uint32":case"float32":return 4;case"double":case"float64":return 8;default:return 0}},$74440fc68cbef395$var$getParseFunc=function(e,t){var r=t?1/255:1;switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return function(e){return parseInt(e,10)*r};case"float":case"double":case"float32":case"float64":return parseFloat;default:return function(e){return e}}},$74440fc68cbef395$var$getBinaryRead=function(e,t,r){var i=r?1/255:1,a=t.offsetOctet;switch(t.type){case"int8":case"char":return function(t){return e.getInt8(t+a)*i};case"uint8":case"uchar":return function(t){return e.getUint8(t+a)*i};case"int16":case"short":return function(t){return e.getInt16(t+a,!0)*i};case"uint16":case"ushort":return function(t){return e.getUint16(t+a,!0)*i};case"int32":case"int":return function(t){return e.getInt32(t+a,!0)*i};case"uint32":case"uint":return function(t){return e.getUint32(t+a,!0)*i};case"float32":case"float":return function(t){return e.getFloat32(t+a,!0)};case"float64":case"double":return function(t){return e.getFloat64(t+a,!0)}}},$74440fc68cbef395$var$readHeader=function(e){for(var t,r=(0,$jLaD3.default).ab2str(e).split("\n"),i={isBinary:!1,start:0,elements:[],lines:r,buffer:e,vertices:null,faces:null,colors:null,offsetLine:0,offsetOctet:0},a=0;;){var s=r[a++];if(i.offsetOctet+=s.length+1,i.offsetLine=a,(s=s.trim()).startsWith("format binary"))i.isBinary=!0;else if(s.startsWith("element"))t=s.split(/\s+/),i.elements.push({name:t[1],count:parseInt(t[2],10),properties:[]});else if(s.startsWith("property")){var n="list"===(t=s.split(/\s+/))[1];i.elements[i.elements.length-1].properties.push({type:t[n?2:1],type2:n?t[3]:void 0,name:t[n?4:2]})}else if(s.startsWith("end_header"))break}return i},$74440fc68cbef395$var$prepareElements=function(e,t){var r=e.properties,i=e.objProperties={};e.offsetOctet=0;for(var a=0,s=r.length;a<s;++a){var n=r[a],o=i[n.name]={};o.type=n.type,o.type2=n.type2,t.isBinary?(o.offsetOctet=e.offsetOctet,e.offsetOctet+=$74440fc68cbef395$var$typeToOctet(n.type)):o.id=a}},$74440fc68cbef395$var$readAsciiVertex=function(e,t,r,i){var a,s,n,o,l,u,h=e.count,c=t.lines,d=e.objProperties,g=t.offsetLine,p=$74440fc68cbef395$var$getParseFunc(d.x.type,!0),m=$74440fc68cbef395$var$getParseFunc(d.y.type,!0),f=$74440fc68cbef395$var$getParseFunc(d.z.type,!0),_=d.x.id,v=d.y.id,T=d.z.id;d.red&&(a=$74440fc68cbef395$var$getParseFunc(d.red.type,!0)),d.green&&(s=$74440fc68cbef395$var$getParseFunc(d.green.type,!0)),d.blue&&(n=$74440fc68cbef395$var$getParseFunc(d.blue.type,!0)),d.red&&(o=d.red.id),d.green&&(l=d.green.id),d.blue&&(u=d.blue.id);for(var M=0;M<h;++M){var y=3*M,b=c[g+M].trim().split(/\s+/);r[y]=p(b[_]),r[y+1]=m(b[v]),r[y+2]=f(b[T]),a&&(i[y]=a(b[o])),s&&(i[y+1]=s(b[l])),n&&(i[y+2]=n(b[u]))}t.offsetLine+=h},$74440fc68cbef395$var$readBinaryVertex=function(e,t,r,i){var a,s,n,o=e.count,l=e.objProperties,u=e.offsetOctet,h=u*o,c=new DataView(t.buffer,t.offsetOctet,h),d=$74440fc68cbef395$var$getBinaryRead(c,l.x,!0),g=$74440fc68cbef395$var$getBinaryRead(c,l.y,!0),p=$74440fc68cbef395$var$getBinaryRead(c,l.z,!0);l.red&&(a=$74440fc68cbef395$var$getBinaryRead(c,l.red,!0)),l.green&&(s=$74440fc68cbef395$var$getBinaryRead(c,l.green,!0)),l.blue&&(n=$74440fc68cbef395$var$getBinaryRead(c,l.blue,!0));for(var m=0;m<o;++m){var f=3*m,_=m*u;r[f]=d(_),r[f+1]=g(_),r[f+2]=p(_),a&&(i[f]=a(_)),s&&(i[f+1]=s(_)),n&&(i[f+2]=n(_))}t.offsetOctet+=h},$74440fc68cbef395$var$readElementVertex=function(e,t){$74440fc68cbef395$var$prepareElements(e,t);var r,i=t.vertices=new Float32Array(3*e.count),a=e.objProperties;(a.red||a.green||a.blue)&&(r=t.colors=new Float32Array(3*e.count)),t.isBinary?$74440fc68cbef395$var$readBinaryVertex(e,t,i,r):$74440fc68cbef395$var$readAsciiVertex(e,t,i,r)},$74440fc68cbef395$var$readAsciiIndex=function(e,t,r){for(var i=e.count,a=t.lines,s=e.objProperties,n=t.offsetLine,o=s.vertex_index||s.vertex_indices,l=$74440fc68cbef395$var$getParseFunc(o.type),u=$74440fc68cbef395$var$getParseFunc(o.type2),h=o.id,c=0,d=0;d<i;++d){var g=a[n+d].trim().split(/\s+/),p=l(g[0]);(3===p||4===p)&&(r[c]=u(g[h+1]),r[c+1]=u(g[h+2]),r[c+2]=u(g[h+3]),r[c+3]=4===p?u(g[h+4]):$jLaD3.default.TRI_INDEX,c+=4)}t.offsetLine+=i},$74440fc68cbef395$var$readBinaryIndex=function(e,t,r,i){for(var a=e.count,s=e.objProperties,n=s&&(s.vertex_index||s.vertex_indices)||e.properties[0],o=new DataView(t.buffer,t.offsetOctet),l=$74440fc68cbef395$var$getBinaryRead(o,n),u=$74440fc68cbef395$var$getBinaryRead(o,{type:n.type2,offsetOctet:n.offsetOctet+$74440fc68cbef395$var$typeToOctet(n.type)}),h=$74440fc68cbef395$var$typeToOctet(n.type2),c=e.offsetOctet,d=0,g=0,p=0;p<a;++p){var m=l(d);(3===m||4===m)&&(r[g++]=u(d),r[g++]=u(d+h),r[g++]=u(d+2*h),r[g++]=3===m?$jLaD3.default.TRI_INDEX:u(d+3*h)),d+=m*h+c}i||(t.faces=r.subarray(0,g)),t.offsetOctet+=d},$74440fc68cbef395$var$readElementIndex=function(e,t){$74440fc68cbef395$var$prepareElements(e,t);var r=t.faces=new Uint32Array(4*e.count);t.isBinary?$74440fc68cbef395$var$readBinaryIndex(e,t,r):$74440fc68cbef395$var$readAsciiIndex(e,t,r)},$74440fc68cbef395$var$skipElement=function(e,t){var r=e.count;t.isBinary?$74440fc68cbef395$var$readBinaryIndex(e,t,[],!0):t.offsetLine+=r};$74440fc68cbef395$var$Import.importPLY=function(e,t){for(var r=$74440fc68cbef395$var$readHeader(e),i=r.elements,a=0,s=i.length;a<s;++a){var n=i[a];"vertex"===n.name?$74440fc68cbef395$var$readElementVertex(n,r):"face"===n.name?$74440fc68cbef395$var$readElementIndex(n,r):$74440fc68cbef395$var$skipElement(n,r)}var o=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(t);return o.setVertices(r.vertices),o.setFaces(r.faces),o.setColors(r.colors),[o]};var $74440fc68cbef395$export$2e2bcd8739ae039=$74440fc68cbef395$var$Import,$jLaD3=parcelRequire("jLaD3"),$215f29c8348b9d89$var$Import={};$215f29c8348b9d89$var$Import.importSTL=function(e,t){var r,i=new Uint32Array(e,80,1)[0]||0,a=84+50*i===e.byteLength,s=a?$215f29c8348b9d89$var$Import.importBinarySTL(e,i):$215f29c8348b9d89$var$Import.importAsciiSTL((0,$jLaD3.default).ab2str(e));a&&(r=s[1],s=s[0]),i=s.length/9;for(var n=new Map,o=[0],l=new Uint32Array(4*i),u=0;u<i;++u){var h=4*u,c=9*u;l[h]=$215f29c8348b9d89$var$Import.detectNewVertex(n,s,r,c,o),l[h+1]=$215f29c8348b9d89$var$Import.detectNewVertex(n,s,r,c+3,o),l[h+2]=$215f29c8348b9d89$var$Import.detectNewVertex(n,s,r,c+6,o),l[h+3]=$jLaD3.default.TRI_INDEX}var d=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(t);return d.setVertices(s.subarray(0,3*o[0])),r&&d.setColors(r.subarray(0,3*o[0])),d.setFaces(l),[d]},$215f29c8348b9d89$var$Import.detectNewVertex=function(e,t,r,i,a){var s=t[i],n=t[i+1],o=t[i+2],l=s+"+"+n+"+"+o,u=e.get(l);if(void 0===u){u=a[0],e.set(l,u);var h=3*u;t[h]=s,t[h+1]=n,t[h+2]=o,r&&(r[h]=r[i],r[h+1]=r[i+1],r[h+2]=r[i+2]),a[0]++}return u},$215f29c8348b9d89$var$Import.importAsciiSTL=function(e){for(var t=e.split("\n"),r=t.length,i=new Float32Array(Math.ceil(9*r/7)),a=0,s=0;s<r;++s)if(t[s].trim().startsWith("facet")){var n=t[s+2].trim().split(/\s+/);i[a++]=parseFloat(n[1]),i[a++]=parseFloat(n[2]),i[a++]=parseFloat(n[3]),n=t[s+3].trim().split(/\s+/),i[a++]=parseFloat(n[1]),i[a++]=parseFloat(n[2]),i[a++]=parseFloat(n[3]),n=t[s+4].trim().split(/\s+/),i[a++]=parseFloat(n[1]),i[a++]=parseFloat(n[2]),i[a++]=parseFloat(n[3])}return i.subarray(0,a)},$215f29c8348b9d89$var$Import.importBinarySTL=function(e,t){var r=new Uint8Array(e),i=r.subarray(0,80),a=-1!==String.fromCharCode.apply(null,i).indexOf("COLOR="),s=0,n=new Uint8Array(36*t),o=new Uint8Array(2*t),l=96,u=0,h=0;for(s=0;s<t;s++){for(var c=0;c<36;++c)n[u++]=r[l++];o[h++]=r[l++],o[h++]=r[l++],l+=12}var d=new Uint16Array(o.buffer);o=new Float32Array(9*t);var g=1/31;for(s=0;s<t;++s){u=9*s;var p=d[s],m=1,f=1,_=1,v=32768&p;a?v||(m=(31&p)*g,f=(p>>5&31)*g,_=(p>>10&31)*g):v&&(m=(p>>10&31)*g,f=(p>>5&31)*g,_=(31&p)*g),o[u]=o[u+3]=o[u+6]=m,o[u+1]=o[u+4]=o[u+7]=f,o[u+2]=o[u+5]=o[u+8]=_}return[new Float32Array(n.buffer),o]};var $215f29c8348b9d89$export$2e2bcd8739ae039=$215f29c8348b9d89$var$Import,$3b9a383962bdb59d$var$Import={importOBJ:$491e67b70bcf5ebd$export$2e2bcd8739ae039.importOBJ,importSGL:$8355994ff35b4c21$export$2e2bcd8739ae039.importSGL,importPLY:$74440fc68cbef395$export$2e2bcd8739ae039.importPLY,importSTL:$215f29c8348b9d89$export$2e2bcd8739ae039.importSTL},$3b9a383962bdb59d$export$2e2bcd8739ae039=$3b9a383962bdb59d$var$Import;class $242ce8905f9b7b36$var$BaseWidget{constructor(){}_getInitialValue(e,t){return"string"!=typeof t?e:e[t]}_getCheckCallback(e,t){return"string"!=typeof t?t:function(r){e[t]=r}}_setDomContainer(e){this.domContainer=e}setCallback(e){this.callback=e}setVisibility(e){this.domContainer&&(this.domContainer.hidden=!e)}}var $242ce8905f9b7b36$export$2e2bcd8739ae039=$242ce8905f9b7b36$var$BaseWidget;class $e6f615512aecbe9a$var$Button extends $242ce8905f9b7b36$export$2e2bcd8739ae039{constructor(e,t,r){super();var i=r?t[r].bind(t):t;this.domButton=document.createElement("button"),this.domButton.className="gui-button",this.domButton.innerHTML=e||"",this.domButton.addEventListener("click",this._onClick.bind(this)),this.setCallback(i)}setEnable(e){this.domButton.disabled=void 0!==e&&!e}_onClick(){this.callback&&this.callback()}}var $e6f615512aecbe9a$export$2e2bcd8739ae039=$e6f615512aecbe9a$var$Button;class $009926e8630c6961$var$Checkbox extends $242ce8905f9b7b36$export$2e2bcd8739ae039{constructor(e,t){super();var r=this._getInitialValue(e,t),i=this._getCheckCallback(e,t);this.domCheckbox=document.createElement("input"),this.domCheckbox.className="gui-input-checkbox",this.domCheckbox.type="checkbox",this.domLabelCheckbox=document.createElement("label"),this.setValue(void 0===r||r),this.setCallback(i)}_onMouseDown(){this.setValue(!this.domCheckbox.checked)}setValue(e,t){this.domCheckbox.checked=e,!t&&this.callback&&this.callback(e)}getValue(){return this.domCheckbox.checked}}var $009926e8630c6961$export$2e2bcd8739ae039=$009926e8630c6961$var$Checkbox,$7850ca8a1ed5a856$var$GuiUtils={};$7850ca8a1ed5a856$var$GuiUtils.rgbToHsv=function(e){var t=e[0],r=e[1],i=e[2],a=Math.max(t,r,i),s=Math.min(t,r,i);if(s===a)return[0,0,s];var n=t===s?r-i:i===s?t-r:i-t;return[((t===s?3:i===s?1:5)-n/(a-s))/6,(a-s)/a,a]},$7850ca8a1ed5a856$var$GuiUtils.hsvToRgb=function(e){var t=6*e[0],r=e[1],i=e[2],a=Math.floor(t),s=t-a,n=i*(1-r),o=i*(1-s*r),l=i*(1-(1-s)*r),u=a%6;return 0===u?[i,l,n]:1===u?[o,i,n]:2===u?[n,i,l]:3===u?[n,o,i]:4===u?[l,n,i]:[i,n,o]},$7850ca8a1ed5a856$var$GuiUtils.getValidColor=function(e){for(var t=0,r=e.length;t<r;++t)e[t]=Math.max(0,Math.min(1,e[t]));return e},$7850ca8a1ed5a856$var$GuiUtils.getStrColor=function(e){return 3===e.length?$7850ca8a1ed5a856$var$GuiUtils.rgbToHex(e):"rgba("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+","+e[3]+")"},$7850ca8a1ed5a856$var$GuiUtils.getColorMult=function(e,t){var r=[e[0]*t,e[1]*t,e[2]*t];return 4===e.length&&r.push(e[3]),$7850ca8a1ed5a856$var$GuiUtils.getValidColor(r)},$7850ca8a1ed5a856$var$GuiUtils.getColorAdd=function(e,t){var r=[e[0]+t,e[1]+t,e[2]+t];return 4===e.length&&r.push(e[3]),$7850ca8a1ed5a856$var$GuiUtils.getValidColor(r)},$7850ca8a1ed5a856$var$GuiUtils.rgbToHex=function(e){for(var t="#",r=0;r<3;++r){var i=Math.round(255*e[r]).toString(16);t+=1===i.length?"0"+i:i}return t},$7850ca8a1ed5a856$var$GuiUtils.hexToRgb=function(e){var t=0;"#"===e[0]&&(e=e.slice(1));var r=e;if(e.length>6)r=e.slice(0,6);else if(e.length<6)for(t=0,r="";t<3;++t)r+=e[t]?e[t]+e[t]:"00";var i=[0,0,0];for(t=0;t<3;++t){var a=parseInt(r[2*t]+r[2*t+1],16);i[t]=(a!=a?0:a)/255}return i};var $7850ca8a1ed5a856$export$2e2bcd8739ae039=$7850ca8a1ed5a856$var$GuiUtils,$138237b69422fc25$var$vendors=["-moz-","-o-","-webkit-","-ms-",""],$138237b69422fc25$var$urlAlpha='url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAChJREFUeNpiPHPmDAMMGBsbw9lMDDgA6RKM%2F%2F%2F%2Fh3POnj1LCzsAAgwAQtYIcFfEyzkAAAAASUVORK5CYII%3D")';class $138237b69422fc25$var$Color extends $242ce8905f9b7b36$export$2e2bcd8739ae039{constructor(e,t){super();var r=this._getInitialValue(e,t),i=this._getCheckCallback(e,t);r?this.color=$7850ca8a1ed5a856$export$2e2bcd8739ae039.getValidColor(r.slice()):this.color=[1,0,0],this.domColor=document.createElement("div"),this.domColor.className="gui-widget-color",this.domInputColor=document.createElement("input"),this.domPopup=document.createElement("div"),this.domHue=document.createElement("div"),this.domHue.className="gui-color-hue",this.domHueKnob=document.createElement("div"),this.domHueKnob.className="gui-knob-hue",this.domSaturation=document.createElement("div"),this.domSaturation.className="gui-color-saturation";var a=document.createElement("div");this.domSaturation.appendChild(a),this.domSaturationKnob=document.createElement("div"),this.domSaturationKnob.className="gui-knob-saturation",this.domHue.appendChild(this.domHueKnob),this.domPopup.appendChild(this.domSaturationKnob),this.domPopup.appendChild(this.domSaturation),this.domPopup.appendChild(this.domHue),this.domColor.appendChild(this.domInputColor),this.domColor.appendChild(this.domPopup),this._hueGradient(this.domHue),this._linearGradient(a,"top","rgba(0,0,0,0)","#000"),this.domColor.addEventListener("keydown",this._onInputDown.bind(this)),this.domSaturation.addEventListener("mousedown",this._onSaturationDown.bind(this)),this.domHue.addEventListener("mousedown",this._onHueDown.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),window.addEventListener("mouseout",this._onMouseUp.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),this.hasAlpha=4===this.color.length,this.alpha=1,this.hasAlpha&&(this.domPopup.style.width="142px",this.domAlpha=document.createElement("div"),this.domAlpha.className="gui-color-alpha",this.domAlphaKnob=document.createElement("div"),this.domAlphaKnob.className="gui-knob-alpha",this._alphaGradient(this.domAlpha,"top","rgba(0,0,0,1.0)","rgba(0,0,0,0.0)"),this.domAlpha.addEventListener("mousedown",this._onAlphaDown.bind(this)),this.domAlpha.appendChild(this.domAlphaKnob),this.domPopup.appendChild(this.domAlpha)),this.editHue=this.editSaturation=this.editAlpha=!1,this.widgetHeight=this.widgetWidth=100,this.setValue(this.color),this.setCallback(i)}_onInputDown(e){e.stopPropagation(),13===e.keyCode&&this.setValue($7850ca8a1ed5a856$export$2e2bcd8739ae039.hexToRgb(e.target.value))}_onUpdateSaturation(e){var t=this.domSaturation.getBoundingClientRect(),r=$7850ca8a1ed5a856$export$2e2bcd8739ae039.rgbToHsv(this.getValue());r[1]=Math.min(1,Math.max(0,(e.clientX-t.left)/t.width)),r[2]=Math.min(1,Math.max(0,1-(e.clientY-t.top)/t.width)),this.setValue($7850ca8a1ed5a856$export$2e2bcd8739ae039.hsvToRgb(r),!1,!0),this._updateGui()}_onUpdateHue(e){var t=this.domHue.getBoundingClientRect(),r=$7850ca8a1ed5a856$export$2e2bcd8739ae039.rgbToHsv(this.getValue());r[0]=Math.min(1,Math.max(0,1-(e.clientY-t.top)/t.height)),this.setValue($7850ca8a1ed5a856$export$2e2bcd8739ae039.hsvToRgb(r),!1,!0),this._updateGui()}_onUpdateAlpha(e){var t=this.domAlpha.getBoundingClientRect(),r=this.getValue();r[3]=this.alpha=Math.min(1,Math.max(0,1-(e.clientY-t.top)/t.height)),this.setValue(r,!1,!0),this._updateGui()}_updateGui(){var e=this.getValue(),t=$7850ca8a1ed5a856$export$2e2bcd8739ae039.rgbToHsv(e);this.domSaturationKnob.style.marginLeft=this.widgetWidth*t[1]-7+"px",this.domSaturationKnob.style.marginTop=this.widgetHeight*(1-t[2])-7+"px",t[1]=t[2]=1,this._linearGradient(this.domSaturation,"left","#fff",$7850ca8a1ed5a856$export$2e2bcd8739ae039.getStrColor($7850ca8a1ed5a856$export$2e2bcd8739ae039.hsvToRgb(t))),this.domHueKnob.style.marginTop=(1-t[0])*this.widgetHeight+"px",this.hasAlpha&&void 0!==e[3]&&(this.domAlphaKnob.style.marginTop=(1-this.alpha)*this.widgetHeight+"px")}_onMouseMove(e){if(this.editSaturation||this.editHue||this.editAlpha){if(this.editSaturation)return this._onUpdateSaturation(e);if(this.editHue)return this._onUpdateHue(e);if(this.editAlpha)return this._onUpdateAlpha(e)}}_onSaturationDown(e){this.editSaturation=!0,this._onMouseMove(e)}_onHueDown(e){this.editHue=!0,this._onMouseMove(e)}_onAlphaDown(e){this.editAlpha=!0,this._onMouseMove(e)}_onMouseUp(){this.editHue=this.editSaturation=this.editAlpha=!1}_hueGradient(e){e.style.background="";for(var t=0,r=$138237b69422fc25$var$vendors.length;t<r;++t)e.style.cssText+="background: "+$138237b69422fc25$var$vendors[t]+"linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"}_alphaGradient(e,t,r,i){e.style.background="";for(var a=0,s=$138237b69422fc25$var$vendors.length;a<s;++a)e.style.cssText+="background: "+$138237b69422fc25$var$vendors[a]+"linear-gradient("+t+", "+r+","+i+"),"+$138237b69422fc25$var$urlAlpha+";"}_linearGradient(e,t,r,i){e.style.background="";for(var a=0,s=$138237b69422fc25$var$vendors.length;a<s;++a)e.style.cssText+="background: "+$138237b69422fc25$var$vendors[a]+"linear-gradient("+t+", "+r+" 0%, "+i+" 100%);"}setValue(e,t,r){for(var i=this.color,a=0,s=e.length;a<s;++a)i[a]=e[a];var n=$7850ca8a1ed5a856$export$2e2bcd8739ae039.rgbToHex(e);if(this.domInputColor.value=n,this.hasAlpha){e.length>=4?this.alpha=e[3]:e.push(this.alpha);var o="rgba("+parseInt(255*e[0],10)+","+parseInt(255*e[1],10)+","+parseInt(255*e[2],10)+","+this.alpha+")";this._alphaGradient(this.domInputColor,"0deg",o,o)}else this.domInputColor.style.background=n;var l=$7850ca8a1ed5a856$export$2e2bcd8739ae039.rgbToHsv(e);this.domSaturationKnob.style.borderColor=l[2]<.5||l[1]>.5?"#fff":"#000",this.domInputColor.style.color=this.alpha>.2&&(l[2]<.5||l[1]>.5)?"#fff":"#000",r||this._updateGui(),!t&&this.callback&&this.callback(e)}getValue(){return this.color}}var $138237b69422fc25$export$2e2bcd8739ae039=$138237b69422fc25$var$Color;class $dbc89e2f3a971626$var$Combobox extends $242ce8905f9b7b36$export$2e2bcd8739ae039{constructor(e,t,r){super();var i=this._getInitialValue(e,t),a=this._getCheckCallback(e,t);r=r||{},i=void 0!==i?i:r[0],this.isArray=void 0!==r.length,this.domSelect=document.createElement("select"),this.domSelect.className="gui-select",this.addOptions(r),this.domSelect.addEventListener("change",this._onChange.bind(this)),this.setValue(i),this.setCallback(a)}_parseValue(e){return this.isArray?parseInt(e,10):e}_onChange(e){this.setValue(e.target.value)}addOptions(e){for(var t=Object.keys(e),r=0;r<t.length;++r){var i=document.createElement("option");i.innerHTML=e[t[r]],i.value=t[r],this.domSelect.appendChild(i)}}setValue(e,t){this.domSelect.value=e,!t&&this.callback&&this.callback(this._parseValue(e))}getValue(){return this._parseValue(this.domSelect.value)}}var $dbc89e2f3a971626$export$2e2bcd8739ae039=$dbc89e2f3a971626$var$Combobox;class $04f20f5349c2a4f6$var$Slider extends $242ce8905f9b7b36$export$2e2bcd8739ae039{constructor(e,t,r,i,a){super();var s=this._getInitialValue(e,t),n=this._getCheckCallback(e,t);s=void 0!==s?s:100,r=void 0!==r?r:0,i=void 0!==i?i:200,a=void 0!==a?a:1,this.domSlider=document.createElement("div"),this.domSlider.className="gui-slider",this.domSliderFill=document.createElement("div"),this.domSlider.appendChild(this.domSliderFill),this.domInputText=document.createElement("input"),this.domInputText.className="gui-input-number",this.domInputText.type="number",this.min=this.domInputText.min=r,this.max=this.domInputText.max=i,this.step=this.domInputText.step=a,this.domInputText.addEventListener("keydown",this._onKeyDown.bind(this)),this.domInputText.addEventListener("change",this._onInputText.bind(this)),this.domInputText.addEventListener("blur",this._onInputText.bind(this)),this.domSlider.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this),!0),window.addEventListener("mousemove",this._onMouseMove.bind(this)),this.lastValue=s,this.isDown=!1,this.setValue(s),this.setCallback(n)}_onInputText(e){var t=parseFloat(e.target.value);t==t&&t!==this.lastValue&&this.setValue(t)}_onKeyDown(e){e.stopPropagation(),13===e.which&&this.domInputText.blur()}_onMouseMove(e){if(e.preventDefault(),this.isDown){var t=this.domSlider.getBoundingClientRect(),r=this.min+(this.max-this.min)*((e.clientX-t.left)/t.width);this.setValue(r)}}_onMouseDown(e){this.isDown=!0,this._onMouseMove(e)}_onMouseUp(){this.isDown=!1}_setDomContainer(e){this.domContainer=e}getValue(){return parseFloat(this.domInputText.value)}setValue(e,t){this.lastValue=e,e=Math.round((e=Math.max(Math.min(e,this.max),this.min))/this.step)*this.step,this.domInputText.value=e;var r=this.min;this.max!==this.min&&(r=(e-this.min)/(this.max-this.min)),this.domSliderFill.style.width=100*r+"%",!t&&this.callback&&this.callback(e)}setMax(e){return this.domInputText.max=this.max=e,this}setMin(e){return this.min=e,this}}var $04f20f5349c2a4f6$export$2e2bcd8739ae039=$04f20f5349c2a4f6$var$Slider;class $85e1f48a6e29c46c$var$Title extends $242ce8905f9b7b36$export$2e2bcd8739ae039{constructor(e){super(),this.domText=document.createElement("div"),this.domText.innerHTML=e||"",this.domText.className="group-title"}setText(e){this.domText.innerHTML=e}setVisibility(e){this.domText.hidden=!e}}var $85e1f48a6e29c46c$export$2e2bcd8739ae039=$85e1f48a6e29c46c$var$Title;class $075525dfe9354ff1$var$BaseContainer{constructor(){}_addLine(e){var t=document.createElement("li");return t.innerHTML=e||"",this.domUl.appendChild(t),t}_createLabel(e){var t=document.createElement("label");return t.className="gui-label-side",t.innerHTML=e||"",t}_setDomContainer(e){this.domContainer=e}addTitle(e){var t=new $85e1f48a6e29c46c$export$2e2bcd8739ae039(e);return this.domUl.appendChild(t.domText),t}addCheckbox(e,t,r){var i=new $009926e8630c6961$export$2e2bcd8739ae039(t,r),a=this._addLine();a.className+=" gui-pointerOnHover gui-glowOnHover";var s=this._createLabel(e);return s.style.overflow="visible",s.className+=" gui-pointerOnHover",a.appendChild(s),a.appendChild(i.domCheckbox),a.appendChild(i.domLabelCheckbox),a.addEventListener("mousedown",i._onMouseDown.bind(i)),i._setDomContainer(a),i}addCombobox(e,t,r,i){var a=new $dbc89e2f3a971626$export$2e2bcd8739ae039(t,r,i),s=this._addLine();return e?s.appendChild(this._createLabel(e)):a.domSelect.style.width="100%",s.appendChild(a.domSelect),a._setDomContainer(s),a}addSlider(e,t,r,i,a,s){var n=new $04f20f5349c2a4f6$export$2e2bcd8739ae039(t,r,i,a,s),o=this._addLine();return e&&o.appendChild(this._createLabel(e)),o.appendChild(n.domInputText),o.appendChild(n.domSlider),n._setDomContainer(o),n}addColor(e,t,r){var i=new $138237b69422fc25$export$2e2bcd8739ae039(t,r),a=this._addLine();return e?a.appendChild(this._createLabel(e)):i.domColor.style.width="100%",a.appendChild(i.domColor),i._setDomContainer(a),i}addButton(e,t,r){var i=new $e6f615512aecbe9a$export$2e2bcd8739ae039(e,t,r),a=this._addLine();return a.appendChild(i.domButton),i._setDomContainer(a),i}addDualButton(e,t,r,i,a,s){var n=new $e6f615512aecbe9a$export$2e2bcd8739ae039(e,r,a),o=new $e6f615512aecbe9a$export$2e2bcd8739ae039(t,i,s),l=this._addLine();l.appendChild(o.domButton),l.appendChild(n.domButton);var u=n.domButton.style,h=o.domButton.style;return u.width=h.width="49%",u.marginRight=h.marginLeft="1%",n._setDomContainer(l),o._setDomContainer(l),[n,o]}setVisibility(e){this.domContainer&&(this.domContainer.hidden=!e)}}var $075525dfe9354ff1$export$2e2bcd8739ae039=$075525dfe9354ff1$var$BaseContainer;class $b51da2d535f921fa$var$Folder extends $075525dfe9354ff1$export$2e2bcd8739ae039{constructor(e){super(),this.domUl=document.createElement("ul"),this.domUl.setAttribute("opened",!0);var t=document.createElement("label");t.innerHTML=e||"",t.addEventListener("mousedown",this._onMouseDown.bind(this)),this.domUl.appendChild(t),this.isOpen=!0}_onMouseDown(){this.isOpen=!this.isOpen,this.domUl.setAttribute("opened",this.isOpen)}open(){this.isOpen=!0,this.domUl.setAttribute("opened",!0)}close(){this.isOpen=!1,this.domUl.setAttribute("opened",!1)}setVisibility(e){e?this.isOpen&&this.domUl.setAttribute("opened",!0):this.domUl.setAttribute("opened",!1),this.domUl.style.height=e?"auto":"0px"}}var $b51da2d535f921fa$export$2e2bcd8739ae039=$b51da2d535f921fa$var$Folder;class $6bda441b0247b29f$var$Sidebar{constructor(e){this.domSidebar=document.createElement("div"),this.domSidebar.className="gui-sidebar",this.domResize=document.createElement("div"),this.domResize.className="gui-resize",this.isDragging=!1,this.mouseX=0,this.domResize.addEventListener("mousedown",this._onMouseDown.bind(this)),window.addEventListener("mousemove",this._onMouseMove.bind(this)),window.addEventListener("mouseup",this._onMouseUp.bind(this)),this.callbackResize=e,this.isOnTheRight=!1}_setTop(e){this.domSidebar.style.top=this.domResize.style.top=e+"px"}_onTheRight(){this.isOnTheRight=!0,this.domSidebar.style.right=0,this.domSidebar.style.borderRight=0,this.domSidebar.style.borderLeft="double",this.domSidebar.style.borderColor="rgba(255,255,255,0.3)",this.domResize.style.left="auto",this.domResize.style.right=this.domSidebar.offsetWidth+"px",this.domResize.style.marginRight="-3px"}_onMouseDown(e){this.isDragging=!0,this.mouseX=e.clientX}_updateViewportPosition(e){var t=this.domSidebar.hidden?0:this.domSidebar.offsetWidth;this.isOnTheRight||(e.style.left=this.domSidebar.offsetLeft+t+"px"),e.style.width=e.clientWidth-t+"px"}_onMouseMove(e){if(!1!==this.isDragging){var t=e.clientX,r=t-this.mouseX;this.isOnTheRight&&(r=-r);var i=Math.max(50,this.domSidebar.offsetWidth+r),a=i+"px";this.domSidebar.style.width=a,this.isOnTheRight?this.domResize.style.right=this.domSidebar.offsetWidth+"px":this.domResize.style.left=a,this.mouseX=t,this.callbackResize()}}_onMouseUp(){this.isDragging=!1}addMenu(e){var t=new $b51da2d535f921fa$export$2e2bcd8739ae039(e);return this.domSidebar.appendChild(t.domUl),t}setVisibility(e){this.domSidebar.hidden=!e,this.domResize.hidden=!e,this.callbackResize()}}var $6bda441b0247b29f$export$2e2bcd8739ae039=$6bda441b0247b29f$var$Sidebar;class $59bfe26299f93959$var$MenuButton extends $242ce8905f9b7b36$export$2e2bcd8739ae039{constructor(e,t,r){super();var i=e;i&&"function"!=typeof i?i=e[t].bind(e):r=t,this.domSpan=document.createElement("span"),this.domSpan.className="shortcut",this.domSpan.innerHTML=r||"",this.setCallback(i)}_setDomContainer(e){this.domContainer=e,e.addEventListener("click",this._onClick.bind(this))}_onClick(){this.callback&&this.callback()}}var $59bfe26299f93959$export$2e2bcd8739ae039=$59bfe26299f93959$var$MenuButton;class $80cd5030bea25e94$var$Menu extends $075525dfe9354ff1$export$2e2bcd8739ae039{constructor(){super(),this.domUl=document.createElement("ul")}addButton(e,t,r,i){var a=new $59bfe26299f93959$export$2e2bcd8739ae039(t,r,i),s=this._addLine(e);return s.appendChild(a.domSpan),a._setDomContainer(s),a}addSlider(e,t,r,i,a,s){var n=super.addSlider(e,t,r,i,a,s);return n.domInputText.style.width="18%",n.domSlider.style.width=e?"44%":"80%",n}}var $80cd5030bea25e94$export$2e2bcd8739ae039=$80cd5030bea25e94$var$Menu,$0979ce27dbe8d4a1$var$EditStyle={};$0979ce27dbe8d4a1$var$EditStyle.refRules={};var $0979ce27dbe8d4a1$var$findSheet=function(){if($0979ce27dbe8d4a1$var$yaguiSheet)return $0979ce27dbe8d4a1$var$yaguiSheet;for(var e=document.styleSheets,t=0,r=e.length;t<r;++t){var i=e[t].href;if(i&&-1!==i.indexOf("yagui.css"))return $0979ce27dbe8d4a1$var$yaguiSheet=e[t]}},$0979ce27dbe8d4a1$var$editStyle=function(e,t,r){var i=$0979ce27dbe8d4a1$var$findSheet();if(i){var a=i.cssRules||i.rules,s=$0979ce27dbe8d4a1$var$EditStyle.refRules[e];if(!s){var n=0,o=a.length;for(n=0;n<o&&a[n].selectorText!==e;++n);if(n===o)return!1;s=$0979ce27dbe8d4a1$var$EditStyle.refRules[e]=a[n]}s&&(s.style[t]=r)}};$0979ce27dbe8d4a1$var$EditStyle.changeWidgetsColor=function(e){var t=$7850ca8a1ed5a856$export$2e2bcd8739ae039.getStrColor(e);$0979ce27dbe8d4a1$var$editStyle(".gui-button","background",t),$0979ce27dbe8d4a1$var$editStyle(".gui-select","background",t),$0979ce27dbe8d4a1$var$editStyle(".gui-slider > div","background",t),$0979ce27dbe8d4a1$var$EditStyle._curWidgetColor=e},$0979ce27dbe8d4a1$var$EditStyle.changeDisplayBoorder=function(e){var t=e?"1px solid #000":"0";$0979ce27dbe8d4a1$var$editStyle(".gui-button","border",t),$0979ce27dbe8d4a1$var$editStyle(".gui-select","border",t),$0979ce27dbe8d4a1$var$editStyle(".gui-slider","border",t),$0979ce27dbe8d4a1$var$editStyle(".gui-input-number","border",t),$0979ce27dbe8d4a1$var$editStyle(".gui-sidebar > ul > label","borderTop",t),$0979ce27dbe8d4a1$var$editStyle(".gui-sidebar > ul > label","borderBottom",t),$0979ce27dbe8d4a1$var$editStyle(".gui-sidebar","borderLeft",t),$0979ce27dbe8d4a1$var$editStyle(".gui-sidebar","borderRight",t),$0979ce27dbe8d4a1$var$editStyle(".gui-topbar","borderBottom",t),$0979ce27dbe8d4a1$var$EditStyle._curShowBorder=e},$0979ce27dbe8d4a1$var$EditStyle.changeBackgroundColor=function(e){$0979ce27dbe8d4a1$var$editStyle(".gui-sidebar","background",$7850ca8a1ed5a856$export$2e2bcd8739ae039.getStrColor(e));var t=$7850ca8a1ed5a856$export$2e2bcd8739ae039.getStrColor($7850ca8a1ed5a856$export$2e2bcd8739ae039.getColorMult(e,.5));$0979ce27dbe8d4a1$var$editStyle(".gui-topbar","background",t),$0979ce27dbe8d4a1$var$editStyle(".gui-topbar ul > li > ul","background",t),$0979ce27dbe8d4a1$var$EditStyle._curBackgroundColor=e},$0979ce27dbe8d4a1$var$EditStyle.changeTextColor=function(e){var t=$7850ca8a1ed5a856$export$2e2bcd8739ae039.getStrColor(e);$0979ce27dbe8d4a1$var$editStyle("*","color",t),$0979ce27dbe8d4a1$var$editStyle(".gui-sidebar > ul > label","color",t),$0979ce27dbe8d4a1$var$EditStyle._curTextColor=e},$0979ce27dbe8d4a1$var$EditStyle.changeOverallColor=function(e){$0979ce27dbe8d4a1$var$EditStyle.changeWidgetsColor(e);var t=$7850ca8a1ed5a856$export$2e2bcd8739ae039.getColorMult(e,.5);t.length=3,$0979ce27dbe8d4a1$var$EditStyle.changeBackgroundColor(t);for(var r=$7850ca8a1ed5a856$export$2e2bcd8739ae039.getColorAdd(e,.5),i=0;i<3;++i)r[i]=Math.min(.8,r[i]);$0979ce27dbe8d4a1$var$EditStyle.changeTextColor(r),$0979ce27dbe8d4a1$var$EditStyle._curWidgetColor=e,$0979ce27dbe8d4a1$var$EditStyle._curBackgroundColor=t,$0979ce27dbe8d4a1$var$EditStyle._curTextColor=r},$0979ce27dbe8d4a1$var$EditStyle._curTextColor=[.73,.73,.73,1],$0979ce27dbe8d4a1$var$EditStyle._curWidgetColor=[.32,.37,.39,1],$0979ce27dbe8d4a1$var$EditStyle._curBackgroundColor=[.24,.24,.24],$0979ce27dbe8d4a1$var$EditStyle._curShowBorder=!1,$0979ce27dbe8d4a1$var$EditStyle.changeOverallColor([.3,.34,.4,1]);var $0979ce27dbe8d4a1$export$2e2bcd8739ae039=$0979ce27dbe8d4a1$var$EditStyle;class $ab5613c855b2e0fa$var$Topbar{constructor(e){this.domTopbar=document.createElement("div"),this.domTopbar.className="gui-topbar",this.domUl=document.createElement("ul"),this.domTopbar.appendChild(this.domUl),this.callbackResize=e,this.uiExtra={}}_updateViewportPosition(e){var t=this.domTopbar.hidden?0:this.domTopbar.offsetHeight;e.style.top=t+"px",e.style.height=e.clientHeight-t+"px"}_onChangeColor(e,t){e(t),this.uiExtra.overallColor.setValue($0979ce27dbe8d4a1$export$2e2bcd8739ae039._curWidgetColor,!0),this.uiExtra.widgetColor.setValue($0979ce27dbe8d4a1$export$2e2bcd8739ae039._curWidgetColor,!0),this.uiExtra.backColor.setValue($0979ce27dbe8d4a1$export$2e2bcd8739ae039._curBackgroundColor,!0),this.uiExtra.textColor.setValue($0979ce27dbe8d4a1$export$2e2bcd8739ae039._curTextColor,!0)}addMenu(e){var t=new $80cd5030bea25e94$export$2e2bcd8739ae039,r=document.createElement("li");return r.setAttribute("onclick","void(0)"),r.innerHTML=e||"",this.domUl.appendChild(r),r.appendChild(t.domUl),t._setDomContainer(r),t}addExtra(){var e=this._onChangeColor,t=this.addMenu("Extra UI"),r=this.uiExtra;return t.addTitle("Overall"),r.overallColor=t.addColor("",$0979ce27dbe8d4a1$export$2e2bcd8739ae039._curWidgetColor,e.bind(this,$0979ce27dbe8d4a1$export$2e2bcd8739ae039.changeOverallColor)),t.addTitle("Advanced"),r.widgetColor=t.addColor("Widget",$0979ce27dbe8d4a1$export$2e2bcd8739ae039._curWidgetColor,e.bind(this,$0979ce27dbe8d4a1$export$2e2bcd8739ae039.changeWidgetsColor)),r.backColor=t.addColor("Back",$0979ce27dbe8d4a1$export$2e2bcd8739ae039._curBackgroundColor,e.bind(this,$0979ce27dbe8d4a1$export$2e2bcd8739ae039.changeBackgroundColor)),r.textColor=t.addColor("Text",$0979ce27dbe8d4a1$export$2e2bcd8739ae039._curTextColor,e.bind(this,$0979ce27dbe8d4a1$export$2e2bcd8739ae039.changeTextColor)),r.showBorder=t.addCheckbox("Border",$0979ce27dbe8d4a1$export$2e2bcd8739ae039._curShowBorder,$0979ce27dbe8d4a1$export$2e2bcd8739ae039.changeDisplayBoorder),t}setVisibility(e){this.domTopbar.hidden=!e,this.callbackResize()}}var $ab5613c855b2e0fa$export$2e2bcd8739ae039=$ab5613c855b2e0fa$var$Topbar;class $91d6ebf5c7e023c1$var$GuiMain{constructor(e,t){this.domMain=document.createElement("div"),this.viewport=e,this.callbackResize=t,this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px"),this.cbResize_=this._onWindowResize.bind(this),document.body.appendChild(this.domMain),this.leftSidebar=void 0,this.rightSidebar=void 0,this.topbar=void 0,window.addEventListener("resize",this._onWindowResize.bind(this),!1)}_onWindowResize(){this.viewport&&(this.viewport.style.width=document.documentElement.clientWidth+"px",this.viewport.style.height=document.documentElement.clientHeight+"px",this.viewport.style.left="0px",this.viewport.style.top="0px",this.leftSidebar&&this.leftSidebar._updateViewportPosition(this.viewport),this.rightSidebar&&this.rightSidebar._updateViewportPosition(this.viewport),this.topbar&&this.topbar._updateViewportPosition(this.viewport)),this._updateSidebarsPosition(),this.callbackResize&&this.callbackResize()}_updateSidebarsPosition(){if(this.topbar){var e=this.topbar.domTopbar.offsetHeight;this.leftSidebar&&this.leftSidebar._setTop(e),this.rightSidebar&&this.rightSidebar._setTop(e)}}addLeftSidebar(){this.leftSidebar=new $6bda441b0247b29f$export$2e2bcd8739ae039(this.cbResize_);var e=this.leftSidebar.domSidebar;return this.domMain.appendChild(e),this.domMain.appendChild(this.leftSidebar.domResize),this._updateSidebarsPosition(),this.leftSidebar._updateViewportPosition(this.viewport),this.leftSidebar}addRightSidebar(){this.rightSidebar=new $6bda441b0247b29f$export$2e2bcd8739ae039(this.cbResize_);var e=this.rightSidebar.domSidebar;return this.domMain.appendChild(e),this.domMain.appendChild(this.rightSidebar.domResize),this.rightSidebar._onTheRight(),this._updateSidebarsPosition(),this.rightSidebar._updateViewportPosition(this.viewport),this.rightSidebar}addTopbar(){return this.topbar=new $ab5613c855b2e0fa$export$2e2bcd8739ae039(this.cbResize_),this.domMain.appendChild(this.topbar.domTopbar),this._updateSidebarsPosition(),this.topbar._updateViewportPosition(this.viewport),this.topbar}setVisibility(e){this.domMain.hidden=!e,this._onWindowResize()}}var $91d6ebf5c7e023c1$export$2e2bcd8739ae039=$91d6ebf5c7e023c1$var$GuiMain,$l7y1s=parcelRequire("l7y1s"),$l7y1s=parcelRequire("l7y1s");class $f02a84529bb917d1$var$GuiBackground{constructor(e,t){this._main=t._main,this._menu=null,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("backgroundTitle"));this._bg=this._main.getBackground();var r=["Image","Environment","Ambient env"];t.addCombobox("Type",this._bg._type,this.onBackgroundType.bind(this),r),this._ctrlBlur=t.addSlider("Blur",this._bg._blur,this.onEnvBlur.bind(this),0,1,.01),this._ctrlBlur.setVisibility(1===this._bg._type),t.addTitle("Image"),t.addButton((0,$l7y1s.default)("backgroundReset"),this,"resetBackground"),t.addButton((0,$l7y1s.default)("backgroundImport"),this,"importBackground"),t.addCheckbox((0,$l7y1s.default)("backgroundFill"),this._main.getBackground()._fill,this.updateFill.bind(this))}updateFill(e){this._bg._fill=e,this._main.onCanvasResize()}resetBackground(){this._bg.deleteTexture(),this._main.render()}onEnvBlur(e){this._bg._blur=e,this._main.render()}onBackgroundType(e){this._bg.setType(e),this._main.onCanvasResize(),this._main.render(),this._ctrlBlur.setVisibility(1===e)}importBackground(){document.getElementById("backgroundopen").click()}}var $f02a84529bb917d1$export$2e2bcd8739ae039=$f02a84529bb917d1$var$GuiBackground,$l7y1s=parcelRequire("l7y1s"),$idLiu=parcelRequire("idLiu"),$eIUYI=parcelRequire("eIUYI");class $6bf15635e8c1a736$var$GuiCamera{constructor(e,t){this._main=t._main,this._menu=null,this._camera=this._main.getCamera(),this._cameraTimer=-1,this._cbTranslation=this.cbOnTranslation.bind(this),this.init(e)}init(e){var t=this._camera,r=this._menu=e.addMenu((0,$l7y1s.default)("cameraTitle"));r.addTitle((0,$l7y1s.default)("cameraReset")),r.addDualButton((0,$l7y1s.default)("cameraCenter"),(0,$l7y1s.default)("cameraFront"),this.resetCamera.bind(this),this.resetFront.bind(this)),r.addDualButton((0,$l7y1s.default)("cameraLeft"),(0,$l7y1s.default)("cameraTop"),this.resetLeft.bind(this),this.resetTop.bind(this)),this._ctrlProjectionTitle=r.addTitle((0,$l7y1s.default)("cameraProjection"));var i=[];i[$eIUYI.default.Projection.PERSPECTIVE]=(0,$l7y1s.default)("cameraPerspective"),i[$eIUYI.default.Projection.ORTHOGRAPHIC]=(0,$l7y1s.default)("cameraOrthographic"),this._ctrlProjection=r.addCombobox("",t.getProjectionType(),this.onCameraTypeChange.bind(this),i),this._ctrlFov=r.addSlider((0,$l7y1s.default)("cameraFov"),t.getFov(),this.onFovChange.bind(this),10,90,1),this._ctrlFov.setVisibility(t.getProjectionType()===$eIUYI.default.Projection.PERSPECTIVE),r.addTitle((0,$l7y1s.default)("cameraMode"));var a=[];a[$eIUYI.default.CameraMode.ORBIT]=(0,$l7y1s.default)("cameraOrbit"),a[$eIUYI.default.CameraMode.SPHERICAL]=(0,$l7y1s.default)("cameraSpherical"),a[$eIUYI.default.CameraMode.PLANE]=(0,$l7y1s.default)("cameraPlane"),r.addCombobox("",t.getMode(),this.onCameraModeChange.bind(this),a),this._ctrlPivot=r.addCheckbox((0,$l7y1s.default)("cameraPivot"),t.getUsePivot(),this.onPivotChange.bind(this)),r.addSlider("speed",this._main,"_cameraSpeed",.05,1,.001)}onCameraModeChange(e){this._camera.setMode(e),this._main.render()}onCameraTypeChange(e){this._camera.setProjectionType(e),this._ctrlFov.setVisibility(e===$eIUYI.default.Projection.PERSPECTIVE),this._main.render()}onFovChange(e){this._camera.setFov(e),this._main.render()}onKeyDown(e){if(!0!==e.handled&&(e.stopPropagation(),!this._main._focusGui)){e.preventDefault();var t=this._main,r=t.getCamera();switch(e.handled=!0,e.shiftKey&&t._action===$eIUYI.default.Action.CAMERA_ROTATE&&(r.snapClosestRotation(),t.render()),(0,$idLiu.default).getShortKey(e.which)){case $eIUYI.default.KeyAction.STRIFE_LEFT:r._moveX=-1;break;case $eIUYI.default.KeyAction.STRIFE_RIGHT:r._moveX=1;break;case $eIUYI.default.KeyAction.STRIFE_UP:r._moveZ=-1;break;case $eIUYI.default.KeyAction.STRIFE_DOWN:r._moveZ=1;break;default:e.handled=!1}!0===e.handled&&-1===this._cameraTimer&&(this._cameraTimer=window.setInterval(this._cbTranslation,16.6))}}cbOnTranslation(){var e=this._main;e.getCamera().updateTranslation(),e.render()}onKeyUp(e){if(!0!==e.handled&&(e.stopPropagation(),!this._main._focusGui)){e.preventDefault(),e.handled=!0;var t=this._camera;switch((0,$idLiu.default).getShortKey(e.which)){case $eIUYI.default.KeyAction.STRIFE_LEFT:case $eIUYI.default.KeyAction.STRIFE_RIGHT:t._moveX=0;break;case $eIUYI.default.KeyAction.STRIFE_UP:case $eIUYI.default.KeyAction.STRIFE_DOWN:t._moveZ=0;break;case $eIUYI.default.KeyAction.CAMERA_RESET:this.resetCamera();break;case $eIUYI.default.KeyAction.CAMERA_FRONT:this.resetFront();break;case $eIUYI.default.KeyAction.CAMERA_TOP:this.resetTop();break;case $eIUYI.default.KeyAction.CAMERA_LEFT:this.resetLeft();break;default:e.handled=!1}-1!==this._cameraTimer&&0===t._moveX&&0===t._moveZ&&(clearInterval(this._cameraTimer),this._cameraTimer=-1)}}resetCamera(){this._camera.resetView(),this._main.render()}resetFront(){this._camera.toggleViewFront(),this._main.render()}resetLeft(){this._camera.toggleViewLeft(),this._main.render()}resetTop(){this._camera.toggleViewTop(),this._main.render()}onPivotChange(){this._camera.toggleUsePivot(),this._main.render()}}var $6bf15635e8c1a736$export$2e2bcd8739ae039=$6bf15635e8c1a736$var$GuiCamera,$l7y1s=parcelRequire("l7y1s");class $25e58a415bd1b2b2$var$GuiConfig{constructor(e,t){this._ctrlGui=t,this._menu=null,this.init(e)}init(e){this._langs=Object.keys($l7y1s.default.languages),this._menu=e.addMenu("Language"),this._menu.addCombobox("",this._langs.indexOf($l7y1s.default.select),this.onLangChange.bind(this),this._langs)}onLangChange(e){$l7y1s.default.select=this._langs[parseInt(e,10)],this._ctrlGui.initGui()}}var $25e58a415bd1b2b2$export$2e2bcd8739ae039=$25e58a415bd1b2b2$var$GuiConfig,$l7y1s=parcelRequire("l7y1s"),$90f256c567e4c320$exports={};!function(e,t){"function"==typeof define&&define.amd?define([],t):t()}(0,function(){function e(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function t(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){n(i.response,t,r)},i.onerror=function(){console.error("could not download file")},i.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof $parcel$global&&$parcel$global.global===$parcel$global?$parcel$global:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(e,s,n){var o=a.URL||a.webkitURL,l=document.createElement("a");s=s||e.name||"download",l.download=s,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?t(e,s,n):i(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(a,s,n){if(s=s||a.name||"download","string"!=typeof a)navigator.msSaveOrOpenBlob(e(a,n),s);else if(r(a))t(a,s,n);else{var o=document.createElement("a");o.href=a,o.target="_blank",setTimeout(function(){i(o)})}}:function(e,r,i,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,i);var o="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&l||s)&&"undefined"!=typeof FileReader){var h=new FileReader;h.onloadend=function(){var e=h.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},h.readAsDataURL(e)}else{var c=a.URL||a.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});a.saveAs=n.saveAs=n,$90f256c567e4c320$exports=n});var $ba2d5e10d87e1016$exports={};!function(e){var t,r="File format is not recognized.",i="CRC failed.",a="File contains encrypted entry.",s="File is using Zip64 (4gb+ file size).",n="Error while reading zip file.",o="Error while writing zip file.",l="Error while writing file data.",u="Error while reading file data.",h="File already exists.",c=524288,d="text/plain";try{t=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(e){}function g(){this.crc=-1}function p(){}function m(e,t,r){if(t<0||r<0||t+r>e.size)throw RangeError("offset:"+t+", length:"+r+", size:"+e.size);return e.slice?e.slice(t,t+r):e.webkitSlice?e.webkitSlice(t,t+r):e.mozSlice?e.mozSlice(t,t+r):e.msSlice?e.msSlice(t,t+r):void 0}function f(e,t){var r,i;return i=new Uint8Array(r=new ArrayBuffer(e)),t&&i.set(t,0),{buffer:r,array:i,view:new DataView(r)}}function _(){}function v(e){var t,r=this;function i(i,a){(t=new M(new Blob([e],{type:d}))).init(function(){r.size=t.size,i()},a)}function a(e,r,i,a){t.readUint8Array(e,r,i,a)}r.size=0,r.init=i,r.readUint8Array=a}function T(t){var r,i=this;function a(e){for(var a=t.length;"="==t.charAt(a-1);)a--;r=t.indexOf(",")+1,i.size=Math.floor((a-r)*.75),e()}function s(i,a,s){var n,o=f(a),l=4*Math.floor(i/3),u=4*Math.ceil((i+a)/3),h=e.atob(t.substring(l+r,u+r)),c=i-3*Math.floor(l/4);for(n=c;n<c+a;n++)o.array[n-c]=h.charCodeAt(n);s(o.array)}i.size=0,i.init=a,i.readUint8Array=s}function M(e){var t=this;function r(r){t.size=e.size,r()}function i(t,r,i,a){var s=new FileReader;s.onload=function(e){i(new Uint8Array(e.target.result))},s.onerror=a;try{s.readAsArrayBuffer(m(e,t,r))}catch(e){a(e)}}t.size=0,t.init=r,t.readUint8Array=i}function y(){}function b(e){var r,i=this;function a(e){r=new Blob([],{type:d}),e()}function s(e,i){r=new Blob([r,t?e:e.buffer],{type:d}),i()}function n(t,i){var a=new FileReader;a.onload=function(e){t(e.target.result)},a.onerror=i,a.readAsText(r,e)}i.init=a,i.writeUint8Array=s,i.getData=n}function A(t){var r=this,i="",a="";function s(e){i+="data:"+(t||"")+";base64,",e()}function n(t,r){var s,n=a.length,o=a;for(s=0,a="";s<3*Math.floor((n+t.length)/3)-n;s++)o+=String.fromCharCode(t[s]);for(;s<t.length;s++)a+=String.fromCharCode(t[s]);o.length>2?i+=e.btoa(o):a=o,r()}function o(t){t(i+e.btoa(a))}r.init=s,r.writeUint8Array=n,r.getData=o}function S(e){var r,i=this;function a(t){r=new Blob([],{type:e}),t()}function s(i,a){r=new Blob([r,t?i:i.buffer],{type:e}),a()}function n(e){e(r)}i.init=a,i.writeUint8Array=s,i.getData=n}function x(e,t,r,i,a,s,n,o,l,u){var h,d,g,p=0,m=t.sn;function f(){e.removeEventListener("message",_,!1),o(d,g)}function _(t){var r=t.data,a=r.data,o=r.error;if(o){o.toString=function(){return"Error: "+this.message},l(o);return}if(r.sn===m)switch("number"==typeof r.codecTime&&(e.codecTime+=r.codecTime),"number"==typeof r.crcTime&&(e.crcTime+=r.crcTime),r.type){case"append":a?(d+=a.length,i.writeUint8Array(a,function(){v()},u)):v();break;case"flush":g=r.crc,a?(d+=a.length,i.writeUint8Array(a,function(){f()},u)):f();break;case"progress":n&&n(h+r.loaded,s);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",r)}}function v(){(h=p*c)<s?r.readUint8Array(a+h,Math.min(c,s-h),function(r){n&&n(h,s);var i=0===h?t:{sn:m};i.type="append",i.data=r,e.postMessage(i,[r.buffer]),p++},l):e.postMessage({sn:m,type:"flush"})}d=0,e.addEventListener("message",_,!1),v()}function R(e,t,r,i,a,s,n,o,l,u){var h,d=0,p=0,m="input"===s,f="output"===s,_=new g;function v(){var s;if((h=d*c)<a)t.readUint8Array(i+h,Math.min(c,a-h),function(t){var i;try{i=e.append(t,function(e){n&&n(h+e,a)})}catch(e){l(e);return}i?(p+=i.length,r.writeUint8Array(i,function(){d++,setTimeout(v,1)},u),f&&_.append(i)):(d++,setTimeout(v,1)),m&&_.append(t),n&&n(h,a)},l);else{try{s=e.flush()}catch(e){l(e);return}s?(f&&_.append(s),p+=s.length,r.writeUint8Array(s,function(){o(p,_.get())},u)):o(p,_.get())}}v()}function E(t,r,i,a,s,n,o,l,u,h,c){var d=o?"output":"none";e.zip.useWebWorkers?x(t,{sn:r,codecClass:"Inflater",crcType:d},i,a,s,n,u,l,h,c):R(new e.zip.Inflater,i,a,s,n,d,u,l,h,c)}function C(t,r,i,a,s,n,o,l,u){var h="input";e.zip.useWebWorkers?x(t,{sn:r,options:{level:s},codecClass:"Deflater",crcType:h},i,a,0,i.size,o,n,l,u):R(new e.zip.Deflater,i,a,0,i.size,h,o,n,l,u)}function w(t,r,i,a,s,n,o,l,u,h,c){var d="input";e.zip.useWebWorkers&&o?x(t,{sn:r,codecClass:"NOOP",crcType:d},i,a,s,n,u,l,h,c):R(new p,i,a,s,n,d,u,l,h,c)}function F(e){var t,r,i="",a=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(t=0;t<e.length;t++)(r=255&e.charCodeAt(t))>127?i+=a[r-128]:i+=String.fromCharCode(r);return i}function I(e){return decodeURIComponent(escape(e))}function D(e){var t,r="";for(t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return r}function V(e){var t=(4294901760&e)>>16,r=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&r)>>11,(2016&r)>>5,(31&r)*2,0)}catch(e){}}function N(e,t,r,i,n){if(e.version=t.view.getUint16(r,!0),e.bitFlag=t.view.getUint16(r+2,!0),e.compressionMethod=t.view.getUint16(r+4,!0),e.lastModDateRaw=t.view.getUint32(r+6,!0),e.lastModDate=V(e.lastModDateRaw),(1&e.bitFlag)==1){n(a);return}if((i||(8&e.bitFlag)!=8)&&(e.crc32=t.view.getUint32(r+10,!0),e.compressedSize=t.view.getUint32(r+14,!0),e.uncompressedSize=t.view.getUint32(r+18,!0)),4294967295===e.compressedSize||4294967295===e.uncompressedSize){n(s);return}e.filenameLength=t.view.getUint16(r+22,!0),e.extraFieldLength=t.view.getUint16(r+24,!0)}function k(t,a,s){var o=0;function h(){}function c(e){var i=22;if(t.size<i){s(r);return}var a=i+65536;function o(r,a){t.readUint8Array(t.size-r,r,function(t){for(var r=t.length-i;r>=0;r--)if(80===t[r]&&75===t[r+1]&&5===t[r+2]&&6===t[r+3]){e(new DataView(t.buffer,r,i));return}a()},function(){s(n)})}o(i,function(){o(Math.min(a,t.size),function(){s(r)})})}h.prototype.getData=function(e,a,n,h){var c=this;function d(e){var t=f(4);return t.view.setUint32(0,e),c.crc32==t.view.getUint32(0)}function g(t,r){h&&!d(r)?s(i):e.getData(function(e){a(e)})}function p(e){s(e||u)}function m(e){s(e||l)}t.readUint8Array(c.offset,30,function(i){var a,l=f(i.length,i);if(1347093252!=l.view.getUint32(0)){s(r);return}N(c,l,4,!1,s),a=c.offset+30+c.filenameLength+c.extraFieldLength,e.init(function(){0===c.compressionMethod?w(c._worker,o++,t,e,a,c.compressedSize,h,g,n,p,m):E(c._worker,o++,t,e,a,c.compressedSize,h,g,n,p,m)},m)},p)};var d={getEntries:function(e){var i=this._worker;c(function(a){var o,l;if(o=a.getUint32(16,!0),l=a.getUint16(8,!0),o<0||o>=t.size){s(r);return}t.readUint8Array(o,t.size-o,function(t){var a,n,o,u,c=0,d=[],g=f(t.length,t);for(a=0;a<l;a++){if((n=new h)._worker=i,1347092738!=g.view.getUint32(c)){s(r);return}N(n,g,c+6,!0,s),n.commentLength=g.view.getUint16(c+32,!0),n.directory=(16&g.view.getUint8(c+38))==16,n.offset=g.view.getUint32(c+42,!0),o=D(g.array.subarray(c+46,c+46+n.filenameLength)),n.filename=(2048&n.bitFlag)==2048?I(o):F(o),n.directory||"/"!=n.filename.charAt(n.filename.length-1)||(n.directory=!0),u=D(g.array.subarray(c+46+n.filenameLength+n.extraFieldLength,c+46+n.filenameLength+n.extraFieldLength+n.commentLength)),n.comment=(2048&n.bitFlag)==2048?I(u):F(u),d.push(n),c+=46+n.filenameLength+n.extraFieldLength+n.commentLength}e(d)},function(){s(n)})})},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};e.zip.useWebWorkers?G("inflater",function(e){d._worker=e,a(d)},function(e){s(e)}):a(d)}function P(e){return unescape(encodeURIComponent(e))}function L(e){var t,r=[];for(t=0;t<e.length;t++)r.push(e.charCodeAt(t));return r}function U(t,r,i,a){var s={},n=[],l=0,c=0;function d(e){i(e||o)}function g(e){i(e||u)}var p={add:function(e,r,o,u,p){var m,_,v,T=this._worker;function M(r){var i;v=p.lastModDate||new Date,m=f(26),s[e]={headerArray:m.array,directory:p.directory,filename:_,offset:l,comment:L(P(p.comment||""))},m.view.setUint32(0,335546376),p.version&&m.view.setUint8(0,p.version),a||0===p.level||p.directory||m.view.setUint16(4,2048),m.view.setUint16(6,(v.getHours()<<6|v.getMinutes())<<5|v.getSeconds()/2,!0),m.view.setUint16(8,(v.getFullYear()-1980<<4|v.getMonth()+1)<<5|v.getDate(),!0),m.view.setUint16(22,_.length,!0),(i=f(30+_.length)).view.setUint32(0,1347093252),i.array.set(m.array,4),i.array.set(_,30),l+=i.array.length,t.writeUint8Array(i.array,r,d)}function y(e,i){var a=f(16);l+=e||0,a.view.setUint32(0,1347094280),void 0!==i&&(m.view.setUint32(10,i,!0),a.view.setUint32(4,i,!0)),r&&(a.view.setUint32(8,e,!0),m.view.setUint32(14,e,!0),a.view.setUint32(12,r.size,!0),m.view.setUint32(18,r.size,!0)),t.writeUint8Array(a.array,function(){l+=16,o()},d)}function b(){if(p=p||{},e=e.trim(),p.directory&&"/"!=e.charAt(e.length-1)&&(e+="/"),s.hasOwnProperty(e)){i(h);return}_=L(P(e)),n.push(e),M(function(){r?a||0===p.level?w(T,c++,r,t,0,r.size,!0,y,u,g,d):C(T,c++,r,t,p.level,y,u,g,d):y()},d)}r?r.init(b,g):b()},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null);var r,i,a,o=0,u=0;for(i=0;i<n.length;i++)o+=46+(a=s[n[i]]).filename.length+a.comment.length;for(i=0,r=f(o+22);i<n.length;i++)a=s[n[i]],r.view.setUint32(u,1347092738),r.view.setUint16(u+4,5120),r.array.set(a.headerArray,u+6),r.view.setUint16(u+32,a.comment.length,!0),a.directory&&r.view.setUint8(u+38,16),r.view.setUint32(u+42,a.offset,!0),r.array.set(a.filename,u+46),r.array.set(a.comment,u+46+a.filename.length),u+=46+a.filename.length+a.comment.length;r.view.setUint32(u,1347093766),r.view.setUint16(u+8,n.length,!0),r.view.setUint16(u+10,n.length,!0),r.view.setUint32(u+12,o,!0),r.view.setUint32(u+16,l,!0),t.writeUint8Array(r.array,function(){t.getData(e)},d)},_worker:null};e.zip.useWebWorkers?G("deflater",function(e){p._worker=e,r(p)},function(e){i(e)}):r(p)}function B(e){var t=document.createElement("a");return e.map(function(e){return t.href=e,t.href})}g.prototype.append=function(e){for(var t=0|this.crc,r=this.table,i=0,a=0|e.length;i<a;i++)t=t>>>8^r[(t^e[i])&255];this.crc=t},g.prototype.get=function(){return~this.crc},g.prototype.table=function(){var e,t,r,i=[];for(e=0;e<256;e++){for(t=0,r=e;t<8;t++)1&r?r=r>>>1^3988292384:r>>>=1;i[e]=r}return i}(),p.prototype.append=function(e,t){return e},p.prototype.flush=function(){},v.prototype=new _,v.prototype.constructor=v,T.prototype=new _,T.prototype.constructor=T,M.prototype=new _,M.prototype.constructor=M,y.prototype.getData=function(e){e(this.data)},b.prototype=new y,b.prototype.constructor=b,A.prototype=new y,A.prototype.constructor=A,S.prototype=new y,S.prototype.constructor=S;var O={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function G(t,r,i){if(null!==e.zip.workerScripts&&null!==e.zip.workerScriptsPath){i(Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));return}if(e.zip.workerScripts){if(!Array.isArray(a=e.zip.workerScripts[t])){i(Error("zip.workerScripts."+t+" is not an array!"));return}a=B(a)}else(a=O[t].slice(0))[0]=(e.zip.workerScriptsPath||"")+a[0];var a,s=new Worker(a[0]);function n(e){var t=e.data;if(t.error){s.terminate(),i(t.error);return}"importScripts"===t.type&&(s.removeEventListener("message",n),s.removeEventListener("error",o),r(s))}function o(e){s.terminate(),i(e)}s.codecTime=s.crcTime=0,s.postMessage({type:"importScripts",scripts:a.slice(1)}),s.addEventListener("message",n),s.addEventListener("error",o)}function z(e){console.error(e)}e.zip={Reader:_,Writer:y,BlobReader:M,Data64URIReader:T,TextReader:v,BlobWriter:S,Data64URIWriter:A,TextWriter:b,createReader:function(e,t,r){r=r||z,e.init(function(){k(e,t,r)},r)},createWriter:function(e,t,r,i){r=r||z,i=!!i,e.init(function(){U(e,t,r,i)},r)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}($ba2d5e10d87e1016$exports);var $eIStk=parcelRequire("eIStk"),$jLaD3=parcelRequire("jLaD3"),$75639408da66f385$var$Export={};$75639408da66f385$var$Export.exportOBJ=function(e,t=!0,r=!1){for(var i="s 0\n",a=[1,1],s=0,n=e.length;s<n;++s)i+="o mesh_"+s+"\n",i=$75639408da66f385$var$Export.addMesh(e[s],i,a,t,r);return new Blob([i])};var $75639408da66f385$var$appendString=function(e,t,r){for(var i=0,a=t.length;i<a;i++)e[r++]=t.charCodeAt(i);return r};$75639408da66f385$var$Export.addMesh=function(e,t,r,i,a){var s=e.getVertices(),n=e.getColors(),o=e.getMaterials(),l=e.getFaces(),u=e.getNbVertices(),h=e.getNbFaces(),c=e.getNbTexCoords(),d=e.getMatrix(),g=0,p=0,m="",f=0,_=20,v=new Uint8Array(Math.max(1e3,f=(a?u*(8+6*_):u*(5+3*_+8+6))+(45*c+66*h))),T=0,M=[0,0,0];for(g=0;g<u;++g)p=3*g,M[0]=s[p],M[1]=s[p+1],M[2]=s[p+2],$eIStk.transformMat4(M,M,d),T=$75639408da66f385$var$appendString(v,m="v "+M[0]+" "+M[1]+" "+M[2]+(a?" "+n[p]+" "+n[p+1]+" "+n[p+2]+"\n":"\n"),T);if(i){var y=Math.ceil(u/64);for(g=0;g<y;++g){m="#MRGB ",p=64*g;for(var b=g===y-1?u:p+64;p<b;++p){m+="ff";var A=3*p,S=Math.round(255*n[A]).toString(16),x=Math.round(255*n[A+1]).toString(16),R=Math.round(255*n[A+2]).toString(16);m+=(1===S.length?"0"+S:S)+(1===x.length?"0"+x:x)+(1===R.length?"0"+R:R)}m+="\n",T=$75639408da66f385$var$appendString(v,m,T)}for(g=0,y=Math.ceil(u/46);g<y;++g){m="#MAT ",p=46*g;for(var E=g===y-1?u:p+46;p<E;++p){var C=3*p,w=Math.round(255*o[C]).toString(16),F=Math.round(255*o[C+1]).toString(16),I=Math.round(255*o[C+2]).toString(16);m+=(1===w.length?"0"+w:w)+(1===F.length?"0"+F:F)+(1===I.length?"0"+I:I)}m+="\n",T=$75639408da66f385$var$appendString(v,m,T)}}var D=e.getFacesTexCoord(),V=e.getTexCoords(),N=e.hasUV();if(N)for(g=0;g<c;++g)T=$75639408da66f385$var$appendString(v,m="vt "+V[p=2*g]+" "+V[p+1]+"\n",T);var k=r[0],P=r[1];for(r[0]+=u,r[1]+=c,g=0;g<h;++g){var L=l[(p=4*g)+3];T=$75639408da66f385$var$appendString(v,m=N?"f "+(k+l[p])+"/"+(P+D[p])+(" "+(k+l[p+1]))+"/"+(P+D[p+1])+(" "+(k+l[p+2]))+"/"+(P+D[p+2])+(L!==$jLaD3.default.TRI_INDEX?" "+(k+L)+"/"+(P+D[p+3])+"\n":"\n"):"f "+(k+l[p])+" "+(k+l[p+1])+" "+(k+l[p+2])+(L!==$jLaD3.default.TRI_INDEX?" "+(k+L)+"\n":"\n"),T)}if(v=v.subarray(0,T),window.TextDecoder)return t+new TextDecoder().decode(v);for(g=0;g<T;++g)t+=String.fromCharCode(v[g]);return t};var $75639408da66f385$export$2e2bcd8739ae039=$75639408da66f385$var$Export,$jLaD3=parcelRequire("jLaD3"),$7c7b9eee105e8f24$var$Export={},$7c7b9eee105e8f24$var$getResult=function(e){return $7b5b7262d1062d78$export$2e2bcd8739ae039.mergeArrays(e,{vertices:null,colors:null,faces:null})};$7c7b9eee105e8f24$var$Export.exportAsciiPLY=function(e){var t=$7c7b9eee105e8f24$var$getResult(e),r=t.nbVertices,i=t.nbFaces,a=t.vertices,s=t.colors,n=t.faces,o=0,l=0,u="ply\nformat ascii 1.0\ncomment created by SculptGL\n";for(u+="element vertex "+r+"\nproperty float x\nproperty float y\nproperty float z\nproperty uchar red\nproperty uchar green\nproperty uchar blue\nelement face "+i+"\nproperty list uchar uint vertex_indices\nend_header\n",o=0;o<r;++o)u+=a[l=3*o]+" "+a[l+1]+" "+a[l+2]+" "+(255*s[l]|0)+" "+(255*s[l+1]|0)+" "+(255*s[l+2]|0)+"\n";for(o=0;o<i;++o){var h=n[(l=4*o)+3],c=h!==$jLaD3.default.TRI_INDEX;u+=(c?"4 ":"3 ")+n[l]+" "+n[l+1]+" "+n[l+2]+(c?" "+h+"\n":"\n")}return new Blob([u])},$7c7b9eee105e8f24$var$Export.exportBinaryPLY=function(e,t){var r=$7c7b9eee105e8f24$var$getResult(e),i=r.nbVertices,a=r.nbFaces,s=r.nbQuads,n=r.nbTriangles,o=r.vertices,l=r.colors,u=r.faces,h=0,c=0,d=0;if(t&&t.swapXY)for(h=0;h<i;++h){var g=o[(d=3*h)+1];o[d+1]=-o[d+2],o[d+2]=g}var p="ply\nformat binary_"+($jLaD3.default.littleEndian?"little":"big")+"_endian 1.0\ncomment created by SculptGL\n";p+="element vertex "+i+"\nproperty float x\nproperty float y\nproperty float z\nproperty uchar red\nproperty uchar green\nproperty uchar blue\nelement face "+a+"\nproperty list uchar uint vertex_indices\nend_header\n";var m=4*o.length+l.length,f=(4*s+3*n)*4+a,_=new Uint8Array(p.length+m+2*f),v=new DataView(_.buffer);c=p.length;var T=0;for(T=0;T<c;++T)_[T]=p.charCodeAt(T);for(h=0;h<i;++h)c=3*h,v.setFloat32(T,o[c],!0),T+=4,v.setFloat32(T,o[c+1],!0),T+=4,v.setFloat32(T,o[c+2],!0),T+=4,v.setUint8(T,Math.round(255*l[c])),T+=1,v.setUint8(T,Math.round(255*l[c+1])),T+=1,v.setUint8(T,Math.round(255*l[c+2])),T+=1;for(h=0;h<a;++h){var M=u[(c=4*h)+3]!==$jLaD3.default.TRI_INDEX;v.setUint8(T,M?4:3),T+=1,v.setUint32(T,u[c],!0),T+=4,v.setUint32(T,u[c+1],!0),T+=4,v.setUint32(T,u[c+2],!0),T+=4,M&&(v.setUint32(T,u[c+3],!0),T+=4)}return new Blob([_])};var $7c7b9eee105e8f24$export$2e2bcd8739ae039=$7c7b9eee105e8f24$var$Export,$eIStk=parcelRequire("eIStk"),$d89f30296d2e356f$var$Export={},$d89f30296d2e356f$var$getResult=function(e){for(var t=$7b5b7262d1062d78$export$2e2bcd8739ae039.mergeArrays(e,{vertices:null,colors:null,triangles:null}),r=t.vertices,i=t.triangles,a=$eIStk.create(),s=$eIStk.create(),n=$eIStk.create(),o=t.faceNormals=new Float32Array(3*t.nbTriangles),l=0;l<t.nbTriangles;++l){var u=3*l,h=3*i[u],c=3*i[u+1],d=3*i[u+2];$eIStk.set(a,r[h],r[h+1],r[h+2]),$eIStk.set(s,r[c],r[c+1],r[c+2]),$eIStk.set(n,r[d],r[d+1],r[d+2]),$eIStk.sub(s,s,a),$eIStk.sub(n,n,s),$eIStk.cross(a,s,n),$eIStk.normalize(a,a),o[u]=a[0],o[u+1]=a[1],o[u+2]=a[2]}return t};$d89f30296d2e356f$var$Export.exportAsciiSTL=function(e){for(var t=$d89f30296d2e356f$var$getResult(e),r=t.nbTriangles,i=t.vertices,a=t.triangles,s=t.faceNormals,n="solid mesh\n",o=0;o<r;++o){var l=3*o;n+=" facet normal "+s[l]+" "+s[l+1]+" "+s[l+2]+"\n  outer loop\n";var u=3*a[l],h=3*a[l+1],c=3*a[l+2];n+="   vertex "+i[u]+" "+i[u+1]+" "+i[u+2]+"\n"+("   vertex "+i[h]+" "+i[h+1]+" ")+i[h+2]+"\n"+("   vertex "+i[c]+" "+i[c+1]+" ")+i[c+2]+"\n  endloop\n endfacet\n"}return new Blob([n+="endsolid mesh\n"])},$d89f30296d2e356f$var$Export.exportBinarySTL=function(e,t){var r,i,a=$d89f30296d2e356f$var$getResult(e),s=a.nbTriangles,n=a.vertices,o=a.colors,l=a.triangles,u=a.faceNormals;if(t&&t.swapXY){var h=a.nbVertices;for(r=0;r<h;++r){var c=n[(i=3*r)+1];n[i+1]=-n[i+2],n[i+2]=c}}var d=new Uint8Array(84+50*s),g=t&&t.colorMagic;if(g){var p=[67,79,76,79,82,61,255,255,255,255];for(r=0;r<p.length;++r)d[r]=p[r]}new DataView(d.buffer).setUint32(80,s,!0);var m=new Uint8Array(n.buffer),f=new Uint8Array(u.buffer),_=84,v=0,T=g?0:32768,M=31/3;for(r=0;r<s;++r){for(v=0,i=12*r;v<12;++v)d[_++]=f[i++];var y=3*l[i=3*r],b=3*l[i+1],A=3*l[i+2],S=4*y;for(v=0;v<12;++v)d[_++]=m[S++];var x=4*b;for(v=0;v<12;++v)d[_++]=m[x++];var R=4*A;for(v=0;v<12;++v)d[_++]=m[R++];var E=Math.round((o[y]+o[b]+o[A])*M),C=Math.round((o[y+1]+o[b+1]+o[A+1])*M)<<5,w=Math.round((o[y+2]+o[b+2]+o[A+2])*M);g?w<<=10:E<<=10;var F=E+C+w+T;d[_++]=255&F,d[_++]=F>>8}return new Blob([d])};var $d89f30296d2e356f$export$2e2bcd8739ae039=$d89f30296d2e356f$var$Export,$63e702ceca30b1ba$var$Export={};$63e702ceca30b1ba$var$Export.exportSculpteo=function(e,t){var r=new XMLHttpRequest;r.open("POST","uploadSculpteo.php",!0),r.onprogress=function(e){if(e.lengthComputable&&e.total){var r=Math.round(100*e.loaded/e.total);t.setMessage("Sculpteo upload: "+r+"%")}};var i=function(){t.setMessage("")};r.onerror=i,r.onabort=i,r.onload=function(){if(i(),200===this.status){var e=r.responseText.match(/\/print\/(.+?)(?=")/);e&&window.open("https://www.sculpteo.com/en"+e[0],"_blank")}};var a=e.getMeshes(),s=e.computeBoundingBoxMeshes(a),n=e.computeRadiusFromBoundingBox(s),o=$7c7b9eee105e8f24$export$2e2bcd8739ae039.exportBinaryPLY(a,{swapXY:!0});return t.setMessage("Creating zip..."),$ba2d5e10d87e1016$exports.zip.useWebWorkers=!0,$ba2d5e10d87e1016$exports.zip.workerScriptsPath="worker/",(0,$ba2d5e10d87e1016$exports.zip).createWriter(new $ba2d5e10d87e1016$exports.zip.BlobWriter("application/zip"),function(e){e.add("yourMesh.ply",new $ba2d5e10d87e1016$exports.zip.BlobReader(o),function(){e.close($63e702ceca30b1ba$var$Export.exportFileSculpteo.bind(this,n,r,t))})},onerror),r},$63e702ceca30b1ba$var$Export.exportFileSculpteo=function(e,t,r,i){if(!t.isAborted){var a=new FormData;a.append("file",i),a.append("name","fromSculptgl"),a.append("scale",4/e),r.setMessage("Sculpteo upload..."),t.send(a)}};var $63e702ceca30b1ba$export$2e2bcd8739ae039=$63e702ceca30b1ba$var$Export,$37a209a2b3b416aa$var$Export={};$37a209a2b3b416aa$var$Export.exportMaterialise=function(e,t){var r=new XMLHttpRequest;r.open("POST","https://i.materialise.com/web-api/tool/20cc0fd6-3cef-4111-a201-0b87026d892c/model",!0),r.onprogress=function(e){if(e.lengthComputable&&e.total){var r=Math.round(100*e.loaded/e.total);t.setMessage("Materialise upload: "+r+"%")}};var i=function(){t.setMessage("")};r.onerror=i,r.onabort=i,r.onload=function(){if(i(),200===r.status){var e=JSON.parse(r.responseText);window.open("https://i.materialise.com/en/3dprint#modelId="+e.modelID,"_blank")}};var a=e.getMeshes(),s=e.computeBoundingBoxMeshes(a),n=e.computeRadiusFromBoundingBox(s),o=$d89f30296d2e356f$export$2e2bcd8739ae039.exportBinarySTL(a,{colorMagic:!0,swapXY:!0});return t.setMessage("Creating zip..."),$ba2d5e10d87e1016$exports.zip.useWebWorkers=!0,$ba2d5e10d87e1016$exports.zip.workerScriptsPath="worker/",(0,$ba2d5e10d87e1016$exports.zip).createWriter(new $ba2d5e10d87e1016$exports.zip.BlobWriter("application/zip"),function(e){e.add("yourMesh.stl",new $ba2d5e10d87e1016$exports.zip.BlobReader(o),function(){e.close($37a209a2b3b416aa$var$Export.exportFileMaterialise.bind(this,n,r,t))})},onerror),r},$37a209a2b3b416aa$var$Export.exportFileMaterialise=function(e,t,r,i){if(!t.isAborted){var a=new FormData;a.append("file",i,"yourMesh.zip"),r.setMessage("Materialise upload..."),t.send(a)}};var $37a209a2b3b416aa$export$2e2bcd8739ae039=$37a209a2b3b416aa$var$Export,$be3d897267df1cc7$var$Export={};$be3d897267df1cc7$var$Export.exportOBJ=$75639408da66f385$export$2e2bcd8739ae039.exportOBJ,$be3d897267df1cc7$var$Export.exportSGL=$6b702f87fbf51a08$export$2e2bcd8739ae039.exportSGL,$be3d897267df1cc7$var$Export.exportAsciiPLY=$7c7b9eee105e8f24$export$2e2bcd8739ae039.exportAsciiPLY,$be3d897267df1cc7$var$Export.exportBinaryPLY=$7c7b9eee105e8f24$export$2e2bcd8739ae039.exportBinaryPLY,$be3d897267df1cc7$var$Export.exportAsciiSTL=$d89f30296d2e356f$export$2e2bcd8739ae039.exportAsciiSTL,$be3d897267df1cc7$var$Export.exportBinarySTL=$d89f30296d2e356f$export$2e2bcd8739ae039.exportBinarySTL,$be3d897267df1cc7$var$Export.exportSculpteo=$63e702ceca30b1ba$export$2e2bcd8739ae039.exportSculpteo,$be3d897267df1cc7$var$Export.exportMaterialise=$37a209a2b3b416aa$export$2e2bcd8739ae039.exportMaterialise;var $be3d897267df1cc7$export$2e2bcd8739ae039=$be3d897267df1cc7$var$Export,$ee1388bca99efeb7$var$WebGLCaps={};$ee1388bca99efeb7$var$WebGLCaps._gl=null,$ee1388bca99efeb7$var$WebGLCaps._checkRTT={},$ee1388bca99efeb7$var$WebGLCaps._webGLExtensions={},$ee1388bca99efeb7$var$WebGLCaps.HALF_FLOAT=$ee1388bca99efeb7$var$WebGLCaps.HALF_FLOAT_OES=36193,$ee1388bca99efeb7$var$WebGLCaps.checkRTTSupport=function(e,t){var r=$ee1388bca99efeb7$var$WebGLCaps._gl;if(void 0===r)return!1;var i=e+","+t;if(void 0!==$ee1388bca99efeb7$var$WebGLCaps._checkRTT[i])return $ee1388bca99efeb7$var$WebGLCaps._checkRTT[i];var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,2,2,0,r.RGBA,e,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,t);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,a,0);var n=$ee1388bca99efeb7$var$WebGLCaps._checkRTT[i]=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.deleteTexture(a),r.deleteFramebuffer(s),r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),n},$ee1388bca99efeb7$var$WebGLCaps.hasRTTLinearHalfFloat=function(){return $ee1388bca99efeb7$var$WebGLCaps._webGLExtensions.OES_texture_half_float_linear&&$ee1388bca99efeb7$var$WebGLCaps.checkRTTSupport($ee1388bca99efeb7$var$WebGLCaps.HALF_FLOAT,$ee1388bca99efeb7$var$WebGLCaps._gl.LINEAR)},$ee1388bca99efeb7$var$WebGLCaps.hasRTTLinearFloat=function(){return $ee1388bca99efeb7$var$WebGLCaps._webGLExtensions.OES_texture_float_linear&&$ee1388bca99efeb7$var$WebGLCaps.checkRTTSupport($ee1388bca99efeb7$var$WebGLCaps._gl.FLOAT,$ee1388bca99efeb7$var$WebGLCaps._gl.LINEAR)},$ee1388bca99efeb7$var$WebGLCaps.hasRTTHalfFloat=function(){return $ee1388bca99efeb7$var$WebGLCaps._webGLExtensions.OES_texture_half_float&&$ee1388bca99efeb7$var$WebGLCaps.checkRTTSupport($ee1388bca99efeb7$var$WebGLCaps.HALF_FLOAT,$ee1388bca99efeb7$var$WebGLCaps._gl.NEAREST)},$ee1388bca99efeb7$var$WebGLCaps.hasRTTFloat=function(){return $ee1388bca99efeb7$var$WebGLCaps._webGLExtensions.OES_texture_float&&$ee1388bca99efeb7$var$WebGLCaps.checkRTTSupport($ee1388bca99efeb7$var$WebGLCaps._gl.FLOAT,$ee1388bca99efeb7$var$WebGLCaps._gl.NEAREST)},$ee1388bca99efeb7$var$WebGLCaps.getWebGLExtension=function(e){return $ee1388bca99efeb7$var$WebGLCaps._webGLExtensions[e]},$ee1388bca99efeb7$var$WebGLCaps.getWebGLExtensions=function(){return $ee1388bca99efeb7$var$WebGLCaps._webGLExtensions},$ee1388bca99efeb7$var$WebGLCaps.initWebGLExtensions=function(e){$ee1388bca99efeb7$var$WebGLCaps._gl=e;for(var t=e.getSupportedExtensions(),r=$ee1388bca99efeb7$var$WebGLCaps._webGLExtensions,i=0,a=t.length;i<a;++i){var s=t[i];r[s]=e.getExtension(s)}};var $ee1388bca99efeb7$export$2e2bcd8739ae039=$ee1388bca99efeb7$var$WebGLCaps;class $e5c77fdd1443ab71$var$Rtt{constructor(e,t=null,r=e.createRenderbuffer(),i=!1){this._gl=e,this._texture=e.createTexture(),this._depth=r,this._framebuffer=e.createFramebuffer(),this._shaderType=t,this._invSize=new Float32Array(2),this._vertexBuffer=null,i&&$ee1388bca99efeb7$export$2e2bcd8739ae039.hasRTTHalfFloat()?this._type=$ee1388bca99efeb7$export$2e2bcd8739ae039.HALF_FLOAT_OES:i&&$ee1388bca99efeb7$export$2e2bcd8739ae039.hasRTTFloat()?this._type=e.FLOAT:this._type=e.UNSIGNED_BYTE,this.setWrapRepeat(!1),this.setFilterNearest(!1),this.init()}getGL(){return this._gl}getVertexBuffer(){return this._vertexBuffer}getFramebuffer(){return this._framebuffer}getTexture(){return this._texture}getDepth(){return this._depth}getInverseSize(){return this._invSize}init(){var e=this._gl;$e5c77fdd1443ab71$var$singletonBuffer||($e5c77fdd1443ab71$var$singletonBuffer=new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.STATIC_DRAW)).update(new Float32Array([-1,-1,4,-1,-1,4])),this._vertexBuffer=$e5c77fdd1443ab71$var$singletonBuffer}setWrapRepeat(e){this._wrapRepeat=e}setFilterNearest(e){this._filterNearest=e}onResize(e,t){var r=this._gl;this._invSize[0]=1/e,this._invSize[1]=1/t,r.bindTexture(r.TEXTURE_2D,this._texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,this._type,null);var i=this._filterNearest?r.NEAREST:r.LINEAR;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,i),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i);var a=this._wrapRepeat?r.REPEAT:r.CLAMP_TO_EDGE;r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,a),this._depth&&(r.bindRenderbuffer(r.RENDERBUFFER,this._depth),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t)),r.bindFramebuffer(r.FRAMEBUFFER,this._framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this._texture,0),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,this._depth),r.bindTexture(r.TEXTURE_2D,null)}release(){this._texture&&this._gl.deleteTexture(this._texture),this.getVertexBuffer().release()}render(e){$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[this._shaderType].getOrCreate(this._gl).draw(this,e)}}var $e5c77fdd1443ab71$export$2e2bcd8739ae039=$e5c77fdd1443ab71$var$Rtt,$eIUYI=parcelRequire("eIUYI");class $c05551ac674b7063$var$GuiFiles{constructor(e,t){this._main=t._main,this._ctrlGui=t,this._menu=null,this._parent=e,this._exportAll=!0,this._objColorZbrush=!0,this._objColorAppended=!1,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("fileTitle"));t.addTitle((0,$l7y1s.default)("fileImportTitle")),t.addButton((0,$l7y1s.default)("fileAdd"),this,"addFile"),t.addCheckbox((0,$l7y1s.default)("fileAutoMatrix"),this._main,"_autoMatrix"),t.addCheckbox((0,$l7y1s.default)("fileVertexSRGB"),this._main,"_vertexSRGB"),t.addTitle((0,$l7y1s.default)("fileExportSceneTitle")),t.addCheckbox((0,$l7y1s.default)("fileExportAll"),this,"_exportAll"),t.addButton((0,$l7y1s.default)("fileExportSGL"),this,"saveFileAsSGL"),t.addButton((0,$l7y1s.default)("fileExportOBJ"),this,"saveFileAsOBJ"),t.addButton((0,$l7y1s.default)("fileExportPLY"),this,"saveFileAsPLY"),t.addButton((0,$l7y1s.default)("fileExportSTL"),this,"saveFileAsSTL"),t.addCheckbox("OBJ color zbrush",this,"_objColorZbrush"),t.addCheckbox("OBJ color append",this,"_objColorAppended"),t.addButton((0,$l7y1s.default)("sketchfabTitle"),this._ctrlGui,"exportSketchfab"),t.addTitle((0,$l7y1s.default)("fileExportTextureTitle")),this._guiTexSize=t.addSlider((0,$l7y1s.default)("fileExportTextureSize"),10,this.onTextureSize.bind(this),8,12,1),this._guiTexSize.setValue(10),t.addButton((0,$l7y1s.default)("fileExportColor"),this,"saveColor"),t.addButton((0,$l7y1s.default)("fileExportRoughness"),this,"saveRoughness"),t.addButton((0,$l7y1s.default)("fileExportMetalness"),this,"saveMetalness")}addFile(){document.getElementById("fileopen").click()}onTextureSize(e){this._texSize=1<<e,this._guiTexSize.domInputText.value=this._texSize}_getExportMeshes(){if(this._exportAll)return this._main.getMeshes();var e=this._main.getSelectedMeshes();return e.length?e:void 0}_extractTexture(e,t,r){var i=document.createElement("canvas");i.width=t,i.height=r;var a=new Uint8Array(4*t*r);if(e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return console.error("FRAMEBUFFER not complete"),i;e.flush(),e.finish(),e.readPixels(0,0,t,r,e.RGBA,e.UNSIGNED_BYTE,a);var s=i.getContext("2d"),n=s.getImageData(0,0,t,r);return n.data.set(a),s.putImageData(n,0,0),i}_getRttPaint(e){return this._rttPaint||(this._rttPaint=new $e5c77fdd1443ab71$export$2e2bcd8739ae039(e,$eIUYI.default.Shader.PAINTUV,null),this._rttPaint.setWrapRepeat(!0),this._rttPaint.setFilterNearest(!0),$0686e9cc68c46de2$export$2e2bcd8739ae039.INPUT_TEXTURE=this._getRttPaint()),this._rttPaint}_getRttBlur(e){return this._rttBlur||(this._rttBlur=new $e5c77fdd1443ab71$export$2e2bcd8739ae039(e,$eIUYI.default.Shader.BLUR,null)),this._rttBlur}_saveTexture(e){var t=this._main.getMesh();if(t){if(!t.getTexCoords()){window.alert("The selected mesh has no UV!");return}var r=t.getGL(),i=this._texSize,a=this._texSize,s=t.getShaderType();t.setShaderType($eIUYI.default.Shader.PAINTUV);var n=this._getRttPaint(r);n.onResize(i,a),r.bindFramebuffer(r.FRAMEBUFFER,n.getFramebuffer()),r.clear(r.COLOR_BUFFER_BIT),r.viewport(0,0,i,a),t.render(),t.setShaderType(s),this._blurImage(r,i,a);var o=this._extractTexture(r,i,a);o.toBlob((function(t){(0,$90f256c567e4c320$exports.saveAs)(t,e+".png")}).bind(this)),this._main.onCanvasResize()}}_blurImage(e,t,r){var i=this._getRttBlur(e);i.onResize(t,r),e.bindFramebuffer(e.FRAMEBUFFER,i.getFramebuffer()),e.clear(e.COLOR_BUFFER_BIT),i.render(this._main)}saveColor(){$54b9f7b0e56a382c$export$2e2bcd8739ae039.CHANNEL_VALUE=0,this._saveTexture("diffuse")}saveRoughness(){$54b9f7b0e56a382c$export$2e2bcd8739ae039.CHANNEL_VALUE=1,this._saveTexture("roughness")}saveMetalness(){$54b9f7b0e56a382c$export$2e2bcd8739ae039.CHANNEL_VALUE=2,this._saveTexture("metalness")}saveFileAsSGL(){var e=this._getExportMeshes();e&&this._save($be3d897267df1cc7$export$2e2bcd8739ae039.exportSGL(e,this._main),"yourMesh.sgl")}saveFileAsOBJ(){var e=this._getExportMeshes();e&&this._save($be3d897267df1cc7$export$2e2bcd8739ae039.exportOBJ(e,this._objColorZbrush,this._objColorAppended),"yourMesh.obj")}saveFileAsPLY(){var e=this._getExportMeshes();e&&this._save($be3d897267df1cc7$export$2e2bcd8739ae039.exportBinaryPLY(e),"yourMesh.ply")}saveFileAsSTL(){var e=this._getExportMeshes();e&&this._save($be3d897267df1cc7$export$2e2bcd8739ae039.exportBinarySTL(e),"yourMesh.stl")}_save(e,t,r){if(!r)return(0,$90f256c567e4c320$exports.saveAs)(e,t);$ba2d5e10d87e1016$exports.zip.useWebWorkers=!0,$ba2d5e10d87e1016$exports.zip.workerScriptsPath="worker/",(0,$ba2d5e10d87e1016$exports.zip).createWriter(new $ba2d5e10d87e1016$exports.zip.BlobWriter("application/zip"),function(r){r.add(t,new $ba2d5e10d87e1016$exports.zip.BlobReader(e),function(){r.close(function(e){(0,$90f256c567e4c320$exports.saveAs)(e,"yourMesh.zip")})})},onerror)}onKeyDown(e){if(!0!==e.handled){e.stopPropagation(),this._main._focusGui||e.preventDefault();var t=e.which;e.ctrlKey&&e.altKey&&78===t?(this._main.clearScene(),e.handled=!0):e.ctrlKey&&(79===t||73===t)?(this.addFile(),e.handled=!0):e.ctrlKey&&69===t&&(this.saveFileAsOBJ(),e.handled=!0)}}}var $c05551ac674b7063$export$2e2bcd8739ae039=$c05551ac674b7063$var$GuiFiles,$l7y1s=parcelRequire("l7y1s");class $adcfdceb4bbf6c19$var$GuiMesh{constructor(e,t){this._main=t._main,this.domVerts=null,this.domFaces=null,this.domUl=null,this.init(e)}init(e){this.domVerts=document.createElement("ul"),this.domVerts.innerHTML=(0,$l7y1s.default)("meshNbVertices"),this.domFaces=document.createElement("ul"),this.domFaces.innerHTML=(0,$l7y1s.default)("meshNbFaces"),this.domUl=document.createElement("span"),this.domUl.appendChild(this.domVerts),this.domUl.appendChild(this.domFaces);var t=this.domUl.style;t.cursor="default",void 0===t.float?t.cssFloat="right":t.float="right",e.domTopbar.appendChild(this.domUl)}updateMeshInfo(){var e=this._main.getMesh();this.domVerts.innerHTML=(0,$l7y1s.default)("meshNbVertices")+(e?e.getNbVertices():0),this.domFaces.innerHTML=(0,$l7y1s.default)("meshNbFaces")+(e?e.getNbFaces():0)}}var $adcfdceb4bbf6c19$export$2e2bcd8739ae039=$adcfdceb4bbf6c19$var$GuiMesh,$l7y1s=parcelRequire("l7y1s"),$jLaD3=parcelRequire("jLaD3");class $bdd47958a7a24562$var$MeshResolution extends $21255fc29769c8d7$export$2e2bcd8739ae039{constructor(e,t){super(),this.setID(e.getID()),this.setMeshData(t?e.getMeshData():$67e58e7d9ba114ff$export$2e2bcd8739ae039()),this.setRenderData(e.getRenderData()),this.setTransformData(e.getTransformData()),this._detailsXYZ=null,this._detailsRGB=null,this._detailsPBR=null,this._vertMapping=null,this._evenMapping=!1}optimize(){}getEvenMapping(){return this._evenMapping}getVerticesMapping(){return this._vertMapping}setVerticesMapping(e){this._vertMapping=e}setEvenMapping(e){this._evenMapping=e}higherSynthesis(e){e.computePartialSubdivision(this.getVertices(),this.getColors(),this.getMaterials(),this.getNbVertices()),this.applyDetails()}lowerAnalysis(e){this.copyDataFromHigherRes(e);var t=e.getNbVertices(),r=new Float32Array(3*t),i=new Float32Array(3*t),a=new Float32Array(3*t);this.computePartialSubdivision(r,i,a,t),e.computeDetails(r,i,a,t)}copyDataFromHigherRes(e){var t=this.getVertices(),r=this.getColors(),i=this.getMaterials(),a=this.getNbVertices(),s=e.getVertices(),n=e.getColors(),o=e.getMaterials();if(!1===this.getEvenMapping())t.set(s.subarray(0,3*a)),r.set(n.subarray(0,3*a)),i.set(o.subarray(0,3*a));else for(var l=this.getVerticesMapping(),u=0;u<a;++u){var h=3*u,c=3*l[u];t[h]=s[c],t[h+1]=s[c+1],t[h+2]=s[c+2],r[h]=n[c],r[h+1]=n[c+1],r[h+2]=n[c+2],i[h]=o[c],i[h+1]=o[c+1],i[h+2]=o[c+2]}}computePartialSubdivision(e,t,r,i){var a=this.getVerticesMapping();if(!a){$58f48ae8f3043d67$export$2e2bcd8739ae039.partialSubdivision(this,e,t,r);return}var s=new Float32Array(3*i),n=new Float32Array(3*i),o=new Float32Array(3*i);$58f48ae8f3043d67$export$2e2bcd8739ae039.partialSubdivision(this,s,n,o);var l=!0===this.getEvenMapping()?0:this.getNbVertices();l>0&&(e.set(s.subarray(0,3*l)),t.set(n.subarray(0,3*l)),r.set(o.subarray(0,3*l)));for(var u=l;u<i;++u){var h=3*u,c=3*a[u];e[c]=s[h],e[c+1]=s[h+1],e[c+2]=s[h+2],t[c]=n[h],t[c+1]=n[h+1],t[c+2]=n[h+2],r[c]=o[h],r[c+1]=o[h+1],r[c+2]=o[h+2]}}applyDetails(){var e=this.getVerticesRingVertStartCount(),t=this.getVerticesRingVert(),r=this.getVertices(),i=this.getNormals(),a=this.getColors(),s=this.getMaterials(),n=this.getNbVertices(),o=new Float32Array((0,$jLaD3.default).getMemory(12*n),0,3*n);o.set(r.subarray(0,3*n));for(var l=this._detailsXYZ,u=this._detailsRGB,h=this._detailsPBR,c=Math.min,d=Math.max,g=0;g<n;++g){var p=3*g;a[p]=c(1,d(0,a[p]+u[p])),a[p+1]=c(1,d(0,a[p+1]+u[p+1])),a[p+2]=c(1,d(0,a[p+2]+u[p+2])),s[p]=c(1,d(0,s[p]+h[p])),s[p+1]=c(1,d(0,s[p+1]+h[p+1])),s[p+2]=c(1,d(0,s[p+2]+h[p+2]));var m=o[p],f=o[p+1],_=o[p+2],v=i[p],T=i[p+1],M=i[p+2],y=v*v+T*T+M*M;if(0!==y){v*=y=1/Math.sqrt(y),T*=y,M*=y;var b=3*t[e[2*g]],A=o[b]-m,S=o[b+1]-f,x=o[b+2]-_;if(y=A*v+S*T+x*M,A-=v*y,S-=T*y,x-=M*y,0!=(y=A*A+S*S+x*x)){y=1/Math.sqrt(y),A*=y,S*=y,x*=y;var R=T*x-M*S,E=M*A-v*x,C=v*S-T*A,w=l[p],F=l[p+1],I=l[p+2];r[p]=m+v*w+A*F+R*I,r[p+1]=f+T*w+S*F+E*I,r[p+2]=_+M*w+x*F+C*I}}}}computeDetails(e,t,r,i){for(var a=this.getVerticesRingVertStartCount(),s=this.getVerticesRingVert(),n=this.getVertices(),o=this.getNormals(),l=this.getColors(),u=this.getMaterials(),h=this.getNbVertices(),c=this._detailsXYZ=new Float32Array(3*i),d=this._detailsRGB=new Float32Array(3*i),g=this._detailsPBR=new Float32Array(3*i),p=0;p<h;++p){var m=3*p;d[m]=l[m]-t[m],d[m+1]=l[m+1]-t[m+1],d[m+2]=l[m+2]-t[m+2],g[m]=u[m]-r[m],g[m+1]=u[m+1]-r[m+1],g[m+2]=u[m+2]-r[m+2];var f=o[m],_=o[m+1],v=o[m+2],T=f*f+_*_+v*v;if(0!==T){f*=T=1/Math.sqrt(T),_*=T,v*=T;var M=3*s[a[2*p]],y=e[M]-e[m],b=e[M+1]-e[m+1],A=e[M+2]-e[m+2];if(T=y*f+b*_+A*v,y-=f*T,b-=_*T,A-=v*T,0!=(T=y*y+b*b+A*A)){T=1/Math.sqrt(T),y*=T,b*=T,A*=T;var S=_*A-v*b,x=v*y-f*A,R=f*b-_*y,E=n[m]-e[m],C=n[m+1]-e[m+1],w=n[m+2]-e[m+2];c[m]=f*E+_*C+v*w,c[m+1]=y*E+b*C+A*w,c[m+2]=S*E+x*C+R*w}}}}}var $bdd47958a7a24562$export$2e2bcd8739ae039=$bdd47958a7a24562$var$MeshResolution,$jLaD3=parcelRequire("jLaD3"),$222886be2dfde57d$var$Reversion={},$222886be2dfde57d$var$detectExtraordinaryVertices=function(e){for(var t=e.getNbVertices(),r=e.getFaces(),i=e.getVerticesOnEdge(),a=e.getVerticesRingVertStartCount(),s=e.getVerticesRingFace(),n=e.getVerticesRingFaceStartCount(),o=new Int8Array(t),l=0;l<t;++l){for(var u=2*l,h=a[u+1],c=n[u],d=n[u+1],g=i[l],p=0,m=c,f=c+d;m<f;++m)p+=r[4*s[m]+3]===$jLaD3.default.TRI_INDEX?0:1;0===p?(!g&&6!==h||g&&4!==h)&&(o[l]=1):p===d?(!g&&4!==h||g&&3!==h)&&(o[l]=1):(g||5!==h)&&(o[l]=1)}return o},$222886be2dfde57d$var$getSeed=function(e,t,r){var i=0,a=e.getNbVertices();for(i=0;i<a;++i)if(0===t[i]&&1===r[i])return i;var s=e.getVerticesOnEdge();for(i=0;i<a&&(0!==t[i]||1===s[i]);++i);if(i===a)return -1;for(i=0;i<a;++i)if(0===t[i])return i;return -1},$222886be2dfde57d$var$tagVertices=function(e,t,r){var i=++$jLaD3.default.TAG_FLAG,a=e.getVerticesTagFlags(),s=e.getVerticesRingVertStartCount(),n=e.getVerticesRingVert(),o=e.getVerticesOnEdge(),l=$222886be2dfde57d$var$getSeed(e,r,t);if(l<0)return!1;r[l]=1;var u=new Uint32Array((0,$jLaD3.default).getMemory(4*e.getNbVertices()),0,e.getNbVertices());u[0]=l;for(var h=1;h>0;){var c=u[--h],d=s[2*c],g=d+s[2*c+1],p=0,m=++i;for(p=d;p<g;++p){var f=n[p];if(a[f]=m,1===r[f])return $jLaD3.default.TAG_FLAG=i,!1;r[f]=-1,a[f]=m}for(m=++i,p=d;p<g;++p){var _=n[p];if(0!==t[_]&&!o[_])return $jLaD3.default.TAG_FLAG=i,!1;for(var v=s[2*_],T=v+s[2*_+1],M=v;M<T;++M){var y=n[M];if(y!==c&&!(a[y]>=m-1)&&(a[y]=m,0===r[y])){for(var b=s[2*y],A=b+s[2*y+1],S=0,x=b;x<A;++x)a[n[x]]===m-1&&S++;2===S?r[y]=-1:(r[y]=1,u[h++]=y)}}}}return $jLaD3.default.TAG_FLAG=i,!0},$222886be2dfde57d$var$tagEvenVertices=function(e,t){for(var r=e.getNbVertices(),i=$222886be2dfde57d$var$detectExtraordinaryVertices(e),a=!0;a;){if(!$222886be2dfde57d$var$tagVertices(e,i,t))return!1;a=!1;for(var s=0;s<r;++s)if(0===t[s]){a=!0;break}}return!0},$222886be2dfde57d$var$createFaces=function(e,t,r,i){var a=e.getFaceEdges(),s=e.getFaces(),n=new Int32Array(e.getNbEdges()),o=0,l=e.getNbFaces(),u=0,h=new Uint32Array(e.getNbVertices()),c=new Uint32Array(l);for(o=0;o<l;++o)c[o]=$jLaD3.default.TRI_INDEX;for(o=0;o<l;++o){var d=4*o,g=s[d],p=s[d+1],m=s[d+2],f=s[d+3],_=r[g],v=r[p],T=r[m];if(f===$jLaD3.default.TRI_INDEX){if(_+v+T===-3){i[u++]=o;continue}1===_?n[a[d+1]]=g+1:1===v?n[a[d+2]]=p+1:1===T&&(n[a[d]]=m+1);continue}var M=0,y=0,b=0;1===_?(M=g,y=m,b=n[a[d+1]]-1,n[a[d+2]]=g+1):1===v?(M=p,y=f,b=n[a[d+2]]-1,n[a[d+3]]=p+1):1===T?(M=m,y=g,b=n[a[d+3]]-1,n[a[d]]=m+1):(M=f,y=p,b=n[a[d]]-1,n[a[d+1]]=f+1);var A=h[y]-1;if(A<0){i[u]=-y-1,c[4*u+3]=M,h[y]=++u;continue}var S=4*A;b<0?c[S+2]>=$jLaD3.default.TRI_INDEX-1?(c[S+2]=M,c[S]=$jLaD3.default.TRI_INDEX-1):c[S]===$jLaD3.default.TRI_INDEX?c[S+1]=M:(c[S+1]=c[S+2],c[S+2]=M):c[S+1]===b?c[S]=M:(c[S]=c[S+1],c[S+2]===b?c[S+1]=M:(c[S+1]=c[S+2],c[S+2]=M))}for(l/=4,o=0;o<l;++o){var x=i[o],R=4*o;if(x<0){var E=$jLaD3.default.TRI_INDEX-1;if(c[R]>=E||c[R+1]>=$jLaD3.default.TRI_INDEX||c[R+2]>=$jLaD3.default.TRI_INDEX)return!1;continue}var C=4*x;c[R]=n[a[C]]-1,c[R+1]=n[a[C+1]]-1,c[R+2]=n[a[C+2]]-1}return t.setFaces(c),!0},$222886be2dfde57d$var$createVertices=function(e,t,r){var i=0,a=new Uint32Array(e.getNbVertices());t.setVerticesMapping(a);var s=t.getFaces(),n=new Int32Array(e.getNbVertices()),o=0,l=4*t.getNbFaces();for(o=0;o<l;++o){var u=s[o];if(u!==$jLaD3.default.TRI_INDEX){var h=n[u]-1;-1===h&&(h=i++,n[u]=h+1,a[h]=u),s[o]=h}}t.setVertices(new Float32Array(3*i));var c=e.getFaces(),d=e.getVerticesRingFace(),g=e.getVerticesRingFaceStartCount(),p=new Uint8Array(e.getNbVertices());for(l/=4,o=0;o<l;++o){var m,f,_,v,T,M,y,b,A,S,x=r[o];if(x>=0){var R=4*x;m=c[R+1],f=c[R+2],_=c[R],v=$jLaD3.default.TRI_INDEX,T=$jLaD3.default.TRI_INDEX}else{T=-x-1;for(var E=4*o,C=a[s[E]],w=a[s[E+1]],F=a[s[E+2]],I=a[s[E+3]],D=g[2*T],V=D+4,N=D;N<V;++N){var k=4*d[N],P=c[k],L=c[k+1],U=c[k+2],B=c[k+3];P===C?m=L:L===C?m=U:U===C?m=B:B===C&&(m=P),P===w?f=L:L===w?f=U:U===w?f=B:B===w&&(f=P),P===F?_=L:L===F?_=U:U===F?_=B:B===F&&(_=P),P===I?v=L:L===I?v=U:U===I?v=B:B===I&&(v=P)}}M=p[m],y=p[f],b=p[_],A=v!==$jLaD3.default.TRI_INDEX?p[v]:-1,S=T!==$jLaD3.default.TRI_INDEX?p[T]:-1,0===M&&(p[m]=1,a[i++]=m),0===y&&(p[f]=1,a[i++]=f),0===b&&(p[_]=1,a[i++]=_),0===A&&(p[v]=1,a[i++]=v),0===S&&(p[T]=1,a[i++]=T)}},$222886be2dfde57d$var$copyVerticesData=function(e,t){var r=e.getVertices(),i=e.getColors(),a=e.getMaterials(),s=t.getVertices(),n=new Float32Array(s.length),o=new Float32Array(s.length);t.setColors(n),t.setMaterials(o);var l=t.getVerticesMapping(),u=0,h=t.getNbVertices();for(u=0;u<h&&!(l[u]>=h);++u);if(u===h){var c=t.getFaces(),d=c.length;for(u=0;u<d;++u){var g=c[u];g!==$jLaD3.default.TRI_INDEX&&(c[u]=l[g])}for(u=0;u<h;++u)l[u]=u;s.set(r.subarray(0,3*h)),n.set(i.subarray(0,3*h)),o.set(a.subarray(0,3*h))}else for(t.setEvenMapping(!0),u=0;u<h;++u){var p=3*u,m=3*l[u];s[p]=r[m],s[p+1]=r[m+1],s[p+2]=r[m+2],n[p]=i[m],n[p+1]=i[m+1],n[p+2]=i[m+2],o[p]=a[m],o[p+1]=a[m+1],o[p+2]=a[m+2]}},$222886be2dfde57d$var$computeFaceTexCoords=function(e,t,r,i){for(var a=e.getFaces(),s=e.getFacesTexCoord(),n=e.getVerticesRingFaceStartCount(),o=e.getVerticesRingFace(),l=e.getVerticesDuplicateStartCount(),u=t.getFaces(),h=new Uint32Array(u),c=t.getVerticesMapping(),d=0,g=u.length;d<g;++d){var p=u[d];if(p!==$jLaD3.default.TRI_INDEX){var m=c[p];if(0!==l[2*m]){var f=d%4,_=r[(d-f)/4],v=$jLaD3.default.TRI_INDEX;if(_>=0){var T,M,y=4*_;0===f?(T=a[y+1],M=a[y]):1===f?(T=a[y+2],M=a[y+1]):(T=a[y],M=a[y+2]);for(var b=n[2*m],A=b+n[2*m+1],S=b;S<A;++S){var x=4*o[S],R=a[x],E=a[x+1],C=a[x+2];if(R===T?E===M&&(v=s[x+2]):E===T?C===M&&(v=s[x]):C===T&&R===M&&(v=s[x+1]),v!==$jLaD3.default.TRI_INDEX)break}}else for(var w=n[2*(_=-_-1)],F=w+4,I=w;I<F;++I){var D=4*o[I];if(a[D]===m?v=s[D]:a[D+1]===m?v=s[D+1]:a[D+2]===m?v=s[D+2]:a[D+3]===m&&(v=s[D+3]),v!==$jLaD3.default.TRI_INDEX)break}h[d]=v===m?v:v-i[p]}}}t.setFacesTexCoord(h)},$222886be2dfde57d$var$computeTexCoords=function(e,t,r){for(var i=e.getVerticesDuplicateStartCount(),a=t.getNbVertices(),s=new Uint32Array(2*a),n=t.getVerticesMapping(),o=e.getTexCoords(),l=new Float32Array((0,$jLaD3.default).getMemory(8*e.getNbTexCoords()),0,2*e.getNbTexCoords()),u=new Uint32Array(a),h=a,c=0;c<a;++c){var d=n[c],g=i[2*d];if(l[2*c]=o[2*d],l[2*c+1]=o[2*d+1],0!==g){for(var p=u[c]=g-h,m=i[2*d+1],f=h,_=h+m;f<_;++f)l[2*f]=o[(p+f)*2],l[2*f+1]=o[(p+f)*2+1];s[2*c]=h,s[2*c+1]=m,h+=m}}t.setTexCoords(new Float32Array(l.subarray(0,2*h))),t.setVerticesDuplicateStartCount(s),$222886be2dfde57d$var$computeFaceTexCoords(e,t,r,u)};$222886be2dfde57d$var$Reversion.computeReverse=function(e,t){var r=e.getNbFaces();if(r%4!=0)return!1;var i=new Int8Array(e.getNbVertices());if(!$222886be2dfde57d$var$tagEvenVertices(e,i))return!1;var a=new Int32Array(r/4);return!!$222886be2dfde57d$var$createFaces(e,t,i,a)&&($222886be2dfde57d$var$createVertices(e,t,a),$222886be2dfde57d$var$copyVerticesData(e,t),e.hasUV()&&$222886be2dfde57d$var$computeTexCoords(e,t,a),t.allocateArrays(),!0)};var $222886be2dfde57d$export$2e2bcd8739ae039=$222886be2dfde57d$var$Reversion;class $f92bc4b1f228ab12$var$Multimesh extends $21255fc29769c8d7$export$2e2bcd8739ae039{static get NONE(){return 0}static get SCULPT(){return 1}static get CAMERA(){return 2}static get PICKING(){return 3}constructor(e){super(),this.setID(e.getID()),this.setRenderData(e.getRenderData()),this.setTransformData(e.getTransformData()),this._meshes=[new $bdd47958a7a24562$export$2e2bcd8739ae039(e,!0)],this.setSelection(0);var t=e.getGL();this._indexBuffer=new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(t,t.ELEMENT_ARRAY_BUFFER,t.STATIC_DRAW),this._wireframeBuffer=new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(t,t.ELEMENT_ARRAY_BUFFER,t.STATIC_DRAW)}getCurrentMesh(){return this._meshes[this._sel]}setSelection(e){this._sel=e,this.setMeshData(this.getCurrentMesh().getMeshData())}addLevel(){if(this._meshes.length-1!==this._sel)return this.getCurrentMesh();var e=this.getCurrentMesh().getNbFaces(),t="addLevel : "+e+" -> "+4*e;console.time(t);var r=this.getCurrentMesh(),i=new $bdd47958a7a24562$export$2e2bcd8739ae039(r);return r.setVerticesMapping(void 0),$58f48ae8f3043d67$export$2e2bcd8739ae039.fullSubdivision(r,i),i.initTopology(),this.pushMesh(i),this.initRender(),console.timeEnd(t),i}computeReverse(){if(0!==this._sel)return this.getCurrentMesh();var e=this.getCurrentMesh(),t=new $bdd47958a7a24562$export$2e2bcd8739ae039(e);if($222886be2dfde57d$export$2e2bcd8739ae039.computeReverse(e,t))return t.initTopology(),this.unshiftMesh(t),this.initRender(),t}lowerLevel(){return 0===this._sel?this._meshes[0]:(this._meshes[this._sel-1].lowerAnalysis(this.getCurrentMesh()),this.setSelection(this._sel-1),this.updateResolution(),this.getCurrentMesh())}higherLevel(){return this._sel===this._meshes.length-1||(this._meshes[this._sel+1].higherSynthesis(this.getCurrentMesh()),this.setSelection(this._sel+1),this.updateResolution()),this.getCurrentMesh()}updateResolution(){this.updateGeometry(),this.updateDuplicateColorsAndMaterials(),this.updateBuffers();var e=this._meshes[this.getLowIndexRender()];this._indexBuffer.update(e.getTriangles()),this._wireframeBuffer.update(e.getWireframe())}selectResolution(e){for(;this._sel>e;)this.lowerLevel();for(;this._sel<e;)this.higherLevel()}findIndexFromMesh(e){for(var t=this._meshes,r=0,i=t.length;r<i;++r)if(e===t[r])return r}selectMesh(e){var t=this.findIndexFromMesh(e);this.selectResolution(t)}pushMesh(e){this._meshes.push(e),this.setSelection(this._meshes.length-1),this.updateResolution()}unshiftMesh(e){this._meshes.unshift(e),this.setSelection(1),this.lowerLevel()}popMesh(){this._meshes.pop(),this.setSelection(this._meshes.length-1),this.updateResolution()}shiftMesh(){this._meshes.shift(),this.setSelection(0),this.updateResolution()}deleteLower(){this._meshes.splice(0,this._sel),this.setSelection(0)}deleteHigher(){this._meshes.splice(this._sel+1)}getLowIndexRender(){for(var e=5e5,t=this._sel;t>=0;){var r=this._meshes[t];if(!0===r.getEvenMapping())return t===this._sel?t:t+1;if(r.getNbTriangles()<e)return t;--t}return 0}_renderLow(e){var t=this.getRenderData(),r=this._sel,i=this.getIndexBuffer();this.setSelection(this.getLowIndexRender()),t._indexBuffer=this._indexBuffer,super.render(e),t._indexBuffer=i,this.setSelection(r)}_renderWireframeLow(e){var t=this.getRenderData(),r=this._sel,i=this.getWireframeBuffer();this.setSelection(this.getLowIndexRender()),t._wireframeBuffer=this._wireframeBuffer,super.renderWireframe(e),t._wireframeBuffer=i,this.setSelection(r)}_canUseLowRender(e){return!(this.isUsingTexCoords()||this.isUsingDrawArrays())&&$f92bc4b1f228ab12$var$Multimesh.RENDER_HINT!==$f92bc4b1f228ab12$var$Multimesh.PICKING&&$f92bc4b1f228ab12$var$Multimesh.RENDER_HINT!==$f92bc4b1f228ab12$var$Multimesh.NONE&&(e.getMesh()!==this||$f92bc4b1f228ab12$var$Multimesh.RENDER_HINT===$f92bc4b1f228ab12$var$Multimesh.CAMERA)&&this.getLowIndexRender()!==this._sel}render(e){return this._canUseLowRender(e)?this._renderLow(e):super.render(e)}renderWireframe(e){return this._canUseLowRender(e)?this._renderWireframeLow(e):super.renderWireframe(e)}}$f92bc4b1f228ab12$var$Multimesh.RENDER_HINT=0;var $f92bc4b1f228ab12$export$2e2bcd8739ae039=$f92bc4b1f228ab12$var$Multimesh,$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3"),$eIStk=parcelRequire("eIStk"),$jLaD3=parcelRequire("jLaD3"),$bSIL4=parcelRequire("bSIL4"),$ccc9220a4f6bdc7d$var$SubData={_mesh:null,_linear:!1,_verticesMap:new Map,_states:null,_center:[0,0,0],_radius2:0,_edgeMax2:0},$ccc9220a4f6bdc7d$var$fillTriangle=function(e,t,r,i,a){var s=$ccc9220a4f6bdc7d$var$SubData._mesh,n=s.getVerticesRingVert(),o=s.getVerticesRingFace(),l=s.getFacePosInLeaf(),u=s.getFaceLeaf(),h=s.getFacesStateFlags(),c=s.getFaces(),d=4*e;c[d]=t,c[d+1]=a,c[d+2]=i,c[d+3]=$jLaD3.default.TRI_INDEX;var g=u[e],p=g._iFaces;n[a].push(i),n[i].push(a);var m=s.getNbTriangles();o[a].push(e,m),c[d=4*m]=a,c[d+1]=r,c[d+2]=i,c[d+3]=$jLaD3.default.TRI_INDEX,h[m]=$jLaD3.default.STATE_FLAG,u[m]=g,l[m]=p.length,o[i].push(m),(0,$jLaD3.default).replaceElement(o[r],e,m),p.push(m),s.addNbFace(1)},$ccc9220a4f6bdc7d$var$fillTriangles=function(e){for(var t=$ccc9220a4f6bdc7d$var$SubData._mesh,r=t.getVerticesRingVert(),i=t.getFaces(),a=e.length,s=new Uint32Array((0,$jLaD3.default).getMemory(8*a),0,2*a),n=0,o=$ccc9220a4f6bdc7d$var$SubData._verticesMap,l=0;l<a;++l){var u=e[l],h=4*u,c=i[h],d=i[h+1],g=i[h+2],p=o.get(Math.min(c,d)+"+"+Math.max(c,d)),m=o.get(Math.min(d,g)+"+"+Math.max(d,g)),f=o.get(Math.min(c,g)+"+"+Math.max(c,g)),_=r[c].length,v=r[d].length,T=r[g].length,M=0;if(p?M=m?f?_<v&&_<T?2:v<T?3:1:_<T?2:1:f&&v<T?3:1:m?M=f&&v<_?3:2:f&&(M=3),1===M)$ccc9220a4f6bdc7d$var$fillTriangle(u,c,d,g,p);else if(2===M)$ccc9220a4f6bdc7d$var$fillTriangle(u,d,g,c,m);else{if(3!==M)continue;$ccc9220a4f6bdc7d$var$fillTriangle(u,g,c,d,f)}s[n++]=u,s[n++]=t.getNbTriangles()-1}return new Uint32Array(s.subarray(0,n))},$ccc9220a4f6bdc7d$var$halfEdgeSplit=function(e,t,r,i){var a=$ccc9220a4f6bdc7d$var$SubData._mesh,s=a.getVertices(),n=a.getNormals(),o=a.getColors(),l=a.getMaterials(),u=a.getFaces(),h=a.getFacePosInLeaf(),c=a.getFaceLeaf(),d=a.getVerticesRingVert(),g=a.getVerticesRingFace(),p=a.getFacesStateFlags(),m=a.getVerticesStateFlags(),f=$ccc9220a4f6bdc7d$var$SubData._verticesMap,_=Math.min(t,r)+"+"+Math.max(t,r),v=!1,T=f.get(_);void 0===T&&(T=a.getNbVertices(),v=!0,f.set(_,T)),d[i].push(T);var M=4*e;u[M]=t,u[M+1]=T,u[M+2]=i,u[M+3]=$jLaD3.default.TRI_INDEX;var y=a.getNbTriangles();u[M=4*y]=T,u[M+1]=r,u[M+2]=i,u[M+3]=$jLaD3.default.TRI_INDEX,p[y]=$jLaD3.default.STATE_FLAG,g[i].push(y),(0,$jLaD3.default).replaceElement(g[r],e,y);var b=c[e],A=b._iFaces;if(c[y]=b,h[y]=A.length,A.push(y),!v){d[T].push(i),g[T].push(e,y),a.addNbFace(1);return}var S=3*t,x=s[S],R=s[S+1],E=s[S+2],C=n[S],w=n[S+1],F=n[S+2],I=3*r,D=s[I],V=s[I+1],N=s[I+2],k=n[I],P=n[I+1],L=n[I+2],U=C+k,B=w+P,O=F+L;if(n[M=3*T]=.5*U,n[M+1]=.5*B,n[M+2]=.5*O,o[M]=(o[S]+o[I])*.5,o[M+1]=(o[S+1]+o[I+1])*.5,o[M+2]=(o[S+2]+o[I+2])*.5,l[M]=(l[S]+l[I])*.5,l[M+1]=(l[S+1]+l[I+1])*.5,l[M+2]=(l[S+2]+l[I+2])*.5,$ccc9220a4f6bdc7d$var$SubData._linear)s[M]=(x+D)*.5,s[M+1]=(R+V)*.5,s[M+2]=(E+N)*.5;else{var G=C*C+w*w+F*F;0===G?C=1:(C*=G=1/Math.sqrt(G),w*=G,F*=G),0==(G=k*k+P*P+L*L)?k=1:(k*=G=1/Math.sqrt(G),P*=G,L*=G);var z=C*k+w*P+F*L,X=0,W=x-D,Y=R-V,H=E-N,j=.12*(X=z<=-1?Math.PI:z>=1?0:Math.acos(z));j*=Math.sqrt(W*W+Y*Y+H*H),(G=U*U+B*B+O*O)>0&&(j/=Math.sqrt(G)),W*(C-k)+Y*(w-P)+H*(F-L)<0&&(j=-j),s[M]=(x+D)*.5+U*j,s[M+1]=(R+V)*.5+B*j,s[M+2]=(E+N)*.5+O*j}m[T]=$jLaD3.default.STATE_FLAG,d[T]=[t,r,i],g[T]=[e,y],(0,$jLaD3.default).replaceElement(d[t],r,T),(0,$jLaD3.default).replaceElement(d[r],t,T),a.addNbVertice(1),a.addNbFace(1)},$ccc9220a4f6bdc7d$var$findSplit=function(){var e=[0,0,0],t=[0,0,0],r=[0,0,0],i=$bSIL4.default.triangleInsideSphere,a=$bSIL4.default.pointInsideTriangle;return function(s,n){var o=$ccc9220a4f6bdc7d$var$SubData._mesh,l=o.getVertices(),u=o.getFaces(),h=4*s,c=3*u[h],d=3*u[h+1],g=3*u[h+2];if(e[0]=l[c],e[1]=l[c+1],e[2]=l[c+2],t[0]=l[d],t[1]=l[d+1],t[2]=l[d+2],r[0]=l[g],r[1]=l[g+1],r[2]=l[g+2],n&&!i($ccc9220a4f6bdc7d$var$SubData._center,$ccc9220a4f6bdc7d$var$SubData._radius2,e,t,r)&&!a($ccc9220a4f6bdc7d$var$SubData._center,e,t,r))return 0;var p=o.getMaterials(),m=p[c+2],f=p[d+2],_=p[g+2],v=$eIStk.sqrDist(e,t),T=$eIStk.sqrDist(t,r),M=$eIStk.sqrDist(e,r);return v>T&&v>M?(m+f)*.5*v>$ccc9220a4f6bdc7d$var$SubData._edgeMax2?1:0:T>M?(f+_)*.5*T>$ccc9220a4f6bdc7d$var$SubData._edgeMax2?2:0:(m+_)*.5*M>$ccc9220a4f6bdc7d$var$SubData._edgeMax2?3:0}}(),$ccc9220a4f6bdc7d$var$subdivideTriangles=function(e,t){for(var r=$ccc9220a4f6bdc7d$var$SubData._mesh.getFaces(),i=e.length,a=0;a<i;++a){var s=e[a],n=t[a];0===n&&(n=$ccc9220a4f6bdc7d$var$findSplit(s));var o=4*s;1===n?$ccc9220a4f6bdc7d$var$halfEdgeSplit(s,r[o],r[o+1],r[o+2]):2===n?$ccc9220a4f6bdc7d$var$halfEdgeSplit(s,r[o+1],r[o+2],r[o]):3===n&&$ccc9220a4f6bdc7d$var$halfEdgeSplit(s,r[o+2],r[o],r[o+1])}},$ccc9220a4f6bdc7d$var$initSplit=function(e){for(var t=e.length,r=(0,$jLaD3.default).getMemory(5*t),i=new Uint32Array(r,0,t),a=new Uint8Array(r,4*t,t),s=0,n=0;n<t;++n){var o=e[n],l=$ccc9220a4f6bdc7d$var$findSplit(o,!0);0!==l&&(a[s]=l,i[s++]=o)}return[new Uint32Array(i.subarray(0,s)),new Uint8Array(a.subarray(0,s))]},$ccc9220a4f6bdc7d$var$subdivide=function(e){var t=$ccc9220a4f6bdc7d$var$SubData._mesh,r=t.getNbVertices(),i=t.getNbTriangles();$ccc9220a4f6bdc7d$var$SubData._verticesMap=new Map;var a=$ccc9220a4f6bdc7d$var$initSplit(e),s=a[0],n=a[1];s.length>5&&(n=new Uint8Array((s=t.expandsFaces(s,3)).length)).set(a[1]),$ccc9220a4f6bdc7d$var$SubData._states.pushVertices(t.getVerticesFromFaces(s)),$ccc9220a4f6bdc7d$var$SubData._states.pushFaces(s),t.reAllocateArrays(n.length),$ccc9220a4f6bdc7d$var$subdivideTriangles(s,n);var o=0,l=t.getNbTriangles()-i,u=new Uint32Array(l);for(o=0;o<l;++o)u[o]=i+o;s=(u=t.expandsFaces(u,1)).subarray(l),$ccc9220a4f6bdc7d$var$SubData._states.pushVertices(t.getVerticesFromFaces(s)),$ccc9220a4f6bdc7d$var$SubData._states.pushFaces(s);var h=e,c=e.length;(e=new Uint32Array(c+u.length)).set(h),e.set(u,c);var d=t.getFacesTagFlags(),g=e.length,p=new Uint32Array((0,$jLaD3.default).getMemory(4*g),0,g),m=0,f=++$jLaD3.default.TAG_FLAG;for(o=0;o<g;++o){var _=e[o];d[_]!==f&&(d[_]=f,p[m++]=_)}p=new Uint32Array(p.subarray(0,m));for(var v=t.getNbTriangles();u.length>0;)t.reAllocateArrays(u.length),u=$ccc9220a4f6bdc7d$var$fillTriangles(u);for(l=t.getNbTriangles()-v,h=p,(p=new Uint32Array(m+l)).set(h),o=0;o<l;++o)p[m+o]=v+o;var T=t.getNbVertices()-r,M=new Uint32Array(T);for(o=0;o<T;++o)M[o]=r+o;if(M=t.expandsVertices(M,1),!$ccc9220a4f6bdc7d$var$SubData._linear){var y=M.subarray(T),b=new $fc2de5f83d9fa7b6$export$2e2bcd8739ae039;b.setToolMesh(t),b.smoothTangent(y,1)}var A=t.getVertices(),S=t.getVerticesSculptFlags(),x=$ccc9220a4f6bdc7d$var$SubData._center,R=x[0],E=x[1],C=x[2],w=$jLaD3.default.SCULPT_FLAG;for(o=0,T=M.length;o<T;++o){var F=M[o],I=3*F,D=A[I]-R,V=A[I+1]-E,N=A[I+2]-C;S[F]=D*D+V*V+N*N<$ccc9220a4f6bdc7d$var$SubData._radius2?w:w-1}return p},$ccc9220a4f6bdc7d$var$Subdivision={};$ccc9220a4f6bdc7d$var$Subdivision.subdivision=function(e,t,r,i,a,s,n){$ccc9220a4f6bdc7d$var$SubData._mesh=e,$ccc9220a4f6bdc7d$var$SubData._linear=n,$eIStk.copy($ccc9220a4f6bdc7d$var$SubData._center,r),$ccc9220a4f6bdc7d$var$SubData._radius2=i,$ccc9220a4f6bdc7d$var$SubData._edgeMax2=a,$ccc9220a4f6bdc7d$var$SubData._states=s;for(var o=0;o!==e.getNbTriangles();)o=e.getNbTriangles(),t=$ccc9220a4f6bdc7d$var$subdivide(t);return t};var $ccc9220a4f6bdc7d$export$2e2bcd8739ae039=$ccc9220a4f6bdc7d$var$Subdivision,$jLaD3=parcelRequire("jLaD3"),$309afcbef0af9316$var$DecData={_mesh:null,_states:null,_iTrisToDelete:[],_iVertsToDelete:[],_iVertsDecimated:[]},$309afcbef0af9316$var$sortFunc=function(e,t){return e-t},$309afcbef0af9316$var$getValidModifiedTriangles=function(e,t){var r=$309afcbef0af9316$var$DecData._mesh,i=r.getFacesTagFlags(),a=r.getNbTriangles(),s=r.getFacesFromVertices(e),n=t,o=t.length;(t=new Uint32Array(o+s.length)).set(n),t.set(s,o);var l=++$jLaD3.default.TAG_FLAG;o=t.length;for(var u=new Uint32Array((0,$jLaD3.default).getMemory(4*o),0,o),h=0,c=0;c<o;++c){var d=t[c];d>=a||i[d]===l||(i[d]=l,u[h++]=d)}return new Uint32Array(u.subarray(0,h))},$309afcbef0af9316$var$getValidModifiedVertices=function(){for(var e=$309afcbef0af9316$var$DecData._mesh,t=e.getVerticesTagFlags(),r=e.getNbVertices(),i=++$jLaD3.default.TAG_FLAG,a=$309afcbef0af9316$var$DecData._iVertsDecimated,s=a.length,n=new Uint32Array((0,$jLaD3.default).getMemory(4*s),0,s),o=0,l=0;l<s;++l){var u=a[l];u>=r||t[u]===i||(t[u]=i,n[o++]=u)}return new Uint32Array(n.subarray(0,o))},$309afcbef0af9316$var$deleteTriangle=function(e){var t=$309afcbef0af9316$var$DecData._mesh,r=t.getVerticesRingFace(),i=t.getFacesTagFlags(),a=t.getFaces(),s=t.getFacePosInLeaf(),n=t.getFaceLeaf(),o=t.getFacesStateFlags(),l=s[e],u=n[e]._iFaces,h=u[u.length-1];e!==h&&(u[l]=h,s[h]=l),u.pop();var c=t.getNbTriangles()-1;if(c===e){t.addNbFace(-1);return}var d=4*c,g=a[d],p=a[d+1],m=a[d+2];$309afcbef0af9316$var$DecData._states.pushVertices([g,p,m]),$309afcbef0af9316$var$DecData._states.pushFaces([c]),(0,$jLaD3.default).replaceElement(r[g],c,e),(0,$jLaD3.default).replaceElement(r[p],c,e),(0,$jLaD3.default).replaceElement(r[m],c,e);var f=n[c],_=s[c];f._iFaces[_]=e,n[e]=f,s[e]=_,i[e]=i[c],o[e]=o[c],a[e*=4]=g,a[e+1]=p,a[e+2]=m,a[e+3]=$jLaD3.default.TRI_INDEX,$309afcbef0af9316$var$DecData._iVertsDecimated.push(g,p,m),t.addNbFace(-1)},$309afcbef0af9316$var$deleteVertex=function(e){var t=$309afcbef0af9316$var$DecData._mesh,r=t.getVerticesRingVert(),i=t.getVerticesRingFace(),a=t.getVertices(),s=t.getNormals(),n=t.getColors(),o=t.getMaterials(),l=t.getFaces(),u=t.getVerticesTagFlags(),h=t.getVerticesStateFlags(),c=t.getVerticesSculptFlags(),d=t.getNbVertices()-1;if(e===d){t.addNbVertice(-1);return}var g=0,p=$309afcbef0af9316$var$DecData._states;p.pushVertices([d]);var m=i[d],f=r[d],_=m.length,v=f.length,T=0;for(T=0;T<_;++T)g=m[T],p.pushFaces([g]),l[g*=4]===d?l[g]=e:l[g+1]===d?l[g+1]=e:l[g+2]=e;for(T=0;T<v;++T)g=f[T],p.pushVertices([g]),(0,$jLaD3.default).replaceElement(r[g],d,e);r[e]=r[d].slice(),i[e]=i[d].slice(),u[e]=u[d],h[e]=h[d],c[e]=c[d];var M=3*d;a[g=3*e]=a[M],a[g+1]=a[M+1],a[g+2]=a[M+2],s[g]=s[M],s[g+1]=s[M+1],s[g+2]=s[M+2],n[g]=n[M],n[g+1]=n[M+1],n[g+2]=n[M+2],o[g]=o[M],o[g+1]=o[M+1],o[g+2]=o[M+2],t.addNbVertice(-1)},$309afcbef0af9316$var$applyDeletion=function(){var e=$309afcbef0af9316$var$DecData._iTrisToDelete;(0,$jLaD3.default).tidy(e);var t=e.length,r=0;for(r=t-1;r>=0;--r)$309afcbef0af9316$var$deleteTriangle(e[r]);var i=$309afcbef0af9316$var$DecData._iVertsToDelete;for((0,$jLaD3.default).tidy(i),r=i.length-1;r>=0;--r)$309afcbef0af9316$var$deleteVertex(i[r])},$309afcbef0af9316$var$edgeCollapse=function(e,t,r,i,a,s,n){var o=$309afcbef0af9316$var$DecData._mesh,l=o.getVertices(),u=o.getNormals(),h=o.getColors(),c=o.getMaterials(),d=o.getFaces(),g=o.getVerticesTagFlags(),p=o.getFacesTagFlags(),m=o.getVerticesRingVert(),f=o.getVerticesRingFace(),_=m[r],v=m[i],T=f[r],M=f[i];if(_.length===T.length&&v.length===M.length){var y=m[a],b=m[s],A=f[a],S=f[s];if(y.length===A.length&&b.length===S.length){$309afcbef0af9316$var$DecData._iVertsDecimated.push(r,i),$309afcbef0af9316$var$DecData._states.pushVertices(_),$309afcbef0af9316$var$DecData._states.pushVertices(v),$309afcbef0af9316$var$DecData._states.pushFaces(T),$309afcbef0af9316$var$DecData._states.pushFaces(M),_.sort($309afcbef0af9316$var$sortFunc),v.sort($309afcbef0af9316$var$sortFunc);var x=0;if((0,$jLaD3.default).intersectionArrays(_,v).length>=3){(0,$jLaD3.default).removeElement(T,t),(0,$jLaD3.default).removeElement(M,e),A.push(t),S.push(e),d[x=4*e]===i?d[x]=s:d[x+1]===i?d[x+1]=s:d[x+2]=s,d[x=4*t]===r?d[x]=a:d[x+1]===r?d[x+1]=a:d[x+2]=a,o.computeRingVertices(r),o.computeRingVertices(i),o.computeRingVertices(a),o.computeRingVertices(s);return}x=3*r;var R=3*i,E=u[x]+u[R],C=u[x+1]+u[R+1],w=u[x+2]+u[R+2],F=E*E+C*C+w*w;0===F?E=1:(E*=F=1/Math.sqrt(F),C*=F,w*=F),u[x]=E,u[x+1]=C,u[x+2]=w,h[x]=(h[x]+h[R])*.5,h[x+1]=(h[x+1]+h[R+1])*.5,h[x+2]=(h[x+2]+h[R+2])*.5,c[x]=(c[x]+c[R])*.5,c[x+1]=(c[x+1]+c[R+1])*.5,c[x+2]=(c[x+2]+c[R+2])*.5,(0,$jLaD3.default).removeElement(T,e),(0,$jLaD3.default).removeElement(T,t),(0,$jLaD3.default).removeElement(M,e),(0,$jLaD3.default).removeElement(M,t),(0,$jLaD3.default).removeElement(A,e),(0,$jLaD3.default).removeElement(S,t);var I=M.length,D=0;for(D=0;D<I;++D){var V=M[D];T.push(V);var N=4*V;d[N]===i?d[N]=r:d[N+1]===i?d[N+1]=r:d[N+2]=r}for(D=0,I=v.length;D<I;++D)_.push(v[D]);o.computeRingVertices(r);var k=0,P=0,L=0,U=_.length;for(D=0;D<U;++D){var B=_[D];o.computeRingVertices(B),B*=3,k+=l[B],P+=l[B+1],L+=l[B+2]}k/=U,P/=U,L/=U;var O=E*(k-l[x])+C*(P-l[x+1])+w*(L-l[x+2]);for(l[x]=k-E*O,l[x+1]=P-C*O,l[x+2]=L-w*O,g[i]=p[e]=p[t]=-1,$309afcbef0af9316$var$DecData._iVertsToDelete.push(i),$309afcbef0af9316$var$DecData._iTrisToDelete.push(e,t),I=T.length,D=0;D<I;++D)n.push(T[D])}}},$309afcbef0af9316$var$decimateTriangles=function(e,t,r){if(-1!==t){var i=$309afcbef0af9316$var$DecData._mesh.getFaces(),a=4*e,s=i[a],n=i[a+1],o=i[a+2];a=4*t;var l=i[a],u=i[a+1],h=i[a+2];s===l?n===h?$309afcbef0af9316$var$edgeCollapse(e,t,s,n,o,u,r):$309afcbef0af9316$var$edgeCollapse(e,t,s,o,n,h,r):s===u?n===l?$309afcbef0af9316$var$edgeCollapse(e,t,s,n,o,h,r):$309afcbef0af9316$var$edgeCollapse(e,t,s,o,n,l,r):s===h?n===u?$309afcbef0af9316$var$edgeCollapse(e,t,s,n,o,l,r):$309afcbef0af9316$var$edgeCollapse(e,t,s,o,n,u,r):n===l?$309afcbef0af9316$var$edgeCollapse(e,t,o,n,s,u,r):n===u?$309afcbef0af9316$var$edgeCollapse(e,t,o,n,s,h,r):$309afcbef0af9316$var$edgeCollapse(e,t,o,n,s,l,r)}},$309afcbef0af9316$var$findOppositeTriangle=function(e,t,r){var i=$309afcbef0af9316$var$DecData._mesh.getVerticesRingFace(),a=i[t],s=i[r];a.sort($309afcbef0af9316$var$sortFunc),s.sort($309afcbef0af9316$var$sortFunc);var n=(0,$jLaD3.default).intersectionArrays(a,s);return 2!==n.length?-1:n[0]===e?n[1]:n[0]},$309afcbef0af9316$var$Decimation={};$309afcbef0af9316$var$Decimation.decimation=function(e,t,r,i,a,s){$309afcbef0af9316$var$DecData._mesh=e,$309afcbef0af9316$var$DecData._states=s,$309afcbef0af9316$var$DecData._iVertsDecimated.length=0,$309afcbef0af9316$var$DecData._iTrisToDelete.length=0,$309afcbef0af9316$var$DecData._iVertsToDelete.length=0;var n=Math.sqrt(i),o=e.getFacesTagFlags(),l=e.getVertices(),u=e.getMaterials(),h=e.getFaces(),c=r[0],d=r[1],g=r[2],p=0,m=t.length,f=Array(m);for(p=0;p<m;++p)f[p]=t[p];for(p=0;p<f.length;++p){var _=f[p];if(!(o[_]<0)){var v=4*_,T=h[v],M=h[v+1],y=h[v+2],b=3*T,A=3*M,S=3*y,x=l[b],R=l[b+1],E=l[b+2],C=l[A],w=l[A+1],F=l[A+2],I=l[S],D=l[S+1],V=l[S+2],N=(x+C+I)/3-c,k=(R+w+D)/3-d,P=(E+F+V)/3-g,L=N*N+k*k+P*P;if(L<i)L=1;else{if(!(L<2*i))continue;var U=(L=(Math.sqrt(L)-n)/(n*Math.SQRT2-n))*L;L=3*U*U-4*U*L+1}N=C-x,k=w-R,P=F-E;var B=N*N+k*k+P*P;N=C-I,k=w-D,P=F-V;var O=N*N+k*k+P*P;N=x-I,k=R-D,P=E-V;var G=N*N+k*k+P*P,z=u[b+2],X=u[A+2],W=u[S+2];B<O&&B<G?B<a*L*(z+X)*.5&&$309afcbef0af9316$var$decimateTriangles(_,$309afcbef0af9316$var$findOppositeTriangle(_,T,M),f):O<G?O<a*L*(X+W)*.5&&$309afcbef0af9316$var$decimateTriangles(_,$309afcbef0af9316$var$findOppositeTriangle(_,M,y),f):G<a*L*(z+W)*.5&&$309afcbef0af9316$var$decimateTriangles(_,$309afcbef0af9316$var$findOppositeTriangle(_,T,y),f)}}return $309afcbef0af9316$var$applyDeletion(),t=$309afcbef0af9316$var$getValidModifiedTriangles($309afcbef0af9316$var$getValidModifiedVertices(),f)};var $309afcbef0af9316$export$2e2bcd8739ae039=$309afcbef0af9316$var$Decimation;class $c1ff401ba375cd19$var$MeshDynamic extends $21255fc29769c8d7$export$2e2bcd8739ae039{constructor(e){super(),this.setID(e.getID()),this._meshData=$67e58e7d9ba114ff$export$2e2bcd8739ae039(),this.setRenderData(e.getRenderData()),this.setTransformData(e.getTransformData()),this._facesStateFlags=null,this._wireframe=null,this.initFromMesh(e),this.initRender(),this.isDynamic=!0}subdivide(e,t,r,i,a){return $ccc9220a4f6bdc7d$export$2e2bcd8739ae039.subdivision(this,e,t,r,i,a,$c1ff401ba375cd19$var$MeshDynamic.LINEAR)}decimate(e,t,r,i,a){return $309afcbef0af9316$export$2e2bcd8739ae039.decimation(this,e,t,r,i,a)}getSubdivisionFactor(){return .01*$c1ff401ba375cd19$var$MeshDynamic.SUBDIVISION_FACTOR}getDecimationFactor(){return .01*$c1ff401ba375cd19$var$MeshDynamic.DECIMATION_FACTOR}getVerticesProxy(){return this.getVertices()}addNbVertice(e){this._meshData._nbVertices+=e}getNbTriangles(){return this.getNbFaces()}addNbFace(e){this._meshData._nbFaces+=e}getNbEdges(){return 3*this.getNbTriangles()}getFacesStateFlags(){return this._facesStateFlags}allocateArrays(){super.allocateArrays(),this._meshData._vertRingVert=[],this._meshData._vertRingFace=[],this._facesStateFlags=new Int32Array(this.getNbFaces())}initFromMesh(e){var t=e.getNbVertices();this.setVertices(new Float32Array(e.getVertices().subarray(0,3*t))),this.setColors(new Float32Array(e.getColors().subarray(0,3*t))),this.setMaterials(new Float32Array(e.getMaterials().subarray(0,3*t))),this.setNbVertices(t),this.setFacesFromMesh(e),this.init(),e.isUsingTexCoords()&&this.setShaderType($eIUYI.default.Shader.MATCAP)}setFacesFromMesh(e){this.setFaces(new Uint32Array(4*e.getNbTriangles())),this.setNbFaces(e.getNbTriangles());var t=e.getTriangles(),r=this.getNbTriangles(),i=this.getFaces();this._meshData._trianglesABC=new Uint32Array(t.subarray(0,3*r));for(var a=0;a<r;++a){var s=3*a,n=4*a;i[n]=t[s],i[n+1]=t[s+1],i[n+2]=t[s+2],i[n+3]=$jLaD3.default.TRI_INDEX}}updateTopology(e,t){this.updateRenderTriangles(e),this.updateVerticesOnEdge(t),this.getShowWireframe()&&this.updateWireframe(e),this.isUsingDrawArrays()&&this.updateDrawArrays(e)}getWireframe(){return this._wireframe||(this._wireframe=new Uint32Array(2*this.getTriangles().length),this.updateWireframe()),this._wireframe}setShowWireframe(e){this._wireframe=null,super.setShowWireframe(e)}updateWireframe(e){for(var t=this._wireframe,r=this.getTriangles(),i=void 0===e,a=this.isUsingDrawArrays(),s=i?this.getNbTriangles():e.length,n=0;n<s;++n){var o=i?n:e[n],l=6*o,u=3*o;a?(t[l]=t[l+5]=u,t[l+1]=t[l+2]=u+2,t[l+3]=t[l+4]=u+1):(t[l]=t[l+5]=r[u],t[l+1]=t[l+2]=r[u+1],t[l+3]=t[l+4]=r[u+2])}}updateRenderTriangles(e){for(var t=this.getTriangles(),r=this.getFaces(),i=void 0===e,a=i?this.getNbFaces():e.length,s=0;s<a;++s){var n=i?s:e[s],o=3*n,l=4*n;t[o]=r[l],t[o+1]=r[l+1],t[o+2]=r[l+2]}}updateVerticesOnEdge(e){for(var t=this.getVerticesOnEdge(),r=this.getVerticesRingVert(),i=this.getVerticesRingFace(),a=void 0===e,s=a?this.getNbVertices():e.length,n=0;n<s;++n){var o=a?n:e[n];t[o]=r[o].length!==i[o].length?1:0}}resizeArray(e,t){if(!e)return null;if(e.length>=t)return e.subarray(0,2*t);var r=new e.constructor(2*t);return r.set(e),r}reAllocateArrays(e){var t=this._meshData,r=this._facesStateFlags.length,i=this.getNbTriangles(),a=i+e;if((r<a||r>4*a)&&(this._facesStateFlags=this.resizeArray(this._facesStateFlags,a),this.getShowWireframe()&&(this._wireframe=this.resizeArray(this._wireframe,6*a)),t._facesABCD=this.resizeArray(t._facesABCD,4*a),t._trianglesABC=this.resizeArray(t._trianglesABC,3*a),t._faceBoxes=this.resizeArray(t._faceBoxes,6*a),t._faceNormalsXYZ=this.resizeArray(t._faceNormalsXYZ,3*a),t._faceCentersXYZ=this.resizeArray(t._faceCentersXYZ,3*a),t._facesTagFlags=this.resizeArray(t._facesTagFlags,a),t._facePosInLeaf=this.resizeArray(t._facePosInLeaf,a)),((r=t._verticesXYZ.length/3)<(a=this.getNbVertices()+e)||r>4*a)&&(t._verticesXYZ=this.resizeArray(t._verticesXYZ,3*a),t._normalsXYZ=this.resizeArray(t._normalsXYZ,3*a),t._colorsRGB=this.resizeArray(t._colorsRGB,3*a),t._materialsPBR=this.resizeArray(t._materialsPBR,3*a),t._vertOnEdge=this.resizeArray(t._vertOnEdge,a),t._vertTagFlags=this.resizeArray(t._vertTagFlags,a),t._vertSculptFlags=this.resizeArray(t._vertSculptFlags,a),t._vertStateFlags=this.resizeArray(t._vertStateFlags,a)),this.isUsingDrawArrays()){var s=10;((r=t._verticesXYZ.length/9)<(a=i+e*s)||r>4*a)&&(t._verticesXYZ=this.resizeArray(t._verticesXYZ,9*a),t._normalsXYZ=this.resizeArray(t._normalsXYZ,9*a),t._colorsRGB=this.resizeArray(t._colorsRGB,9*a),t._materialsPBR=this.resizeArray(t._materialsPBR,9*a))}}initTopology(){var e=this.getVerticesRingVert(),t=this.getVerticesRingFace(),r=0,i=this.getNbVertices();for(r=0,e.length=t.length=i;r<i;++r)e[r]=[],t[r]=[];var a=this.getNbTriangles(),s=this.getTriangles();for(r=0;r<a;++r){var n=3*r;t[s[n]].push(r),t[s[n+1]].push(r),t[s[n+2]].push(r)}var o=this.getVerticesOnEdge();for(r=0;r<i;++r)this.computeRingVertices(r),o[r]=t[r].length!==e[r].length?1:0}computeRingVertices(e){var t=++$jLaD3.default.TAG_FLAG,r=this.getFaces(),i=this.getVerticesTagFlags(),a=this._meshData._vertRingVert[e],s=this._meshData._vertRingFace[e];a.length=0;for(var n=s.length,o=0;o<n;++o){var l=4*s[o],u=r[l],h=r[l+1];u===e?u=r[l+2]:h===e&&(h=r[l+2]),i[u]!==t&&(i[u]=t,a.push(u)),i[h]!==t&&(i[h]=t,a.push(h))}}}$c1ff401ba375cd19$var$MeshDynamic.SUBDIVISION_FACTOR=75,$c1ff401ba375cd19$var$MeshDynamic.DECIMATION_FACTOR=0,$c1ff401ba375cd19$var$MeshDynamic.LINEAR=!1;var $c1ff401ba375cd19$export$2e2bcd8739ae039=$c1ff401ba375cd19$var$MeshDynamic;class $8ff8e0602d885804$var$StateMultiresolution{static get SUBDIVISION(){return 0}static get REVERSION(){return 1}static get SELECTION(){return 2}static get DELETE_LOWER(){return 3}static get DELETE_HIGHER(){return 4}constructor(e,t,r,i){switch(this._main=e,this._multimesh=t,this._mesh=t.getCurrentMesh(),this._type=r,r){case $8ff8e0602d885804$var$StateMultiresolution.DELETE_LOWER:this._deletedMeshes=t._meshes.slice(0,t._sel);break;case $8ff8e0602d885804$var$StateMultiresolution.DELETE_HIGHER:this._deletedMeshes=t._meshes.slice(t._sel+1),i||(this._vMappingState=this._mesh.getVerticesMapping());break;case $8ff8e0602d885804$var$StateMultiresolution.SUBDIVISION:case $8ff8e0602d885804$var$StateMultiresolution.REVERSION:i||(this._vArState=new Float32Array(this._mesh.getVertices()),this._cArState=new Float32Array(this._mesh.getColors()),this._mArState=new Float32Array(this._mesh.getMaterials()))}}isNoop(){return!1}undo(){var e=this._multimesh;switch(this._type){case $8ff8e0602d885804$var$StateMultiresolution.SELECTION:e.selectMesh(this._mesh);break;case $8ff8e0602d885804$var$StateMultiresolution.DELETE_LOWER:Array.prototype.unshift.apply(e._meshes,this._deletedMeshes);break;case $8ff8e0602d885804$var$StateMultiresolution.DELETE_HIGHER:Array.prototype.push.apply(e._meshes,this._deletedMeshes),this._mesh.setVerticesMapping(this._vMappingState);break;case $8ff8e0602d885804$var$StateMultiresolution.SUBDIVISION:case $8ff8e0602d885804$var$StateMultiresolution.REVERSION:var t=this._mesh.getNbVertices();this._mesh.setVertices(new Float32Array(this._vArState)),this._mesh.setColors(new Float32Array(this._cArState)),this._mesh.setMaterials(new Float32Array(this._mArState)),this._mesh.setNbVertices(t),this._type===$8ff8e0602d885804$var$StateMultiresolution.SUBDIVISION?e.popMesh():e.shiftMesh()}e.setSelection(e.findIndexFromMesh(this._mesh)),this._main.setMesh(e)}redo(){var e=this._multimesh;switch(this._type){case $8ff8e0602d885804$var$StateMultiresolution.SELECTION:e.selectMesh(this._mesh);break;case $8ff8e0602d885804$var$StateMultiresolution.DELETE_LOWER:e.deleteLower();break;case $8ff8e0602d885804$var$StateMultiresolution.DELETE_HIGHER:e.deleteHigher();break;case $8ff8e0602d885804$var$StateMultiresolution.SUBDIVISION:e.pushMesh(this._mesh);break;case $8ff8e0602d885804$var$StateMultiresolution.REVERSION:e.unshiftMesh(this._mesh)}e.setSelection(e.findIndexFromMesh(this._mesh)),this._main.setMesh(e)}createRedo(){return new $8ff8e0602d885804$var$StateMultiresolution(this._main,this._multimesh,this._type,!0)}}var $8ff8e0602d885804$export$2e2bcd8739ae039=$8ff8e0602d885804$var$StateMultiresolution,$idLiu=parcelRequire("idLiu"),$eIUYI=parcelRequire("eIUYI");class $5889570aa0c7a611$var$GuiMultiresolution{constructor(e,t){this._ctrlGui=t,this._main=t._main,this._menu=null,this._ctrlResolution=null,this._ctrlDynamic=null,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("topologyTitle"));t.close(),t.addTitle((0,$l7y1s.default)("multiresTitle")),this._ctrlResolution=t.addSlider((0,$l7y1s.default)("multiresResolution"),1,this.onResolutionChanged.bind(this),1,1,1);var r=t.addDualButton((0,$l7y1s.default)("multiresReverse"),(0,$l7y1s.default)("multiresSubdivide"),this,this,"reverse","subdivide");this._ctrlReverse=r[0],this._ctrlSubdivide=r[1],r=this._dualButtonDel=t.addDualButton((0,$l7y1s.default)("multiresDelLower"),(0,$l7y1s.default)("multiresDelHigher"),this,this,"deleteLower","deleteHigher"),this._ctrlDelLower=r[0],this._ctrlDelHigher=r[1],this._ctrlDelLower.domButton.style.background=this._ctrlDelHigher.domButton.style.background="rgba(230,53,59,0.35)";var i=this.remeshResolution.bind(this);t.addTitle((0,$l7y1s.default)("remeshTitle")),this._ctrlRes1=t.addSlider((0,$l7y1s.default)("remeshResolution"),$7b5b7262d1062d78$export$2e2bcd8739ae039.RESOLUTION,i,8,400,1),t.addCheckbox((0,$l7y1s.default)("remeshBlock"),$7b5b7262d1062d78$export$2e2bcd8739ae039,"BLOCK"),t.addButton((0,$l7y1s.default)("remeshRemesh"),this,"remesh"),t.addTitle((0,$l7y1s.default)("remeshTitleMC")),this._ctrlRes2=t.addSlider((0,$l7y1s.default)("remeshResolution"),$7b5b7262d1062d78$export$2e2bcd8739ae039.RESOLUTION,i,8,400,1),t.addCheckbox((0,$l7y1s.default)("remeshSmoothingMC"),$7b5b7262d1062d78$export$2e2bcd8739ae039,"SMOOTHING"),t.addButton((0,$l7y1s.default)("remeshRemeshMC"),this,"remeshMC"),t.addTitle((0,$l7y1s.default)("dynamicTitle")),this._ctrlDynamic=t.addCheckbox((0,$l7y1s.default)("dynamicActivated"),!1,this.dynamicToggleActivate.bind(this)),this._ctrlDynSubd=t.addSlider((0,$l7y1s.default)("dynamicSubdivision"),$c1ff401ba375cd19$export$2e2bcd8739ae039,"SUBDIVISION_FACTOR",0,100,1),this._ctrlDynDec=t.addSlider((0,$l7y1s.default)("dynamicDecimation"),$c1ff401ba375cd19$export$2e2bcd8739ae039,"DECIMATION_FACTOR",0,100,1),this._ctrlDynLin=t.addCheckbox((0,$l7y1s.default)("dynamicLinear"),$c1ff401ba375cd19$export$2e2bcd8739ae039,"LINEAR"),this.updateDynamicVisibility(!1)}onKeyUp(e){if(!0!==e.handled){var t=(0,$idLiu.default).getShortKey(e.which);e.stopPropagation(),t===$eIUYI.default.KeyAction.REMESH&&this.remesh()}}updateDynamicVisibility(e){this._ctrlDynSubd.setVisibility(e),this._ctrlDynDec.setVisibility(e),this._ctrlDynLin.setVisibility(e)}dynamicToggleActivate(){var e=this._main,t=e.getMesh();if(t){var r=t.isDynamic?this.convertToStaticMesh(t):new $c1ff401ba375cd19$export$2e2bcd8739ae039(t);this.updateDynamicVisibility(!t.isDynamic),e.getStateManager().pushStateAddRemove(r,t),e.replaceMesh(t,r)}}remeshResolution(e){$7b5b7262d1062d78$export$2e2bcd8739ae039.RESOLUTION=e,this._ctrlRes1.setValue(e,!0),this._ctrlRes2.setValue(e,!0)}remesh(e){var t=this._main,r=t.getMesh();if(r){for(var i=r.isDynamic,a=t.getMeshes(),s=t.getSelectedMeshes().slice(),n=0,o=s.length;n<o;++n){var l=s[n];a.splice(t.getIndexMesh(l),1),s[n]=this.convertToStaticMesh(l),l===r&&(r=s[n])}var u=$7b5b7262d1062d78$export$2e2bcd8739ae039.remesh(s,r,e);i&&(u=new $c1ff401ba375cd19$export$2e2bcd8739ae039(u)),t.getStateManager().pushStateAddRemove(u,t.getSelectedMeshes().slice()),t.getMeshes().push(u),t.setMesh(u)}}remeshMC(){this.remesh(!0)}isMultimesh(e){return!!(e&&e._meshes)}convertToStaticMesh(e){if(!e.isDynamic)return e;var t=new $b44e1ac6efd62b42$export$2e2bcd8739ae039(e.getGL());return t.setID(e.getID()),t.setTransformData(e.getTransformData()),t.setVertices(e.getVertices().subarray(0,3*e.getNbVertices())),t.setColors(e.getColors().subarray(0,3*e.getNbVertices())),t.setMaterials(e.getMaterials().subarray(0,3*e.getNbVertices())),t.setFaces(e.getFaces().subarray(0,4*e.getNbFaces())),$21255fc29769c8d7$export$2e2bcd8739ae039.OPTIMIZE=!1,t.init(),$21255fc29769c8d7$export$2e2bcd8739ae039.OPTIMIZE=!0,t.setRenderData(e.getRenderData()),t.initRender(),t}convertToMultimesh(e){return this.isMultimesh(e)?e:new $f92bc4b1f228ab12$export$2e2bcd8739ae039(this.convertToStaticMesh(e))}subdivide(){var e=this._main,t=e.getMesh();if(t){var r=this.convertToMultimesh(t);if(r._sel!==r._meshes.length-1){window.alert((0,$l7y1s.default)("multiresSelectHighest"));return}if(r.getNbTriangles()>4e5&&!window.confirm((0,$l7y1s.default)("multiresWarnBigMesh",4*r.getNbFaces())))return;t!==r&&(e.replaceMesh(t,r),e.getStateManager().pushStateAddRemove(r,t,!0)),e.getStateManager().pushState(new $8ff8e0602d885804$export$2e2bcd8739ae039(e,r,$8ff8e0602d885804$export$2e2bcd8739ae039.SUBDIVISION)),r.addLevel(),e.setMesh(r),e.render()}}reverse(){var e=this._main,t=e.getMesh();if(t){var r=this.convertToMultimesh(t);if(0!==r._sel){window.alert((0,$l7y1s.default)("multiresSelectLowest"));return}var i=new $8ff8e0602d885804$export$2e2bcd8739ae039(e,r,$8ff8e0602d885804$export$2e2bcd8739ae039.REVERSION),a=r.computeReverse();if(!a){window.alert((0,$l7y1s.default)("multiresNotReversible"));return}t!==r&&(e.replaceMesh(t,r),e.getStateManager().pushStateAddRemove(r,t,!0)),e.getStateManager().pushState(i),e.setMesh(r),e.render()}}deleteLower(){var e=this._main,t=e._mesh;if(!this.isMultimesh(t)||0===t._sel){window.alert((0,$l7y1s.default)("multiresNoLower"));return}e.getStateManager().pushState(new $8ff8e0602d885804$export$2e2bcd8739ae039(e,t,$8ff8e0602d885804$export$2e2bcd8739ae039.DELETE_LOWER)),t.deleteLower(),this.updateMeshResolution()}deleteHigher(){var e=this._main,t=e.getMesh();if(!this.isMultimesh(t)||t._sel===t._meshes.length-1){window.alert((0,$l7y1s.default)("multiresNoHigher"));return}e.getStateManager().pushState(new $8ff8e0602d885804$export$2e2bcd8739ae039(e,t,$8ff8e0602d885804$export$2e2bcd8739ae039.DELETE_HIGHER)),t.deleteHigher(),this.updateMeshResolution()}onResolutionChanged(e){var t=e-1,r=this._main,i=r.getMesh();if(i){var a=this.isMultimesh(i),s=a&&i._meshes.length-1===t;this._ctrlReverse.setEnable(!a||0===t),this._ctrlSubdivide.setEnable(!a||s),this._ctrlDelLower.setEnable(a&&0!==t),this._ctrlDelHigher.setEnable(a&&!s),a&&i._sel!==t&&(r.getStateManager().pushState(new $8ff8e0602d885804$export$2e2bcd8739ae039(r,i,$8ff8e0602d885804$export$2e2bcd8739ae039.SELECTION)),i.selectResolution(t),this._ctrlGui.updateMeshInfo(),r.render())}}updateMeshResolution(){var e=this._main.getMesh();if(!e||!this.isMultimesh(e)){this._ctrlResolution.setMax(1),this._ctrlResolution.setValue(0);return}this._ctrlResolution.setMax(e._meshes.length),this._ctrlResolution.setValue(e._sel+1)}updateMesh(){if(!this._main.getMesh()){this._menu.setVisibility(!1);return}this._menu.setVisibility(!0),this.updateMeshResolution();var e=this._main.getMesh().isDynamic;this.updateDynamicVisibility(e),this._ctrlDynamic.setValue(e,!0)}}var $5889570aa0c7a611$export$2e2bcd8739ae039=$5889570aa0c7a611$var$GuiMultiresolution,$l7y1s=parcelRequire("l7y1s"),$idLiu=parcelRequire("idLiu"),$eIUYI=parcelRequire("eIUYI"),$811fa4c75754f16d$var$ShaderMERGE=$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[$eIUYI.default.Shader.MERGE],$811fa4c75754f16d$var$ShaderUV=$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[$eIUYI.default.Shader.UV],$811fa4c75754f16d$var$ShaderPBR=$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[$eIUYI.default.Shader.PBR],$811fa4c75754f16d$var$ShaderMatcap=$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[$eIUYI.default.Shader.MATCAP];class $811fa4c75754f16d$var$GuiRendering{constructor(e,t){this._main=t._main,this._menu=null,this._ctrlFlatShadizfng=null,this._ctrlShowWireframe=null,this._ctrlShaders=null,this._ctrlMatcap=null,this._ctrlUV=null,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("renderingTitle"));t.close();var r=[];r[$eIUYI.default.Shader.MATCAP]=(0,$l7y1s.default)("renderingMatcap"),r[$eIUYI.default.Shader.PBR]=(0,$l7y1s.default)("renderingPBR"),r[$eIUYI.default.Shader.NORMAL]=(0,$l7y1s.default)("renderingNormal"),r[$eIUYI.default.Shader.UV]=(0,$l7y1s.default)("renderingUV"),t.addTitle((0,$l7y1s.default)("renderingShader")),this._ctrlShaders=t.addCombobox("",$eIUYI.default.Shader.MATCAP,this.onShaderChanged.bind(this),r),this._ctrlCurvature=t.addSlider((0,$l7y1s.default)("renderingCurvature"),20,this.onCurvatureChanged.bind(this),0,100,1),this._ctrlFilmic=t.addCheckbox((0,$l7y1s.default)("renderingFilmic"),$811fa4c75754f16d$var$ShaderMERGE.FILMIC,this.onFilmic.bind(this));for(var i={},a=0,s=$811fa4c75754f16d$var$ShaderPBR.environments,n=s.length;a<n;++a)i[a]=s[a].name;this._ctrlEnvTitle=t.addTitle((0,$l7y1s.default)("renderingEnvironment")),this._ctrlEnv=t.addCombobox("",$811fa4c75754f16d$var$ShaderPBR.idEnv,this.onEnvironmentChanged.bind(this),i);for(var o={},l=0,u=$811fa4c75754f16d$var$ShaderMatcap.matcaps,h=u.length;l<h;++l)o[l]=u[l].name;this._ctrlMatcapTitle=t.addTitle((0,$l7y1s.default)("renderingMaterial")),this._ctrlMatcap=t.addCombobox((0,$l7y1s.default)("renderingMatcap"),0,this.onMatcapChanged.bind(this),o),this._ctrlImportMatcap=t.addButton((0,$l7y1s.default)("renderingImportMatcap"),this,"importMatcap"),this._ctrlUV=t.addButton((0,$l7y1s.default)("renderingImportUV"),this,"importTexture"),this._ctrlExposure=t.addSlider((0,$l7y1s.default)("renderingExposure"),1,this.onExposureChanged.bind(this),0,5,.001),this.onUpdateCtrlExposure(),t.addTitle((0,$l7y1s.default)("renderingExtra")),this._ctrlTransparency=t.addSlider((0,$l7y1s.default)("renderingTransparency"),0,this.onTransparencyChanged.bind(this),0,100,1),this._ctrlFlatShading=t.addCheckbox((0,$l7y1s.default)("renderingFlat"),!1,this.onFlatShading.bind(this)),this._ctrlShowWireframe=t.addCheckbox((0,$l7y1s.default)("renderingWireframe"),!1,this.onShowWireframe.bind(this)),$d57031a28bd8d861$export$2e2bcd8739ae039.ONLY_DRAW_ARRAYS&&this._ctrlShowWireframe.setVisibility(!1),this.addEvents()}onFilmic(e){$811fa4c75754f16d$var$ShaderMERGE.FILMIC=e,this._main.render()}onCurvatureChanged(e){this._main.getMesh()&&(this._main.getMesh().setCurvature(e/20),this._main.render())}onEnvironmentChanged(e){$811fa4c75754f16d$var$ShaderPBR.idEnv=e,this.onUpdateCtrlExposure(),this._main.render()}onUpdateCtrlExposure(){this._ctrlExposure.setValue($811fa4c75754f16d$var$ShaderPBR.environments[$811fa4c75754f16d$var$ShaderPBR.idEnv].exposure)}onExposureChanged(e){$811fa4c75754f16d$var$ShaderPBR.exposure=e,this._main.render()}onTransparencyChanged(e){for(var t=this._main.getSelectedMeshes(),r=0,i=t.length;r<i;++r)t[r].setOpacity(1-e/100);this._main.render()}onShaderChanged(e){for(var t=this._main,r=!1,i=this._main.getSelectedMeshes(),a=0,s=i.length;a<s;++a){var n=i[a];n&&(e!==$eIUYI.default.Shader.UV||n.hasUV()?(n.setShaderType(e),t.render()):(r||window.alert("No UV on the mesh."),r=!0),r&&this.updateMesh())}this.updateVisibility()}onMatcapChanged(e){for(var t=this._main.getSelectedMeshes(),r=0,i=t.length;r<i;++r){var a=t[r];a.getShaderType()!==$eIUYI.default.Shader.MATCAP&&a.setShaderType($eIUYI.default.Shader.MATCAP),a.setMatcap(e)}this._main.render()}onFlatShading(e){for(var t=this._main.getSelectedMeshes(),r=0,i=t.length;r<i;++r)t[r].setFlatShading(e);this._main.render()}onShowWireframe(e){for(var t=this._main.getSelectedMeshes(),r=0,i=t.length;r<i;++r)t[r].setShowWireframe(e);this._main.render()}addEvents(){var e=this.loadTextureUV.bind(this),t=this.loadMatcap.bind(this);document.getElementById("textureopen").addEventListener("change",e,!1),document.getElementById("matcapopen").addEventListener("change",t,!1),this.removeCallback=function(){document.getElementById("textureopen").removeEventListener("change",e,!1),document.getElementById("matcapopen").removeEventListener("change",t,!1)}}removeEvents(){this.removeCallback&&this.removeCallback()}updateMesh(){var e=this._main.getMesh();if(!e){this._menu.setVisibility(!1);return}this._menu.setVisibility(!0),this._ctrlShaders.setValue(e.getShaderType(),!0),this._ctrlFlatShading.setValue(e.getFlatShading(),!0),this._ctrlShowWireframe.setValue(e.getShowWireframe(),!0),this._ctrlMatcap.setValue(e.getMatcap(),!0),this._ctrlTransparency.setValue(100-100*e.getOpacity(),!0),this._ctrlCurvature.setValue(20*e.getCurvature(),!0),this.updateVisibility()}updateVisibility(){var e=this._main.getMesh();if(e){var t=e.getShaderType();this._ctrlMatcapTitle.setVisibility(t===$eIUYI.default.Shader.MATCAP),this._ctrlMatcap.setVisibility(t===$eIUYI.default.Shader.MATCAP),this._ctrlImportMatcap.setVisibility(t===$eIUYI.default.Shader.MATCAP),this._ctrlExposure.setVisibility(t===$eIUYI.default.Shader.PBR),this._ctrlEnvTitle.setVisibility(t===$eIUYI.default.Shader.PBR),this._ctrlEnv.setVisibility(t===$eIUYI.default.Shader.PBR),this._ctrlUV.setVisibility(t===$eIUYI.default.Shader.UV)}}getFlatShading(){return this._ctrlFlatShading.getValue()}getWireframe(){return this._ctrlShowWireframe.getValue()}getShaderName(){return this._ctrlShaders.getValue()}importTexture(){document.getElementById("textureopen").click()}loadTextureUV(e){if(0!==e.target.files.length){var t=e.target.files[0];if(t.type.match("image.*")){var r=new FileReader,i=this._main;r.onload=function(e){$811fa4c75754f16d$var$ShaderUV.texture0=void 0,$811fa4c75754f16d$var$ShaderUV.texPath=e.target.result,i.render()},document.getElementById("textureopen").value="",r.readAsDataURL(t)}}}loadMatcap(e){if(0!==e.target.files.length){var t=e.target.files[0];if(t.type.match("image.*")){var r=new FileReader,i=this._main,a=this._ctrlMatcap;r.onload=function(e){var r=new Image;r.src=e.target.result,r.onload=function(){var e=$811fa4c75754f16d$var$ShaderMatcap.matcaps.length;$811fa4c75754f16d$var$ShaderMatcap.matcaps.push({name:t.name}),$811fa4c75754f16d$var$ShaderMatcap.createTexture(i._gl,r,e);var s={};s[e]=t.name,a.addOptions(s),a.setValue(e),i.render()}},document.getElementById("matcapopen").value="",r.readAsDataURL(t)}}}importMatcap(){document.getElementById("matcapopen").click()}onKeyUp(e){(0,$idLiu.default).getShortKey(e.which)!==$eIUYI.default.KeyAction.WIREFRAME||e.ctrlKey||this._ctrlShowWireframe.setValue(!this._ctrlShowWireframe.getValue())}}var $811fa4c75754f16d$export$2e2bcd8739ae039=$811fa4c75754f16d$var$GuiRendering,$l7y1s=parcelRequire("l7y1s");class $7d9c92f5564cf378$var$GuiScene{constructor(e,t){this._main=t._main,this._menu=null,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("sceneTitle"));t.addButton((0,$l7y1s.default)("sceneReset"),this,"clearScene"),t.addButton((0,$l7y1s.default)("sceneAddSphere"),this._main,"addSphere"),t.addButton((0,$l7y1s.default)("sceneAddCube"),this._main,"addCube"),t.addButton((0,$l7y1s.default)("sceneAddCylinder"),this._main,"addCylinder"),t.addButton((0,$l7y1s.default)("sceneAddTorus"),this._main,"addTorus"),t.addTitle((0,$l7y1s.default)("sceneSelection")),this._ctrlIsolate=t.addCheckbox((0,$l7y1s.default)("renderingIsolate"),!1,this.showHide.bind(this)),this._ctrlIsolate.setVisibility(!1),this._ctrlMerge=t.addButton((0,$l7y1s.default)("sceneMerge"),this,"merge"),this._ctrlMerge.setVisibility(!1),t.addButton((0,$l7y1s.default)("sceneDuplicate"),this,"duplicateSelection"),t.addButton((0,$l7y1s.default)("sceneDelete"),this,"deleteSelection"),t.addTitle((0,$l7y1s.default)("renderingExtra")),t.addCheckbox((0,$l7y1s.default)("darkenUnselected"),$bdfea6edb628a28d$export$2e2bcd8739ae039.darkenUnselected,this.onDarkenUnselected.bind(this)),t.addCheckbox((0,$l7y1s.default)("contourShow"),this._main._showContour,this.onShowContour.bind(this)),t.addCheckbox((0,$l7y1s.default)("renderingGrid"),this._main._showGrid,this.onShowGrid.bind(this)),t.addCheckbox((0,$l7y1s.default)("renderingSymmetryLine"),$bdfea6edb628a28d$export$2e2bcd8739ae039.showSymmetryLine,this.onShowSymmetryLine.bind(this)),this._ctrlOffSym=t.addSlider("SymOffset",0,this.onOffsetSymmetry.bind(this),-1,1,.001)}clearScene(){window.confirm((0,$l7y1s.default)("sceneResetConfirm"))&&this._main.clearScene()}onOffsetSymmetry(e){var t=this._main.getMesh();t&&(t.setSymmetryOffset(e),this._main.render())}duplicateSelection(){this._main.duplicateSelection()}deleteSelection(){this._main.deleteCurrentSelection()}validatePreview(){this._main._meshPreview||this._main.addTorus(!0),this._main._meshPreview.setShowWireframe(!1),this._main.addNewMesh(this._main._meshPreview),this._main._meshPreview=null,this.ctrlDiscard.setVisibility(!1),this.ctrlValidate.setVisibility(!1),this._main.render()}discardPreview(){this._main._meshPreview=null,this.ctrlDiscard.setVisibility(!1),this.ctrlValidate.setVisibility(!1),this._main.render()}updateTorusRadius(e){this._main._torusRadius=e,this.updateTorus()}updateTorusRadial(e){this._main._torusRadial=e,this.updateTorus()}updateTorusTubular(e){this._main._torusTubular=e,this.updateTorus()}updateTorusWidth(e){if(this._main._torusWidth=e,this._main._torusLength<this._main._torusWidth){this.ctrlLE.setValue(e);return}this.updateTorus()}updateTorusLength(e){if(this._main._torusLength=e,this._main._torusLength<this._main._torusWidth){this.ctrlWI.setValue(e);return}this.updateTorus()}updateTorus(){this._main.addTorus(!0),this.ctrlDiscard.setVisibility(!0),this.ctrlValidate.setVisibility(!0),this._main.render()}hasHiddenMeshes(){for(var e=this._main.getMeshes(),t=0;t<e.length;++t)if(!e[t].isVisible())return!0;return!1}updateMesh(){var e=this._main.getMeshes().length,t=this._main.getSelectedMeshes().length;this._ctrlIsolate.setVisibility(this.hasHiddenMeshes()||e!==t&&t>=1),this._ctrlMerge.setVisibility(t>1);var r=this._main.getMesh();this._ctrlOffSym.setValue(r?r.getSymmetryOffset():0)}merge(){var e=this._main,t=e.getSelectedMeshes();if(!(t.length<2)){var r=$7b5b7262d1062d78$export$2e2bcd8739ae039.mergeMeshes(t,e.getMesh()||t[0]);e.removeMeshes(t),e.getStateManager().pushStateAddRemove(r,t.slice()),e.getMeshes().push(r),e.setMesh(r)}}toggleShowHide(e){this._ctrlIsolate.setValue(!this._ctrlIsolate.getValue(),!!e)}showHide(e){e?this.isolate():this.showAll(),this.updateMesh()}setMeshesVisible(e,t){for(var r=0;r<e.length;++r)e[r].setVisible(t);this._ctrlIsolate.setValue(!t,!0)}pushSetMeshesVisible(e,t){this.setMeshesVisible(e,t);var r=this.setMeshesVisible.bind(this,e,!t),i=this.setMeshesVisible.bind(this,e,t);this._main.getStateManager().pushStateCustom(r,i)}isolate(){var e=this._main,t=e.getSelectedMeshes(),r=e.getMeshes();if(r.length===t.length||r.length<2){this._ctrlIsolate.setValue(!1,!0);return}for(var i=[],a=0;a<r.length;++a)0>e.getIndexSelectMesh(r[a])&&i.push(r[a]);this.pushSetMeshesVisible(i,!1),e.render()}showAll(){for(var e=this._main,t=e.getMeshes(),r=[],i=0;i<t.length;++i)t[i].isVisible()||r.push(t[i]);this.pushSetMeshesVisible(r,!0),e.render()}onDarkenUnselected(e){$bdfea6edb628a28d$export$2e2bcd8739ae039.darkenUnselected=e,this._main.render()}onShowSymmetryLine(e){$bdfea6edb628a28d$export$2e2bcd8739ae039.showSymmetryLine=e,this._main.render()}onShowGrid(e){var t=this._main;t._showGrid=e,t.render()}onShowContour(e){var t=this._main;t._showContour=e,t.render()}onKeyDown(e){!0!==e.handled&&(e.stopPropagation(),this._main._focusGui||e.preventDefault(),73===e.which?(this.toggleShowHide(),e.handled=!0):68===e.which&&e.ctrlKey&&(this._main.duplicateSelection(),e.handled=!0))}}var $7d9c92f5564cf378$export$2e2bcd8739ae039=$7d9c92f5564cf378$var$GuiScene,$l7y1s=parcelRequire("l7y1s"),$eIUYI=parcelRequire("eIUYI"),$idLiu=parcelRequire("idLiu"),$eIStk=parcelRequire("eIStk"),$l7y1s=parcelRequire("l7y1s"),$eFXNN=parcelRequire("eFXNN"),$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3"),$e4adcc7419248bff$var$GuiSculptingTools={};$e4adcc7419248bff$var$GuiSculptingTools.tools=[];var $e4adcc7419248bff$var$GuiTools=$e4adcc7419248bff$var$GuiSculptingTools.tools;$e4adcc7419248bff$var$GuiSculptingTools.initGuiTools=function(e,t,r){for(var i=0,a=$44b556fb7f1fceec$export$2e2bcd8739ae039.length;i<a;++i)if($44b556fb7f1fceec$export$2e2bcd8739ae039[i]){var s=$e4adcc7419248bff$var$GuiTools[i];s||(console.error("No gui for tool index : "+i),$e4adcc7419248bff$var$GuiSculptingTools[i]={_ctrls:[],init:function(){}}),s.init(e.getTool(i),t,r),$e4adcc7419248bff$var$GuiSculptingTools.hide(i)}},$e4adcc7419248bff$var$GuiSculptingTools.hide=function(e){for(var t=0,r=$e4adcc7419248bff$var$GuiTools[e]._ctrls,i=r.length;t<i;++t)r[t].setVisibility(!1)},$e4adcc7419248bff$var$GuiSculptingTools.show=function(e){for(var t=0,r=$e4adcc7419248bff$var$GuiTools[e]._ctrls,i=r.length;t<i;++t)r[t].setVisibility(!0)};var $e4adcc7419248bff$var$setOnChange=function(e,t,r){this[e]=t?r/t:r},$e4adcc7419248bff$var$addCtrlRadius=function(e,t,r,i){var a=t.addSlider((0,$l7y1s.default)("sculptRadius"),e._radius,function(t){$e4adcc7419248bff$var$setOnChange.call(e,"_radius",1,t),i.getSculptManager().getSelection().setIsEditMode(!0),i.renderSelectOverRtt()},5,500,1);return r._ctrlRadius=a,a},$e4adcc7419248bff$var$addCtrlIntensity=function(e,t,r){var i=t.addSlider((0,$l7y1s.default)("sculptIntensity"),100*e._intensity,$e4adcc7419248bff$var$setOnChange.bind(e,"_intensity",100),0,100,1);return r._ctrlIntensity=i,i},$e4adcc7419248bff$var$addCtrlHardness=function(e,t){return t.addSlider((0,$l7y1s.default)("sculptHardness"),100*e._hardness,$e4adcc7419248bff$var$setOnChange.bind(e,"_hardness",100),0,100,1)},$e4adcc7419248bff$var$addCtrlCulling=function(e,t){return t.addCheckbox((0,$l7y1s.default)("sculptCulling"),e,"_culling")},$e4adcc7419248bff$var$addCtrlNegative=function(e,t,r,i){var a=t.addCheckbox(i||(0,$l7y1s.default)("sculptNegative"),e,"_negative");return r.toggleNegative=function(){a.setValue(!a.getValue())},a},$e4adcc7419248bff$var$importAlpha=function(){document.getElementById("alphaopen").click()},$e4adcc7419248bff$var$addCtrlAlpha=function(e,t,r,i){e.push(t.addTitle((0,$l7y1s.default)("sculptAlphaTitle"))),void 0!==r._lockPosition&&e.push(t.addCheckbox((0,$l7y1s.default)("sculptLockPositon"),r,"_lockPosition")),i._ctrlAlpha=t.addCombobox((0,$l7y1s.default)("sculptAlphaTex"),r,"_idAlpha",$eFXNN.default.ALPHAS_NAMES),e.push(i._ctrlAlpha),e.push(t.addButton((0,$l7y1s.default)("sculptImportAlpha"),$e4adcc7419248bff$var$importAlpha))};$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.BRUSH]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlNegative(e,t,this)),this._ctrls.push(t.addCheckbox((0,$l7y1s.default)("sculptClay"),e,"_clay")),this._ctrls.push(t.addCheckbox((0,$l7y1s.default)("sculptAccumulate"),e,"_accumulate")),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.CREASE]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlNegative(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.DRAG]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.FLATTEN]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlNegative(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.INFLATE]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlNegative(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.PAINT]={_ctrls:[],onMaterialChanged:function(e,t,r){$eIStk.copy(t._color,r[0].getValue()),t._material[0]=r[1].getValue()/100,t._material[1]=r[2].getValue()/100;var i=e.getMesh();i&&(t._writeAlbedo&&i.setAlbedo(t._color),t._writeRoughness&&i.setRoughness(t._material[0]),t._writeMetalness&&i.setMetallic(t._material[1]),e.render())},resetMaterialOverride:function(e,t){this._ctrlPicker.getValue()!==t._pickColor&&this._ctrlPicker.setValue(t._pickColor);var r=e.getMesh();r&&r.getAlbedo&&(r.getAlbedo()[0]=-1,r.setRoughness(-1),r.setMetallic(-1),e.render())},onPickedMaterial:function(e,t,r,i,a,s){r.setCanvasCursor($jLaD3.default.cursors.dropper),e[0].setValue(i,!0),e[1].setValue(100*a,!0),e[2].setValue(100*s,!0),$eIStk.copy(t._color,i),t._material[0]=a,t._material[1]=s},onColorPick:function(e,t,r){e._pickColor=r,t.setCanvasCursor(r?$jLaD3.default.cursors.dropper:"default"),t._action=r?$eIUYI.default.Action.SCULPT_EDIT:$eIUYI.default.Action.NOTHING,t.renderSelectOverRtt()},init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlHardness(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),this._ctrls.push(t.addTitle((0,$l7y1s.default)("sculptPBRTitle"))),this._ctrls.push(t.addButton((0,$l7y1s.default)("sculptPaintAll"),e,"paintAll")),this._ctrlPicker=t.addCheckbox((0,$l7y1s.default)("sculptPickColor"),e._pickColor,this.onColorPick.bind(this,e,r)),this._ctrls.push(this._ctrlPicker);var i=[],a=this.onMaterialChanged.bind(this,r,e,i),s=t.addColor((0,$l7y1s.default)("sculptColor"),e._color,a),n=t.addSlider((0,$l7y1s.default)("sculptRoughness"),100*e._material[0],a,0,100,1),o=t.addSlider((0,$l7y1s.default)("sculptMetallic"),100*e._material[1],a,0,100,1);i.push(s,n,o),this._ctrls.push(s,n,o),e.setPickCallback(this.onPickedMaterial.bind(this,i,e,r)),this._ctrls.push(t.addTitle("Write channel")),this._ctrls.push(t.addCheckbox((0,$l7y1s.default)("sculptColor"),e,"_writeAlbedo")),this._ctrls.push(t.addCheckbox((0,$l7y1s.default)("sculptRoughness"),e,"_writeRoughness")),this._ctrls.push(t.addCheckbox((0,$l7y1s.default)("sculptMetallic"),e,"_writeMetalness")),window.addEventListener("keyup",this.resetMaterialOverride.bind(this,r,e)),window.addEventListener("mouseup",this.resetMaterialOverride.bind(this,r,e)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.PINCH]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlNegative(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.TWIST]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.LOCALSCALE]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.MOVE]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push(t.addCheckbox((0,$l7y1s.default)("sculptTopologicalCheck"),e,"_topoCheck")),this._ctrls.push($e4adcc7419248bff$var$addCtrlNegative(e,t,this,(0,$l7y1s.default)("sculptMoveAlongNormal"))),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.SMOOTH]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push(t.addCheckbox((0,$l7y1s.default)("sculptTangentialSmoothing"),e,"_tangent")),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.MASKING]={_ctrls:[],init:function(e,t,r){this._ctrls.push($e4adcc7419248bff$var$addCtrlRadius(e,t,this,r)),this._ctrls.push($e4adcc7419248bff$var$addCtrlIntensity(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlHardness(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlNegative(e,t,this)),this._ctrls.push($e4adcc7419248bff$var$addCtrlCulling(e,t)),this._main=r,this._tool=e;var i=t.addDualButton((0,$l7y1s.default)("sculptMaskingClear"),(0,$l7y1s.default)("sculptMaskingInvert"),e,e,"clear","invert"),a=t.addDualButton((0,$l7y1s.default)("sculptMaskingBlur"),(0,$l7y1s.default)("sculptMaskingSharpen"),e,e,"blur","sharpen");this._ctrls.push(i[0],i[1],a[0],a[1]),this._ctrls.push(t.addTitle((0,$l7y1s.default)("sculptExtractTitle"))),this._ctrls.push(t.addSlider((0,$l7y1s.default)("sculptExtractThickness"),e,"_thickness",-5,5,.001)),this._ctrls.push(t.addButton((0,$l7y1s.default)("sculptExtractAction"),e,"extract")),$e4adcc7419248bff$var$addCtrlAlpha(this._ctrls,t,e,this)}},$e4adcc7419248bff$var$GuiTools[$eIUYI.default.Tools.TRANSFORM]={_ctrls:[],init:function(){}};var $e4adcc7419248bff$export$2e2bcd8739ae039=$e4adcc7419248bff$var$GuiSculptingTools,$d2993b4250bc77fe$var$GuiTools=$e4adcc7419248bff$export$2e2bcd8739ae039.tools;class $d2993b4250bc77fe$var$GuiSculpting{constructor(e,t){this._main=t._main,this._ctrlGui=t,this._sculptManager=t._main.getSculptManager(),this._toolOnRelease=-1,this._invertSign=!1,this._modalBrushRadius=!1,this._modalBrushIntensity=!1,this._lastPageX=0,this._lastPageY=0,this._refX=0,this._refY=0,this._menu=null,this._ctrlSculpt=null,this._ctrlSymmetry=null,this._ctrlContinuous=null,this._ctrlTitleCommon=null,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("sculptTitle"));t.open(),t.addTitle((0,$l7y1s.default)("sculptTool"));for(var r=[],i=0,a=$44b556fb7f1fceec$export$2e2bcd8739ae039.length;i<a;++i)$44b556fb7f1fceec$export$2e2bcd8739ae039[i]&&(r[i]=(0,$l7y1s.default)($44b556fb7f1fceec$export$2e2bcd8739ae039[i].uiName));this._ctrlSculpt=t.addCombobox((0,$l7y1s.default)("sculptTool"),this._sculptManager.getToolIndex(),this.onChangeTool.bind(this),r),$e4adcc7419248bff$export$2e2bcd8739ae039.initGuiTools(this._sculptManager,this._menu,this._main),this._ctrlTitleCommon=t.addTitle((0,$l7y1s.default)("sculptCommon")),this._ctrlSymmetry=t.addCheckbox((0,$l7y1s.default)("sculptSymmetry"),this._sculptManager._symmetry,this.onSymmetryChange.bind(this)),this._ctrlContinuous=t.addCheckbox((0,$l7y1s.default)("sculptContinuous"),this._sculptManager,"_continuous"),$e4adcc7419248bff$export$2e2bcd8739ae039.show(this._sculptManager.getToolIndex()),this.addEvents(),this.onChangeTool(this._sculptManager.getToolIndex())}onSymmetryChange(e){this._sculptManager._symmetry=e,this._main.render()}addEvents(){var e=this.loadAlpha.bind(this);document.getElementById("alphaopen").addEventListener("change",e,!1),this.removeCallback=function(){document.getElementById("alphaopen").removeEventListener("change",e,!1)}}removeEvents(){this.removeCallback&&this.removeCallback()}getSelectedTool(){return this._ctrlSculpt.getValue()}releaseInvertSign(){if(this._invertSign){this._invertSign=!1;var e=$d2993b4250bc77fe$var$GuiTools[this.getSelectedTool()];e.toggleNegative&&e.toggleNegative()}}onChangeTool(e){$e4adcc7419248bff$export$2e2bcd8739ae039.hide(this._sculptManager.getToolIndex()),this._sculptManager.setToolIndex(e),$e4adcc7419248bff$export$2e2bcd8739ae039.show(e);var t=!0===this._sculptManager.canBeContinuous();this._ctrlContinuous.setVisibility(t);var r=e!==$eIUYI.default.Tools.TRANSFORM;this._ctrlSymmetry.setVisibility(r),this._ctrlTitleCommon.setVisibility(t||r),this._main.getPicking().updateLocalAndWorldRadius2()}loadAlpha(e){if(0!==e.target.files.length){var t=e.target.files[0];if(t.type.match("image.*")){var r=new FileReader,i=this._main,a=$d2993b4250bc77fe$var$GuiTools[this._sculptManager.getToolIndex()];r.onload=function(e){var r=new Image;r.src=e.target.result,r.onload=i.onLoadAlphaImage.bind(i,r,t.name||"new alpha",a)},document.getElementById("alphaopen").value="",r.readAsDataURL(t)}}}addAlphaOptions(e){for(var t=0,r=$d2993b4250bc77fe$var$GuiTools.length;t<r;++t){var i=$d2993b4250bc77fe$var$GuiTools[t];i&&i._ctrlAlpha&&i._ctrlAlpha.addOptions(e)}}updateMesh(){this._menu.setVisibility(!!this._main.getMesh())}_startModalBrushRadius(e,t){this._refX=e,this._refY=t;var r=$d2993b4250bc77fe$var$GuiTools[this.getSelectedTool()];if(r._ctrlRadius){var i=r._ctrlRadius.getValue();this._refX-=i,this._main.getSculptManager().getSelection().setOffsetX(-i*this._main.getPixelRatio()),this._main.renderSelectOverRtt()}}_checkModifierKey(e){var t=this.getSelectedTool();if(this._main._action!==$eIUYI.default.Action.NOTHING||(!e.shiftKey||e.altKey||e.ctrlKey||t===$eIUYI.default.Tools.SMOOTH||(this._toolOnRelease=t,this._ctrlSculpt.setValue($eIUYI.default.Tools.SMOOTH)),!e.ctrlKey||e.shiftKey||e.altKey||t===$eIUYI.default.Tools.MASKING||(this._toolOnRelease=t,this._ctrlSculpt.setValue($eIUYI.default.Tools.MASKING))),e.altKey){if(this._invertSign||e.shiftKey)return!0;this._invertSign=!0;var r=$d2993b4250bc77fe$var$GuiTools[t];return r.toggleNegative&&r.toggleNegative(),!0}return!1}onKeyDown(e){if(!0!==e.handled){var t=this._main,r=(0,$idLiu.default).getShortKey(e.which);if(e.stopPropagation(),t._focusGui&&r!==$eIUYI.default.KeyAction.RADIUS&&r!==$eIUYI.default.KeyAction.INTENSITY||e.preventDefault(),e.handled=!0,!this._checkModifierKey(e)&&t._action===$eIUYI.default.Action.NOTHING){if(void 0!==r&&$44b556fb7f1fceec$export$2e2bcd8739ae039[r])return this._ctrlSculpt.setValue(r);var i=$d2993b4250bc77fe$var$GuiTools[this.getSelectedTool()];switch(r){case $eIUYI.default.KeyAction.DELETE:t.deleteCurrentSelection();break;case $eIUYI.default.KeyAction.INTENSITY:this._modalBrushIntensity=t._focusGui=!0;break;case $eIUYI.default.KeyAction.RADIUS:this._modalBrushRadius||this._startModalBrushRadius(this._lastPageX,this._lastPageY),this._modalBrushRadius=t._focusGui=!0;break;case $eIUYI.default.KeyAction.NEGATIVE:i.toggleNegative&&i.toggleNegative();break;case $eIUYI.default.KeyAction.PICKER:var a=i._ctrlPicker;a&&!a.getValue()&&a.setValue(!0);break;default:e.handled=!1}}}}onKeyUp(e){var t=this._main._action===$eIUYI.default.Action.NOTHING&&-1!==this._toolOnRelease&&!e.ctrlKey&&!e.shiftKey;(!e.altKey||t)&&this.releaseInvertSign(),t&&(this._ctrlSculpt.setValue(this._toolOnRelease),this._toolOnRelease=-1);var r=this._main;switch((0,$idLiu.default).getShortKey(e.which)){case $eIUYI.default.KeyAction.RADIUS:this._modalBrushRadius=r._focusGui=!1,this._main.getSculptManager().getSelection().setOffsetX(0),e.pageX=this._lastPageX,e.pageY=this._lastPageY,r.setMousePosition(e),r.getPicking().intersectionMouseMeshes(),r.renderSelectOverRtt();break;case $eIUYI.default.KeyAction.PICKER:var i=$d2993b4250bc77fe$var$GuiTools[this.getSelectedTool()]._ctrlPicker;i&&i.getValue()&&i.setValue(!1);break;case $eIUYI.default.KeyAction.INTENSITY:this._modalBrushIntensity=r._focusGui=!1}}onMouseUp(e){-1===this._toolOnRelease||e.ctrlKey||e.shiftKey||(this.releaseInvertSign(),this._ctrlSculpt.setValue(this._toolOnRelease),this._toolOnRelease=-1)}onMouseMove(e){var t=$d2993b4250bc77fe$var$GuiTools[this.getSelectedTool()];if(this._modalBrushRadius&&t._ctrlRadius){var r=e.pageX-this._refX,i=e.pageY-this._refY;t._ctrlRadius.setValue(Math.sqrt(r*r+i*i)),this._main.renderSelectOverRtt()}this._modalBrushIntensity&&t._ctrlIntensity&&t._ctrlIntensity.setValue(t._ctrlIntensity.getValue()+e.pageX-this._lastPageX),this._lastPageX=e.pageX,this._lastPageY=e.pageY}onMouseOver(e){this._modalBrushRadius&&this._startModalBrushRadius(e.pageX,e.pageY)}}var $d2993b4250bc77fe$export$2e2bcd8739ae039=$d2993b4250bc77fe$var$GuiSculpting,$l7y1s=parcelRequire("l7y1s"),$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3");class $1da63fddf56e3762$var$StateAddRemove{constructor(e,t,r){this._main=e,this._addedMeshes=void 0!==t.length?t:[t],this._removedMeshes=void 0!==r.length?r:[r],this._selectMeshes=e.getSelectedMeshes().slice()}isNoop(){return 0===this._addedMeshes.length&&0===this._removedMeshes.length}undo(){var e,t,r=this._main,i=r.getMeshes(),a=this._addedMeshes;for(e=0,t=a.length;e<t;++e)i.splice(r.getIndexMesh(a[e]),1);var s=this._removedMeshes;for(e=0,t=s.length;e<t;++e)i.push(s[e]);for(e=0,t=i.length;e<t;++e)i[e].initRender();var n=this._selectMeshes;r.setMesh(n[0]?n[0]:null);var o=r.getSelectedMeshes();for(e=0,o.length=0,t=n.length;e<t;++e)o.push(n[e])}redo(){this.undo()}createRedo(){return new $1da63fddf56e3762$var$StateAddRemove(this._main,this._removedMeshes,this._addedMeshes)}}var $1da63fddf56e3762$export$2e2bcd8739ae039=$1da63fddf56e3762$var$StateAddRemove,$jLaD3=parcelRequire("jLaD3");class $a0a8291b36083647$var$StateColorAndMaterial{constructor(e,t){this._main=e,this._mesh=t,this._idVertState=[],this._cArState=[],this._mArState=[]}isNoop(){return 0===this._idVertState.length}undo(){this.pullVertices();var e=this._mesh;e.updateDuplicateColorsAndMaterials(),e.updateDrawArrays(),e.updateColorBuffer(),e.updateMaterialBuffer(),this._main.setMesh(e)}redo(){this.undo()}createRedo(){var e=new $a0a8291b36083647$var$StateColorAndMaterial(this._main,this._mesh);return this.pushRedoVertices(e),e}pushVertices(e){for(var t=this._idVertState,r=this._cArState,i=this._mArState,a=this._mesh,s=a.getColors(),n=a.getMaterials(),o=a.getVerticesStateFlags(),l=$jLaD3.default.STATE_FLAG,u=e.length,h=0;h<u;++h){var c=e[h];o[c]!==l&&(o[c]=l,t.push(c),c*=3,r.push(s[c],s[c+1],s[c+2]),i.push(n[c],n[c+1],n[c+2]))}}pushRedoVertices(e){for(var t=e._mesh,r=t.getColors(),i=t.getMaterials(),a=this._idVertState,s=a.length,n=e._cArState=new Float32Array(3*s),o=e._mArState=new Float32Array(3*s),l=e._idVertState=new Uint32Array(s),u=0;u<s;++u){var h=l[u]=a[u];h*=3;var c=3*u;n[c]=r[h],n[c+1]=r[h+1],n[c+2]=r[h+2],o[c]=i[h],o[c+1]=i[h+1],o[c+2]=i[h+2]}}pullVertices(){for(var e=this._cArState,t=this._mArState,r=this._idVertState,i=r.length,a=this._mesh,s=a.getColors(),n=a.getMaterials(),o=0;o<i;++o){var l=3*r[o],u=3*o;s[l]=e[u],s[l+1]=e[u+1],s[l+2]=e[u+2],n[l]=t[u],n[l+1]=t[u+1],n[l+2]=t[u+2]}}}var $a0a8291b36083647$export$2e2bcd8739ae039=$a0a8291b36083647$var$StateColorAndMaterial,$eIStk=parcelRequire("eIStk"),$jLaD3=parcelRequire("jLaD3");class $6d529f791de73a18$var$StateGeometry{constructor(e,t){this._main=e,this._mesh=t,this._center=$eIStk.copy([0,0,0],t.getCenter()),this._idVertState=[],this._vArState=[]}isNoop(){return 0===this._idVertState.length}undo(){this.pullVertices();var e=this._mesh;e.updateGeometry(e.getFacesFromVertices(this._idVertState),this._idVertState),e.updateGeometryBuffers(),$eIStk.copy(e.getCenter(),this._center),this._main.setMesh(e)}redo(){this.undo()}createRedo(){var e=new $6d529f791de73a18$var$StateGeometry(this._main,this._mesh);return this.pushRedoVertices(e),e}pushVertices(e){for(var t=this._idVertState,r=this._vArState,i=this._mesh,a=i.getVertices(),s=i.getVerticesStateFlags(),n=$jLaD3.default.STATE_FLAG,o=e.length,l=0;l<o;++l){var u=e[l];s[u]!==n&&(s[u]=n,t.push(u),u*=3,r.push(a[u],a[u+1],a[u+2]))}}pushRedoVertices(e){for(var t=e._mesh.getVertices(),r=this._idVertState,i=r.length,a=e._vArState=new Float32Array(3*i),s=e._idVertState=new Uint32Array(i),n=0;n<i;++n){var o=s[n]=r[n];o*=3;var l=3*n;a[l]=t[o],a[l+1]=t[o+1],a[l+2]=t[o+2]}}pullVertices(){for(var e=this._vArState,t=this._idVertState,r=t.length,i=this._mesh.getVertices(),a=0;a<r;++a){var s=3*t[a],n=3*a;i[s]=e[n],i[s+1]=e[n+1],i[s+2]=e[n+2]}}}var $6d529f791de73a18$export$2e2bcd8739ae039=$6d529f791de73a18$var$StateGeometry,$eIStk=parcelRequire("eIStk"),$jLaD3=parcelRequire("jLaD3");class $95f34cdeba1e6b12$var$StateDynamic{constructor(e,t){this._main=e,this._mesh=t,this._center=$eIStk.copy([0,0,0],t.getCenter()),this._nbFacesState=t.getNbFaces(),this._nbVerticesState=t.getNbVertices(),this._idVertState=[],this._fRingState=[],this._vRingState=[],this._vArState=[],this._cArState=[],this._mArState=[],this._idFaceState=[],this._fArState=[]}isNoop(){return 0===this._idVertState.length&&0===this._idFaceState.length}undo(){this.pullVertices(),this.pullFaces();var e=this._mesh;e.setNbVertices(this._nbVerticesState),e.setNbFaces(this._nbFacesState),e.updateTopology(),e.updateGeometry(),e.updateDuplicateColorsAndMaterials(),e.updateDrawArrays(),e.updateColorBuffer(),e.updateMaterialBuffer(),e.updateBuffers(),$eIStk.copy(e.getCenter(),this._center),this._main.setMesh(e)}redo(){this.undo()}createRedo(){var e=new $95f34cdeba1e6b12$var$StateDynamic(this._main,this._mesh);return this.pushRedoVertices(e),this.pushRedoFaces(e),e}pushVertices(e){for(var t=this._idVertState,r=this._fRingState,i=this._vRingState,a=this._vArState,s=this._cArState,n=this._mArState,o=this._mesh,l=o.getVerticesRingFace(),u=o.getVerticesRingVert(),h=o.getVertices(),c=o.getColors(),d=o.getMaterials(),g=o.getVerticesStateFlags(),p=$jLaD3.default.STATE_FLAG,m=e.length,f=0;f<m;++f){var _=e[f];g[_]!==p&&(g[_]=p,r.push(l[_].slice()),i.push(u[_].slice()),t.push(_),_*=3,a.push(h[_],h[_+1],h[_+2]),s.push(c[_],c[_+1],c[_+2]),n.push(d[_],d[_+1],d[_+2]))}}pushFaces(e){for(var t=this._idFaceState,r=this._fArState,i=this._mesh,a=i.getFaces(),s=i.getFacesStateFlags(),n=$jLaD3.default.STATE_FLAG,o=e.length,l=0;l<o;++l){var u=e[l];s[u]!==n&&(s[u]=n,t.push(u),u*=4,r.push(a[u],a[u+1],a[u+2],a[u+3]))}}pushRedoVertices(e){var t=e._mesh,r=t.getNbVertices(),i=t.getVerticesRingFace(),a=t.getVerticesRingVert(),s=t.getVertices(),n=t.getColors(),o=t.getMaterials(),l=0,u=0,h=0,c=this._idVertState,d=c.length,g=this._nbVerticesState,p=Math.min(g,r),m=new Uint32Array((0,$jLaD3.default).getMemory(4*r),0,r);for(l=0;l<d;++l)(u=c[l])<p&&(m[h++]=u);for(l=g;l<r;++l)m[h++]=l;d=h,m=e._idVertState=new Uint32Array(m.subarray(0,d));var f=e._fRingState=Array(d),_=e._vRingState=Array(d),v=e._vArState=new Float32Array(3*d),T=e._cArState=new Float32Array(3*d),M=e._mArState=new Float32Array(3*d);for(l=0;l<d;++l){u=m[l],f[l]=i[u].slice(),_[l]=a[u].slice(),u*=3;var y=3*l;v[y]=s[u],v[y+1]=s[u+1],v[y+2]=s[u+2],T[y]=n[u],T[y+1]=n[u+1],T[y+2]=n[u+2],M[y]=o[u],M[y+1]=o[u+1],M[y+2]=o[u+2]}}pushRedoFaces(e){var t=e._mesh,r=t.getNbFaces(),i=t.getFaces(),a=0,s=0,n=0,o=this._idFaceState,l=o.length,u=this._nbFacesState,h=Math.min(u,r),c=new Uint32Array((0,$jLaD3.default).getMemory(4*r),0,r);for(a=0;a<l;++a)(s=o[a])<h&&(c[n++]=s);for(a=u;a<r;++a)c[n++]=a;l=n,c=e._idFaceState=new Uint32Array(c.subarray(0,l));var d=e._fArState=new Int32Array(4*l);for(a=0;a<l;++a){s=4*c[a];var g=4*a;d[g]=i[s],d[g+1]=i[s+1],d[g+2]=i[s+2],d[g+3]=i[s+3]}}pullVertices(){for(var e=this._nbVerticesState,t=this._fRingState,r=this._vRingState,i=this._vArState,a=this._cArState,s=this._mArState,n=this._idVertState,o=n.length,l=this._mesh,u=l.getVerticesRingFace(),h=l.getVerticesRingVert(),c=l.getVertices(),d=l.getColors(),g=l.getMaterials(),p=0;p<o;++p){var m=n[p];if(!(m>=e)){u[m]=t[p].slice(),h[m]=r[p].slice(),m*=3;var f=3*p;c[m]=i[f],c[m+1]=i[f+1],c[m+2]=i[f+2],d[m]=a[f],d[m+1]=a[f+1],d[m+2]=a[f+2],g[m]=s[f],g[m+1]=s[f+1],g[m+2]=s[f+2]}}}pullFaces(){for(var e=this._nbFacesState,t=this._fArState,r=this._idFaceState,i=r.length,a=this._mesh.getFaces(),s=0;s<i;++s){var n=r[s];if(!(n>=e)){n*=4;var o=4*s;a[n]=t[o],a[n+1]=t[o+1],a[n+2]=t[o+2],a[n+3]=t[o+3]}}}}var $95f34cdeba1e6b12$export$2e2bcd8739ae039=$95f34cdeba1e6b12$var$StateDynamic;class $dc75506a5295dcde$var$StateCustom{constructor(e,t){this._undocb=e,this._redocb=t||e}isNoop(){return!this._undocb}undo(){this._undocb()}redo(){this._redocb()}createRedo(){return new $dc75506a5295dcde$var$StateCustom(this._undocb,this._redocb)}}var $dc75506a5295dcde$export$2e2bcd8739ae039=$dc75506a5295dcde$var$StateCustom;class $c913b95fa99a287b$var$StateManager{constructor(e){this._main=e,this._undos=[],this._redos=[],this._curUndoIndex=-1}pushStateCustom(e,t,r){var i=new $dc75506a5295dcde$export$2e2bcd8739ae039(e,t);i.squash=r,this.pushState(i)}pushStateAddRemove(e,t,r){var i=new $1da63fddf56e3762$export$2e2bcd8739ae039(this._main,e,t);i.squash=r,this.pushState(i)}pushStateRemove(e){this.pushState(new $1da63fddf56e3762$export$2e2bcd8739ae039(this._main,[],e))}pushStateAdd(e){this.pushState(new $1da63fddf56e3762$export$2e2bcd8739ae039(this._main,e,[]))}pushStateColorAndMaterial(e){e.isDynamic?this.pushState(new $95f34cdeba1e6b12$export$2e2bcd8739ae039(this._main,e)):this.pushState(new $a0a8291b36083647$export$2e2bcd8739ae039(this._main,e))}pushStateGeometry(e){e.isDynamic?this.pushState(new $95f34cdeba1e6b12$export$2e2bcd8739ae039(this._main,e)):this.pushState(new $6d529f791de73a18$export$2e2bcd8739ae039(this._main,e))}pushStateMultiresolution(e,t){this.pushState(new $8ff8e0602d885804$export$2e2bcd8739ae039(this._main,e,t))}setNewMaxStack(e){$c913b95fa99a287b$var$StateManager.STACK_LENGTH=e;for(var t=this._undos,r=this._redos;this._curUndoIndex>=e;)t.shift(),--this._curUndoIndex;for(;t.length>e;)t.pop(),r.shift()}pushState(e){++$jLaD3.default.STATE_FLAG;var t=this._undos;-1===this._curUndoIndex?t.length=0:t.length>=$c913b95fa99a287b$var$StateManager.STACK_LENGTH&&(t.shift(),--this._curUndoIndex),this._redos.length=0,++this._curUndoIndex,t.length>0&&(t.length=this._curUndoIndex),t.push(e)}getCurrentState(){return this._undos[this._curUndoIndex]}pushVertices(e){e&&e.length>0&&this.getCurrentState().pushVertices(e)}pushFaces(e){e&&e.length>0&&this.getCurrentState().pushFaces(e)}undo(){if(this._undos.length&&!(this._curUndoIndex<0)){var e=this.getCurrentState(),t=e.createRedo();t.squash=e.squash,this._redos.push(t),e.undo(),this._curUndoIndex--,!0===e.squash&&this.undo()}}redo(){if(this._redos.length){var e=this._redos[this._redos.length-1];e.redo(),this._curUndoIndex++,this._redos.pop(),this._redos.length&&!0===this._redos[this._redos.length-1].squash&&this.redo()}}reset(){this._undos.length=0,this._redos.length=0,this._curUndoIndex=-1}cleanNoop(){for(;this._curUndoIndex>=0&&this.getCurrentState().isNoop();)this._undos.length--,this._curUndoIndex--,this._redos.length=0}}$c913b95fa99a287b$var$StateManager.STACK_LENGTH=15;var $c913b95fa99a287b$export$2e2bcd8739ae039=$c913b95fa99a287b$var$StateManager;class $b444015be64fe7cb$var$GuiTablet{constructor(e,t){this._ctrlGui=t,this._main=t._main,this._menu=null,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("stateTitle"));t.addButton((0,$l7y1s.default)("stateUndo"),this,"onUndo","CTRL+Z"),t.addButton((0,$l7y1s.default)("stateRedo"),this,"onRedo","CTRL+Y"),t.addTitle((0,$l7y1s.default)("stateMaxStack"));var r=this._main.getStateManager();t.addSlider("",$c913b95fa99a287b$export$2e2bcd8739ae039.STACK_LENGTH,r.setNewMaxStack.bind(r),3,50,1)}onUndo(){this._main._action=$eIUYI.default.Action.NOTHING,this._main.getSculptManager().end(),this._main.getStateManager().undo(),this._main.render(),this._ctrlGui.updateMesh()}onRedo(){this._main.getStateManager().redo(),this._main.render(),this._ctrlGui.updateMesh()}onKeyDown(e){if(!0!==e.handled){e.stopPropagation(),this._main._focusGui||e.preventDefault();var t=e.which;e.ctrlKey&&90===t?(this.onUndo(),e.handled=!0):e.ctrlKey&&89===t&&(this.onRedo(),e.handled=!0)}}}var $b444015be64fe7cb$export$2e2bcd8739ae039=$b444015be64fe7cb$var$GuiTablet,$l7y1s=parcelRequire("l7y1s"),$im4cd=parcelRequire("im4cd");class $d10ac9cea11a57d1$var$GuiTablet{constructor(e){this._menu=null,this.init(e)}init(e){var t=this._menu=e.addMenu((0,$l7y1s.default)("pressureTitle"));t.addTitle((0,$l7y1s.default)("pressureRadius")),t.addSlider("",$im4cd.default,"radiusFactor",0,1,.01),t.addTitle((0,$l7y1s.default)("pressureIntensity")),t.addSlider("",$im4cd.default,"intensityFactor",0,1,.01)}}var $d10ac9cea11a57d1$export$2e2bcd8739ae039=$d10ac9cea11a57d1$var$GuiTablet;class $9fb8ff9b3ece9de6$var$Gui{constructor(e){this._main=e,this._guiMain=null,this._sidebar=null,this._topbar=null,this._ctrlTablet=null,this._ctrlFiles=null,this._ctrlScene=null,this._ctrlStates=null,this._ctrlCamera=null,this._ctrlBackground=null,this._ctrlSculpting=null,this._ctrlTopology=null,this._ctrlRendering=null,this._ctrlNotification=null,this._ctrls=[],this._notifications={},this._xhrs={}}initGui(){this.deleteGui(),this._guiMain=new $91d6ebf5c7e023c1$export$2e2bcd8739ae039(this._main.getViewport(),this._main.onCanvasResize.bind(this._main));var e=this._ctrls;e.length=0;var t=0;this._topbar=this._guiMain.addTopbar(),e[t++]=this._ctrlFiles=new $c05551ac674b7063$export$2e2bcd8739ae039(this._topbar,this),e[t++]=this._ctrlScene=new $7d9c92f5564cf378$export$2e2bcd8739ae039(this._topbar,this),e[t++]=this._ctrlStates=new $b444015be64fe7cb$export$2e2bcd8739ae039(this._topbar,this),e[t++]=this._ctrlBackground=new $f02a84529bb917d1$export$2e2bcd8739ae039(this._topbar,this),e[t++]=this._ctrlCamera=new $6bf15635e8c1a736$export$2e2bcd8739ae039(this._topbar,this),e[t++]=this._ctrlTablet=new $d10ac9cea11a57d1$export$2e2bcd8739ae039(this._topbar,this),e[t++]=this._ctrlConfig=new $25e58a415bd1b2b2$export$2e2bcd8739ae039(this._topbar,this),e[t++]=this._ctrlMesh=new $adcfdceb4bbf6c19$export$2e2bcd8739ae039(this._topbar,this),this._sidebar=this._guiMain.addRightSidebar(),e[t++]=this._ctrlRendering=new $811fa4c75754f16d$export$2e2bcd8739ae039(this._sidebar,this),e[t++]=this._ctrlTopology=new $5889570aa0c7a611$export$2e2bcd8739ae039(this._sidebar,this),e[t++]=this._ctrlSculpting=new $d2993b4250bc77fe$export$2e2bcd8739ae039(this._sidebar,this);var r=this._topbar.addExtra();r.addTitle((0,$l7y1s.default)("contour")),r.addColor((0,$l7y1s.default)("contourColor"),$bbc51a120536ab4c$export$2e2bcd8739ae039.color,this.onContourColor.bind(this)),r.addTitle((0,$l7y1s.default)("resolution")),r.addSlider("",this._main._pixelRatio,this.onPixelRatio.bind(this),.5,2,.02),this.addAboutButton(),this.updateMesh(),this.setVisibility(!0),window.postprocessGui&&window.postprocessGui()}getNotification(e){var t=this._notifications[e];if(!t)return(t=this._topbar.addMenu()).isVisible=function(){return!this.domContainer.hidden},t.setMessage=function(e){this.domContainer.innerHTML=e,this.setVisibility(!!e)},t.domContainer.style.color="red",t.setMessage(""),this._notifications[e]=t,t;if(this._xhrs[e]&&t.isVisible()){window.confirm("Abort "+e+" previous upload?")&&(this._xhrs[e].abort(),this._xhrs[e].isAborted=!0,t.setMessage(null));return}return t}initPrint(e){e.addMenu("Print it!").addButton("Go to Materialise!",this,"exportMaterialise")}exportSculpteo(){this._export("sculpteo")}exportMaterialise(){window.confirm("A new webpage will be opened. Start upload?")&&this._export("materialise")}exportSketchfab(){this._export("sketchfab")}_export(e){if(this._main.getMesh()){var t=this.getNotification(e);if(t){var r="export"+e.charAt(0).toUpperCase()+e.slice(1);this._xhrs[e]=$be3d897267df1cc7$export$2e2bcd8739ae039[r](this._main,t)}}}onPixelRatio(e){this._main._pixelRatio=e,this._main.onCanvasResize()}onContourColor(e){$bbc51a120536ab4c$export$2e2bcd8739ae039.color[0]=e[0],$bbc51a120536ab4c$export$2e2bcd8739ae039.color[1]=e[1],$bbc51a120536ab4c$export$2e2bcd8739ae039.color[2]=e[2],$bbc51a120536ab4c$export$2e2bcd8739ae039.color[3]=e[3],this._main.render()}addAboutButton(){var e=this._topbar.addMenu();e.domContainer.innerHTML=(0,$l7y1s.default)("about"),e.domContainer.addEventListener("mousedown",function(){window.open("http://stephaneginier.com","_blank")})}updateMesh(){this._ctrlRendering.updateMesh(),this._ctrlTopology.updateMesh(),this._ctrlSculpting.updateMesh(),this._ctrlScene.updateMesh(),this.updateMeshInfo()}updateMeshInfo(){this._ctrlMesh.updateMeshInfo()}getFlatShading(){return this._ctrlRendering.getFlatShading()}getWireframe(){return this._ctrlRendering.getWireframe()}getShaderType(){return this._ctrlRendering.getShaderType()}addAlphaOptions(e){this._ctrlSculpting.addAlphaOptions(e)}deleteGui(){this._guiMain&&this._guiMain.domMain.parentNode&&(this.callFunc("removeEvents"),this.setVisibility(!1),this._guiMain.domMain.parentNode.removeChild(this._guiMain.domMain))}setVisibility(e){this._guiMain.setVisibility(e)}callFunc(e,t){for(var r=0,i=this._ctrls,a=i.length;r<a;++r){var s=i[r];s&&s[e]&&s[e](t)}}}var $9fb8ff9b3ece9de6$export$2e2bcd8739ae039=$9fb8ff9b3ece9de6$var$Gui,$3iqbd=parcelRequire("3iqbd"),$eIStk=parcelRequire("eIStk"),$idLiu=parcelRequire("idLiu"),$eIUYI=parcelRequire("eIUYI"),$jLaD3=parcelRequire("jLaD3"),$bSIL4=parcelRequire("bSIL4"),$13fbb0ce67844025$var$easeOutQuart=function(e){return-((e=Math.min(1,e)-1)*e*e*e-1)},$13fbb0ce67844025$var$DELAY_SNAP=200,$13fbb0ce67844025$var$DELAY_ROTATE=-1,$13fbb0ce67844025$var$DELAY_TRANSLATE=-1,$13fbb0ce67844025$var$DELAY_MOVE_TO=200,$13fbb0ce67844025$var$_TMP_VEC2=[0,0],$13fbb0ce67844025$var$_TMP_VEC3=[0,0,0],$13fbb0ce67844025$var$_TMP_VEC3_2=[0,0,0],$13fbb0ce67844025$var$_UP=[0,1,0],$13fbb0ce67844025$var$_TMP_QUAT=[0,0,0,1],$13fbb0ce67844025$var$_TMP_MAT=$3iqbd.create(),$13fbb0ce67844025$var$_sq=Math.SQRT1_2,$13fbb0ce67844025$var$_d=.5,$13fbb0ce67844025$var$_QUAT_COMP=[$e92e4eb8d35aaf31$exports.fromValues(1,0,0,0),$e92e4eb8d35aaf31$exports.fromValues(0,1,0,0),$e92e4eb8d35aaf31$exports.fromValues(0,0,1,0),$e92e4eb8d35aaf31$exports.fromValues(0,0,0,1),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_sq,$13fbb0ce67844025$var$_sq,0,0),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_sq,-$13fbb0ce67844025$var$_sq,0,0),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_sq,0,$13fbb0ce67844025$var$_sq,0),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_sq,0,-$13fbb0ce67844025$var$_sq,0),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_sq,0,0,$13fbb0ce67844025$var$_sq),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_sq,0,0,-$13fbb0ce67844025$var$_sq),$e92e4eb8d35aaf31$exports.fromValues(0,$13fbb0ce67844025$var$_sq,$13fbb0ce67844025$var$_sq,0),$e92e4eb8d35aaf31$exports.fromValues(0,$13fbb0ce67844025$var$_sq,-$13fbb0ce67844025$var$_sq,0),$e92e4eb8d35aaf31$exports.fromValues(0,$13fbb0ce67844025$var$_sq,0,$13fbb0ce67844025$var$_sq),$e92e4eb8d35aaf31$exports.fromValues(0,$13fbb0ce67844025$var$_sq,0,-$13fbb0ce67844025$var$_sq),$e92e4eb8d35aaf31$exports.fromValues(0,0,$13fbb0ce67844025$var$_sq,$13fbb0ce67844025$var$_sq),$e92e4eb8d35aaf31$exports.fromValues(0,0,$13fbb0ce67844025$var$_sq,-$13fbb0ce67844025$var$_sq),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d),$e92e4eb8d35aaf31$exports.fromValues($13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d,-$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d),$e92e4eb8d35aaf31$exports.fromValues(-$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d,$13fbb0ce67844025$var$_d)];class $13fbb0ce67844025$var$Camera{constructor(e){this._main=e;var t=(0,$idLiu.default)();this._mode=t.cameramode||$eIUYI.default.CameraMode.ORBIT,this._projectionType=t.projection||$eIUYI.default.Projection.PERSPECTIVE,this._quatRot=[0,0,0,1],this._view=$3iqbd.create(),this._proj=$3iqbd.create(),this._viewport=$3iqbd.create(),this._lastNormalizedMouseXY=[0,0],this._width=0,this._height=0,this._speed=0,this._fov=Math.min(t.fov,150),this._trans=[0,0,30],this._moveX=0,this._moveZ=0,this._usePivot=t.pivot,this._center=[0,0,0],this._offset=[0,0,0],this._rotX=0,this._rotY=0,this._near=.05,this._far=5e3,this._timers={},this.resetView()}setProjectionType(e){this._projectionType=e,this.updateProjection(),this.updateView()}setMode(e){this._mode=e,e===$eIUYI.default.CameraMode.ORBIT&&this.resetViewFront()}setFov(e){this._fov=e,this.updateView(),this.optimizeNearFar()}setUsePivot(e){this._usePivot=e}toggleUsePivot(){this._usePivot=!this._usePivot}getView(){return this._view}getProjection(){return this._proj}getProjectionType(){return this._projectionType}isOrthographic(){return this._projectionType===$eIUYI.default.Projection.ORTHOGRAPHIC}getMode(){return this._mode}getFov(){return this._fov}getUsePivot(){return this._usePivot}getConstantScreen(){var e=this._main.getCanvas().clientWidth;return this._projectionType===$eIUYI.default.Projection.ORTHOGRAPHIC?e/this.getOrthoZoom():e*this._proj[0]}start(e,t){if(this._lastNormalizedMouseXY=(0,$bSIL4.default).normalizedMouse(e,t,this._width,this._height),this._usePivot){var r=this._main,i=r.getPicking();i.intersectionMouseMeshes(r.getMeshes(),e,t),i.getMesh()&&($eIStk.transformMat4($13fbb0ce67844025$var$_TMP_VEC3,i.getIntersectionPoint(),i.getMesh().getMatrix()),this.setPivot($13fbb0ce67844025$var$_TMP_VEC3))}}setPivot(e){if($eIStk.transformQuat(this._offset,this._offset,$e92e4eb8d35aaf31$exports.invert($13fbb0ce67844025$var$_TMP_QUAT,this._quatRot)),$eIStk.sub(this._offset,this._offset,this._center),$eIStk.copy(this._center,e),$eIStk.add(this._offset,this._offset,this._center),$eIStk.transformQuat(this._offset,this._offset,this._quatRot),this._projectionType===$eIUYI.default.Projection.PERSPECTIVE){var t=this.getTransZ();this._trans[2]=$eIStk.dist(this.computePosition(),this._center)*this._fov/45,this._offset[2]+=this.getTransZ()-t}else this._offset[2]=0}rotate(e,t){var r=$13fbb0ce67844025$var$_TMP_VEC3,i=$13fbb0ce67844025$var$_TMP_VEC2,a=(0,$bSIL4.default).normalizedMouse(e,t,this._width,this._height);if(this._mode===$eIUYI.default.CameraMode.ORBIT)$4ce98914b6676340$exports.sub(i,a,this._lastNormalizedMouseXY),this.setOrbit(this._rotX-2*i[1],this._rotY+2*i[0]),this.rotateDelay([-(6*i[1]),6*i[0]],$13fbb0ce67844025$var$DELAY_ROTATE);else if(this._mode===$eIUYI.default.CameraMode.PLANE){var s=$4ce98914b6676340$exports.dist(this._lastNormalizedMouseXY,a);$4ce98914b6676340$exports.sub(i,a,this._lastNormalizedMouseXY),$eIStk.normalize(r,$eIStk.set(r,-i[1],i[0],0)),$e92e4eb8d35aaf31$exports.mul(this._quatRot,$e92e4eb8d35aaf31$exports.setAxisAngle($13fbb0ce67844025$var$_TMP_QUAT,r,2*s),this._quatRot),this.rotateDelay([r[0],r[1],r[2],6*s],$13fbb0ce67844025$var$DELAY_ROTATE)}else if(this._mode===$eIUYI.default.CameraMode.SPHERICAL){var n=(0,$bSIL4.default).mouseOnUnitSphere(this._lastNormalizedMouseXY),o=(0,$bSIL4.default).mouseOnUnitSphere(a),l=Math.acos(Math.min(1,$eIStk.dot(n,o)));$eIStk.normalize(r,$eIStk.cross(r,n,o)),$e92e4eb8d35aaf31$exports.mul(this._quatRot,$e92e4eb8d35aaf31$exports.setAxisAngle($13fbb0ce67844025$var$_TMP_QUAT,r,2*l),this._quatRot),this.rotateDelay([r[0],r[1],r[2],6*l],$13fbb0ce67844025$var$DELAY_ROTATE)}this._lastNormalizedMouseXY=a,this.updateView()}setOrbit(e,t){var r=.49*Math.PI;this._rotX=Math.max(Math.min(e,r),-r),this._rotY=t;var i=this._quatRot;$e92e4eb8d35aaf31$exports.identity(i),$e92e4eb8d35aaf31$exports.rotateX(i,i,this._rotX),$e92e4eb8d35aaf31$exports.rotateY(i,i,this._rotY)}getTransZ(){return this._projectionType===$eIUYI.default.Projection.PERSPECTIVE?45*this._trans[2]/this._fov:1e3}updateView(){var e=$13fbb0ce67844025$var$_TMP_VEC3,t=this._view,r=this._trans[0],i=this._trans[1],a=this._offset;$eIStk.set($13fbb0ce67844025$var$_TMP_VEC3_2,r-a[0],i-a[1],this.getTransZ()-a[2]),$eIStk.set(e,r-a[0],i-a[1],-a[2]),$3iqbd.lookAt(t,$13fbb0ce67844025$var$_TMP_VEC3_2,e,$13fbb0ce67844025$var$_UP),$3iqbd.mul(t,t,$3iqbd.fromQuat($13fbb0ce67844025$var$_TMP_MAT,this._quatRot)),$3iqbd.translate(t,t,$eIStk.negate($13fbb0ce67844025$var$_TMP_VEC3,this._center))}optimizeNearFar(e){if(e||(e=this._lastBBox),e){this._lastBBox=e;var t=this.computePosition($13fbb0ce67844025$var$_TMP_VEC3_2),r=$eIStk.set($13fbb0ce67844025$var$_TMP_VEC3,(e[0]+e[3])*.5,(e[1]+e[4])*.5,(e[2]+e[5])*.5),i=$eIStk.dist(t,r),a=.5*$eIStk.dist(e,$eIStk.set($13fbb0ce67844025$var$_TMP_VEC3,e[3],e[4],e[5]));this._near=Math.max(.01,i-a),this._far=a+i,this.updateProjection()}}updateProjection(){this._projectionType===$eIUYI.default.Projection.PERSPECTIVE?($3iqbd.perspective(this._proj,this._fov*Math.PI/180,this._width/this._height,this._near,this._far),this._proj[10]=-1,this._proj[14]=-2*this._near):this.updateOrtho()}updateTranslation(){var e=this._trans;e[0]+=this._moveX*this._speed*e[2]/50/400,e[2]=Math.max(1e-5,e[2]+this._moveZ*this._speed/400),this._projectionType===$eIUYI.default.Projection.ORTHOGRAPHIC&&this.updateOrtho(),this.updateView()}translate(e,t){var r=this._speed*this._trans[2]/54,i=[-e*r,t*r,0];this.setTrans($eIStk.add(this._trans,this._trans,i)),$eIStk.scale(i,i,5),this.translateDelay(i,$13fbb0ce67844025$var$DELAY_TRANSLATE)}zoom(e){var t=[0,0,0];$eIStk.sub(t,this._offset,this._trans),$eIStk.scale(t,t,e*this._speed/54),e<0&&(t[0]=t[1]=0),this.setTrans($eIStk.add(this._trans,this._trans,t)),$eIStk.scale(t,t,5),this.translateDelay(t,$13fbb0ce67844025$var$DELAY_TRANSLATE)}setAndFocusOnPivot(e,t){this.setPivot(e),this.moveToDelay(this._offset[0],this._offset[1],this._offset[2]+t)}moveToDelay(e,t,r){var i=[e,t,r];this.translateDelay($eIStk.sub(i,i,this._trans),$13fbb0ce67844025$var$DELAY_MOVE_TO)}setTrans(e){$eIStk.copy(this._trans,e),this._projectionType===$eIUYI.default.Projection.ORTHOGRAPHIC&&this.updateOrtho(),this.updateView()}getOrthoZoom(){return 55e-5*Math.abs(this._trans[2])}updateOrtho(){var e=this.getOrthoZoom(),t=this._width*e,r=this._height*e;$3iqbd.ortho(this._proj,-t,t,-r,r,-this._near,this._far)}computePosition(e){e=e||[0,0,0];var t=this._view;return $eIStk.set(e,-t[12],-t[13],-t[14]),$879d8210211d0bfa$exports.fromMat4($13fbb0ce67844025$var$_TMP_MAT,t),$879d8210211d0bfa$exports.transpose($13fbb0ce67844025$var$_TMP_MAT,$13fbb0ce67844025$var$_TMP_MAT),$eIStk.transformMat3(e,e,$13fbb0ce67844025$var$_TMP_MAT)}resetView(){this._speed=1.5*$jLaD3.default.SCALE,this.centerDelay([0,0,0],$13fbb0ce67844025$var$DELAY_MOVE_TO),this.offsetDelay([0,0,0],$13fbb0ce67844025$var$DELAY_MOVE_TO);var e=[0,0,30+this._speed/3];$eIStk.sub(e,e,this._trans),this.translateDelay(e,$13fbb0ce67844025$var$DELAY_MOVE_TO),this.quatDelay([0,0,0,1],$13fbb0ce67844025$var$DELAY_MOVE_TO)}resetViewFront(){this.quatDelay([0,0,0,1],$13fbb0ce67844025$var$DELAY_SNAP)}resetViewBack(){this.quatDelay([0,1,0,0],$13fbb0ce67844025$var$DELAY_SNAP)}resetViewTop(){this.quatDelay([Math.SQRT1_2,0,0,Math.SQRT1_2],$13fbb0ce67844025$var$DELAY_SNAP)}resetViewBottom(){this.quatDelay([-Math.SQRT1_2,0,0,Math.SQRT1_2],$13fbb0ce67844025$var$DELAY_SNAP)}resetViewLeft(){this.quatDelay([0,-Math.SQRT1_2,0,Math.SQRT1_2],$13fbb0ce67844025$var$DELAY_SNAP)}resetViewRight(){this.quatDelay([0,Math.SQRT1_2,0,Math.SQRT1_2],$13fbb0ce67844025$var$DELAY_SNAP)}toggleViewFront(){Math.abs(this._quatRot[3])>.99?this.resetViewBack():this.resetViewFront()}toggleViewTop(){var e=this._quatRot[0]*Math.SQRT1_2+this._quatRot[3]*Math.SQRT1_2;e*e>.99?this.resetViewBottom():this.resetViewTop()}toggleViewLeft(){var e=-this._quatRot[1]*Math.SQRT1_2+this._quatRot[3]*Math.SQRT1_2;e*e>.99?this.resetViewRight():this.resetViewLeft()}computeWorldToScreenMatrix(e){return e=e||$3iqbd.create(),$3iqbd.mul(e,$3iqbd.mul(e,this._viewport,this._proj),this._view)}unproject(e,t,r){var i=[0,0,0];return $3iqbd.invert($13fbb0ce67844025$var$_TMP_MAT,this.computeWorldToScreenMatrix($13fbb0ce67844025$var$_TMP_MAT)),$eIStk.transformMat4(i,$eIStk.set(i,e,this._height-t,r),$13fbb0ce67844025$var$_TMP_MAT)}project(e){var t=[0,0,0];return $eIStk.transformMat4(t,e,this.computeWorldToScreenMatrix($13fbb0ce67844025$var$_TMP_MAT)),t[1]=this._height-t[1],t}onResize(e,t){this._width=e,this._height=t;var r=this._viewport;$3iqbd.identity(r),$3iqbd.scale(r,r,$eIStk.set($13fbb0ce67844025$var$_TMP_VEC3,.5*e,.5*t,.5)),$3iqbd.translate(r,r,$eIStk.set($13fbb0ce67844025$var$_TMP_VEC3,1,1,1)),this.updateProjection()}snapClosestRotation(){for(var e=this._quatRot,t=1/0,r=0,i=$13fbb0ce67844025$var$_QUAT_COMP.length,a=0;a<i;++a){var s=$e92e4eb8d35aaf31$exports.dot(e,$13fbb0ce67844025$var$_QUAT_COMP[a]);t<(s=1-s*s)||(t=s,r=a)}this.quatDelay($13fbb0ce67844025$var$_QUAT_COMP[r],$13fbb0ce67844025$var$DELAY_SNAP)}clearTimerN(e){window.clearInterval(this._timers[e]),this._timers[e]=0}delay(e,t,r){var i=r||"default";if(this._timers[i]&&this.clearTimerN(i),0===t)return e(1);if(!(t<0)){var a=0,s=new Date().getTime();this._timers[i]=window.setInterval((function(){var r=(new Date().getTime()-s)/t;e((r=$13fbb0ce67844025$var$easeOutQuart(r))-a,r),a=r,r>=1&&this.clearTimerN(i)}).bind(this),16.6)}}_translateDelta(e,t){var r=this._trans;$eIStk.scaleAndAdd(r,r,e,t),this.setTrans(r),this._main.render()}translateDelay(e,t){var r=this._translateDelta.bind(this,e);this.delay(r,t,"translate")}_rotDelta(e,t){if(this._mode===$eIUYI.default.CameraMode.ORBIT){var r=this._rotX+e[0]*t,i=this._rotY+e[1]*t;this.setOrbit(r,i)}else $e92e4eb8d35aaf31$exports.mul(this._quatRot,$e92e4eb8d35aaf31$exports.setAxisAngle($13fbb0ce67844025$var$_TMP_QUAT,e,e[3]*t),this._quatRot);this.updateView(),this._main.render()}rotateDelay(e,t){var r=this._rotDelta.bind(this,e);this.delay(r,t,"rotate")}_quatDelta(e,t){$e92e4eb8d35aaf31$exports.identity($13fbb0ce67844025$var$_TMP_QUAT),$e92e4eb8d35aaf31$exports.slerp($13fbb0ce67844025$var$_TMP_QUAT,$13fbb0ce67844025$var$_TMP_QUAT,e,t);var r=this._quatRot;if($e92e4eb8d35aaf31$exports.mul(this._quatRot,this._quatRot,$13fbb0ce67844025$var$_TMP_QUAT),this._mode===$eIUYI.default.CameraMode.ORBIT){var i=r[0],a=r[1],s=r[2],n=r[3];this._rotY=Math.atan2(2*(n*a+s*i),1-2*(a*a+s*s)),this._rotX=Math.atan2(2*(n*i+a*s),1-2*(s*s+i*i))}this.updateView(),this._main.render()}quatDelay(e,t){var r=[0,0,0,0];$e92e4eb8d35aaf31$exports.conjugate(r,this._quatRot),$e92e4eb8d35aaf31$exports.mul(r,r,e),$e92e4eb8d35aaf31$exports.normalize(r,r);var i=this._quatDelta.bind(this,r);this.delay(i,t,"quat")}_centerDelta(e,t){$eIStk.scaleAndAdd(this._center,this._center,e,t),this.updateView(),this._main.render()}centerDelay(e,t){var r=[0,0,0];$eIStk.sub(r,e,this._center);var i=this._centerDelta.bind(this,r);this.delay(i,t,"center")}_offsetDelta(e,t){$eIStk.scaleAndAdd(this._offset,this._offset,e,t),this.updateView(),this._main.render()}offsetDelay(e,t){var r=[0,0,0];$eIStk.sub(r,e,this._offset);var i=this._offsetDelta.bind(this,r);this.delay(i,t,"offset")}computeFrustumFit(){var e,t=this._near;if(this._projectionType===$eIUYI.default.Projection.ORTHOGRAPHIC)return Math.sqrt(1+(e=Math.min(this._width,this._height)/t*.5)*e)/e;var r=this._proj,i=t*(r[8]-1)/r[0],a=t*(1+r[8])/r[0];return e=Math.min(Math.abs(t*(1+r[9])/r[5]-t*(r[9]-1)/r[5]),Math.abs(a-i))/t*.5,this._fov/45*Math.sqrt(1+e*e)/e}}var $13fbb0ce67844025$export$2e2bcd8739ae039=$13fbb0ce67844025$var$Camera,$eFXNN=parcelRequire("eFXNN"),$eIUYI=parcelRequire("eIUYI");class $e67911253708077e$var$Background{constructor(e,t){this._main=t,this._gl=e,this._vertexBuffer=new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.STATIC_DRAW),this._texCoordBuffer=new $8b7843ca4fd4be3b$export$2e2bcd8739ae039(e,e.ARRAY_BUFFER,e.STATIC_DRAW),this._fill=!0,this._monoTex=null,this._texture=null,this._texWidth=1,this._texHeight=1,this._type=0,this._blur=0,this.init()}init(){this.getTexCoordBuffer().update(new Float32Array([0,0,1,0,0,1,1,1])),this._monoTex=this.createOnePixelTexture(50,50,50,255),document.getElementById("backgroundopen").addEventListener("change",this.loadBackground.bind(this),!1)}loadBackground(e){if(0!==e.target.files.length){var t=e.target.files[0];if(t.type.match("image.*")){var r=this,i=new FileReader;i.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){var e=r._main.getCanvas();r.loadBackgroundTexture(t),r.onResize(e.width,e.height),r._main.render()}},document.getElementById("backgroundopen").value="",i.readAsDataURL(t)}}}getGL(){return this._gl}getBlur(){return this._blur}getVertexBuffer(){return this._vertexBuffer}getTexCoordBuffer(){return this._texCoordBuffer}release(){this.deleteTexture(),this.getVertexBuffer().release(),this.getTexCoordBuffer().release()}getType(){return this._type}setType(e){this._type=e}onResize(e,t){var r=e/t/(this._texWidth/this._texHeight),i=this._fill||0!==this._type?1/r:r,a=i<1?1:1/r,s=i<1?r:1;this.getVertexBuffer().update(new Float32Array([-a,-s,a,-s,-a,s,a,s]))}getTexture(){return this._texture?this._texture:this._monoTex}createOnePixelTexture(e,t,r,i){var a=this._gl,s=a.createTexture();return a.bindTexture(a.TEXTURE_2D,s),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([e,t,r,i])),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.bindTexture(a.TEXTURE_2D,null),s}loadBackgroundTexture(e){var t=this._gl;this.deleteTexture(),this._texWidth=e.width,this._texHeight=e.height,this._texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindTexture(t.TEXTURE_2D,null)}deleteTexture(){this._texture&&(this._texWidth=this._texHeight=1,this._gl.deleteTexture(this._texture),this._texture=null)}render(){$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[(0,$eIUYI.default).Shader.BACKGROUND].getOrCreate(this._gl).draw(this)}}var $e67911253708077e$export$2e2bcd8739ae039=$e67911253708077e$var$Background;class $99650de3606ec52b$var$Scene{constructor(){this._gl=null,this._cameraSpeed=.25,this._pixelRatio=1,this._viewport=document.getElementById("viewport"),this._canvas=document.getElementById("canvas"),this._canvasWidth=0,this._canvasHeight=0,this._canvasOffsetLeft=0,this._canvasOffsetTop=0,this._stateManager=new $c913b95fa99a287b$export$2e2bcd8739ae039(this),this._sculptManager=null,this._camera=new $13fbb0ce67844025$export$2e2bcd8739ae039(this),this._picking=new $eFXNN.default(this),this._pickingSym=new $eFXNN.default(this,!0),this._meshPreview=null,this._torusLength=.5,this._torusWidth=.1,this._torusRadius=2*Math.PI,this._torusRadial=32,this._torusTubular=128;var e=(0,$idLiu.default)();this._showContour=e.outline,this._showGrid=e.grid,this._grid=null,this._background=null,this._meshes=[],this._selectMeshes=[],this._mesh=null,this._rttContour=null,this._rttMerge=null,this._rttOpaque=null,this._rttTransparent=null,this._focusGui=!1,this._gui=new $9fb8ff9b3ece9de6$export$2e2bcd8739ae039(this),this._preventRender=!1,this._drawFullScene=!1,this._autoMatrix=e.scalecenter,this._vertexSRGB=!0}start(){if(this.initWebGL(),this._gl){this._sculptManager=new $320b95c990abaa4b$export$2e2bcd8739ae039(this),this._background=new $e67911253708077e$export$2e2bcd8739ae039(this._gl,this),this._rttContour=new $e5c77fdd1443ab71$export$2e2bcd8739ae039(this._gl,$eIUYI.default.Shader.CONTOUR,null),this._rttMerge=new $e5c77fdd1443ab71$export$2e2bcd8739ae039(this._gl,$eIUYI.default.Shader.MERGE,null),this._rttOpaque=new $e5c77fdd1443ab71$export$2e2bcd8739ae039(this._gl,$eIUYI.default.Shader.FXAA),this._rttTransparent=new $e5c77fdd1443ab71$export$2e2bcd8739ae039(this._gl,null,this._rttOpaque.getDepth(),!0),this._grid=$b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createGrid(this._gl),this.initGrid(),this.loadTextures(),this._gui.initGui(),this.onCanvasResize();var e=(0,$idLiu.default)().modelurl;e?this.addModelURL(e):this.addSphere()}}addModelURL(e){var t=this.getFileType(e);if(t){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="obj"===t?"text":"arraybuffer",r.onload=(function(){200===r.status&&this.loadScene(r.response,t)}).bind(this),r.send(null)}}getBackground(){return this._background}getViewport(){return this._viewport}getCanvas(){return this._canvas}getPixelRatio(){return this._pixelRatio}getCanvasWidth(){return this._canvasWidth}getCanvasHeight(){return this._canvasHeight}getCamera(){return this._camera}getGui(){return this._gui}getMeshes(){return this._meshes}getMesh(){return this._mesh}getSelectedMeshes(){return this._selectMeshes}getPicking(){return this._picking}getPickingSymmetry(){return this._pickingSym}getSculptManager(){return this._sculptManager}getStateManager(){return this._stateManager}setMesh(e){return this.setOrUnsetMesh(e)}setCanvasCursor(e){this._canvas.style.cursor=e}initGrid(){var e=this._grid;e.normalizeSize();var t=e.getMatrix();$3iqbd.translate(t,t,[0,-.45,0]);var r=2.5;$3iqbd.scale(t,t,[r,r,r]),this._grid.setShaderType($eIUYI.default.Shader.FLAT),e.setFlatColor([.04,.04,.04])}setOrUnsetMesh(e,t){if(e){if(t){var r=this.getIndexSelectMesh(e);r>=0?this._selectMeshes.length>1&&(this._selectMeshes.splice(r,1),e=this._selectMeshes[0]):this._selectMeshes.push(e)}else this._selectMeshes.length=0,this._selectMeshes.push(e)}else this._selectMeshes.length=0;return this._mesh=e,this.getGui().updateMesh(),this.render(),e}renderSelectOverRtt(){this._requestRender()&&(this._drawFullScene=!1)}_requestRender(){return!0!==this._preventRender&&(window.requestAnimationFrame(this.applyRender.bind(this)),this._preventRender=!0,!0)}render(){this._drawFullScene=!0,this._requestRender()}applyRender(){this._preventRender=!1,this.updateMatricesAndSort();var e=this._gl;e&&(this._drawFullScene&&this._drawScene(),e.disable(e.DEPTH_TEST),e.bindFramebuffer(e.FRAMEBUFFER,this._rttMerge.getFramebuffer()),this._rttMerge.render(this),e.bindFramebuffer(e.FRAMEBUFFER,null),this._rttOpaque.render(this),e.enable(e.DEPTH_TEST),this._sculptManager.postRender())}_drawScene(){var e=this._gl,t=0,r=this._meshes,i=r.length;e.disable(e.DEPTH_TEST);var a=this._selectMeshes.length>0&&this._showContour&&$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[$eIUYI.default.Shader.CONTOUR].color[3]>0;if(a){e.bindFramebuffer(e.FRAMEBUFFER,this._rttContour.getFramebuffer()),e.clear(e.COLOR_BUFFER_BIT);for(var s=0,n=this._selectMeshes,o=n.length;s<o;++s)n[s].renderFlatColor(this)}for(e.enable(e.DEPTH_TEST),e.bindFramebuffer(e.FRAMEBUFFER,this._rttOpaque.getFramebuffer()),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this._showGrid&&this._grid.render(this),t=0;t<i&&!r[t].isTransparent();++t)r[t].render(this);var l=t;for(this._meshPreview&&this._meshPreview.render(this),this._background.render(),e.bindFramebuffer(e.FRAMEBUFFER,this._rttTransparent.getFramebuffer()),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.depthFunc(e.LESS),t=0;t<i;++t)r[t].getShowWireframe()&&r[t].renderWireframe(this);for(e.depthFunc(e.LEQUAL),e.depthMask(!1),e.enable(e.CULL_FACE),t=l;t<i;++t)e.cullFace(e.FRONT),r[t].render(this),e.cullFace(e.BACK),r[t].render(this);e.disable(e.CULL_FACE),a&&this._rttContour.render(this),e.depthMask(!0),e.disable(e.BLEND)}updateMatricesAndSort(){var e=this._meshes,t=this._camera;e.length>0&&t.optimizeNearFar(this.computeBoundingBoxScene());for(var r=0,i=e.length;r<i;++r)e[r].updateMatrices(t);e.sort($21255fc29769c8d7$export$2e2bcd8739ae039.sortFunction),this._meshPreview&&this._meshPreview.updateMatrices(t),this._grid&&this._grid.updateMatrices(t)}initWebGL(){var e={antialias:!1,stencil:!0},t=document.getElementById("canvas"),r=this._gl=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r){window.alert("Could not initialise WebGL. No WebGL, no SculptGL. Sorry.");return}$ee1388bca99efeb7$export$2e2bcd8739ae039.initWebGLExtensions(r),$ee1388bca99efeb7$export$2e2bcd8739ae039.getWebGLExtension("OES_element_index_uint")||($d57031a28bd8d861$export$2e2bcd8739ae039.ONLY_DRAW_ARRAYS=!0),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.disable(r.CULL_FACE),r.frontFace(r.CCW),r.cullFace(r.BACK),r.disable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.disable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.depthMask(!0),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)}loadTextures(){for(var e=this,t=this._gl,r=$2a4cd6b5cd522bb1$export$2e2bcd8739ae039[$eIUYI.default.Shader.MATCAP],i=function(i,a){var s=new Image;s.src=i,s.onload=function(){r.createTexture(t,s,a),e.render()}},a=0,s=r.matcaps,n=s.length;a<n;++a)i(s[a].path,a);this.initAlphaTextures()}initAlphaTextures(){for(var e=$eFXNN.default.INIT_ALPHAS_PATHS,t=$eFXNN.default.INIT_ALPHAS_NAMES,r=0,i=e.length;r<i;++r){var a=new Image;a.src="resources/alpha/"+e[r],a.onload=this.onLoadAlphaImage.bind(this,a,t[r])}}onCanvasResize(){var e=this._viewport,t=e.clientWidth*this._pixelRatio,r=e.clientHeight*this._pixelRatio;this._canvasOffsetLeft=e.offsetLeft,this._canvasOffsetTop=e.offsetTop,this._canvasWidth=t,this._canvasHeight=r,this._canvas.width=t,this._canvas.height=r,this._gl.viewport(0,0,t,r),this._camera.onResize(t,r),this._background.onResize(t,r),this._rttContour.onResize(t,r),this._rttMerge.onResize(t,r),this._rttOpaque.onResize(t,r),this._rttTransparent.onResize(t,r),this.render()}computeRadiusFromBoundingBox(e){var t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return .5*Math.sqrt(t*t+r*r+i*i)}computeBoundingBoxMeshes(e){for(var t=[1/0,1/0,1/0,-1/0,-1/0,-1/0],r=0,i=e.length;r<i;++r)if(e[r].isVisible()){var a=e[r].computeWorldBound();a[0]<t[0]&&(t[0]=a[0]),a[1]<t[1]&&(t[1]=a[1]),a[2]<t[2]&&(t[2]=a[2]),a[3]>t[3]&&(t[3]=a[3]),a[4]>t[4]&&(t[4]=a[4]),a[5]>t[5]&&(t[5]=a[5])}return t}computeBoundingBoxScene(){var e=this._meshes.slice();return e.push(this._grid),this._sculptManager.addSculptToScene(e),this.computeBoundingBoxMeshes(e)}normalizeAndCenterMeshes(e){var t=this.computeBoundingBoxMeshes(e),r=$jLaD3.default.SCALE/$eIStk.dist([t[0],t[1],t[2]],[t[3],t[4],t[5]]),i=$3iqbd.create();$3iqbd.scale(i,i,[r,r,r]),$3iqbd.translate(i,i,[-(.5*(t[0]+t[3])),-(.5*(t[1]+t[4])),-(.5*(t[2]+t[5]))]);for(var a=0,s=e.length;a<s;++a){var n=e[a].getMatrix();$3iqbd.mul(n,i,n)}}addSphere(){var e=new $f92bc4b1f228ab12$export$2e2bcd8739ae039($b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createCube(this._gl));return e.normalizeSize(),this.subdivideClamp(e),this.addNewMesh(e)}addCube(){var e=new $f92bc4b1f228ab12$export$2e2bcd8739ae039($b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createCube(this._gl));return e.normalizeSize(),$3iqbd.scale(e.getMatrix(),e.getMatrix(),[.7,.7,.7]),this.subdivideClamp(e,!0),this.addNewMesh(e)}addCylinder(){var e=new $f92bc4b1f228ab12$export$2e2bcd8739ae039($b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createCylinder(this._gl));return e.normalizeSize(),$3iqbd.scale(e.getMatrix(),e.getMatrix(),[.7,.7,.7]),this.subdivideClamp(e),this.addNewMesh(e)}addTorus(e){var t=new $f92bc4b1f228ab12$export$2e2bcd8739ae039($b6dcdf3e14e2ed09$export$2e2bcd8739ae039.createTorus(this._gl,this._torusLength,this._torusWidth,this._torusRadius,this._torusRadial,this._torusTubular));if(e){t.setShowWireframe(!0);var r=.3*$jLaD3.default.SCALE;$3iqbd.scale(t.getMatrix(),t.getMatrix(),[r,r,r]),this._meshPreview=t;return}t.normalizeSize(),this.subdivideClamp(t),this.addNewMesh(t)}subdivideClamp(e,t){for($58f48ae8f3043d67$export$2e2bcd8739ae039.LINEAR=!!t;5e4>e.getNbFaces();)e.addLevel();e._meshes.splice(0,Math.min(e._meshes.length-4,4)),e._sel=e._meshes.length-1,$58f48ae8f3043d67$export$2e2bcd8739ae039.LINEAR=!1}addNewMesh(e){return this._meshes.push(e),this._stateManager.pushStateAdd(e),this.setMesh(e),e}loadScene(e,t){"obj"===t?r=$3b9a383962bdb59d$export$2e2bcd8739ae039.importOBJ(e,this._gl):"sgl"===t?r=$3b9a383962bdb59d$export$2e2bcd8739ae039.importSGL(e,this._gl,this):"stl"===t?r=$3b9a383962bdb59d$export$2e2bcd8739ae039.importSTL(e,this._gl):"ply"===t&&(r=$3b9a383962bdb59d$export$2e2bcd8739ae039.importPLY(e,this._gl));var r,i=r.length;if(0!==i){for(var a=this._meshes,s=0;s<i;++s){var n=r[s]=new $f92bc4b1f228ab12$export$2e2bcd8739ae039(r[s]);!this._vertexSRGB&&n.getColors()&&(0,$jLaD3.default).convertArrayVec3toSRGB(n.getColors()),n.init(),n.initRender(),a.push(n)}return this._autoMatrix&&this.normalizeAndCenterMeshes(r),this._stateManager.pushStateAdd(r),this.setMesh(a[a.length-1]),this.resetCameraMeshes(r),r}}clearScene(){this.getStateManager().reset(),this.getMeshes().length=0,this.getCamera().resetView(),this.setMesh(null),this._action=$eIUYI.default.Action.NOTHING}deleteCurrentSelection(){this._mesh&&(this.removeMeshes(this._selectMeshes),this._stateManager.pushStateRemove(this._selectMeshes.slice()),this._selectMeshes.length=0,this.setMesh(null))}removeMeshes(e){for(var t=this._meshes,r=0;r<e.length;++r)t.splice(this.getIndexMesh(e[r]),1)}getIndexMesh(e,t){for(var r=t?this._selectMeshes:this._meshes,i=e.getID(),a=0,s=r.length;a<s;++a){var n=r[a];if(n===e||n.getID()===i)return a}return -1}getIndexSelectMesh(e){return this.getIndexMesh(e,!0)}replaceMesh(e,t){var r=this.getIndexMesh(e);r>=0&&(this._meshes[r]=t),this._mesh===e&&this.setMesh(t)}duplicateSelection(){for(var e=this._selectMeshes.slice(),t=null,r=0;r<e.length;++r){var i=new $b44e1ac6efd62b42$export$2e2bcd8739ae039((t=e[r]).getGL());i.copyData(t),this.addNewMesh(i)}this.setMesh(t)}onLoadAlphaImage(e,t,r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var a=i.getContext("2d");a.drawImage(e,0,0);for(var s=a.getImageData(0,0,e.width,e.height).data,n=s.subarray(0,s.length/4),o=0,l=0,u=n.length;o<u;++o,l+=4)n[o]=Math.round((s[l]+s[l+1]+s[l+2])/3);t=(0,$eFXNN.default).addAlpha(n,e.width,e.height,t)._name;var h={};h[t]=t,this.getGui().addAlphaOptions(h),r&&r._ctrlAlpha&&r._ctrlAlpha.setValue(t)}}var $99650de3606ec52b$export$2e2bcd8739ae039=$99650de3606ec52b$var$Scene,$248feb98ba7647a2$var$MOUSE_LEFT=1,$248feb98ba7647a2$var$MOUSE_MIDDLE=2,$248feb98ba7647a2$var$MOUSE_RIGHT=3;class $248feb98ba7647a2$var$SculptGL extends $99650de3606ec52b$export$2e2bcd8739ae039{constructor(){super(),this._mouseX=0,this._mouseY=0,this._lastMouseX=0,this._lastMouseY=0,this._lastScale=0,this._action=$eIUYI.default.Action.NOTHING,this._lastNbPointers=0,this._isWheelingIn=!1,this._maskX=0,this._maskY=0,this._hammer=new $cebfe6726e901212$exports.Manager(this._canvas),this._eventProxy={},this.initHammer(),this.addEvents()}addEvents(){var e=this._canvas,t=this.onMouseWheel.bind(this),r=this.onPointer.bind(this);e.addEventListener("pointerdown",r,!1),e.addEventListener("pointermove",r,!1),e.addEventListener("mousedown",this.onMouseDown.bind(this),!1),e.addEventListener("mouseup",this.onMouseUp.bind(this),!1),e.addEventListener("mouseout",this.onMouseOut.bind(this),!1),e.addEventListener("mouseover",this.onMouseOver.bind(this),!1),e.addEventListener("mousemove",(0,$jLaD3.default).throttle(this.onMouseMove.bind(this),16.66),!1),e.addEventListener("mousewheel",t,!1),e.addEventListener("DOMMouseScroll",t,!1),window.addEventListener("keydown",this.onKeyDown.bind(this),!1),window.addEventListener("keyup",this.onKeyUp.bind(this),!1);var i=this.loadFiles.bind(this),a=this.stopAndPrevent.bind(this);e.addEventListener("webglcontextlost",this.onContextLost.bind(this),!1),e.addEventListener("webglcontextrestored",this.onContextRestored.bind(this),!1),window.addEventListener("dragenter",a,!1),window.addEventListener("dragover",a,!1),window.addEventListener("drop",i,!1),document.getElementById("fileopen").addEventListener("change",i,!1)}onPointer(e){$im4cd.default.pressure=e.pressure}initHammer(){this._hammer.options.enable=!0,this._initHammerRecognizers(),this._initHammerEvents()}_initHammerRecognizers(){var e=this._hammer;e.add(new $cebfe6726e901212$exports.Tap({event:"doubletap",pointers:1,taps:2,time:250,interval:450,threshold:5,posThreshold:50})),e.add(new $cebfe6726e901212$exports.Tap({event:"doubletap2fingers",pointers:2,taps:2,time:250,interval:450,threshold:5,posThreshold:50})),e.add(new $cebfe6726e901212$exports.Pan({event:"pan",pointers:0,threshold:0})),e.add(new $cebfe6726e901212$exports.Pinch({event:"pinch",pointers:2,threshold:.1})),e.get("pinch").recognizeWith(e.get("pan"))}_initHammerEvents(){var e=this._hammer;e.on("panstart",this.onPanStart.bind(this)),e.on("panmove",this.onPanMove.bind(this)),e.on("panend pancancel",this.onPanEnd.bind(this)),e.on("doubletap",this.onDoubleTap.bind(this)),e.on("doubletap2fingers",this.onDoubleTap2Fingers.bind(this)),e.on("pinchstart",this.onPinchStart.bind(this)),e.on("pinchin pinchout",this.onPinchInOut.bind(this))}stopAndPrevent(e){e.stopPropagation(),e.preventDefault()}onContextLost(){window.alert("Oops... WebGL context lost.")}onContextRestored(){window.alert("Wow... Context is restored.")}onKeyDown(e){this._gui.callFunc("onKeyDown",e)}onKeyUp(e){this._gui.callFunc("onKeyUp",e)}onPanStart(e){if("mouse"!==e.pointerType){this._focusGui=!1;var t=this._eventProxy;t.pageX=e.center.x,t.pageY=e.center.y,this.onPanUpdateNbPointers(Math.min(3,e.pointers.length))}}onPanMove(e){if("mouse"!==e.pointerType){var t=this._eventProxy;t.pageX=e.center.x,t.pageY=e.center.y;var r=Math.min(3,e.pointers.length);r!==this._lastNbPointers&&(this.onDeviceUp(),this.onPanUpdateNbPointers(r)),this.onDeviceMove(t),this._isIOS()&&(window.clearTimeout(this._timerResetPointer),this._timerResetPointer=window.setTimeout((function(){this._lastNbPointers=0}).bind(this),60))}}_isIOS(){return void 0!==this._isIOS||(this._isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)),this._isIOS}onPanUpdateNbPointers(e){var t=this._eventProxy;t.which=1===e&&this._lastNbPointers>=1?3:e,this._lastNbPointers=e,this.onDeviceDown(t)}onPanEnd(e){"mouse"!==e.pointerType&&(this.onDeviceUp(),window.setTimeout((function(){e.pointers.length||(this._lastNbPointers=0)}).bind(this),60))}onDoubleTap(e){if(!this._focusGui){var t=this._eventProxy;t.pageX=e.center.x,t.pageY=e.center.y,this.setMousePosition(t);var r=this._picking,i=r.intersectionMouseMeshes(),a=this._camera,s=[0,0,0];if(!i)return this.resetCameraMeshes();$eIStk.transformMat4(s,r.getIntersectionPoint(),r.getMesh().getMatrix());var n=a._trans[2];a.isOrthographic()||(n=Math.min(n,$eIStk.dist(s,a.computePosition()))),a.setAndFocusOnPivot(s,n),this.render()}}onDoubleTap2Fingers(){this._focusGui||this.resetCameraMeshes()}onPinchStart(e){this._focusGui=!1,this._lastScale=e.scale}onPinchInOut(e){var t=(e.scale-this._lastScale)*25;this._lastScale=e.scale,this.onDeviceWheel(t)}resetCameraMeshes(e){if(e||(e=this._meshes),e.length>0){var t=[0,0,0],r=this.computeBoundingBoxMeshes(e),i=.8*this.computeRadiusFromBoundingBox(r);i*=this._camera.computeFrustumFit(),$eIStk.set(t,(r[0]+r[3])*.5,(r[1]+r[4])*.5,(r[2]+r[5])*.5),this._camera.setAndFocusOnPivot(t,i)}else this._camera.resetView();this.render()}getFileType(e){var t=e.toLowerCase();return t.endsWith(".obj")?"obj":t.endsWith(".sgl")?"sgl":t.endsWith(".stl")?"stl":t.endsWith(".ply")?"ply":void 0}loadFiles(e){e.stopPropagation(),e.preventDefault();for(var t=e.dataTransfer?e.dataTransfer.files:e.target.files,r=0,i=t.length;r<i;++r){var a=t[r],s=this.getFileType(a.name);this.readFile(a,s)}}readFile(e,t){var r=t||this.getFileType(e.name);if(r){var i=new FileReader,a=this;i.onload=function(e){a.loadScene(e.target.result,r),document.getElementById("fileopen").value=""},"obj"===r?i.readAsText(e):i.readAsArrayBuffer(e)}}onMouseDown(e){e.stopPropagation(),e.preventDefault(),this._gui.callFunc("onMouseDown",e),this.onDeviceDown(e)}onMouseMove(e){e.stopPropagation(),e.preventDefault(),this._gui.callFunc("onMouseMove",e),this.onDeviceMove(e)}onMouseOver(e){this._focusGui=!1,this._gui.callFunc("onMouseOver",e)}onMouseOut(e){this._focusGui=!0,this._gui.callFunc("onMouseOut",e),this.onMouseUp(e)}onMouseUp(e){e.preventDefault(),this._gui.callFunc("onMouseUp",e),this.onDeviceUp()}onMouseWheel(e){e.stopPropagation(),e.preventDefault(),this._gui.callFunc("onMouseWheel",e);var t=void 0===e.wheelDelta?-e.detail:e.wheelDelta;this.onDeviceWheel(t>0?1:-1)}onDeviceUp(){this.setCanvasCursor("default"),$f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.NONE,this._sculptManager.end(),this._action===$eIUYI.default.Action.MASK_EDIT&&this._mesh&&(this._lastMouseX===this._maskX&&this._lastMouseY===this._maskY?this.getSculptManager().getTool($eIUYI.default.Tools.MASKING).invert():this.getSculptManager().getTool($eIUYI.default.Tools.MASKING).clear()),this._action=$eIUYI.default.Action.NOTHING,this.render(),this._stateManager.cleanNoop()}onDeviceWheel(e){e>0&&!this._isWheelingIn&&(this._isWheelingIn=!0,this._camera.start(this._mouseX,this._mouseY)),this._camera.zoom(.02*e),$f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.CAMERA,this.render(),this._timerEndWheel&&window.clearTimeout(this._timerEndWheel),this._timerEndWheel=window.setTimeout(this._endWheel.bind(this),300)}_endWheel(){$f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.NONE,this._isWheelingIn=!1,this.render()}setMousePosition(e){this._mouseX=this._pixelRatio*(e.pageX-this._canvasOffsetLeft),this._mouseY=this._pixelRatio*(e.pageY-this._canvasOffsetTop)}onDeviceDown(e){if(!this._focusGui){this.setMousePosition(e);var t=this._mouseX,r=this._mouseY,i=e.which,a=!1;i===$248feb98ba7647a2$var$MOUSE_LEFT&&(a=this._sculptManager.start(e.shiftKey)),i===$248feb98ba7647a2$var$MOUSE_LEFT&&a&&this.setCanvasCursor("none"),i===$248feb98ba7647a2$var$MOUSE_RIGHT&&e.ctrlKey?this._action=$eIUYI.default.Action.CAMERA_ZOOM:i===$248feb98ba7647a2$var$MOUSE_MIDDLE?this._action=$eIUYI.default.Action.CAMERA_PAN:!a&&e.ctrlKey?(this._maskX=t,this._maskY=r,this._action=$eIUYI.default.Action.MASK_EDIT):(!a||i===$248feb98ba7647a2$var$MOUSE_RIGHT)&&e.altKey?this._action=$eIUYI.default.Action.CAMERA_PAN_ZOOM_ALT:i!==$248feb98ba7647a2$var$MOUSE_RIGHT&&(i!==$248feb98ba7647a2$var$MOUSE_LEFT||a)?this._action=$eIUYI.default.Action.SCULPT_EDIT:this._action=$eIUYI.default.Action.CAMERA_ROTATE,(this._action===$eIUYI.default.Action.CAMERA_ROTATE||this._action===$eIUYI.default.Action.CAMERA_ZOOM)&&this._camera.start(t,r),this._lastMouseX=t,this._lastMouseY=r}}getSpeedFactor(){return this._cameraSpeed/(this._canvasHeight*this.getPixelRatio())}onDeviceMove(e){if(!this._focusGui){this.setMousePosition(e);var t=this._mouseX,r=this._mouseY,i=this._action,a=this.getSpeedFactor();i!==$eIUYI.default.Action.CAMERA_ZOOM&&(i!==$eIUYI.default.Action.CAMERA_PAN_ZOOM_ALT||e.altKey)?i===$eIUYI.default.Action.CAMERA_PAN_ZOOM_ALT||i===$eIUYI.default.Action.CAMERA_PAN?($f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.CAMERA,this._camera.translate((t-this._lastMouseX)*a,(r-this._lastMouseY)*a),this.render()):i===$eIUYI.default.Action.CAMERA_ROTATE?($f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.CAMERA,e.shiftKey||this._camera.rotate(t,r),this.render()):($f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.PICKING,this._sculptManager.preUpdate(),i===$eIUYI.default.Action.SCULPT_EDIT&&($f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.SCULPT,this._sculptManager.update(this),this.getMesh().isDynamic&&this._gui.updateMeshInfo())):($f92bc4b1f228ab12$export$2e2bcd8739ae039.RENDER_HINT=$f92bc4b1f228ab12$export$2e2bcd8739ae039.CAMERA,this._camera.zoom((t-this._lastMouseX+r-this._lastMouseY)*a),this.render()),this._lastMouseX=t,this._lastMouseY=r,this.renderSelectOverRtt()}}}var $248feb98ba7647a2$export$2e2bcd8739ae039=$248feb98ba7647a2$var$SculptGL;window.SculptGL=$248feb98ba7647a2$export$2e2bcd8739ae039;
//# sourceMappingURL=index.57a54c7b.js.map
